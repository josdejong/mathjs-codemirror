var S2=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var eG=S2((rn,nn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();class rt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),zr.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),zr.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Aa(this),a=new Aa(e);for(let s=t,o=t;;){if(i.next(s),a.next(s),s=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(e=1){return new Aa(this,e)}iterRange(e,t=this.length){return new y0(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new b0(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?rt.empty:e.length<=32?new bt(e):zr.from(bt.split(e,[]))}}class bt extends rt{constructor(e,t=N2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let a=0;;a++){let s=this.text[a],o=i+s.length;if((t?n:o)>=e)return new C2(i,o,n,s);i=o+1,n++}}decompose(e,t,n,i){let a=e<=0&&t>=this.length?this:new bt($f(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let s=n.pop(),o=Zs(a.text,s.text.slice(),0,a.length);if(o.length<=32)n.push(new bt(o,s.length+a.length));else{let u=o.length>>1;n.push(new bt(o.slice(0,u)),new bt(o.slice(u)))}}else n.push(a)}replace(e,t,n){if(!(n instanceof bt))return super.replace(e,t,n);let i=Zs(this.text,Zs(n.text,$f(this.text,0,e)),t),a=this.length+n.length-(t-e);return i.length<=32?new bt(i,a):zr.from(bt.split(i,[]),a)}sliceString(e,t=this.length,n=`
`){let i="";for(let a=0,s=0;a<=t&&s<this.text.length;s++){let o=this.text[s],u=a+o.length;a>e&&s&&(i+=n),e<u&&t>a&&(i+=o.slice(Math.max(0,e-a),t-a)),a=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let a of e)n.push(a),i+=a.length+1,n.length==32&&(t.push(new bt(n,i)),n=[],i=-1);return i>-1&&t.push(new bt(n,i)),t}}class zr extends rt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let a=0;;a++){let s=this.children[a],o=i+s.length,u=n+s.lines-1;if((t?u:o)>=e)return s.lineInner(e,t,n,i);i=o+1,n=u+1}}decompose(e,t,n,i){for(let a=0,s=0;s<=t&&a<this.children.length;a++){let o=this.children[a],u=s+o.length;if(e<=u&&t>=s){let l=i&((s<=e?1:0)|(u>=t?2:0));s>=e&&u<=t&&!l?n.push(o):o.decompose(e-s,t-s,n,l)}s=u+1}}replace(e,t,n){if(n.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let s=this.children[i],o=a+s.length;if(e>=a&&t<=o){let u=s.replace(e-a,t-a,n),l=this.lines-s.lines+u.lines;if(u.lines<l>>5-1&&u.lines>l>>5+1){let c=this.children.slice();return c[i]=u,new zr(c,this.length-(t-e)+n.length)}return super.replace(a,o,u)}a=o+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let i="";for(let a=0,s=0;a<this.children.length&&s<=t;a++){let o=this.children[a],u=s+o.length;s>e&&a&&(i+=n),e<u&&t>s&&(i+=o.sliceString(e-s,t-s,n)),s=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof zr))return 0;let n=0,[i,a,s,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,a+=t){if(i==s||a==o)return n;let u=this.children[i],l=e.children[a];if(u!=l)return n+u.scanIdentical(l,t);n+=u.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let m of e)m.flatten(d);return new bt(d,t)}let i=Math.max(32,n>>5),a=i<<1,s=i>>1,o=[],u=0,l=-1,c=[];function f(d){let m;if(d.lines>a&&d instanceof zr)for(let p of d.children)f(p);else d.lines>s&&(u>s||!u)?(h(),o.push(d)):d instanceof bt&&u&&(m=c[c.length-1])instanceof bt&&d.lines+m.lines<=32?(u+=d.lines,l+=d.length+1,c[c.length-1]=new bt(m.text.concat(d.text),m.length+1+d.length)):(u+d.lines>i&&h(),u+=d.lines,l+=d.length+1,c.push(d))}function h(){u!=0&&(o.push(c.length==1?c[0]:zr.from(c,l)),l=-1,u=c.length=0)}for(let d of e)f(d);return h(),o.length==1?o[0]:new zr(o,t)}}rt.empty=new bt([""],0);function N2(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Zs(r,e,t=0,n=1e9){for(let i=0,a=0,s=!0;a<r.length&&i<=n;a++){let o=r[a],u=i+o.length;u>=t&&(u>n&&(o=o.slice(0,n-i)),i<t&&(o=o.slice(t-i)),s?(e[e.length-1]+=o,s=!1):e.push(o)),i=u+1}return e}function $f(r,e,t){return Zs(r,[""],e,t)}class Aa{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof bt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],a=this.offsets[n],s=a>>1,o=i instanceof bt?i.text.length:i.children.length;if(s==(t>0?o:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof bt){let u=i.text[s+(t<0?-1:0)];if(this.offsets[n]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[s+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof bt?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class y0{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Aa(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class b0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(rt.prototype[Symbol.iterator]=function(){return this.iter()},Aa.prototype[Symbol.iterator]=y0.prototype[Symbol.iterator]=b0.prototype[Symbol.iterator]=function(){return this});class C2{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}let Si="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Si.length;r++)Si[r]+=Si[r-1];function E2(r){for(let e=1;e<Si.length;e+=2)if(Si[e]>r)return Si[e-1]<=r;return!1}function _f(r){return r>=127462&&r<=127487}const Lf=8205;function zt(r,e,t=!0,n=!0){return(t?x0:M2)(r,e,n)}function x0(r,e,t){if(e==r.length)return e;e&&w0(r.charCodeAt(e))&&A0(r.charCodeAt(e-1))&&e--;let n=Ft(r,e);for(e+=gr(n);e<r.length;){let i=Ft(r,e);if(n==Lf||i==Lf||t&&E2(i))e+=gr(i),n=i;else if(_f(i)){let a=0,s=e-2;for(;s>=0&&_f(Ft(r,s));)a++,s-=2;if(a%2==0)break;e+=2}else break}return e}function M2(r,e,t){for(;e>0;){let n=x0(r,e-2,t);if(n<e)return n;e--}return 0}function w0(r){return r>=56320&&r<57344}function A0(r){return r>=55296&&r<56320}function Ft(r,e){let t=r.charCodeAt(e);if(!A0(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return w0(n)?(t-55296<<10)+(n-56320)+65536:t}function Mc(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function gr(r){return r<65536?1:2}const dl=/\r\n?|\n/;var Wt=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(Wt||(Wt={}));class Vr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let a=this.sections[t++],s=this.sections[t++];s<0?(e(n,i,a),i+=a):i+=s,n+=a}}iterChangedRanges(e,t=!1){ml(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new Vr(e)}composeDesc(e){return this.empty?e:e.empty?this:D0(this,e)}mapDesc(e,t=!1){return e.empty?this:pl(this,e,t)}mapPos(e,t=-1,n=Wt.Simple){let i=0,a=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],u=this.sections[s++],l=i+o;if(u<0){if(l>e)return a+(e-i);a+=o}else{if(n!=Wt.Simple&&l>=e&&(n==Wt.TrackDel&&i<e&&l>e||n==Wt.TrackBefore&&i<e||n==Wt.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==i||t<0?a:a+u;a+=u}i=l}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let a=this.sections[n++],s=this.sections[n++],o=i+a;if(s>=0&&i<=t&&o>=e)return i<e&&o>t?"cover":!0;i=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Vr(e)}static create(e){return new Vr(e)}}class St extends Vr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ml(this,(t,n,i,a,s)=>e=e.replace(i,i+(n-t),s),!1),e}mapDesc(e,t=!1){return pl(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,a=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o>=0){t[i]=o,t[i+1]=s;let u=i>>1;for(;n.length<u;)n.push(rt.empty);n.push(s?e.slice(a,a+s):rt.empty)}a+=s}return new St(t,n)}compose(e){return this.empty?e:e.empty?this:D0(this,e,!0)}map(e,t=!1){return e.empty?this:pl(this,e,t,!0)}iterChanges(e,t=!1){ml(this,e,t)}get desc(){return Vr.create(this.sections)}filter(e){let t=[],n=[],i=[],a=new Ma(this);e:for(let s=0,o=0;;){let u=s==e.length?1e9:e[s++];for(;o<u||o==u&&a.len==0;){if(a.done)break e;let c=Math.min(a.len,u-o);_t(i,c,-1);let f=a.ins==-1?-1:a.off==0?a.ins:0;_t(t,c,f),f>0&&wn(n,t,a.text),a.forward(c),o+=c}let l=e[s++];for(;o<l;){if(a.done)break e;let c=Math.min(a.len,l-o);_t(t,c,-1),_t(i,c,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(c),o+=c}}return{changes:new St(t,n),filtered:Vr.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],a=[],s=0,o=null;function u(c=!1){if(!c&&!i.length)return;s<t&&_t(i,t-s,-1);let f=new St(i,a);o=o?o.compose(f.map(o)):f,i=[],a=[],s=0}function l(c){if(Array.isArray(c))for(let f of c)l(f);else if(c instanceof St){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);u(),o=o?o.compose(c.map(o)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let m=d?typeof d=="string"?rt.of(d.split(n||dl)):d:rt.empty,p=m.length;if(f==h&&p==0)return;f<s&&u(),f>s&&_t(i,f-s,-1),_t(i,h-f,p),wn(a,i,m),s=h}}return l(e),u(!o),o}static empty(e){return new St(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((s,o)=>o&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;n.length<i;)n.push(rt.empty);n[i]=rt.of(a.slice(1)),t.push(a[0],n[i].length)}}}return new St(t,n)}static createSet(e,t){return new St(e,t)}}function _t(r,e,t,n=!1){if(e==0&&t<=0)return;let i=r.length-2;i>=0&&t<=0&&t==r[i+1]?r[i]+=e:e==0&&r[i]==0?r[i+1]+=t:n?(r[i]+=e,r[i+1]+=t):r.push(e,t)}function wn(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(rt.empty);r.push(t)}}function ml(r,e,t){let n=r.inserted;for(let i=0,a=0,s=0;s<r.sections.length;){let o=r.sections[s++],u=r.sections[s++];if(u<0)i+=o,a+=o;else{let l=i,c=a,f=rt.empty;for(;l+=o,c+=u,u&&n&&(f=f.append(n[s-2>>1])),!(t||s==r.sections.length||r.sections[s+1]<0);)o=r.sections[s++],u=r.sections[s++];e(i,l,a,c,f),i=l,a=c}}}function pl(r,e,t,n=!1){let i=[],a=n?[]:null,s=new Ma(r),o=new Ma(e);for(let u=-1;;)if(s.ins==-1&&o.ins==-1){let l=Math.min(s.len,o.len);_t(i,l,-1),s.forward(l),o.forward(l)}else if(o.ins>=0&&(s.ins<0||u==s.i||s.off==0&&(o.len<s.len||o.len==s.len&&!t))){let l=o.len;for(_t(i,o.ins,-1);l;){let c=Math.min(s.len,l);s.ins>=0&&u<s.i&&s.len<=c&&(_t(i,0,s.ins),a&&wn(a,i,s.text),u=s.i),s.forward(c),l-=c}o.next()}else if(s.ins>=0){let l=0,c=s.len;for(;c;)if(o.ins==-1){let f=Math.min(c,o.len);l+=f,c-=f,o.forward(f)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;_t(i,l,u<s.i?s.ins:0),a&&u<s.i&&wn(a,i,s.text),u=s.i,s.forward(s.len-c)}else{if(s.done&&o.done)return a?St.createSet(i,a):Vr.create(i);throw new Error("Mismatched change set lengths")}}function D0(r,e,t=!1){let n=[],i=t?[]:null,a=new Ma(r),s=new Ma(e);for(let o=!1;;){if(a.done&&s.done)return i?St.createSet(n,i):Vr.create(n);if(a.ins==0)_t(n,a.len,0,o),a.next();else if(s.len==0&&!s.done)_t(n,0,s.ins,o),i&&wn(i,n,s.text),s.next();else{if(a.done||s.done)throw new Error("Mismatched change set lengths");{let u=Math.min(a.len2,s.len),l=n.length;if(a.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;_t(n,u,c,o),i&&c&&wn(i,n,s.text)}else s.ins==-1?(_t(n,a.off?0:a.len,u,o),i&&wn(i,n,a.textBit(u))):(_t(n,a.off?0:a.len,s.off?0:s.ins,o),i&&!s.off&&wn(i,n,s.text));o=(a.ins>u||s.ins>=0&&s.len>u)&&(o||n.length>l),a.forward2(u),s.forward(u)}}}}class Ma{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?rt.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?rt.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Gn{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new Gn(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return he.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return he.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return he.range(e.anchor,e.head)}static create(e,t,n){return new Gn(e,t,n)}}class he{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:he.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new he([this.main],0)}addRange(e,t=!0){return he.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,he.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new he(e.ranges.map(t=>Gn.fromJSON(t)),e.main)}static single(e,t=e){return new he([he.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=n:a.from<n)return he.normalized(e.slice(),t);n=a.to}return new he(e,t)}static cursor(e,t=0,n,i){return Gn.create(e,e,(t==0?0:t<0?4:8)|(n==null?3:Math.min(2,n))|(i??33554431)<<5)}static range(e,t,n,i){let a=(n??33554431)<<5|(i==null?3:Math.min(2,i));return t<e?Gn.create(t,e,24|a):Gn.create(e,t,(t>e?4:0)|a)}static normalized(e,t=0){let n=e[t];e.sort((i,a)=>i.from-a.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let a=e[i],s=e[i-1];if(a.empty?a.from<=s.to:a.from<s.to){let o=s.from,u=Math.max(a.to,s.to);i<=t&&t--,e.splice(--i,2,a.anchor>a.head?he.range(u,o):he.range(o,u))}}return new he(e,t)}}function S0(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Tc=0;class Ce{constructor(e,t,n,i,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=Tc++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}static define(e={}){return new Ce(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Oc),!!e.static,e.enables)}of(e){return new Js([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Js(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Js(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Oc(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}class Js{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=Tc++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,a=this.id,s=e[a]>>1,o=this.type==2,u=!1,l=!1,c=[];for(let f of this.dependencies)f=="doc"?u=!0:f=="selection"?l=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[s]=n(f),1},update(f,h){if(u&&h.docChanged||l&&(h.docChanged||h.selection)||gl(f,c)){let d=n(f);if(o?!zf(d,f.values[s],i):!i(d,f.values[s]))return f.values[s]=d,1}return 0},reconfigure:(f,h)=>{let d,m=h.config.address[a];if(m!=null){let p=lo(h,m);if(this.dependencies.every(v=>v instanceof Ce?h.facet(v)===f.facet(v):v instanceof wt?h.field(v,!1)==f.field(v,!1):!0)||(o?zf(d=n(f),p,i):i(d=n(f),p)))return f.values[s]=p,0}else d=n(f);return f.values[s]=d,1}}}}function zf(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function gl(r,e){let t=!1;for(let n of e)Da(r,n)&1&&(t=!0);return t}function T2(r,e,t){let n=t.map(u=>r[u.id]),i=t.map(u=>u.type),a=n.filter(u=>!(u&1)),s=r[e.id]>>1;function o(u){let l=[];for(let c=0;c<n.length;c++){let f=lo(u,n[c]);if(i[c]==2)for(let h of f)l.push(h);else l.push(f)}return e.combine(l)}return{create(u){for(let l of n)Da(u,l);return u.values[s]=o(u),1},update(u,l){if(!gl(u,a))return 0;let c=o(u);return e.compare(c,u.values[s])?0:(u.values[s]=c,1)},reconfigure(u,l){let c=gl(u,n),f=l.config.facets[e.id],h=l.facet(e);if(f&&!c&&Oc(t,f))return u.values[s]=h,0;let d=o(u);return e.compare(d,h)?(u.values[s]=h,0):(u.values[s]=d,1)}}}const qf=Ce.define({static:!0});class wt{constructor(e,t,n,i,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let t=new wt(Tc++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(qf).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let a=n.values[t],s=this.updateF(a,i);return this.compareF(a,s)?0:(n.values[t]=s,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,qf.of({field:this,create:e})]}get extension(){return this}}const Vn={lowest:4,low:3,default:2,high:1,highest:0};function oa(r){return e=>new N0(e,r)}const Yi={highest:oa(Vn.highest),high:oa(Vn.high),default:oa(Vn.default),low:oa(Vn.low),lowest:oa(Vn.lowest)};class N0{constructor(e,t){this.inner=e,this.prec=t}}class Qo{of(e){return new vl(this,e)}reconfigure(e){return Qo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class vl{constructor(e,t){this.compartment=e,this.inner=t}}class uo{constructor(e,t,n,i,a,s){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=a,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],a=Object.create(null),s=new Map;for(let h of O2(e,t,s))h instanceof wt?i.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let o=Object.create(null),u=[],l=[];for(let h of i)o[h.id]=l.length<<1,l.push(d=>h.slot(d));let c=n==null?void 0:n.config.facets;for(let h in a){let d=a[h],m=d[0].facet,p=c&&c[h]||[];if(d.every(v=>v.type==0))if(o[m.id]=u.length<<1|1,Oc(p,d))u.push(n.facet(m));else{let v=m.combine(d.map(g=>g.value));u.push(n&&m.compare(v,n.facet(m))?n.facet(m):v)}else{for(let v of d)v.type==0?(o[v.id]=u.length<<1|1,u.push(v.value)):(o[v.id]=l.length<<1,l.push(g=>v.dynamicSlot(g)));o[m.id]=l.length<<1,l.push(v=>T2(v,m,d))}}let f=l.map(h=>h(o));return new uo(e,s,f,o,u,a)}}function O2(r,e,t){let n=[[],[],[],[],[]],i=new Map;function a(s,o){let u=i.get(s);if(u!=null){if(u<=o)return;let l=n[u].indexOf(s);l>-1&&n[u].splice(l,1),s instanceof vl&&t.delete(s.compartment)}if(i.set(s,o),Array.isArray(s))for(let l of s)a(l,o);else if(s instanceof vl){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let l=e.get(s.compartment)||s.inner;t.set(s.compartment,l),a(l,o)}else if(s instanceof N0)a(s.inner,s.prec);else if(s instanceof wt)n[o].push(s),s.provides&&a(s.provides,o);else if(s instanceof Js)n[o].push(s),s.facet.extensions&&a(s.facet.extensions,Vn.default);else{let l=s.extension;if(!l)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(l,o)}}return a(r,Vn.default),n.reduce((s,o)=>s.concat(o))}function Da(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let i=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|i}function lo(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const C0=Ce.define(),E0=Ce.define({combine:r=>r.some(e=>e),static:!0}),M0=Ce.define({combine:r=>r.length?r[0]:void 0,static:!0}),T0=Ce.define(),O0=Ce.define(),B0=Ce.define(),F0=Ce.define({combine:r=>r.length?r[0]:!1});class hn{constructor(e,t){this.type=e,this.value=t}static define(){return new B2}}class B2{of(e){return new hn(this,e)}}class F2{constructor(e){this.map=e}of(e){return new He(this,e)}}class He{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new He(this.type,t)}is(e){return this.type==e}static define(e={}){return new F2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let a=i.map(t);a&&n.push(a)}return n}}He.reconfigure=He.define();He.appendConfig=He.define();class Nt{constructor(e,t,n,i,a,s){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=a,this.scrollIntoView=s,this._doc=null,this._state=null,n&&S0(n,t.newLength),a.some(o=>o.type==Nt.time)||(this.annotations=a.concat(Nt.time.of(Date.now())))}static create(e,t,n,i,a,s){return new Nt(e,t,n,i,a,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Nt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Nt.time=hn.define();Nt.userEvent=hn.define();Nt.addToHistory=hn.define();Nt.remote=hn.define();function k2(r,e){let t=[];for(let n=0,i=0;;){let a,s;if(n<r.length&&(i==e.length||e[i]>=r[n]))a=r[n++],s=r[n++];else if(i<e.length)a=e[i++],s=e[i++];else return t;!t.length||t[t.length-1]<a?t.push(a,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function k0(r,e,t){var n;let i,a,s;return t?(i=e.changes,a=St.empty(e.changes.length),s=r.changes.compose(e.changes)):(i=e.changes.map(r.changes),a=r.changes.mapDesc(e.changes,!0),s=r.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(a):(n=r.selection)===null||n===void 0?void 0:n.map(i),effects:He.mapEffects(r.effects,i).concat(He.mapEffects(e.effects,a)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function yl(r,e,t){let n=e.selection,i=Ni(e.annotations);return e.userEvent&&(i=i.concat(Nt.userEvent.of(e.userEvent))),{changes:e.changes instanceof St?e.changes:St.of(e.changes||[],t,r.facet(M0)),selection:n&&(n instanceof he?n:he.single(n.anchor,n.head)),effects:Ni(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function R0(r,e,t){let n=yl(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let s=!!e[a].sequential;n=k0(n,yl(r,e[a],s?n.changes.newLength:r.doc.length),s)}let i=Nt.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return I2(t?R2(i):i)}function R2(r){let e=r.startState,t=!0;for(let i of e.facet(T0)){let a=i(r);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:k2(t,a))}if(t!==!0){let i,a;if(t===!1)a=r.changes.invertedDesc,i=St.empty(e.doc.length);else{let s=r.changes.filter(t);i=s.changes,a=s.filtered.mapDesc(s.changes).invertedDesc}r=Nt.create(e,i,r.selection&&r.selection.map(a),He.mapEffects(r.effects,a),r.annotations,r.scrollIntoView)}let n=e.facet(O0);for(let i=n.length-1;i>=0;i--){let a=n[i](r);a instanceof Nt?r=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Nt?r=a[0]:r=R0(e,Ni(a),!1)}return r}function I2(r){let e=r.startState,t=e.facet(B0),n=r;for(let i=t.length-1;i>=0;i--){let a=t[i](r);a&&Object.keys(a).length&&(n=k0(n,yl(e,a,r.changes.newLength),!0))}return n==r?r:Nt.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const P2=[];function Ni(r){return r==null?P2:Array.isArray(r)?r:[r]}var gt=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(gt||(gt={}));const $2=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let bl;try{bl=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _2(r){if(bl)return bl.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||$2.test(t)))return!0}return!1}function L2(r){return e=>{if(!/\S/.test(e))return gt.Space;if(_2(e))return gt.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return gt.Word;return gt.Other}}class et{constructor(e,t,n,i,a,s){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,s&&(s._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Da(this,o<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Da(this,n),lo(this,n)}update(...e){return R0(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let s of e.effects)s.is(Qo.reconfigure)?(t&&(i=new Map,t.compartments.forEach((o,u)=>i.set(u,o)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(He.reconfigure)?(t=null,n=s.value):s.is(He.appendConfig)&&(t=null,n=Ni(n).concat(s.value));let a;t?a=e.startState.values.slice():(t=uo.resolve(n,i,this),a=new et(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(o,u)=>u.reconfigure(o,this),null).values),new et(t,e.newDoc,e.newSelection,a,(s,o)=>o.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:he.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),a=[n.range],s=Ni(n.effects);for(let o=1;o<t.ranges.length;o++){let u=e(t.ranges[o]),l=this.changes(u.changes),c=l.map(i);for(let h=0;h<o;h++)a[h]=a[h].map(c);let f=i.mapDesc(l,!0);a.push(u.range.map(f)),i=i.compose(c),s=He.mapEffects(s,c).concat(He.mapEffects(Ni(u.effects),f))}return{changes:i,selection:he.create(a,t.mainIndex),effects:s}}changes(e=[]){return e instanceof St?e:St.of(e,this.doc.length,this.facet(et.lineSeparator))}toText(e){return rt.of(e.split(this.facet(et.lineSeparator)||dl))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Da(this,t),lo(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof wt&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let s=n[a],o=e[a];i.push(s.init(u=>s.spec.fromJSON(o,u)))}}return et.create({doc:e.doc,selection:he.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=uo.resolve(e.extensions||[],new Map),n=e.doc instanceof rt?e.doc:rt.of((e.doc||"").split(t.staticFacet(et.lineSeparator)||dl)),i=e.selection?e.selection instanceof he?e.selection:he.single(e.selection.anchor,e.selection.head):he.single(0);return S0(i,n.length),t.staticFacet(E0)||(i=i.asSingle()),new et(t,n,i,t.dynamicSlots.map(()=>null),(a,s)=>s.create(a),null)}get tabSize(){return this.facet(et.tabSize)}get lineBreak(){return this.facet(et.lineSeparator)||`
`}get readOnly(){return this.facet(F0)}phrase(e,...t){for(let n of this.facet(et.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>t.length?n:t[a-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let a of this.facet(C0))for(let s of a(this,t,n))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return L2(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),s=e-n,o=e-n;for(;s>0;){let u=zt(t,s,!1);if(a(t.slice(u,s))!=gt.Word)break;s=u}for(;o<i;){let u=zt(t,o);if(a(t.slice(o,u))!=gt.Word)break;o=u}return s==o?null:he.range(s+n,o+n)}}et.allowMultipleSelections=E0;et.tabSize=Ce.define({combine:r=>r.length?r[0]:4});et.lineSeparator=M0;et.readOnly=F0;et.phrases=Ce.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(i=>r[i]==e[i])}});et.languageData=C0;et.changeFilter=T0;et.transactionFilter=O0;et.transactionExtender=B0;Qo.reconfigure=He.define();function Or(r,e,t={}){let n={};for(let i of r)for(let a of Object.keys(i)){let s=i[a],o=n[a];if(o===void 0)n[a]=s;else if(!(o===s||s===void 0))if(Object.hasOwnProperty.call(t,a))n[a]=t[a](o,s);else throw new Error("Config merge conflict for field "+a)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class jn{eq(e){return this==e}range(e,t=e){return xl.create(e,t,this)}}jn.prototype.startSide=jn.prototype.endSide=0;jn.prototype.point=!1;jn.prototype.mapMode=Wt.TrackDel;let xl=class I0{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new I0(e,t,n)}};function wl(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class Bc{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let a=n?this.to:this.from;for(let s=i,o=a.length;;){if(s==o)return s;let u=s+o>>1,l=a[u]-e||(n?this.value[u].endSide:this.value[u].startSide)-t;if(u==s)return l>=0?s:o;l>=0?o=u:s=u+1}}between(e,t,n,i){for(let a=this.findIndex(t,-1e9,!0),s=this.findIndex(n,1e9,!1,a);a<s;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let n=[],i=[],a=[],s=-1,o=-1;for(let u=0;u<this.value.length;u++){let l=this.value[u],c=this.from[u]+e,f=this.to[u]+e,h,d;if(c==f){let m=t.mapPos(c,l.startSide,l.mapMode);if(m==null||(h=d=m,l.startSide!=l.endSide&&(d=t.mapPos(c,l.endSide),d<h)))continue}else if(h=t.mapPos(c,l.startSide),d=t.mapPos(f,l.endSide),h>d||h==d&&l.startSide>0&&l.endSide<=0)continue;(d-h||l.endSide-l.startSide)<0||(s<0&&(s=h),l.point&&(o=Math.max(o,d-h)),n.push(l),i.push(h-s),a.push(d-s))}return{mapped:n.length?new Bc(i,a,n,o):null,pos:s}}}class nt{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new nt(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:a=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(n&&(t=t.slice().sort(wl)),this.isEmpty)return t.length?nt.of(t):this;let o=new P0(this,null,-1).goto(0),u=0,l=[],c=new Qn;for(;o.value||u<t.length;)if(u<t.length&&(o.from-t[u].from||o.startSide-t[u].value.startSide)>=0){let f=t[u++];c.addInner(f.from,f.to,f.value)||l.push(f)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(o.chunkIndex)<t[u].from)&&(!s||i>this.chunkEnd(o.chunkIndex)||a<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||i>o.to||a<o.from||s(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||l.push(xl.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?nt.empty:this.nextLayer.update({add:l,filter:s,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],u=this.chunk[s],l=e.touchesRange(o,o+u.length);if(l===!1)i=Math.max(i,u.maxPoint),t.push(u),n.push(e.mapPos(o));else if(l===!0){let{mapped:c,pos:f}=u.map(o,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),n.push(f))}}let a=this.nextLayer.map(e);return t.length==0?a:new nt(n,t,a||nt.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],s=this.chunk[i];if(t>=a&&e<=a+s.length&&s.between(a,e-a,t-a,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Ta.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ta.from(e).goto(t)}static compare(e,t,n,i,a=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),o=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),u=Uf(s,o,n),l=new ua(s,u,a),c=new ua(o,u,a);n.iterGaps((f,h,d)=>Hf(l,f,c,h,d,i)),n.empty&&n.length==0&&Hf(l,0,c,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=1e9-1);let a=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(a.length!=s.length)return!1;if(!a.length)return!0;let o=Uf(a,s),u=new ua(a,o,0).goto(n),l=new ua(s,o,0).goto(n);for(;;){if(u.to!=l.to||!Al(u.active,l.active)||u.point&&(!l.point||!u.point.eq(l.point)))return!1;if(u.to>i)return!0;u.next(),l.next()}}static spans(e,t,n,i,a=-1){let s=new ua(e,null,a).goto(t),o=t,u=s.openStart;for(;;){let l=Math.min(s.to,n);if(s.point){let c=s.activeForPoint(s.to),f=s.pointFrom<t?c.length+1:Math.min(c.length,u);i.point(o,l,s.point,c,f,s.pointRank),u=Math.min(s.openEnd(l),c.length)}else l>o&&(i.span(o,l,s.active,u),u=s.openEnd(l));if(s.to>n)return u+(s.point&&s.to>n?1:0);o=s.to,s.next()}}static of(e,t=!1){let n=new Qn;for(let i of e instanceof xl?[e]:t?z2(e):e)n.add(i.from,i.to,i.value);return n.finish()}}nt.empty=new nt([],[],null,-1);function z2(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(wl(e,n)>0)return r.slice().sort(wl);e=n}return r}nt.empty.nextLayer=nt.empty;class Qn{finishChunk(e){this.chunks.push(new Bc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Qn)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(nt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=nt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Uf(r,e,t){let n=new Map;for(let a of r)for(let s=0;s<a.chunk.length;s++)a.chunk[s].maxPoint<=0&&n.set(a.chunk[s],a.chunkPos[s]);let i=new Set;for(let a of e)for(let s=0;s<a.chunk.length;s++){let o=n.get(a.chunk[s]);o!=null&&(t?t.mapPos(o):o)==a.chunkPos[s]&&!(t!=null&&t.touchesRange(o,o+a.chunk[s].length))&&i.add(a.chunk[s])}return i}class P0{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ta{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let a=0;a<e.length;a++)for(let s=e[a];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&i.push(new P0(s,t,n,a));return i.length==1?i[0]:new Ta(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)Bu(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)Bu(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Bu(this.heap,0)}}}function Bu(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let i=r[n];if(n+1<r.length&&i.compare(r[n+1])>=0&&(i=r[n+1],n++),t.compare(i)<0)break;r[n]=t,r[e]=i,e=n}}class ua{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ta.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){us(this.active,e),us(this.activeTo,e),us(this.activeRank,e),this.minActive=Vf(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:a}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=a;)t++;ls(this.active,t,n),ls(this.activeTo,t,i),ls(this.activeRank,t,a),e&&ls(e,t,this.cursor.from),this.minActive=Vf(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&us(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Hf(r,e,t,n,i,a){r.goto(e),t.goto(n);let s=n+i,o=n,u=n-e;for(;;){let l=r.to+u-t.to||r.endSide-t.endSide,c=l<0?r.to+u:t.to,f=Math.min(c,s);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Al(r.activeForPoint(r.to),t.activeForPoint(t.to))||a.comparePoint(o,f,r.point,t.point):f>o&&!Al(r.active,t.active)&&a.compareRange(o,f,r.active,t.active),c>s)break;o=c,l<=0&&r.next(),l>=0&&t.next()}}function Al(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function us(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function ls(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function Vf(r,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||r[i].endSide-r[t].endSide)<0&&(t=i,n=e[i]);return t}function Ki(r,e,t=r.length){let n=0;for(let i=0;i<t;)r.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=zt(r,i));return n}function Dl(r,e,t,n){for(let i=0,a=0;;){if(a>=e)return i;if(i==r.length)break;a+=r.charCodeAt(i)==9?t-a%t:1,i=zt(r,i)}return n===!0?-1:r.length}const Sl="ͼ",Wf=typeof Symbol>"u"?"__"+Sl:Symbol.for(Sl),Nl=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Bn{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function a(s,o,u,l){let c=[],f=/^@(\w+)\b/.exec(s[0]),h=f&&f[1]=="keyframes";if(f&&o==null)return u.push(s[0]+";");for(let d in o){let m=o[d];if(/&/.test(d))a(d.split(/,\s*/).map(p=>s.map(v=>p.replace(/&/,v))).reduce((p,v)=>p.concat(v)),m,u);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");a(i(d),m,c,h)}else m!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+m+";")}(c.length||h)&&u.push((n&&!f&&!l?s.map(n):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)a(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Gf[Wf]||1;return Gf[Wf]=e+1,Sl+e.toString(36)}static mount(e,t,n){let i=e[Nl],a=n&&n.nonce;i?a&&i.setNonce(a):i=new q2(e,a),i.mount(Array.isArray(t)?t:[t])}}let Yf=new Map;class q2{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=Yf.get(n);if(a)return e.adoptedStyleSheets=[a.sheet,...e.adoptedStyleSheets],e[Nl]=a;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Yf.set(n,this)}else{this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[Nl]=this}mount(e){let t=this.sheet,n=0,i=0;for(let a=0;a<e.length;a++){let s=e[a],o=this.modules.indexOf(s);if(o<i&&o>-1&&(this.modules.splice(o,1),i--,o=-1),o==-1){if(this.modules.splice(i++,0,s),t)for(let u=0;u<s.rules.length;u++)t.insertRule(s.rules[u],n++)}else{for(;i<o;)n+=this.modules[i++].rules.length;n+=s.rules.length,i++}}if(!t){let a="";for(let s=0;s<this.modules.length;s++)a+=this.modules[s].getRules()+`
`;this.styleTag.textContent=a}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Fn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},U2=typeof navigator<"u"&&/Mac/.test(navigator.platform),H2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kt=0;kt<10;kt++)Fn[48+kt]=Fn[96+kt]=String(kt);for(var kt=1;kt<=24;kt++)Fn[kt+111]="F"+kt;for(var kt=65;kt<=90;kt++)Fn[kt]=String.fromCharCode(kt+32),Oa[kt]=String.fromCharCode(kt);for(var Fu in Fn)Oa.hasOwnProperty(Fu)||(Oa[Fu]=Fn[Fu]);function V2(r){var e=U2&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||H2&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Oa:Fn)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function co(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Cl(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function W2(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function js(r,e){if(!e.anchorNode)return!1;try{return Cl(r,e.anchorNode)}catch{return!1}}function Ba(r){return r.nodeType==3?ei(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function fo(r,e,t,n){return t?Kf(r,e,t,n,-1)||Kf(r,e,t,n,1):!1}function ho(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Kf(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:kn(r))){if(r.nodeName=="DIV")return!1;let a=r.parentNode;if(!a||a.nodeType!=1)return!1;e=ho(r)+(i<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=i<0?kn(r):0}else return!1}}function kn(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Fc(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function G2(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function Y2(r,e,t,n,i,a,s,o){let u=r.ownerDocument,l=u.defaultView||window;for(let c=r,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==u.body,m=1,p=1;if(d)h=G2(l);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let A=c.getBoundingClientRect();m=A.width/c.offsetWidth,p=A.height/c.offsetHeight,h={left:A.left,right:A.left+c.clientWidth*m,top:A.top,bottom:A.top+c.clientHeight*p}}let v=0,g=0;if(i=="nearest")e.top<h.top?(g=-(h.top-e.top+s),t>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+s)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+s,t<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+s)));else{let A=e.bottom-e.top,y=h.bottom-h.top;g=(i=="center"&&A<=y?e.top+A/2-y/2:i=="start"||i=="center"&&t<0?e.top-s:e.bottom-y+s)-h.top}if(n=="nearest"?e.left<h.left?(v=-(h.left-e.left+a),t>0&&e.right>h.right+v&&(v=e.right-h.right+v+a)):e.right>h.right&&(v=e.right-h.right+a,t<0&&e.left<h.left+v&&(v=-(h.left+v-e.left+a))):v=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==o?e.left-a:e.right-(h.right-h.left)+a)-h.left,v||g)if(d)l.scrollBy(v,g);else{let A=0,y=0;if(g){let w=c.scrollTop;c.scrollTop+=g/p,y=(c.scrollTop-w)*p}if(v){let w=c.scrollLeft;c.scrollLeft+=v/m,A=(c.scrollLeft-w)*m}e={left:e.left-A,top:e.top-y,right:e.right-A,bottom:e.bottom-y},A&&Math.abs(A-v)<1&&(n="nearest"),y&&Math.abs(y-g)<1&&(i="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function K2(r){let e=r.ownerDocument;for(let t=r.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class X2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?kn(t):0),n,Math.min(e.focusOffset,n?kn(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let di=null;function $0(r){if(r.setActive)return r.setActive();if(di)return r.focus(di);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(di==null?{get preventScroll(){return di={preventScroll:!0},!0}}:void 0),!di){di=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],a=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let Xf;function ei(r,e,t=e){let n=Xf||(Xf=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function Ci(r,e,t){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",n);i.synthetic=!0,r.dispatchEvent(i);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,r.dispatchEvent(a),i.defaultPrevented||a.defaultPrevented}function Z2(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function _0(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function J2(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,kn(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=kn(t))}else{if(t==r)return!0;n=ho(t),t=t.parentNode}}function L0(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}class Lt{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Lt(e.parentNode,ho(e),t)}static after(e,t){return new Lt(e.parentNode,ho(e)+1,t)}}const kc=[];class pt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,a;for(let s of this.children){if(s.flags&7){if(!s.dom&&(a=i?i.nextSibling:n.firstChild)){let o=pt.get(a);(!o||!o.parent&&o.canReuseDOM(s))&&s.reuseDOM(a)}s.sync(e,t),s.flags&=-8}if(a=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&a!=s.dom&&(t.written=!0),s.dom.parentNode==n)for(;a&&a!=s.dom;)a=Zf(a);else n.insertBefore(s.dom,a);i=s.dom}for(a=i?i.nextSibling:n.firstChild,a&&t&&t.node==n&&(t.written=!0);a;)a=Zf(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=kn(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!pt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,a=0;;i++){let s=this.children[i];if(s.dom==n)return a;a+=s.length+s.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,a=-1,s=-1,o=-1;for(let u=0,l=n,c=n;u<this.children.length;u++){let f=this.children[u],h=l+f.length;if(l<e&&h>t)return f.domBoundsAround(e,t,l);if(h>=e&&i==-1&&(i=u,a=l),l>t&&f.dom.parentNode==this.dom){s=u,o=c;break}c=h,l=h+f.breakAfter}return{from:a,to:o<0?n+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=kc){this.markDirty();for(let i=e;i<t;i++){let a=this.children[i];a.parent==this&&a.destroy()}this.children.splice(e,t-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new z0(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,a,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}pt.prototype.breakAfter=0;function Zf(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class z0{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function q0(r,e,t,n,i,a,s,o,u){let{children:l}=r,c=l.length?l[e]:null,f=a.length?a[a.length-1]:null,h=f?f.breakAfter:s;if(!(e==n&&c&&!s&&!h&&a.length<2&&c.merge(t,i,a.length?f:null,t==0,o,u))){if(n<l.length){let d=l[n];d&&(i<d.length||d.breakAfter&&(f!=null&&f.breakAfter))?(e==n&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,u)?a[a.length-1]=d:(i&&d.merge(0,i,null,!1,0,u),a.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:s=1),n++}for(c&&(c.breakAfter=s,t>0&&(!s&&a.length&&c.merge(t,c.length,a[0],!1,o,0)?c.breakAfter=a.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,o,0),e++));e<n&&a.length;)if(l[n-1].become(a[a.length-1]))n--,a.pop(),u=a.length?0:o;else if(l[e].become(a[0]))e++,a.shift(),o=a.length?0:u;else break;!a.length&&e&&n<l.length&&!l[e-1].breakAfter&&l[n].merge(0,0,l[e-1],!1,o,u)&&e--,(e<n||a.length)&&r.replaceChildren(e,n,a)}}function U0(r,e,t,n,i,a){let s=r.childCursor(),{i:o,off:u}=s.findPos(t,1),{i:l,off:c}=s.findPos(e,-1),f=e-t;for(let h of n)f+=h.length;r.length+=f,q0(r,l,c,o,u,n,0,i,a)}let fr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},El=typeof document<"u"?document:{documentElement:{style:{}}};const Ml=/Edge\/(\d+)/.exec(fr.userAgent),H0=/MSIE \d/.test(fr.userAgent),Tl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fr.userAgent),eu=!!(H0||Tl||Ml),Jf=!eu&&/gecko\/(\d+)/i.test(fr.userAgent),ku=!eu&&/Chrome\/(\d+)/.exec(fr.userAgent),jf="webkitFontSmoothing"in El.documentElement.style,V0=!eu&&/Apple Computer/.test(fr.vendor),Qf=V0&&(/Mobile\/\w+/.test(fr.userAgent)||fr.maxTouchPoints>2);var Me={mac:Qf||/Mac/.test(fr.platform),windows:/Win/.test(fr.platform),linux:/Linux|X11/.test(fr.platform),ie:eu,ie_version:H0?El.documentMode||6:Tl?+Tl[1]:Ml?+Ml[1]:0,gecko:Jf,gecko_version:Jf?+(/Firefox\/(\d+)/.exec(fr.userAgent)||[0,0])[1]:0,chrome:!!ku,chrome_version:ku?+ku[1]:0,ios:Qf,android:/Android\b/.test(fr.userAgent),webkit:jf,safari:V0,webkit_version:jf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:El.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const j2=256;class sn extends pt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof sn)||this.length-(t-e)+n.length>j2||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new sn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Lt(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Q2(this.dom,e,t)}}class on extends pt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(_0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,a,s){return n&&(!(n instanceof on&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&s<=0)?!1:(U0(this,e,t,n?n.children:[],a-1,s-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,a=0;for(let o of this.children){let u=n+o.length;u>e&&t.push(n<e?o.split(e-n):o),i<0&&n>=e&&(i=a),n=u,a++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new on(this.mark,t,s)}domAtPos(e){return W0(this,e)}coordsAt(e,t){return Y0(this,e,t)}}function Q2(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let i=e,a=e,s=0;e==0&&t<0||e==n&&t>=0?Me.chrome||Me.gecko||(e?(i--,s=1):a<n&&(a++,s=-1)):t<0?i--:a<n&&a++;let o=ei(r,i,a).getClientRects();if(!o.length)return null;let u=o[(s?s<0:t>=0)?0:o.length-1];return Me.safari&&!s&&u.width==0&&(u=Array.prototype.find.call(o,l=>l.width)||u),s?Fc(u,s<0):u||null}class An extends pt{static create(e,t,n){return new An(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=An.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,i,a,s){return n&&(!(n instanceof An)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&s<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof An&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return rt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):rt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Lt.before(this.dom):Lt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let o=s?i.length-1:0;a=i[o],!(e>0?o==0:o==i.length-1||a.top<a.bottom);o+=s?-1:1);return Fc(a,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Fi extends pt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Fi&&e.side==this.side}split(){return new Fi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Lt.before(this.dom):Lt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return rt.empty}get isHidden(){return!0}}sn.prototype.children=An.prototype.children=Fi.prototype.children=kc;function W0(r,e){let t=r.dom,{children:n}=r,i=0;for(let a=0;i<n.length;i++){let s=n[i],o=a+s.length;if(!(o==a&&s.getSide()<=0)){if(e>a&&e<o&&s.dom.parentNode==t)return s.domAtPos(e-a);if(e<=a)break;a=o}}for(let a=i;a>0;a--){let s=n[a-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let a=i;a<n.length;a++){let s=n[a];if(s.dom.parentNode==t)return s.domAtPos(0)}return new Lt(t,0)}function G0(r,e,t){let n,{children:i}=r;t>0&&e instanceof on&&i.length&&(n=i[i.length-1])instanceof on&&n.mark.eq(e.mark)?G0(n,e.children[0],t-1):(i.push(e),e.setParent(r)),r.length+=e.length}function Y0(r,e,t){let n=null,i=-1,a=null,s=-1;function o(l,c){for(let f=0,h=0;f<l.children.length&&h<=c;f++){let d=l.children[f],m=h+d.length;m>=c&&(d.children.length?o(d,c-h):(!a||a.isHidden&&t>0)&&(m>c||h==m&&d.getSide()>0)?(a=d,s=c-h):(h<c||h==m&&d.getSide()<0&&!d.isHidden)&&(n=d,i=c-h)),h=m}}o(r,e);let u=(t<0?n:a)||n||a;return u?u.coordsAt(Math.max(0,u==n?i:s),t):eA(r)}function eA(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=Ba(e);return t[t.length-1]||null}function Ol(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const eh=Object.create(null);function Rc(r,e,t){if(r==e)return!0;r||(r=eh),e||(e=eh);let n=Object.keys(r),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let a of n)if(a!=t&&(i.indexOf(a)==-1||r[a]!==e[a]))return!1;return!0}function Bl(r,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?r.style.cssText="":r.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?r.style.cssText=t[i]:r.setAttribute(i,t[i]));return n}function tA(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}class At extends pt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,a,s){if(n){if(!(n instanceof At))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),U0(this,e,t,n?n.children:[],a,s),!0}split(e){let t=new At;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)t.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Rc(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){G0(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Ol(t,this.attrs||{})),n&&(this.attrs=Ol({class:n},this.attrs||{}))}domAtPos(e){return W0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(_0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Bl(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&pt.get(i)instanceof on;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=pt.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Me.ios||!this.children.some(a=>a instanceof sn))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof sn)||/[^ -~]/.test(n.text))return null;let i=Ba(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=Y0(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let s=(a-i.textHeight)/2;return{top:n.top+s,bottom:n.bottom-s,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let a=e.children[n],s=i+a.length;if(s>=t){if(a instanceof At)return a;if(s>t)break}i=s+a.breakAfter}return null}}class Xn extends pt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,a,s){return n&&(!(n instanceof Xn)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&s<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Lt.before(this.dom):Lt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Xn(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return kc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):rt.empty}domBoundsAround(){return null}become(e){return e instanceof Xn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class dn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}destroy(e){}}var Gt=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Gt||(Gt={}));class ke extends jn{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ja(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Rn(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:a,end:s}=K0(e,t);n=(a?t?-3e8:-1:5e8)-1,i=(s?t?2e8:1:-6e8)+1}return new Rn(e,n,i,t,e.widget||null,!0)}static line(e){return new ja(e)}static set(e,t=!1){return nt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ke.none=nt.empty;class Ja extends ke{constructor(e){let{start:t,end:n}=K0(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Ja&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Rc(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Ja.prototype.point=!1;class ja extends ke{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ja&&this.spec.class==e.spec.class&&Rc(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ja.prototype.mapMode=Wt.TrackBefore;ja.prototype.point=!0;class Rn extends ke{constructor(e,t,n,i,a,s){super(t,n,a,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?Wt.TrackBefore:Wt.TrackAfter:Wt.TrackDel}get type(){return this.startSide!=this.endSide?Gt.WidgetRange:this.startSide<=0?Gt.WidgetBefore:Gt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Rn&&rA(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Rn.prototype.point=!0;function K0(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t??e,end:n??e}}function rA(r,e){return r==e||!!(r&&e&&r.compare(e))}function Fl(r,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=r?t[i]=Math.max(t[i],e):t.push(r,e)}class Sa{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Xn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new At),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(cs(new Fi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!e&&!this.posCovered()&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:s,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(cs(new sn(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,a,s){if(this.disallowBlockEffectsFor[s]&&n instanceof Rn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof Rn)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Xn(n.widget||new th("div"),o,n));else{let u=An.create(n.widget||new th("span"),o,o?0:n.startSide),l=this.atCursorPos&&!u.isEditable&&a<=i.length&&(e<t||n.startSide>0),c=!u.isEditable&&(e<t||a>i.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!l&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),l&&(f.append(cs(new Fi(1),i),a),a=i.length+Math.max(0,a-i.length)),f.append(cs(u,i),a),this.atCursorPos=c,this.pendingBuffer=c?e<t||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,i,a){let s=new Sa(e,t,n,a);return s.openEnd=nt.spans(i,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function cs(r,e){for(let t of e)r=new on(t,[r],r.length);return r}class th extends dn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const X0=Ce.define(),Z0=Ce.define(),J0=Ce.define(),j0=Ce.define(),kl=Ce.define(),Q0=Ce.define(),e1=Ce.define(),t1=Ce.define({combine:r=>r.some(e=>e)}),r1=Ce.define({combine:r=>r.some(e=>e)});class mo{constructor(e,t="nearest",n="nearest",i=5,a=5){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=a}map(e){return e.empty?this:new mo(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const rh=He.define({map:(r,e)=>r.map(e)});function Cr(r,e,t){let n=r.facet(j0);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const tu=Ce.define({combine:r=>r.length?r[0]:!0});let nA=0;const ma=Ce.define();class Mt{constructor(e,t,n,i,a){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=a(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:a,decorations:s}=t||{};return new Mt(nA++,e,n,i,o=>{let u=[ma.of(o)];return s&&u.push(Fa.of(l=>{let c=l.plugin(o);return c?s(c):ke.none})),a&&u.push(a(o)),u})}static fromClass(e,t){return Mt.define(n=>new e(n),t)}}class Ru{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Cr(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Cr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Cr(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const n1=Ce.define(),Ic=Ce.define(),Fa=Ce.define(),Pc=Ce.define(),i1=Ce.define();function nh(r,e,t){let n=r.state.facet(i1);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(r):s),a=[];return nt.spans(i,e,t,{point(){},span(s,o,u,l){let c=a;for(let f=u.length-1;f>=0;f--,l--){let h=u[f].spec.bidiIsolate,d;if(h!=null)if(l>0&&c.length&&(d=c[c.length-1]).to==s&&d.direction==h)d.to=o,c=d.inner;else{let m={from:s,to:o,direction:h,inner:[]};c.push(m),c=m.inner}}}}),a}const a1=Ce.define();function s1(r){let e=0,t=0,n=0,i=0;for(let a of r.state.facet(a1)){let s=a(r);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(n=Math.max(n,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:t,top:n,bottom:i}}const pa=Ce.define();class br{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new br(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,a=0,s=0,o=0;;i++){let u=i==e.length?null:e[i],l=s-o,c=u?u.fromB:1e9;for(;a<t.length&&t[a]<c;){let f=t[a],h=t[a+1],d=Math.max(o,f),m=Math.min(c,h);if(d<=m&&new br(d+l,m+l,d,m).addToSet(n),h>c)break;a+=2}if(!u)return n;new br(u.fromA,u.toA,u.fromB,u.toB).addToSet(n),s=u.toA,o=u.toB}}}class po{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=St.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,s,o,u)=>i.push(new br(a,s,o,u))),this.changedRanges=i}static create(e,t,n){return new po(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var vt=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(vt||(vt={}));const ka=vt.LTR,o1=vt.RTL;function u1(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const iA=u1("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aA=u1("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Rl=Object.create(null),Ir=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Rl[e]=t,Rl[t]=-e}function sA(r){return r<=247?iA[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?aA[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203?256:64336<=r&&r<=65023?4:r==8204?256:1}const oA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Dn{get dir(){return this.level%2?o1:ka}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,i){let a=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==n)return s;(a<0||(i!=0?i<0?o.from<t:o.to>t:e[a].level>o.level))&&(a=s)}}if(a<0)throw new RangeError("Index out of range");return a}}function l1(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!l1(n.inner,i.inner))return!1}return!0}const ct=[];function uA(r,e,t,n,i){for(let a=0;a<=n.length;a++){let s=a?n[a-1].to:e,o=a<n.length?n[a].from:t,u=a?256:i;for(let l=s,c=u,f=u;l<o;l++){let h=sA(r.charCodeAt(l));h==512?h=c:h==8&&f==4&&(h=16),ct[l]=h==4?2:h,h&7&&(f=h),c=h}for(let l=s,c=u,f=u;l<o;l++){let h=ct[l];if(h==128)l<o-1&&c==ct[l+1]&&c&24?h=ct[l]=c:ct[l]=256;else if(h==64){let d=l+1;for(;d<o&&ct[d]==64;)d++;let m=l&&c==8||d<t&&ct[d]==8?f==1?1:8:256;for(let p=l;p<d;p++)ct[p]=m;l=d-1}else h==8&&f==1&&(ct[l]=1);c=h,h&7&&(f=h)}}}function lA(r,e,t,n,i){let a=i==1?2:1;for(let s=0,o=0,u=0;s<=n.length;s++){let l=s?n[s-1].to:e,c=s<n.length?n[s].from:t;for(let f=l,h,d,m;f<c;f++)if(d=Rl[h=r.charCodeAt(f)])if(d<0){for(let p=o-3;p>=0;p-=3)if(Ir[p+1]==-d){let v=Ir[p+2],g=v&2?i:v&4?v&1?a:i:0;g&&(ct[f]=ct[Ir[p]]=g),o=p;break}}else{if(Ir.length==189)break;Ir[o++]=f,Ir[o++]=h,Ir[o++]=u}else if((m=ct[f])==2||m==1){let p=m==i;u=p?0:1;for(let v=o-3;v>=0;v-=3){let g=Ir[v+2];if(g&2)break;if(p)Ir[v+2]|=2;else{if(g&4)break;Ir[v+2]|=4}}}}}function cA(r,e,t,n){for(let i=0,a=n;i<=t.length;i++){let s=i?t[i-1].to:r,o=i<t.length?t[i].from:e;for(let u=s;u<o;){let l=ct[u];if(l==256){let c=u+1;for(;;)if(c==o){if(i==t.length)break;c=t[i++].to,o=i<t.length?t[i].from:e}else if(ct[c]==256)c++;else break;let f=a==1,h=(c<e?ct[c]:n)==1,d=f==h?f?1:2:n;for(let m=c,p=i,v=p?t[p-1].to:r;m>u;)m==v&&(m=t[--p].from,v=p?t[p-1].to:r),ct[--m]=d;u=c}else a=l,u++}}}function Il(r,e,t,n,i,a,s){let o=n%2?2:1;if(n%2==i%2)for(let u=e,l=0;u<t;){let c=!0,f=!1;if(l==a.length||u<a[l].from){let p=ct[u];p!=o&&(c=!1,f=p==16)}let h=!c&&o==1?[]:null,d=c?n:n+1,m=u;e:for(;;)if(l<a.length&&m==a[l].from){if(f)break e;let p=a[l];if(!c)for(let v=p.to,g=l+1;;){if(v==t)break e;if(g<a.length&&a[g].from==v)v=a[g++].to;else{if(ct[v]==o)break e;break}}if(l++,h)h.push(p);else{p.from>u&&s.push(new Dn(u,p.from,d));let v=p.direction==ka!=!(d%2);Pl(r,v?n+1:n,i,p.inner,p.from,p.to,s),u=p.to}m=p.to}else{if(m==t||(c?ct[m]!=o:ct[m]==o))break;m++}h?Il(r,u,m,n+1,i,h,s):u<m&&s.push(new Dn(u,m,d)),u=m}else for(let u=t,l=a.length;u>e;){let c=!0,f=!1;if(!l||u>a[l-1].to){let p=ct[u-1];p!=o&&(c=!1,f=p==16)}let h=!c&&o==1?[]:null,d=c?n:n+1,m=u;e:for(;;)if(l&&m==a[l-1].to){if(f)break e;let p=a[--l];if(!c)for(let v=p.from,g=l;;){if(v==e)break e;if(g&&a[g-1].to==v)v=a[--g].from;else{if(ct[v-1]==o)break e;break}}if(h)h.push(p);else{p.to<u&&s.push(new Dn(p.to,u,d));let v=p.direction==ka!=!(d%2);Pl(r,v?n+1:n,i,p.inner,p.from,p.to,s),u=p.from}m=p.from}else{if(m==e||(c?ct[m-1]!=o:ct[m-1]==o))break;m--}h?Il(r,m,u,n+1,i,h,s):m<u&&s.push(new Dn(m,u,d)),u=m}}function Pl(r,e,t,n,i,a,s){let o=e%2?2:1;uA(r,i,a,n,o),lA(r,i,a,n,o),cA(i,a,n,o),Il(r,i,a,e,t,n,s)}function fA(r,e,t){if(!r)return[new Dn(0,0,e==o1?1:0)];if(e==ka&&!t.length&&!oA.test(r))return c1(r.length);if(t.length)for(;r.length>ct.length;)ct[ct.length]=256;let n=[],i=e==ka?0:1;return Pl(r,i,i,t,0,r.length,n),n}function c1(r){return[new Dn(0,r,0)]}let f1="";function hA(r,e,t,n,i){var a;let s=n.head-r.from,o=-1;if(s==0){if(!i||!r.length)return null;e[0].level!=t&&(s=e[0].side(!1,t),o=0)}else if(s==r.length){if(i)return null;let h=e[e.length-1];h.level!=t&&(s=h.side(!0,t),o=e.length-1)}o<0&&(o=Dn.find(e,s,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc));let u=e[o];s==u.side(i,t)&&(u=e[o+=i?1:-1],s=u.side(!i,t));let l=i==(u.dir==t),c=zt(r.text,s,l);if(f1=r.text.slice(Math.min(s,c),Math.max(s,c)),c!=u.side(i,t))return he.cursor(c+r.from,l?-1:1,u.level);let f=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return!f&&u.level!=t?he.cursor(i?r.to:r.from,i?-1:1,t):f&&f.level<u.level?he.cursor(f.side(!i,t)+r.from,i?1:-1,f.level):he.cursor(c+r.from,i?-1:1,u.level)}class ih extends pt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new At],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new br(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:l,toA:c})=>c<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!bA(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?mA(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:l,to:c}=this.hasComposition;n=new br(l,c,e.changes.mapPos(l,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(Me.ie||Me.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,o=this.updateDeco(),u=vA(s,o,e.changes);return n=br.extendWithRanges(n,u),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Me.chrome||Me.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Xn&&s.widget instanceof ah&&a.push(s.dom);i.updateGaps(a)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let s=i.length-1;;s--){let o=s>=0?i[s]:null;if(!o)break;let{fromA:u,toA:l,fromB:c,toB:f}=o,h,d,m,p;if(n&&n.range.fromB<f&&n.range.toB>c){let w=Sa.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),x=Sa.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);d=w.breakAtStart,m=w.openStart,p=x.openEnd;let b=this.compositionView(n);x.breakAtStart?b.breakAfter=1:x.content.length&&b.merge(b.length,b.length,x.content[0],!1,x.openStart,0)&&(b.breakAfter=x.content[0].breakAfter,x.content.shift()),w.content.length&&b.merge(0,0,w.content[w.content.length-1],!0,0,w.openEnd)&&w.content.pop(),h=w.content.concat(b).concat(x.content)}else({content:h,breakAtStart:d,openStart:m,openEnd:p}=Sa.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:v,off:g}=a.findPos(l,1),{i:A,off:y}=a.findPos(u,-1);q0(this,A,y,v,g,h,d,m,p)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new sn(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new on(i,[t],t.length);let n=new At;return n.append(t,0),n}fixCompositionDOM(e){let t=(a,s)=>{s.flags|=8|(s.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(s);let o=pt.get(a);o&&o!=s&&(o.dom=null),s.setDOM(a)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)n=i.childPos(n.off,1),i=i.children[n.i],t(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,a=!i&&js(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||a))return;let s=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(o.anchor)),l=o.empty?u:this.moveToLine(this.domAtPos(o.head));if(Me.gecko&&o.empty&&!this.hasComposition&&dA(u)){let f=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(f,u.node.childNodes[u.offset]||null)),u=l=new Lt(f,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||!fo(u.node,u.offset,c.anchorNode,c.anchorOffset)||!fo(l.node,l.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{Me.android&&Me.chrome&&this.dom.contains(c.focusNode)&&yA(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=co(this.view.root);if(f)if(o.empty){if(Me.gecko){let h=pA(u.node,u.offset);if(h&&h!=3){let d=d1(u.node,u.offset,h==1?1:-1);d&&(u=new Lt(d.node,d.offset))}}f.collapse(u.node,u.offset),o.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=o.bidiLevel)}else if(f.extend){f.collapse(u.node,u.offset);try{f.extend(l.node,l.offset)}catch{}}else{let h=document.createRange();o.anchor>o.head&&([u,l]=[l,u]),h.setEnd(l.node,l.offset),h.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(h)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(u,l)),this.impreciseAnchor=u.precise?null:new Lt(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new Lt(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=co(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let s=At.find(this,t.head);if(!s)return;let o=s.posAtStart;if(t.head==o||t.head==o+s.length)return;let u=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!u||!l||u.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&n.collapse(i,a)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let a=pt.get(t.childNodes[i]);a instanceof At&&(n=a.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let a=pt.get(t.childNodes[i]);a instanceof At&&(n=a.domAtPos(a.length))}return n?new Lt(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=pt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof At)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let a=this.length,s=this.children.length-1;s>=0;s--){let o=this.children[s],u=a-o.breakAfter,l=u-o.length;if(u<e)break;l<=e&&(l<e||o.covers(-1))&&(u>e||o.covers(1))&&(!n||o instanceof At&&!(n instanceof At&&t>=0))&&(n=o,i=l),a=l}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof At))return null;for(;i.children.length;){let{i:o,off:u}=i.childPos(n,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}n=u}if(!(i instanceof sn))return null;let a=zt(i.text,n);if(a==n)return null;let s=ei(i.dom,n,a).getClientRects();return!s.length||s[0].top>=s[0].bottom?null:s[0]}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,a=this.view.contentDOM.clientWidth,s=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,u=this.view.textDirection==vt.LTR;for(let l=0,c=0;c<this.children.length;c++){let f=this.children[c],h=l+f.length;if(h>i)break;if(l>=n){let d=f.dom.getBoundingClientRect();if(t.push(d.height),s){let m=f.dom.lastChild,p=m?Ba(m):[];if(p.length){let v=p[p.length-1],g=u?v.right-d.left:d.right-v.left;g>o&&(o=g,this.minWidth=a,this.minWidthFrom=l,this.minWidthTo=h)}}}l=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?vt.RTL:vt.LTR}measureTextSize(){for(let a of this.children)if(a instanceof At){let s=a.measureTextSize();if(s)return s}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=Ba(e.firstChild)[0];t=e.getBoundingClientRect().height,n=a?a.width/27:7,i=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new z0(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let a=i==t.viewports.length?null:t.viewports[i],s=a?a.from-1:this.length;if(s>n){let o=(t.lineBlockAt(s).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(ke.replace({widget:new ah(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!a)break;n=a.to+1}return ke.set(e)}updateDeco(){let e=this.view.state.facet(Fa).map((t,n)=>(this.dynamicDecorationMap[n]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let a=s1(this.view),s={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom};Y2(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==vt.LTR)}}function dA(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class ah extends dn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function h1(r,e){let t=r.observer.selectionRange,n=t.focusNode&&d1(t.focusNode,t.focusOffset,0);if(!n)return null;let i=e-n.offset;return{from:i,to:i+n.node.nodeValue.length,node:n.node}}function mA(r,e,t){let n=h1(r,t);if(!n)return null;let{node:i,from:a,to:s}=n,o=i.nodeValue;if(/[\n\r]/.test(o)||r.state.doc.sliceString(n.from,n.to)!=o)return null;let u=e.invertedDesc,l=new br(u.mapPos(a),u.mapPos(s),a,s),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=pt.get(f);if(h instanceof on)c.push({node:f,deco:h.mark});else{if(h instanceof At||f.nodeName=="DIV"&&f.parentNode==r.contentDOM)return{range:l,text:i,marks:c,line:f};if(f!=r.contentDOM)c.push({node:f,deco:new Ja({inclusive:!0,attributes:tA(f),tagName:f.tagName.toLowerCase()})});else return null}}}function d1(r,e,t){if(t<=0)for(let n=r,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i>0)n=n.childNodes[i-1],i=kn(n);else break}if(t>=0)for(let n=r,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length&&t>=0)n=n.childNodes[i],i=0;else break}return null}function pA(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let gA=class{constructor(){this.changes=[]}compareRange(e,t){Fl(e,t,this.changes)}comparePoint(e,t){Fl(e,t,this.changes)}};function vA(r,e,t){let n=new gA;return nt.compare(r,e,t,n),n.changes}function yA(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function bA(r,e){let t=!1;return e&&r.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function xA(r,e,t=1){let n=r.charCategorizer(e),i=r.doc.lineAt(e),a=e-i.from;if(i.length==0)return he.cursor(e);a==0?t=1:a==i.length&&(t=-1);let s=a,o=a;t<0?s=zt(i.text,a,!1):o=zt(i.text,a);let u=n(i.text.slice(s,o));for(;s>0;){let l=zt(i.text,s,!1);if(n(i.text.slice(l,s))!=u)break;s=l}for(;o<i.length;){let l=zt(i.text,o);if(n(i.text.slice(o,l))!=u)break;o=l}return he.range(s+i.from,o+i.from)}function wA(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function AA(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function Iu(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function sh(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function oh(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function $l(r,e,t){let n,i,a,s,o=!1,u,l,c,f;for(let m=r.firstChild;m;m=m.nextSibling){let p=Ba(m);for(let v=0;v<p.length;v++){let g=p[v];i&&Iu(i,g)&&(g=sh(oh(g,i.bottom),i.top));let A=wA(e,g),y=AA(t,g);if(A==0&&y==0)return m.nodeType==3?uh(m,e,t):$l(m,e,t);if(!n||s>y||s==y&&a>A){n=m,i=g,a=A,s=y;let w=y?t<g.top?-1:1:A?e<g.left?-1:1:0;o=!w||(w>0?v<p.length-1:v>0)}A==0?t>g.bottom&&(!c||c.bottom<g.bottom)?(u=m,c=g):t<g.top&&(!f||f.top>g.top)&&(l=m,f=g):c&&Iu(c,g)?c=oh(c,g.bottom):f&&Iu(f,g)&&(f=sh(f,g.top))}}if(c&&c.bottom>=t?(n=u,i=c):f&&f.top<=t&&(n=l,i=f),!n)return{node:r,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return uh(n,h,t);if(o&&n.contentEditable!="false")return $l(n,h,t);let d=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:r,offset:d}}function uh(r,e,t){let n=r.nodeValue.length,i=-1,a=1e9,s=0;for(let o=0;o<n;o++){let u=ei(r,o,o+1).getClientRects();for(let l=0;l<u.length;l++){let c=u[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<a){let h=e>=(c.left+c.right)/2,d=h;if((Me.chrome||Me.gecko)&&ei(r,o).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:r,offset:o+(d?1:0)};i=o+(d?1:0),a=f}}}return{node:r,offset:i>-1?i:s>0?r.nodeValue.length:0}}function m1(r,e,t,n=-1){var i,a;let s=r.contentDOM.getBoundingClientRect(),o=s.top+r.viewState.paddingTop,u,{docHeight:l}=r.viewState,{x:c,y:f}=e,h=f-o;if(h<0)return 0;if(h>l)return r.state.doc.length;for(let w=r.viewState.heightOracle.textHeight/2,x=!1;u=r.elementAtHeight(h),u.type!=Gt.Text;)for(;h=n>0?u.bottom+w:u.top-w,!(h>=0&&h<=l);){if(x)return t?null:0;x=!0,n=-n}f=o+h;let d=u.from;if(d<r.viewport.from)return r.viewport.from==0?0:t?null:lh(r,s,u,c,f);if(d>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:lh(r,s,u,c,f);let m=r.dom.ownerDocument,p=r.root.elementFromPoint?r.root:m,v=p.elementFromPoint(c,f);v&&!r.contentDOM.contains(v)&&(v=null),v||(c=Math.max(s.left+1,Math.min(s.right-1,c)),v=p.elementFromPoint(c,f),v&&!r.contentDOM.contains(v)&&(v=null));let g,A=-1;if(v&&((i=r.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let w=m.caretPositionFromPoint(c,f);w&&({offsetNode:g,offset:A}=w)}else if(m.caretRangeFromPoint){let w=m.caretRangeFromPoint(c,f);w&&({startContainer:g,startOffset:A}=w,(!r.contentDOM.contains(g)||Me.safari&&DA(g,A,c)||Me.chrome&&SA(g,A,c))&&(g=void 0))}}if(!g||!r.docView.dom.contains(g)){let w=At.find(r.docView,d);if(!w)return h>u.top+u.height/2?u.to:u.from;({node:g,offset:A}=$l(w.dom,c,f))}let y=r.docView.nearest(g);if(!y)return null;if(y.isWidget&&((a=y.dom)===null||a===void 0?void 0:a.nodeType)==1){let w=y.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(g,A)+y.posAtStart}function lh(r,e,t,n,i){let a=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let o=r.viewState.heightOracle.textHeight,u=Math.floor((i-t.top-(r.defaultLineHeight-o)*.5)/o);a+=u*r.viewState.heightOracle.lineLength}let s=r.state.sliceDoc(t.from,t.to);return t.from+Dl(s,a,r.state.tabSize)}function DA(r,e,t){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let i=r.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ei(r,n-1,n).getBoundingClientRect().left>t}function SA(r,e,t){if(e!=0)return!1;for(let i=r;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let n=r.nodeType==1?r.getBoundingClientRect():ei(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function _l(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Gt.Text))return n}return t}function NA(r,e,t,n){let i=_l(r,e.head),a=!n||i.type!=Gt.Text||!(r.lineWrapping||i.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let s=r.dom.getBoundingClientRect(),o=r.textDirectionAt(i.from),u=r.posAtCoords({x:t==(o==vt.LTR)?s.right-1:s.left+1,y:(a.top+a.bottom)/2});if(u!=null)return he.cursor(u,t?-1:1)}return he.cursor(t?i.to:i.from,t?-1:1)}function ch(r,e,t,n){let i=r.state.doc.lineAt(e.head),a=r.bidiSpans(i),s=r.textDirectionAt(i.from);for(let o=e,u=null;;){let l=hA(i,a,s,o,t),c=f1;if(!l){if(i.number==(t?r.state.doc.lines:1))return o;c=`
`,i=r.state.doc.line(i.number+(t?1:-1)),a=r.bidiSpans(i),l=he.cursor(t?i.from:i.to)}if(u){if(!u(c))return o}else{if(!n)return l;u=n(c)}o=l}}function CA(r,e,t){let n=r.state.charCategorizer(e),i=n(t);return a=>{let s=n(a);return i==gt.Space&&(i=s),i==s}}function EA(r,e,t,n){let i=e.head,a=t?1:-1;if(i==(t?r.state.doc.length:0))return he.cursor(i,e.assoc);let s=e.goalColumn,o,u=r.contentDOM.getBoundingClientRect(),l=r.coordsAtPos(i,e.assoc||-1),c=r.documentTop;if(l)s==null&&(s=l.left-u.left),o=a<0?l.top:l.bottom;else{let d=r.viewState.lineBlockAt(i);s==null&&(s=Math.min(u.right-u.left,r.defaultCharacterWidth*(i-d.from))),o=(a<0?d.top:d.bottom)+c}let f=u.left+s,h=n??r.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=o+(h+d)*a,p=m1(r,{x:f,y:m},!1,a);if(m<u.top||m>u.bottom||(a<0?p<i:p>i)){let v=r.docView.coordsForChar(p),g=!v||m<v.top?-1:1;return he.cursor(p,g,void 0,s)}}}function Qs(r,e,t){for(;;){let n=0;for(let i of r)i.between(e-1,e+1,(a,s,o)=>{if(e>a&&e<s){let u=n||t||(e-a<s-e?-1:1);e=u<0?a:s,n=u}});if(!n)return e}}function Pu(r,e,t){let n=Qs(r.state.facet(Pc).map(i=>i(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:he.cursor(n,n<t.from?1:-1)}class MA{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.handleEvent=this.handleEvent.bind(this),e.scrollDOM.addEventListener("mousedown",t=>{if(t.target==e.scrollDOM&&t.clientY>e.contentDOM.getBoundingClientRect().bottom&&(this.runHandlers("mousedown",t),!t.defaultPrevented&&t.button==2)){let n=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=n,200)}}),e.scrollDOM.addEventListener("drop",t=>{t.target==e.scrollDOM&&t.clientY>e.contentDOM.getBoundingClientRect().bottom&&this.runHandlers("drop",t)}),this.notifiedFocused=e.hasFocus,Me.safari&&e.contentDOM.addEventListener("input",()=>null),Me.gecko&&VA(e.contentDOM.ownerDocument)}handleEvent(e){!PA(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=TA(e),n=this.handlers,i=this.view.contentDOM;for(let a in t)if(a!="scroll"){let s=!t[a].handlers.length,o=n[a];o&&s!=!o.handlers.length&&(i.removeEventListener(a,this.handleEvent),o=null),o||i.addEventListener(a,this.handleEvent,{passive:s})}for(let a in n)a!="scroll"&&!t[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&g1.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Me.android&&Me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=p1.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||OA.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Ci(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Me.safari&&!Me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function fh(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(i){Cr(t.state,i)}}}function TA(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let i=n.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let s=i.domEventHandlers[a];s&&t(a).handlers.push(fh(n.value,s))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let s=i.domEventObservers[a];s&&t(a).observers.push(fh(n.value,s))}}for(let n in Wr)t(n).handlers.push(Wr[n]);for(let n in Tr)t(n).observers.push(Tr[n]);return e}const p1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],OA="dthko",g1=[16,17,18,20,91,92,224,225],fs=6;function hs(r){return Math.max(0,r)*.7+8}function BA(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class FA{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=K2(e.contentDOM),this.atoms=e.state.facet(Pc).map(s=>s(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(et.allowMultipleSelections)&&kA(e,t),this.dragging=IA(e,t)&&x1(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&BA(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},s=s1(this.view);e.clientX-s.left<=a.left+fs?n=-hs(a.left-e.clientX):e.clientX+s.right>=a.right-fs&&(n=hs(e.clientX-a.right)),e.clientY-s.top<=a.top+fs?i=-hs(a.top-e.clientY):e.clientY+s.bottom>=a.bottom-fs&&(i=hs(e.clientY-a.bottom)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],a=null;if(i.empty){let s=Qs(this.atoms,i.from,0);s!=i.from&&(a=he.cursor(s,-1))}else{let s=Qs(this.atoms,i.from,-1),o=Qs(this.atoms,i.to,1);(s!=i.from||o!=i.to)&&(a=he.range(i.from==i.anchor?s:o,i.from==i.head?s:o))}a&&(t||(t=e.ranges.slice()),t[n]=a)}return t?he.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection)||n.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function kA(r,e){let t=r.state.facet(X0);return t.length?t[0](e):Me.mac?e.metaKey:e.ctrlKey}function RA(r,e){let t=r.state.facet(Z0);return t.length?t[0](e):Me.mac?!e.altKey:!e.ctrlKey}function IA(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=co(r.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let s=i[a];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function PA(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=pt.get(t))&&n.ignoreEvent(e))return!1;return!0}const Wr=Object.create(null),Tr=Object.create(null),v1=Me.ie&&Me.ie_version<15||Me.ios&&Me.webkit_version<604;function $A(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),y1(r,t.value)},50)}function y1(r,e){let{state:t}=r,n,i=1,a=t.toText(e),s=a.lines==t.selection.ranges.length;if(Ll!=null&&t.selection.ranges.every(u=>u.empty)&&Ll==a.toString()){let u=-1;n=t.changeByRange(l=>{let c=t.doc.lineAt(l.from);if(c.from==u)return{range:l};u=c.from;let f=t.toText((s?a.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:he.cursor(l.from+f.length)}})}else s?n=t.changeByRange(u=>{let l=a.line(i++);return{changes:{from:u.from,to:u.to,insert:l.text},range:he.cursor(u.from+l.length)}}):n=t.replaceSelection(a);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Tr.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};Wr.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&(r.inputState.lastEscPress=Date.now()),!1);Tr.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};Tr.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};Wr.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(J0))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=zA(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new FA(r,e,t,n)),n&&r.observer.ignore(()=>$0(r.contentDOM));let i=r.inputState.mouseSelection;if(i)return i.start(e),!i.dragging}return!1};function hh(r,e,t,n){if(n==1)return he.cursor(e,t);if(n==2)return xA(r.state,e,t);{let i=At.find(r.docView,e),a=r.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:a.from,o=i?i.posAtEnd:a.to;return o<r.state.doc.length&&o==a.to&&o++,he.range(s,o)}}let b1=(r,e)=>r>=e.top&&r<=e.bottom,dh=(r,e,t)=>b1(e,t)&&r>=t.left&&r<=t.right;function _A(r,e,t,n){let i=At.find(r.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let s=i.coordsAt(a,-1);if(s&&dh(t,n,s))return-1;let o=i.coordsAt(a,1);return o&&dh(t,n,o)?1:s&&b1(n,s)?-1:1}function mh(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:_A(r,t,e.clientX,e.clientY)}}const LA=Me.ie&&Me.ie_version<=11;let ph=null,gh=0,vh=0;function x1(r){if(!LA)return r.detail;let e=ph,t=vh;return ph=r,vh=Date.now(),gh=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(gh+1)%3:1}function zA(r,e){let t=mh(r,e),n=x1(e),i=r.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),i=i.map(a.changes))},get(a,s,o){let u=mh(r,a),l,c=hh(r,u.pos,u.bias,n);if(t.pos!=u.pos&&!s){let f=hh(r,t.pos,t.bias,n),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?he.range(h,d):he.range(d,h)}return s?i.replaceRange(i.main.extend(c.from,c.to)):o&&n==1&&i.ranges.length>1&&(l=qA(i,u.pos))?l:o?i.addRange(c):he.create([c])}}}function qA(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:i}=r.ranges[t];if(n<=e&&i>=e)return he.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}Wr.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:n}=r.inputState;return n&&(n.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};function yh(r,e,t,n){if(!t)return;let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{mouseSelection:a}=r.inputState,s=n&&a&&a.dragging&&RA(r,e)?{from:a.dragging.from,to:a.dragging.to}:null,o={from:i,insert:t},u=r.state.changes(s?[s,o]:o);r.focus(),r.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}Wr.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,a=()=>{++i==t.length&&yh(r,e,n.filter(s=>s!=null).join(r.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let o=new FileReader;o.onerror=a,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(n[s]=o.result),a()},o.readAsText(t[s])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return yh(r,e,n,!0),!0}return!1};Wr.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=v1?null:e.clipboardData;return t?(y1(r,t.getData("text/plain")||t.getData("text/uri-text")),!0):($A(r),!1)};function UA(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function HA(r){let e=[],t=[],n=!1;for(let i of r.selection.ranges)i.empty||(e.push(r.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:a}of r.selection.ranges){let s=r.doc.lineAt(a);s.number>i&&(e.push(s.text),t.push({from:s.from,to:Math.min(r.doc.length,s.to+1)})),i=s.number}n=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:n}}let Ll=null;Wr.copy=Wr.cut=(r,e)=>{let{text:t,ranges:n,linewise:i}=HA(r.state);if(!t&&!i)return!1;Ll=i?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=v1?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",t),!0):(UA(r,t),!1)};const w1=hn.define();function A1(r,e){let t=[];for(let n of r.facet(e1)){let i=n(r,e);i&&t.push(i)}return t?r.update({effects:t,annotations:w1.of(!0)}):null}function D1(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=A1(r.state,e);t?r.dispatch(t):r.update([])}},10)}Tr.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),D1(r)};Tr.blur=r=>{r.observer.clearSelectionRange(),D1(r)};Tr.compositionstart=Tr.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0)};Tr.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,Me.chrome&&Me.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50)};Tr.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};Wr.beforeinput=(r,e)=>{var t;let n;if(Me.chrome&&Me.android&&(n=p1.find(i=>i.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return!1};const bh=new Set;function VA(r){bh.has(r)||(bh.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const xh=["pre-wrap","normal","pre-line","break-spaces"];class WA{constructor(e){this.lineWrapping=e,this.doc=rt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return xh.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,a,s){let o=xh.indexOf(e)>-1,u=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=a,u){this.heightSamples={};for(let l=0;l<s.length;l++){let c=s[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return u}}class GA{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class qr{constructor(e,t,n,i,a){this.from=e,this.length=t,this.top=n,this.height=i,this._content=a}get type(){return typeof this._content=="number"?Gt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Rn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var mt=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(mt||(mt={}));const eo=.001;class Yt{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>eo&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Yt.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let a=this,s=n.doc;for(let o=i.length-1;o>=0;o--){let{fromA:u,toA:l,fromB:c,toB:f}=i[o],h=a.lineAt(u,mt.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=l?h:a.lineAt(l,mt.ByPosNoHeight,n,0,0);for(f+=d.to-l,l=d.to;o>0&&h.from<=i[o-1].toA;)u=i[o-1].fromA,c=i[o-1].fromB,o--,u<h.from&&(h=a.lineAt(u,mt.ByPosNoHeight,n,0,0));c+=h.from-u,u=h.from;let m=$c.build(n.setDoc(s),e,c,f);a=a.replace(u,l,m)}return a.updateHeight(n,0)}static empty(){return new ur(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,a=0;for(;;)if(t==n)if(i>a*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),n+=1+o.break,i-=o.size}else if(a>i*2){let o=e[n];o.break?e.splice(n,1,o.left,null,o.right):e.splice(n,1,o.left,o.right),n+=2+o.break,a-=o.size}else break;else if(i<a){let o=e[t++];o&&(i+=o.size)}else{let o=e[--n];o&&(a+=o.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,n++),new YA(Yt.of(e.slice(0,t)),s,Yt.of(e.slice(n)))}}Yt.prototype.size=1;class S1 extends Yt{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new qr(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,a){return this.blockAt(0,n,i,a)}forEachLine(e,t,n,i,a,s){e<=a+this.length&&t>=a&&s(this.blockAt(0,n,i,a))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ur extends S1{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new qr(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof ur||i instanceof Bt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Bt?i=new ur(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Yt.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Bt extends Yt{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,a=i-n+1,s,o=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*a);s=u/a,this.length>a+1&&(o=(this.height-u)/(this.length-a-1))}else s=this.height/a;return{firstLine:n,lastLine:i,perLine:s,perChar:o}}blockAt(e,t,n,i){let{firstLine:a,lastLine:s,perLine:o,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let l=i+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),c=t.doc.lineAt(l),f=o+c.length*u,h=Math.max(n,e-f/2);return new qr(c.from,c.length,h,f,0)}else{let l=Math.max(0,Math.min(s-a,Math.floor((e-n)/o))),{from:c,length:f}=t.doc.line(a+l);return new qr(c,f,n+o*l,o,0)}}lineAt(e,t,n,i,a){if(t==mt.ByHeight)return this.blockAt(e,n,i,a);if(t==mt.ByPosNoHeight){let{from:d,to:m}=n.doc.lineAt(e);return new qr(d,m-d,0,0,0)}let{firstLine:s,perLine:o,perChar:u}=this.heightMetrics(n,a),l=n.doc.lineAt(e),c=o+l.length*u,f=l.number-s,h=i+o*f+u*(l.from-a-f);return new qr(l.from,l.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,t,n,i,a,s){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:o,perLine:u,perChar:l}=this.heightMetrics(n,a);for(let c=e,f=i;c<=t;){let h=n.doc.lineAt(c);if(c==e){let m=h.number-o;f+=u*m+l*(e-a-m)}let d=u+l*h.length;s(new qr(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let a=n[n.length-1];a instanceof Bt?n[n.length-1]=new Bt(a.length+i):n.push(null,new Bt(i-1))}if(e>0){let a=n[0];a instanceof Bt?n[0]=new Bt(e+a.length):n.unshift(new Bt(e-1),null)}return Yt.of(n)}decomposeLeft(e,t){t.push(new Bt(e-1),null)}decomposeRight(e,t){t.push(null,new Bt(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let a=t+this.length;if(i&&i.from<=t+this.length&&i.more){let s=[],o=Math.max(t,i.from),u=-1;for(i.from>t&&s.push(new Bt(i.from-t-1).updateHeight(e,t));o<=a&&i.more;){let c=e.doc.lineAt(o).length;s.length&&s.push(null);let f=i.heights[i.index++];u==-1?u=f:Math.abs(f-u)>=eo&&(u=-2);let h=new ur(c,f);h.outdated=!1,s.push(h),o+=c+1}o<=a&&s.push(null,new Bt(a-o).updateHeight(e,o));let l=Yt.of(s);return(u<0||Math.abs(l.height-this.height)>=eo||Math.abs(u-this.heightMetrics(e,t).perLine)>=eo)&&(e.heightChanged=!0),l}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class YA extends Yt{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,a,i+this.left.length+this.break)}lineAt(e,t,n,i,a){let s=i+this.left.height,o=a+this.left.length+this.break,u=t==mt.ByHeight?e<s:e<o,l=u?this.left.lineAt(e,t,n,i,a):this.right.lineAt(e,t,n,s,o);if(this.break||(u?l.to<o:l.from>o))return l;let c=t==mt.ByPosNoHeight?mt.ByPosNoHeight:mt.ByPos;return u?l.join(this.right.lineAt(o,c,n,s,o)):this.left.lineAt(o,c,n,i,a).join(l)}forEachLine(e,t,n,i,a,s){let o=i+this.left.height,u=a+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,n,i,a,s),t>=u&&this.right.forEachLine(e,t,n,o,u,s);else{let l=this.lineAt(u,mt.ByPos,n,i,a);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,a,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,o,u,s)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let a=[];e>0&&this.decomposeLeft(e,a);let s=a.length;for(let o of n)a.push(o);if(e>0&&wh(a,s-1),t<this.length){let o=a.length;this.decomposeRight(t,a),wh(a,o)}return Yt.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Yt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:a,right:s}=this,o=t+a.length+this.break,u=null;return i&&i.from<=t+a.length&&i.more?u=a=a.updateHeight(e,t,n,i):a.updateHeight(e,t,n),i&&i.from<=o+s.length&&i.more?u=s=s.updateHeight(e,o,n,i):s.updateHeight(e,o,n),u?this.balanced(a,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function wh(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof Bt&&(n=r[e+1])instanceof Bt&&r.splice(e-1,3,new Bt(t.length+1+n.length))}const KA=5;class $c{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ur?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new ur(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new S1(s,i,n)):(s||a||i>=KA)&&this.addLineDeco(i,a,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ur(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Bt(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ur)return e;let t=new ur(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ur)&&!this.isCovered?this.nodes.push(new ur(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof ur&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let a=new $c(n,e);return nt.spans(t,n,i,a,0),a.finish(n)}}function XA(r,e,t){let n=new ZA;return nt.compare(r,e,t,n,0),n.changes}class ZA{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&Fl(e,t,this.changes,5)}}function JA(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,i=n.defaultView||window,a=Math.max(0,t.left),s=Math.min(i.innerWidth,t.right),o=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let l=r.parentNode;l&&l!=n.body;)if(l.nodeType==1){let c=l,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();a=Math.max(a,h.left),s=Math.min(s,h.right),o=Math.max(o,h.top),u=l==r.parentNode?h.bottom:Math.min(u,h.bottom)}l=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:a-t.left,right:Math.max(a,s)-t.left,top:o-(t.top+e),bottom:Math.max(o,u)-(t.top+e)}}function jA(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class $u{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],a=t[n];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,t){return ke.replace({widget:new QA(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class QA extends dn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Ah{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Dh,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Ic).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new WA(t),this.stateDeco=e.facet(Fa).filter(n=>typeof n!="function"),this.heightMap=Yt.empty().applyChanges(this.stateDeco,rt.empty,this.heightOracle.setDoc(e.doc),[new br(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ke.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:a,to:s})=>i>=a&&i<=s)){let{from:a,to:s}=this.lineBlockAt(i);e.push(new ds(a,s))}}this.viewports=e.sort((n,i)=>n.from-i.from),this.scaler=this.heightMap.height<=7e6?Dh:new rD(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:ga(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Fa).filter(c=>typeof c!="function");let i=e.changedRanges,a=br.extendWithRanges(i,XA(n,this.stateDeco,e?e.changes:St.empty(this.state.doc.length))),s=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=s&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(r1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?vt.RTL:vt.LTR;let s=this.heightOracle.mustRefreshForWrapping(a),o=t.getBoundingClientRect(),u=s||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let l=0,c=0;if(o.width&&o.height){let w=o.width/t.offsetWidth,x=o.height/t.offsetHeight;w>.995&&w<1.005&&(w=1),x>.995&&x<1.005&&(x=1),(this.scaleX!=w||this.scaleY!=x)&&(this.scaleX=w,this.scaleY=x,l|=8,s=u=!0)}let f=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=L0(e.scrollDOM);let m=(this.printing?jA:JA)(t,this.paddingTop),p=m.top-this.pixelViewport.top,v=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(u=!0)),!this.inView&&!this.scrollTarget)return 0;let A=o.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),u){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(s=!0),s||i.lineWrapping&&Math.abs(A-this.contentDOMWidth)>i.charWidth){let{lineHeight:x,charWidth:b,textHeight:D}=e.docView.measureTextSize();s=x>0&&i.refresh(a,x,b,D,A/b,w),s&&(e.docView.minWidth=0,l|=8)}p>0&&v>0?c=Math.max(p,v):p<0&&v<0&&(c=Math.min(p,v)),i.heightChanged=!1;for(let x of this.viewports){let b=x.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(x);this.heightMap=(s?Yt.empty().applyChanges(this.stateDeco,rt.empty,this.heightOracle,[new br(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new GA(x.from,b))}i.heightChanged&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:s,visibleBottom:o}=this,u=new ds(i.lineAt(s-n*1e3,mt.ByHeight,a,0,0).from,i.lineAt(o+(1-n)*1e3,mt.ByHeight,a,0,0).to);if(t){let{head:l}=t.range;if(l<u.from||l>u.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(l,mt.ByPos,a,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&l<u.from?h=f.top:h=f.bottom-c,u=new ds(i.lineAt(h-1e3/2,mt.ByHeight,a,0,0).from,i.lineAt(h+c+1e3/2,mt.ByHeight,a,0,0).to)}}return u}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new ds(this.heightMap.lineAt(n,mt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,mt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,mt.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:o}=this;return(e==0||i<=s-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=o+Math.max(10,Math.min(n,250)))&&i>s-2*1e3&&a<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new $u(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,a=i>>1,s=i<<1;if(this.defaultTextDirection!=vt.LTR&&!n)return[];let o=[],u=(l,c,f,h)=>{if(c-l<a)return;let d=this.state.selection.main,m=[d.from];d.empty||m.push(d.to);for(let v of m)if(v>l&&v<c){u(l,v-10,f,h),u(v+10,c,f,h);return}let p=tD(e,v=>v.from>=f.from&&v.to<=f.to&&Math.abs(v.from-l)<a&&Math.abs(v.to-c)<a&&!m.some(g=>v.from<g&&v.to>g));if(!p){if(c<f.to&&t&&n&&t.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=t.moveToLineBoundary(he.cursor(c),!1,!0).head;v>l&&(c=v)}p=new $u(l,c,this.gapSize(f,l,c,h))}o.push(p)};for(let l of this.viewportLines){if(l.length<s)continue;let c=eD(l.from,l.to,this.stateDeco);if(c.total<s)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(n){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,v;if(f!=null){let g=ps(c,f),A=((this.visibleBottom-this.visibleTop)/2+m)/l.height;p=g-A,v=g+A}else p=(this.visibleTop-l.top-m)/l.height,v=(this.visibleBottom-l.top+m)/l.height;h=ms(c,p),d=ms(c,v)}else{let m=c.total*this.heightOracle.charWidth,p=i*this.heightOracle.charWidth,v,g;if(f!=null){let A=ps(c,f),y=((this.pixelViewport.right-this.pixelViewport.left)/2+p)/m;v=A-y,g=A+y}else v=(this.pixelViewport.left-p)/m,g=(this.pixelViewport.right+p)/m;h=ms(c,v),d=ms(c,g)}h>l.from&&u(l.from,h,l,c),d<l.to&&u(d,l.to,l,c)}return o}gapSize(e,t,n,i){let a=ps(i,n)-ps(i,t);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){$u.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ke.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];nt.spans(e,this.viewport.from,this.viewport.to,{span(i,a){t.push({from:i,to:a})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=t[a].from||i.to!=t[a].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ga(this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return ga(this.heightMap.lineAt(this.scaler.fromDOM(e),mt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return ga(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ds{constructor(e,t){this.from=e,this.to=t}}function eD(r,e,t){let n=[],i=r,a=0;return nt.spans(t,r,e,{span(){},point(s,o){s>i&&(n.push({from:i,to:s}),a+=s-i),i=o}},20),i<e&&(n.push({from:i,to:e}),a+=e-i),{total:a,ranges:n}}function ms({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let i=0;;i++){let{from:a,to:s}=e[i],o=s-a;if(n<=o)return a+n;n-=o}}function ps(r,e){let t=0;for(let{from:n,to:i}of r.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/r.total}function tD(r,e){for(let t of r)if(e(t))return t}const Dh={toDOM(r){return r},fromDOM(r){return r},scale:1};class rD{constructor(e,t,n){let i=0,a=0,s=0;this.viewports=n.map(({from:o,to:u})=>{let l=t.lineAt(o,mt.ByPos,e,0,0).top,c=t.lineAt(u,mt.ByPos,e,0,0).bottom;return i+=c-l,{from:o,to:u,top:l,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let o of this.viewports)o.domTop=s+(o.top-a)*this.scale,s=o.domBottom=o.domTop+(o.bottom-o.top),a=o.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return i+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,i=a.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,i=a.domBottom}}}function ga(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new qr(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(i=>ga(i,e)):r._content)}const gs=Ce.define({combine:r=>r.join(" ")}),zl=Ce.define({combine:r=>r.indexOf(!0)>-1}),ql=Bn.newName(),N1=Bn.newName(),C1=Bn.newName(),E1={"&light":"."+N1,"&dark":"."+C1};function Ul(r,e,t){return new Bn(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return r;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):r+" "+n}})}const nD=Ul("."+ql,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},E1),va="￿";class iD{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(et.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=va}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let a=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==t)break;let o=pt.get(i),u=pt.get(s);(o&&u?o.breakAfter:(o?o.breakAfter:Sh(i))||Sh(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=s}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,s=1,o;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(o=i.exec(t))&&(a=o.index,s=o[0].length),this.append(t.slice(n,a<0?t.length:a)),a<0)break;if(this.lineBreak(),s>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=s-1);n=a+s}}readNode(e){if(e.cmIgnore)return;let t=pt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function Sh(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class Nh{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class aD{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let o=a||s?[]:uD(e),u=new iD(o,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=lD(o,this.bounds.from)}else{let o=e.observer.selectionRange,u=a&&a.node==o.focusNode&&a.offset==o.focusOffset||!Cl(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),l=s&&s.node==o.anchorNode&&s.offset==o.anchorOffset||!Cl(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset);this.newSel=he.single(l,u)}}}function M1(r,e){let t,{newSel:n}=e,i=r.state.selection.main,a=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:o}=e.bounds,u=i.from,l=null;(a===8||Me.android&&e.text.length<o-s)&&(u=i.to,l="end");let c=oD(r.state.doc.sliceString(s,o,va),e.text,u-s,l);c&&(Me.chrome&&a==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==va+va&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:rt.of(e.text.slice(c.from,c.toB).split(va))})}else n&&(!r.hasFocus&&r.state.facet(tu)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,i.to))}:(Me.mac||Me.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=he.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:rt.of([" "])}):Me.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=he.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:rt.of([" "])}),t){if(Me.ios&&r.inputState.flushIOSKey()||Me.android&&(t.from==i.from&&t.to==i.to&&t.insert.length==1&&t.insert.lines==2&&Ci(r.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&t.insert.length==0||a==8&&t.insert.length<t.to-t.from&&t.to>i.head)&&Ci(r.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&Ci(r.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let o,u=()=>o||(o=sD(r,t,n));return r.state.facet(Q0).some(l=>l(r,t.from,t.to,s,u))||r.dispatch(u()),!0}else if(n&&!n.main.eq(i)){let s=!1,o="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(s=!0),o=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:s,userEvent:o}),!0}else return!1}function sD(r,e,t){let n,i=r.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let o=a.from<e.from?i.sliceDoc(a.from,e.from):"",u=a.to>e.to?i.sliceDoc(e.to,a.to):"";n=i.replaceSelection(r.state.toText(o+e.insert.sliceString(0,void 0,r.state.lineBreak)+u))}else{let o=i.changes(e),u=t&&t.main.to<=o.newLength?t.main:void 0;if(i.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let l=r.state.sliceDoc(e.from,e.to),c,f=t&&h1(r,t.main.head);if(f){let m=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-m}}else c=r.state.doc.lineAt(a.head);let h=a.to-e.to,d=a.to-a.from;n=i.changeByRange(m=>{if(m.from==a.from&&m.to==a.to)return{changes:o,range:u||m.map(o)};let p=m.to-h,v=p-l.length;if(m.to-m.from!=d||r.state.sliceDoc(v,p)!=l||m.to>=c.from&&m.from<=c.to)return{range:m};let g=i.changes({from:v,to:p,insert:e.insert}),A=m.to-a.to;return{changes:g,range:u?he.range(Math.max(0,u.anchor+A),Math.max(0,u.head+A)):m.map(g)}})}else n={changes:o,selection:u&&i.selection.replaceRange(u)}}let s="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,s+=".compose",r.inputState.compositionFirstChange&&(s+=".start",r.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:s,scrollIntoView:!0})}function oD(r,e,t,n){let i=Math.min(r.length,e.length),a=0;for(;a<i&&r.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&r.length==e.length)return null;let s=r.length,o=e.length;for(;s>0&&o>0&&r.charCodeAt(s-1)==e.charCodeAt(o-1);)s--,o--;if(n=="end"){let u=Math.max(0,a-Math.min(s,o));t-=s+u-a}if(s<a&&r.length<e.length){let u=t<=a&&t>=s?a-t:0;a-=u,o=a+(o-s),s=a}else if(o<a){let u=t<=a&&t>=o?a-t:0;a-=u,s=a+(s-o),o=a}return{from:a,toA:s,toB:o}}function uD(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:a}=r.observer.selectionRange;return t&&(e.push(new Nh(t,n)),(i!=t||a!=n)&&e.push(new Nh(i,a))),e}function lD(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?he.single(t+e,n+e):null}const cD={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_u=Me.ie&&Me.ie_version<=11;class fD{constructor(e){this.view=e,this.active=!1,this.selectionRange=new X2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Me.ie&&Me.ie_version<=11||Me.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),_u&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(tu)?n.root.activeElement!=this.dom:!js(n.dom,i))return;let a=i.anchorNode&&n.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Me.ie&&Me.ie_version<=11||Me.android&&Me.chrome)&&!n.state.selection.main.empty&&i.focusNode&&fo(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Me.safari&&e.root.nodeType==11&&W2(this.dom.ownerDocument)==this.dom&&hD(this.view)||co(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=js(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&J2(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,cD),_u&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_u&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&Ci(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let a of e){let s=this.readMutation(a);s&&(s.typeOver&&(i=!0),t==-1?{from:t,to:n}=s:(t=Math.min(s.from,t),n=Math.max(s.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&js(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new aD(this.view,e,t,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,i=M1(this.view,t);return this.view.state==n&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=Ch(t,e.previousSibling||e.target.previousSibling,-1),i=Ch(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Ch(r,e,t){for(;e;){let n=pt.get(e);if(n&&n.parent==r)return n;let i=e.parentNode;e=i!=r.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function hD(r){let e=null;function t(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let n=e.startContainer,i=e.startOffset,a=e.endContainer,s=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return fo(o.node,o.offset,a,s)&&([n,i,a,s]=[a,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:s}}class Ne{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(n=>n.forEach(i=>t(i,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Z2(e.parent)||document,this.viewState=new Ah(e.state||et.create(e)),this.plugins=this.state.facet(ma).map(n=>new Ru(n));for(let n of this.plugins)n.update(this);this.observer=new fD(this),this.inputState=new MA(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ih(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let t=e.length==1&&e[0]instanceof Nt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,a=this.state;for(let h of e){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed){this.viewState.state=a;return}let s=this.hasFocus,o=0,u=null;e.some(h=>h.annotation(w1))?(this.inputState.notifiedFocused=s,o=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,u=A1(a,s),u||(o=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(et.phrases)!=this.state.facet(et.phrases))return this.setState(a);i=po.create(this,a,e),i.flags|=o;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new mo(d.empty?d:he.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(rh)&&(f=d.value)}this.viewState.update(i,f),this.bidiCache=go.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(pa)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(gs)!=i.state.facet(gs)&&(this.viewState.mustMeasureContent=!0),(t||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(kl))h(i);(u||c)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),c&&!M1(this,c)&&l.force&&Ci(this.contentDOM,l.key,l.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new Ah(e),this.plugins=e.facet(ma).map(n=>new Ru(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new ih(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ma),n=e.state.facet(ma);if(t!=n){let i=[];for(let a of n){let s=t.indexOf(a);if(s<0)i.push(new Ru(a));else{let o=this.plugins[s];o.mustUpdate=e,i.push(o)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(s<0)if(L0(n))a=-1,s=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);a=d.from,s=d.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];u&4||([this.measureRequests,l]=[l,this.measureRequests]);let c=l.map(d=>{try{return d.read(this)}catch(m){return Cr(this.state,m),Eh}}),f=po.create(this,this.state,[]),h=!1;f.flags|=u,t?t.flags|=u:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f));for(let d=0;d<l.length;d++)if(c[d]!=Eh)try{let m=l[d];m.write&&m.write(c[d],this)}catch(m){Cr(this.state,m)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let m=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-s;if(m>1||m<-1){i=i+m,n.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(kl))o(t)}get themeClasses(){return ql+" "+(this.state.facet(zl)?C1:N1)+" "+this.state.facet(gs)}updateAttrs(){let e=Mh(this,n1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(tu)?"true":"false",class:"cm-content",style:`${Me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Mh(this,Ic,t);let n=this.observer.ignore(()=>{let i=Bl(this.contentDOM,this.contentAttrs,t),a=Bl(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(Ne.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(pa);let e=this.state.facet(Ne.cspNonce);Bn.mount(this.root,this.styleModules.concat(nD).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Pu(this,e,ch(this,e,t,n))}moveByGroup(e,t){return Pu(this,e,ch(this,e,t,n=>CA(this,e.head,n)))}moveToLineBoundary(e,t,n=!0){return NA(this,e,t,n)}moveVertically(e,t,n){return Pu(this,e,EA(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),m1(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),s=a[Dn.find(a,e-i.from,-1,t)];return Fc(n,s.dir==vt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(t1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>dD)return c1(e.length);let t=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==t&&(a.fresh||l1(a.isolates,n=nh(this,e.from,e.to))))return a.order;n||(n=nh(this,e.from,e.to));let i=fA(e.text,t,n);return this.bidiCache.push(new go(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{$0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return rh.of(new mo(typeof e=="number"?he.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Mt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Mt.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Bn.newName(),i=[gs.of(n),pa.of(Ul(`.${n}`,e))];return t&&t.dark&&i.push(zl.of(!0)),i}static baseTheme(e){return Yi.lowest(pa.of(Ul("."+ql,e,E1)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&pt.get(n)||pt.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}Ne.styleModule=pa;Ne.inputHandler=Q0;Ne.focusChangeEffect=e1;Ne.perLineTextDirection=t1;Ne.exceptionSink=j0;Ne.updateListener=kl;Ne.editable=tu;Ne.mouseSelectionStyle=J0;Ne.dragMovesSelection=Z0;Ne.clickAddsSelectionRange=X0;Ne.decorations=Fa;Ne.atomicRanges=Pc;Ne.bidiIsolatedRanges=i1;Ne.scrollMargins=a1;Ne.darkTheme=zl;Ne.cspNonce=Ce.define({combine:r=>r.length?r[0]:""});Ne.contentAttributes=Ic;Ne.editorAttributes=n1;Ne.lineWrapping=Ne.contentAttributes.of({class:"cm-lineWrapping"});Ne.announce=He.define();const dD=4096,Eh={};class go{constructor(e,t,n,i,a,s){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=a,this.order=s}static update(e,t){if(t.empty&&!e.some(a=>a.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:vt.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let s=e[a];s.dir==i&&!t.touchesRange(s.from,s.to)&&n.push(new go(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return n}}function Mh(r,e,t){for(let n=r.state.facet(e),i=n.length-1;i>=0;i--){let a=n[i],s=typeof a=="function"?a(r):a;s&&Ol(s,t)}return t}const mD=Me.mac?"mac":Me.windows?"win":Me.linux?"linux":"key";function pD(r,e){const t=r.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,a,s,o;for(let u=0;u<t.length-1;++u){const l=t[u];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))a=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))e=="mac"?o=!0:a=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(n="Alt-"+n),a&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function vs(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const gD=Yi.default(Ne.domEventHandlers({keydown(r,e){return O1(T1(e.state),r,e,"editor")}})),vo=Ce.define({enables:gD}),Th=new WeakMap;function T1(r){let e=r.facet(vo),t=Th.get(e);return t||Th.set(e,t=bD(e.reduce((n,i)=>n.concat(i),[]))),t}function vD(r,e,t){return O1(T1(r.state),e,r,t)}let xn=null;const yD=4e3;function bD(r,e=mD){let t=Object.create(null),n=Object.create(null),i=(s,o)=>{let u=n[s];if(u==null)n[s]=o;else if(u!=o)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},a=(s,o,u,l,c)=>{var f,h;let d=t[s]||(t[s]=Object.create(null)),m=o.split(/ (?!$)/).map(g=>pD(g,e));for(let g=1;g<m.length;g++){let A=m.slice(0,g).join(" ");i(A,!0),d[A]||(d[A]={preventDefault:!0,stopPropagation:!1,run:[y=>{let w=xn={view:y,prefix:A,scope:s};return setTimeout(()=>{xn==w&&(xn=null)},yD),!0}]})}let p=m.join(" ");i(p,!1);let v=d[p]||(d[p]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});u&&v.run.push(u),l&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let s of r){let o=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let l of o){let c=t[l]||(t[l]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in c)c[f].run.push(s.any)}let u=s[e]||s.key;if(u)for(let l of o)a(l,u,s.run,s.preventDefault,s.stopPropagation),s.shift&&a(l,"Shift-"+u,s.shift,s.preventDefault,s.stopPropagation)}return t}function O1(r,e,t,n){let i=V2(e),a=Ft(i,0),s=gr(a)==i.length&&i!=" ",o="",u=!1,l=!1,c=!1;xn&&xn.view==t&&xn.scope==n&&(o=xn.prefix+" ",g1.indexOf(e.keyCode)<0&&(l=!0,xn=null));let f=new Set,h=v=>{if(v){for(let g of v.run)if(!f.has(g)&&(f.add(g),g(t,e)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),l=!0)}return!1},d=r[n],m,p;return d&&(h(d[o+vs(i,e,!s)])?u=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Me.windows&&e.ctrlKey&&e.altKey)&&(m=Fn[e.keyCode])&&m!=i?(h(d[o+vs(m,e,!0)])||e.shiftKey&&(p=Oa[e.keyCode])!=i&&p!=m&&h(d[o+vs(p,e,!1)]))&&(u=!0):s&&e.shiftKey&&h(d[o+vs(i,e,!0)])&&(u=!0),!u&&h(d._any)&&(u=!0)),l&&(u=!0),u&&c&&e.stopPropagation(),u}class Qa{constructor(e,t,n,i,a){this.className=e,this.left=t,this.top=n,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let a=B1(e);return[new Qa(t,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return xD(e,t,n)}}function B1(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==vt.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function Oh(r,e,t){let n=he.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(n,!0,!0).from),type:Gt.Text}}function xD(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let n=Math.max(t.from,r.viewport.from),i=Math.min(t.to,r.viewport.to),a=r.textDirection==vt.LTR,s=r.contentDOM,o=s.getBoundingClientRect(),u=B1(r),l=s.querySelector(".cm-line"),c=l&&window.getComputedStyle(l),f=o.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=o.right-(c?parseInt(c.paddingRight):0),d=_l(r,n),m=_l(r,i),p=d.type==Gt.Text?d:null,v=m.type==Gt.Text?m:null;if(p&&(r.lineWrapping||d.widgetLineBreaks)&&(p=Oh(r,n,p)),v&&(r.lineWrapping||m.widgetLineBreaks)&&(v=Oh(r,i,v)),p&&v&&p.from==v.from)return A(y(t.from,t.to,p));{let x=p?y(t.from,null,p):w(d,!1),b=v?y(null,t.to,v):w(m,!0),D=[];return(p||d).to<(v||m).from-(p&&v?1:0)||d.widgetLineBreaks>1&&x.bottom+r.defaultLineHeight/2<b.top?D.push(g(f,x.bottom,h,b.top)):x.bottom<b.top&&r.elementAtHeight((x.bottom+b.top)/2).type==Gt.Text&&(x.bottom=b.top=(x.bottom+b.top)/2),A(x).concat(D).concat(A(b))}function g(x,b,D,N){return new Qa(e,x-u.left,b-u.top-.01,D-x,N-b+.01)}function A({top:x,bottom:b,horizontal:D}){let N=[];for(let C=0;C<D.length;C+=2)N.push(g(D[C],x,D[C+1],b));return N}function y(x,b,D){let N=1e9,C=-1e9,S=[];function M(I,k,T,O,U){let F=r.coordsAtPos(I,I==D.to?-2:2),_=r.coordsAtPos(T,T==D.from?2:-2);!F||!_||(N=Math.min(F.top,_.top,N),C=Math.max(F.bottom,_.bottom,C),U==vt.LTR?S.push(a&&k?f:F.left,a&&O?h:_.right):S.push(!a&&O?f:_.left,!a&&k?h:F.right))}let E=x??D.from,R=b??D.to;for(let I of r.visibleRanges)if(I.to>E&&I.from<R)for(let k=Math.max(I.from,E),T=Math.min(I.to,R);;){let O=r.state.doc.lineAt(k);for(let U of r.bidiSpans(O)){let F=U.from+O.from,_=U.to+O.from;if(F>=T)break;_>k&&M(Math.max(F,k),x==null&&F<=E,Math.min(_,T),b==null&&_>=R,U.dir)}if(k=O.to+1,k>=T)break}return S.length==0&&M(E,x==null,R,b==null,r.textDirection),{top:N,bottom:C,horizontal:S}}function w(x,b){let D=o.top+(b?x.top:x.bottom);return{top:D,bottom:D,horizontal:[]}}}function wD(r,e){return r.constructor==e.constructor&&r.eq(e)}class AD{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(to)!=e.state.facet(to)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,n=e.facet(to);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!wD(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const to=Ce.define();function F1(r){return[Mt.define(e=>new AD(e,r)),to.of(r)]}const k1=!Me.ios,Ra=Ce.define({combine(r){return Or(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function DD(r={}){return[Ra.of(r),SD,ND,CD,r1.of(!0)]}function R1(r){return r.startState.facet(Ra)!=r.state.facet(Ra)}const SD=F1({above:!0,markers(r){let{state:e}=r,t=e.facet(Ra),n=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||k1:t.drawRangeCursor){let s=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=i.empty?i:he.cursor(i.head,i.head>i.anchor?-1:1);for(let u of Qa.forRange(r,s,o))n.push(u)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=R1(r);return t&&Bh(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){Bh(e.state,r)},class:"cm-cursorLayer"});function Bh(r,e){e.style.animationDuration=r.facet(Ra).cursorBlinkRate+"ms"}const ND=F1({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Qa.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||R1(r)},class:"cm-selectionLayer"}),I1={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};k1&&(I1[".cm-line"].caretColor="transparent !important");const CD=Yi.highest(Ne.theme(I1)),P1=He.define({map(r,e){return r==null?null:e.mapPos(r)}}),ya=wt.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,n)=>n.is(P1)?n.value:t,r)}}),ED=Mt.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(ya);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(ya)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(ya),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(ya)!=r&&this.view.dispatch({effects:P1.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function MD(){return[ya,ED]}function Fh(r,e,t,n,i){e.lastIndex=0;for(let a=r.iterRange(t,n),s=t,o;!a.next().done;s+=a.value.length)if(!a.lineBreak)for(;o=e.exec(a.value);)i(s+o.index,o)}function TD(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let n=[];for(let{from:i,to:a}of t)i=Math.max(r.state.doc.lineAt(i).from,i-e),a=Math.min(r.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=a:n.push({from:i,to:a});return n}class OD{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:a,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(o,u,l,c)=>i(c,l,l+o[0].length,o,u);else if(typeof n=="function")this.addMatch=(o,u,l,c)=>{let f=n(o,u,l);f&&c(l,l+o[0].length,f)};else if(n)this.addMatch=(o,u,l,c)=>c(l,l+o[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=s}createDeco(e){let t=new Qn,n=t.add.bind(t);for(let{from:i,to:a}of TD(e,this.maxLength))Fh(e.state.doc,this.regexp,i,a,(s,o)=>this.addMatch(o,e,s,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,s,o,u)=>{u>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(u,i))}),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let a of e.visibleRanges){let s=Math.max(a.from,n),o=Math.min(a.to,i);if(o>s){let u=e.state.doc.lineAt(s),l=u.to<o?e.state.doc.lineAt(o):u,c=Math.max(a.from,u.from),f=Math.min(a.to,l.to);if(this.boundary){for(;s>u.from;s--)if(this.boundary.test(u.text[s-1-u.from])){c=s;break}for(;o<l.to;o++)if(this.boundary.test(l.text[o-l.from])){f=o;break}}let h=[],d,m=(p,v,g)=>h.push(g.range(p,v));if(u==l)for(this.regexp.lastIndex=c-u.from;(d=this.regexp.exec(u.text))&&d.index<f-u.from;)this.addMatch(d,e,d.index+u.from,m);else Fh(e.state.doc,this.regexp,c,f,(p,v)=>this.addMatch(v,e,p,m));t=t.update({filterFrom:c,filterTo:f,filter:(p,v)=>p<c||v>f,add:h})}}return t}}const Hl=/x/.unicode!=null?"gu":"g",BD=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Hl),FD={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Lu=null;function kD(){var r;if(Lu==null&&typeof document<"u"&&document.body){let e=document.body.style;Lu=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return Lu||!1}const ro=Ce.define({combine(r){let e=Or(r,{render:null,specialChars:BD,addSpecialChars:null});return(e.replaceTabs=!kD())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Hl)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Hl)),e}});function RD(r={}){return[ro.of(r),ID()]}let kh=null;function ID(){return kh||(kh=Mt.fromClass(class{constructor(r){this.view=r,this.decorations=ke.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(ro)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new OD({regexp:r.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,a=Ft(e[0],0);if(a==9){let s=i.lineAt(n),o=t.state.tabSize,u=Ki(s.text,o,n-s.from);return ke.replace({widget:new LD((o-u%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=ke.replace({widget:new _D(r,a)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(ro);r.startState.facet(ro)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const PD="•";function $D(r){return r>=32?PD:r==10?"␤":String.fromCharCode(9216+r)}class _D extends dn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=$D(this.code),n=e.state.phrase("Control character")+" "+(FD[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class LD extends dn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function zD(){return UD}const qD=ke.line({class:"cm-activeLine"}),UD=Mt.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let n of r.state.selection.ranges){let i=r.lineBlockAt(n.head);i.from>e&&(t.push(qD.range(i.from)),e=i.from)}return ke.set(t)}},{decorations:r=>r.decorations}),Vl=2e3;function HD(r,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),a=[];if(e.off>Vl||t.off>Vl||e.col<0||t.col<0){let s=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let u=n;u<=i;u++){let l=r.doc.line(u);l.length<=o&&a.push(he.range(l.from+s,l.to+o))}}else{let s=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let u=n;u<=i;u++){let l=r.doc.line(u),c=Dl(l.text,s,r.tabSize,!0);if(c<0)a.push(he.cursor(l.to));else{let f=Dl(l.text,o,r.tabSize);a.push(he.range(l.from+c,l.from+f))}}}return a}function VD(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function Rh(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(t),i=t-n.from,a=i>Vl?-1:i==n.length?VD(r,e.clientX):Ki(n.text,r.state.tabSize,t-n.from);return{line:n.number,col:a,off:i}}function WD(r,e){let t=Rh(r,e),n=r.state.selection;return t?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(t.line).from),s=i.state.doc.lineAt(a);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},n=n.map(i.changes)}},get(i,a,s){let o=Rh(r,i);if(!o)return n;let u=HD(r.state,t,o);return u.length?s?he.create(u.concat(n.ranges)):he.create(u):n}}:null}function GD(r){let e=(r==null?void 0:r.eventFilter)||(t=>t.altKey&&t.button==0);return Ne.mouseSelectionStyle.of((t,n)=>e(n)?WD(t,n):null)}const YD={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},KD={style:"cursor: crosshair"};function XD(r={}){let[e,t]=YD[r.key||"Alt"],n=Mt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,Ne.contentAttributes.of(i=>{var a;return!((a=i.plugin(n))===null||a===void 0)&&a.isDown?KD:null})]}const ys="-10000px";class $1{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),i=n.filter(s=>s);if(n===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let a=[];for(let s=0;s<i.length;s++){let o=i[s],u=-1;if(o){for(let l=0;l<this.tooltips.length;l++){let c=this.tooltips[l];c&&c.create==o.create&&(u=l)}if(u<0)a[s]=this.createTooltipView(o);else{let l=a[s]=this.tooltipViews[u];l.update&&l.update(e)}}}for(let s of this.tooltipViews)a.indexOf(s)<0&&(s.dom.remove(),(t=s.destroy)===null||t===void 0||t.call(s));return this.input=n,this.tooltips=i,this.tooltipViews=a,!0}}function ZD(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const zu=Ce.define({combine:r=>{var e,t,n;return{position:Me.ios?"absolute":((e=r.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||ZD}}}),Ih=new WeakMap,_1=Mt.fromClass(class{constructor(r){this.view=r,this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(zu);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new $1(r,ru,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(zu);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r){let e=r.create(this.view);if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=ys,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var r,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(r=t.destroy)===null||r===void 0||r.call(t);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,n=!1;if(this.position=="fixed"){let i=this.manager.tooltipViews;n=i.length>0&&i[0].dom.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((i,a)=>{let s=this.manager.tooltipViews[a];return s.getCoords?s.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(zu).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{editor:t,space:n,scaleX:i,scaleY:a}=r,s=[];for(let o=0;o<this.manager.tooltips.length;o++){let u=this.manager.tooltips[o],l=this.manager.tooltipViews[o],{dom:c}=l,f=r.pos[o],h=r.size[o];if(!f||f.bottom<=Math.max(t.top,n.top)||f.top>=Math.min(t.bottom,n.bottom)||f.right<Math.max(t.left,n.left)-.1||f.left>Math.min(t.right,n.right)+.1){c.style.top=ys;continue}let d=u.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,m=d?7:0,p=h.right-h.left,v=(e=Ih.get(l))!==null&&e!==void 0?e:h.bottom-h.top,g=l.offset||jD,A=this.view.textDirection==vt.LTR,y=h.width>n.right-n.left?A?n.left:n.right-h.width:A?Math.min(f.left-(d?14:0)+g.x,n.right-p):Math.max(n.left,f.left-p+(d?14:0)-g.x),w=!!u.above;!u.strictSide&&(w?f.top-(h.bottom-h.top)-g.y<n.top:f.bottom+(h.bottom-h.top)+g.y>n.bottom)&&w==n.bottom-f.bottom>f.top-n.top&&(w=!w);let x=(w?f.top-n.top:n.bottom-f.bottom)-m;if(x<v&&l.resize!==!1){if(x<this.view.defaultLineHeight){c.style.top=ys;continue}Ih.set(l,v),c.style.height=(v=x)/a+"px"}else c.style.height&&(c.style.height="");let b=w?f.top-v-m-g.y:f.bottom+m+g.y,D=y+p;if(l.overlap!==!0)for(let N of s)N.left<D&&N.right>y&&N.top<b+v&&N.bottom>b&&(b=w?N.top-v-2-m:N.bottom+m+2);if(this.position=="absolute"?(c.style.top=(b-r.parent.top)/a+"px",c.style.left=(y-r.parent.left)/i+"px"):(c.style.top=b/a+"px",c.style.left=y/i+"px"),d){let N=f.left+(A?g.x:-g.x)-(y+14-7);d.style.left=N/i+"px"}l.overlap!==!0&&s.push({left:y,top:b,right:D,bottom:b+v}),c.classList.toggle("cm-tooltip-above",w),c.classList.toggle("cm-tooltip-below",!w),l.positioned&&l.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=ys}},{eventObservers:{scroll(){this.maybeMeasure()}}}),JD=Ne.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),jD={x:0,y:0},ru=Ce.define({enables:[_1,JD]}),yo=Ce.define();class _c{static create(e){return new _c(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new $1(e,yo,t=>this.createHostedView(t))}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}}const QD=ru.compute([yo],r=>{let e=r.facet(yo).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:_c.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class eS{constructor(e,t,n,i,a){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,a=1;if(n instanceof An)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let o=e.coordsAtPos(i);if(!o||t.y<o.top||t.y>o.bottom||t.x<o.left-e.defaultCharacterWidth||t.x>o.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),l=u&&u.dir==vt.RTL?-1:1;a=t.x<o.left?-l:l}let s=this.source(e,i,a);if(s!=null&&s.then){let o=this.pending={pos:i};s.then(u=>{this.pending==o&&(this.pending=null,u&&e.dispatch({effects:this.setHover.of(u)}))},u=>Cr(e.state,u,"hover tooltip"))}else s&&e.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!Ph(this.lastMove.target)||this.pending){let{pos:i}=n||this.pending,a=(t=n==null?void 0:n.end)!==null&&t!==void 0?t:i;(i==a?this.view.posAtCoords(this.lastMove)!=i:!tS(this.view,i,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Ph(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Ph(r){for(let e=r;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function tS(r,e,t,n,i,a){let s=r.scrollDOM.getBoundingClientRect(),o=r.documentTop+r.documentPadding.top+r.contentHeight;if(s.left>n||s.right<n||s.top>i||Math.min(s.bottom,o)<i)return!1;let u=r.posAtCoords({x:n,y:i},!1);return u>=e&&u<=t}function rS(r,e={}){let t=He.define(),n=wt.define({create(){return null},update(i,a){if(i&&(e.hideOnChange&&(a.docChanged||a.selection)||e.hideOn&&e.hideOn(a,i)))return null;if(i&&a.docChanged){let s=a.changes.mapPos(i.pos,-1,Wt.TrackDel);if(s==null)return null;let o=Object.assign(Object.create(null),i);o.pos=s,i.end!=null&&(o.end=a.changes.mapPos(i.end)),i=o}for(let s of a.effects)s.is(t)&&(i=s.value),s.is(nS)&&(i=null);return i},provide:i=>yo.from(i)});return[n,Mt.define(i=>new eS(i,r,n,t,e.hoverTime||300)),QD]}function L1(r,e){let t=r.plugin(_1);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const nS=He.define(),$h=Ce.define({combine(r){let e,t;for(let n of r)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ia(r,e){let t=r.plugin(z1),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const z1=Mt.fromClass(class{constructor(r){this.input=r.state.facet(Pa),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet($h);this.top=new bs(r,!0,e.topContainer),this.bottom=new bs(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet($h);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new bs(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new bs(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(Pa);if(t!=this.input){let n=t.filter(u=>u),i=[],a=[],s=[],o=[];for(let u of n){let l=this.specs.indexOf(u),c;l<0?(c=u(r.view),o.push(c)):(c=this.panels[l],c.update&&c.update(r)),i.push(c),(c.top?a:s).push(c)}this.specs=n,this.panels=i,this.top.sync(a),this.bottom.sync(s);for(let u of o)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>Ne.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class bs{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=_h(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=_h(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function _h(r){let e=r.nextSibling;return r.remove(),e}const Pa=Ce.define({enables:z1});class un extends jn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}un.prototype.elementClass="";un.prototype.toDOM=void 0;un.prototype.mapMode=Wt.TrackBefore;un.prototype.startSide=un.prototype.endSide=-1;un.prototype.point=!0;const no=Ce.define(),iS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>nt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Na=Ce.define();function aS(r){return[q1(),Na.of(Object.assign(Object.assign({},iS),r))]}const Wl=Ce.define({combine:r=>r.some(e=>e)});function q1(r){let e=[sS];return r&&r.fixed===!1&&e.push(Wl.of(!0)),e}const sS=Mt.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(Na).map(e=>new zh(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(Wl),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Wl)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=nt.iter(this.view.state.facet(no),this.view.viewport.from),n=[],i=this.gutters.map(a=>new oS(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let s=!0;for(let o of a.type)if(o.type==Gt.Text&&s){Gl(t,n,o.from);for(let u of i)u.line(this.view,o,n);s=!1}else if(o.widget)for(let u of i)u.widget(this.view,o)}else if(a.type==Gt.Text){Gl(t,n,a.from);for(let s of i)s.line(this.view,a,n)}else if(a.widget)for(let s of i)s.widget(this.view,a);for(let a of i)a.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(Na),t=r.state.facet(Na),n=r.docChanged||r.heightChanged||r.viewportChanged||!nt.eq(r.startState.facet(no),r.state.facet(no),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(r)&&(n=!0);else{n=!0;let i=[];for(let a of t){let s=e.indexOf(a);s<0?i.push(new zh(this.view,a)):(this.gutters[s].update(r),i.push(this.gutters[s]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>Ne.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==vt.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Lh(r){return Array.isArray(r)?r:[r]}function Gl(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class oS{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=nt.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,a=t.top-this.height;if(this.i==i.elements.length){let s=new U1(e,t.height,a,n);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,t.height,a,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];Gl(this.cursor,i,t.from),n.length&&(i=i.concat(n));let a=this.gutter.config.lineMarker(e,t,i);a&&i.unshift(a);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class zh{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let a=i.target,s;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let u=a.getBoundingClientRect();s=(u.top+u.bottom)/2}else s=i.clientY;let o=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[n](e,o,i)&&i.preventDefault()});this.markers=Lh(t.markers(e)),t.initialSpacer&&(this.spacer=new U1(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Lh(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!nt.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class U1{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t/e.scaleY+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n/e.scaleY+"px":""),uS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let a=0,s=0;;){let o=s,u=a<t.length?t[a++]:null,l=!1;if(u){let c=u.elementClass;c&&(n+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(u)){o=f,l=!0;break}}else o=this.markers.length;for(;s<o;){let c=this.markers[s++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!u)break;u.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),l&&s++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function uS(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const lS=Ce.define(),xi=Ce.define({combine(r){return Or(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let a=n[i],s=t[i];n[i]=a?(o,u,l)=>a(o,u,l)||s(o,u,l):s}return n}})}});class qu extends un{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Uu(r,e){return r.state.facet(xi).formatNumber(e,r.state)}const cS=Na.compute([xi],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lS)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new qu(Uu(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(xi)!=e.state.facet(xi),initialSpacer(e){return new qu(Uu(e,qh(e.state.doc.lines)))},updateSpacer(e,t){let n=Uu(t.view,qh(t.view.state.doc.lines));return n==e.number?e:new qu(n)},domEventHandlers:r.facet(xi).domEventHandlers}));function fS(r={}){return[xi.of(r),q1(),cS]}function qh(r){let e=9;for(;e<r;)e=e*10+9;return e}const hS=new class extends un{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},dS=no.compute(["selection"],r=>{let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.head).from;i>t&&(t=i,e.push(hS.range(i)))}return nt.of(e)});function mS(){return dS}const pS=1024;let gS=0;class Hu{constructor(e,t){this.from=e,this.to=t}}class Qe{constructor(e={}){this.id=gS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ir.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Qe.closedBy=new Qe({deserialize:r=>r.split(" ")});Qe.openedBy=new Qe({deserialize:r=>r.split(" ")});Qe.group=new Qe({deserialize:r=>r.split(" ")});Qe.contextHash=new Qe({perNode:!0});Qe.lookAhead=new Qe({perNode:!0});Qe.mounted=new Qe({perNode:!0});class bo{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Qe.mounted.id]}}const vS=Object.create(null);class ir{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):vS,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ir(e.name||"",t,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Qe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(Qe.group),a=-1;a<(i?i.length:0);a++){let s=t[a<0?n.name:i[a]];if(s)return s}}}}ir.none=new ir("",Object.create(null),0,8);class Lc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let a of e){let s=a(n);s&&(i||(i=Object.assign({},n.props)),i[s[0].id]=s[1])}t.push(i?new ir(n.name,i,n.id,n.flags):n)}return new Lc(t)}}const xs=new WeakMap,Uh=new WeakMap;var Rt;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Rt||(Rt={}));class yt{constructor(e,t,n,i,a){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[s,o]of a)this.props[typeof s=="number"?s:s.id]=o}}toString(){let e=bo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Kl(this.topNode,e)}cursorAt(e,t=0,n=0){let i=xs.get(this)||this.topNode,a=new Kl(i);return a.moveTo(e,t),xs.set(this,a._tree),a}get topNode(){return new xr(this,0,0,null)}resolve(e,t=0){let n=$a(xs.get(this)||this.topNode,e,t,!1);return xs.set(this,n),n}resolveInner(e,t=0){let n=$a(Uh.get(this)||this.topNode,e,t,!0);return Uh.set(this,n),n}resolveStack(e,t=0){return xS(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:a=this.length}=e,s=e.mode||0,o=(s&Rt.IncludeAnonymous)>0;for(let u=this.cursor(s|Rt.IncludeAnonymous);;){let l=!1;if(u.from<=a&&u.to>=i&&(!o&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;l=!0}for(;l&&n&&(o||!u.type.isAnonymous)&&n(u),!u.nextSibling();){if(!u.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Uc(ir.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new yt(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new yt(ir.none,t,n,i)))}static build(e){return wS(e)}}yt.empty=new yt(ir.none,[],[],0);class zc{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new zc(this.buffer,this.index)}}class ii{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ir.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return a+"("+s.join(",")+")"}findChild(e,t,n,i,a){let{buffer:s}=this,o=-1;for(let u=e;u!=t&&!(H1(a,i,s[u+1],s[u+2])&&(o=u,n>0));u=s[u+3]);return o}slice(e,t,n){let i=this.buffer,a=new Uint16Array(t-e),s=0;for(let o=e,u=0;o<t;){a[u++]=i[o++],a[u++]=i[o++]-n;let l=a[u++]=i[o++]-n;a[u++]=i[o++]-e,s=Math.max(s,l)}return new ii(a,s,this.set)}}function H1(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function $a(r,e,t,n){for(var i;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let s=!n&&r instanceof xr&&r.index<0?null:r.parent;if(!s)return r;r=s}let a=n?0:Rt.IgnoreOverlays;if(n)for(let s=r,o=s.parent;o;s=o,o=s.parent)s instanceof xr&&s.index<0&&((i=o.enter(e,t,a))===null||i===void 0?void 0:i.from)!=s.from&&(r=o);for(;;){let s=r.enter(e,t,a);if(!s)return r;r=s}}class V1{cursor(e=0){return new Kl(this,e)}getChild(e,t=null,n=null){let i=Hh(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return Hh(this,e,t,n)}resolve(e,t=0){return $a(this,e,t,!1)}resolveInner(e,t=0){return $a(this,e,t,!0)}matchContext(e){return Yl(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class xr extends V1{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,a=0){for(let s=this;;){for(let{children:o,positions:u}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let c=o[e],f=u[e]+s.from;if(H1(i,n,f,f+c.length)){if(c instanceof ii){if(a&Rt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,t,n-f,i);if(h>-1)return new Sn(new yS(s,c,e,f),null,h)}else if(a&Rt.IncludeAnonymous||!c.type.isAnonymous||qc(c)){let h;if(!(a&Rt.IgnoreMounts)&&(h=bo.get(c))&&!h.overlay)return new xr(h.tree,f,e,s);let d=new xr(c,f,e,s);return a&Rt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?c.children.length-1:0,t,n,i)}}}if(a&Rt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&Rt.IgnoreOverlays)&&(i=bo.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:s,to:o}of i.overlay)if((t>0?s<=a:s<a)&&(t<0?o>=a:o>a))return new xr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Hh(r,e,t,n){let i=r.cursor(),a=[];if(!i.firstChild())return a;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return a}for(;;){if(n!=null&&i.type.is(n))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return n==null?a:[]}}function Yl(r,e,t=e.length-1){for(let n=r.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class yS{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class Sn extends V1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new Sn(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Rt.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new Sn(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,a=n.buffer[this.index+3];if(a>i){let s=n.buffer[this.index+1];e.push(n.slice(i,a,s)),t.push(0)}return new yt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function W1(r){if(!r.length)return null;if(r.length==1)return r[0];let e=0,t=r[0];for(let a=1;a<r.length;a++){let s=r[a];(s.from>t.from||s.to<t.to)&&(t=s,e=a)}let n=t instanceof xr&&t.index<0?null:t.parent,i=r.slice();return n?i[e]=n:i.splice(e,1),new bS(i,t)}class bS{constructor(e,t){this.heads=e,this.node=t}get next(){return W1(this.heads)}}function xS(r,e,t){let n=r.resolveInner(e,t),i=null;for(let a=n instanceof xr?n:n.context.parent;a;a=a.parent)if(a.index<0){let s=a.parent;(i||(i=[n])).push(s.resolve(e,t)),a=s}else{let s=bo.get(a.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let o=new xr(s.tree,s.overlay[0].from+a.from,0,null);(i||(i=[n])).push($a(o,e,t,!1))}}return i?W1(i):n}class Kl{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof xr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof xr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Rt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Rt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Rt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let a=t+e,s=e<0?-1:n._tree.children.length;a!=s;a+=e){let o=n._tree.children[a];if(this.mode&Rt.IncludeAnonymous||o instanceof ii||!o.type.isAnonymous||qc(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,a=this.stack.length;a>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=a+1;break e}i=this.stack[--a]}for(let i=n;i<this.stack.length;i++)t=new Sn(this.buffer,t,this.stack[i]);return this.bufferNode=new Sn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Yl(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return Yl(this.node,e,i);let s=n[t.buffer[this.stack[a]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function qc(r){return r.children.some(e=>e instanceof ii||!e.type.isAnonymous||qc(e))}function wS(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=pS,reused:a=[],minRepeatType:s=n.types.length}=r,o=Array.isArray(t)?new zc(t,t.length):t,u=n.types,l=0,c=0;function f(w,x,b,D,N){let{id:C,start:S,end:M,size:E}=o,R=c;for(;E<0;)if(o.next(),E==-1){let U=a[C];b.push(U),D.push(S-w);return}else if(E==-3){l=C;return}else if(E==-4){c=C;return}else throw new RangeError(`Unrecognized record size: ${E}`);let I=u[C],k,T,O=S-w;if(M-S<=i&&(T=p(o.pos-x,N))){let U=new Uint16Array(T.size-T.skip),F=o.pos-T.size,_=U.length;for(;o.pos>F;)_=v(T.start,U,_);k=new ii(U,M-T.start,n),O=T.start-w}else{let U=o.pos-E;o.next();let F=[],_=[],G=C>=s?C:-1,K=0,L=M;for(;o.pos>U;)G>=0&&o.id==G&&o.size>=0?(o.end<=L-i&&(d(F,_,S,K,o.end,L,G,R),K=F.length,L=o.end),o.next()):f(S,U,F,_,G);if(G>=0&&K>0&&K<F.length&&d(F,_,S,K,S,L,G,R),F.reverse(),_.reverse(),G>-1&&K>0){let X=h(I);k=Uc(I,F,_,0,F.length,0,M-S,X,X)}else k=m(I,F,_,M-S,R-M)}b.push(k),D.push(O)}function h(w){return(x,b,D)=>{let N=0,C=x.length-1,S,M;if(C>=0&&(S=x[C])instanceof yt){if(!C&&S.type==w&&S.length==D)return S;(M=S.prop(Qe.lookAhead))&&(N=b[C]+S.length+M)}return m(w,x,b,D,N)}}function d(w,x,b,D,N,C,S,M){let E=[],R=[];for(;w.length>D;)E.push(w.pop()),R.push(x.pop()+b-N);w.push(m(n.types[S],E,R,C-N,M-C)),x.push(N-b)}function m(w,x,b,D,N=0,C){if(l){let S=[Qe.contextHash,l];C=C?[S].concat(C):[S]}if(N>25){let S=[Qe.lookAhead,N];C=C?[S].concat(C):[S]}return new yt(w,x,b,D,C)}function p(w,x){let b=o.fork(),D=0,N=0,C=0,S=b.end-i,M={size:0,start:0,skip:0};e:for(let E=b.pos-w;b.pos>E;){let R=b.size;if(b.id==x&&R>=0){M.size=D,M.start=N,M.skip=C,C+=4,D+=4,b.next();continue}let I=b.pos-R;if(R<0||I<E||b.start<S)break;let k=b.id>=s?4:0,T=b.start;for(b.next();b.pos>I;){if(b.size<0)if(b.size==-3)k+=4;else break e;else b.id>=s&&(k+=4);b.next()}N=T,D+=R,C+=k}return(x<0||D==w)&&(M.size=D,M.start=N,M.skip=C),M.size>4?M:void 0}function v(w,x,b){let{id:D,start:N,end:C,size:S}=o;if(o.next(),S>=0&&D<s){let M=b;if(S>4){let E=o.pos-(S-4);for(;o.pos>E;)b=v(w,x,b)}x[--b]=M,x[--b]=C-w,x[--b]=N-w,x[--b]=D}else S==-3?l=D:S==-4&&(c=D);return b}let g=[],A=[];for(;o.pos>0;)f(r.start||0,r.bufferStart||0,g,A,-1);let y=(e=r.length)!==null&&e!==void 0?e:g.length?A[0]+g[0].length:0;return new yt(u[r.topID],g.reverse(),A.reverse(),y)}const Vh=new WeakMap;function io(r,e){if(!r.isAnonymous||e instanceof ii||e.type!=r)return 1;let t=Vh.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof yt)){t=1;break}t+=io(r,n)}Vh.set(e,t)}return t}function Uc(r,e,t,n,i,a,s,o,u){let l=0;for(let m=n;m<i;m++)l+=io(r,e[m]);let c=Math.ceil(l*1.5/8),f=[],h=[];function d(m,p,v,g,A){for(let y=v;y<g;){let w=y,x=p[y],b=io(r,m[y]);for(y++;y<g;y++){let D=io(r,m[y]);if(b+D>=c)break;b+=D}if(y==w+1){if(b>c){let D=m[w];d(D.children,D.positions,0,D.children.length,p[w]+A);continue}f.push(m[w])}else{let D=p[y-1]+m[y-1].length-x;f.push(Uc(r,m,p,w,y,x,D,null,u))}h.push(x+A-a)}}return d(e,t,n,i,0),(o||u)(f,h,s)}class Zn{constructor(e,t,n,i,a=!1,s=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(a?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new Zn(0,e.length,e,0,!1,n)];for(let a of t)a.to>e.length&&i.push(a);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],a=1,s=e.length?e[0]:null;for(let o=0,u=0,l=0;;o++){let c=o<t.length?t[o]:null,f=c?c.fromA:1e9;if(f-u>=n)for(;s&&s.from<f;){let h=s;if(u>=h.from||f<=h.to||l){let d=Math.max(h.from,u)-l,m=Math.min(h.to,f)-l;h=d>=m?null:new Zn(d,m,h.tree,h.offset+l,o>0,!!c)}if(h&&i.push(h),s.to>f)break;s=a<e.length?e[a++]:null}if(!c)break;u=c.toA,l=c.toA-c.toB}return i}}class G1{startParse(e,t,n){return typeof e=="string"&&(e=new AS(e)),n=n?n.length?n.map(i=>new Hu(i.from,i.to)):[new Hu(0,0)]:[new Hu(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let a=i.advance();if(a)return a}}}class AS{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Qe({perNode:!0});let DS=0;class Lr{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=DS++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Lr([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new xo;return t=>t.modified.indexOf(e)>-1?t:xo.get(t.base||t,t.modified.concat(e).sort((n,i)=>n.id-i.id))}}let SS=0;class xo{constructor(){this.instances=[],this.id=SS++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(o=>o.base==e&&NS(t,o.modified));if(n)return n;let i=[],a=new Lr(i,e,t);for(let o of t)o.instances.push(a);let s=CS(t);for(let o of e.set)if(!o.modified.length)for(let u of s)i.push(xo.get(o,u));return a}}function NS(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function CS(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function ES(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let a=[],s=2,o=i;for(let f=0;;){if(o=="..."&&f>0&&f+3==i.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!h)throw new RangeError("Invalid path: "+i);if(a.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){s=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(f)}let u=a.length-1,l=a[u];if(!l)throw new RangeError("Invalid path: "+i);let c=new wo(n,s,u>0?a.slice(0,u):null);e[l]=c.sort(e[l])}}return Y1.add(e)}const Y1=new Qe;class wo{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}wo.empty=new wo([],2,null);function K1(r,e){let t=Object.create(null);for(let a of r)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let s of a.tag)t[s.id]=a.class;let{scope:n,all:i=null}=e||{};return{style:a=>{let s=i;for(let o of a)for(let u of o.set){let l=t[u.id];if(l){s=s?s+" "+l:l;break}}return s},scope:n}}function MS(r,e){let t=null;for(let n of r){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function TS(r,e,t,n=0,i=r.length){let a=new OS(n,Array.isArray(e)?e:[e],t);a.highlightRange(r.cursor(),n,i,"",a.highlighters),a.flush(i)}class OS{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,a){let{type:s,from:o,to:u}=e;if(o>=n||u<=t)return;s.isTop&&(a=this.highlighters.filter(d=>!d.scope||d.scope(s)));let l=i,c=BS(e)||wo.empty,f=MS(a,c.tags);if(f&&(l&&(l+=" "),l+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,o),l),c.opaque)return;let h=e.tree&&e.tree.prop(Qe.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+o,1),m=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),p=e.firstChild();for(let v=0,g=o;;v++){let A=v<h.overlay.length?h.overlay[v]:null,y=A?A.from+o:u,w=Math.max(t,g),x=Math.min(n,y);if(w<x&&p)for(;e.from<x&&(this.highlightRange(e,w,x,i,a),this.startSpan(Math.min(x,e.to),l),!(e.to>=y||!e.nextSibling())););if(!A||y>n)break;g=A.to+o,g>t&&(this.highlightRange(d.cursor(),Math.max(t,A.from+o),Math.min(n,g),"",m),this.startSpan(Math.min(n,g),l))}p&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,a),this.startSpan(Math.min(n,e.to),l)}while(e.nextSibling());e.parent()}}}function BS(r){let e=r.type.prop(Y1);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const Ae=Lr.define,ws=Ae(),gn=Ae(),Wh=Ae(gn),Gh=Ae(gn),vn=Ae(),As=Ae(vn),Vu=Ae(vn),_r=Ae(),Un=Ae(_r),Pr=Ae(),$r=Ae(),Xl=Ae(),la=Ae(Xl),Ds=Ae(),Se={comment:ws,lineComment:Ae(ws),blockComment:Ae(ws),docComment:Ae(ws),name:gn,variableName:Ae(gn),typeName:Wh,tagName:Ae(Wh),propertyName:Gh,attributeName:Ae(Gh),className:Ae(gn),labelName:Ae(gn),namespace:Ae(gn),macroName:Ae(gn),literal:vn,string:As,docString:Ae(As),character:Ae(As),attributeValue:Ae(As),number:Vu,integer:Ae(Vu),float:Ae(Vu),bool:Ae(vn),regexp:Ae(vn),escape:Ae(vn),color:Ae(vn),url:Ae(vn),keyword:Pr,self:Ae(Pr),null:Ae(Pr),atom:Ae(Pr),unit:Ae(Pr),modifier:Ae(Pr),operatorKeyword:Ae(Pr),controlKeyword:Ae(Pr),definitionKeyword:Ae(Pr),moduleKeyword:Ae(Pr),operator:$r,derefOperator:Ae($r),arithmeticOperator:Ae($r),logicOperator:Ae($r),bitwiseOperator:Ae($r),compareOperator:Ae($r),updateOperator:Ae($r),definitionOperator:Ae($r),typeOperator:Ae($r),controlOperator:Ae($r),punctuation:Xl,separator:Ae(Xl),bracket:la,angleBracket:Ae(la),squareBracket:Ae(la),paren:Ae(la),brace:Ae(la),content:_r,heading:Un,heading1:Ae(Un),heading2:Ae(Un),heading3:Ae(Un),heading4:Ae(Un),heading5:Ae(Un),heading6:Ae(Un),contentSeparator:Ae(_r),list:Ae(_r),quote:Ae(_r),emphasis:Ae(_r),strong:Ae(_r),link:Ae(_r),monospace:Ae(_r),strikethrough:Ae(_r),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:Ds,documentMeta:Ae(Ds),annotation:Ae(Ds),processingInstruction:Ae(Ds),definition:Lr.defineModifier(),constant:Lr.defineModifier(),function:Lr.defineModifier(),standard:Lr.defineModifier(),local:Lr.defineModifier(),special:Lr.defineModifier()};K1([{tag:Se.link,class:"tok-link"},{tag:Se.heading,class:"tok-heading"},{tag:Se.emphasis,class:"tok-emphasis"},{tag:Se.strong,class:"tok-strong"},{tag:Se.keyword,class:"tok-keyword"},{tag:Se.atom,class:"tok-atom"},{tag:Se.bool,class:"tok-bool"},{tag:Se.url,class:"tok-url"},{tag:Se.labelName,class:"tok-labelName"},{tag:Se.inserted,class:"tok-inserted"},{tag:Se.deleted,class:"tok-deleted"},{tag:Se.literal,class:"tok-literal"},{tag:Se.string,class:"tok-string"},{tag:Se.number,class:"tok-number"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],class:"tok-string2"},{tag:Se.variableName,class:"tok-variableName"},{tag:Se.local(Se.variableName),class:"tok-variableName tok-local"},{tag:Se.definition(Se.variableName),class:"tok-variableName tok-definition"},{tag:Se.special(Se.variableName),class:"tok-variableName2"},{tag:Se.definition(Se.propertyName),class:"tok-propertyName tok-definition"},{tag:Se.typeName,class:"tok-typeName"},{tag:Se.namespace,class:"tok-namespace"},{tag:Se.className,class:"tok-className"},{tag:Se.macroName,class:"tok-macroName"},{tag:Se.propertyName,class:"tok-propertyName"},{tag:Se.operator,class:"tok-operator"},{tag:Se.comment,class:"tok-comment"},{tag:Se.meta,class:"tok-meta"},{tag:Se.invalid,class:"tok-invalid"},{tag:Se.punctuation,class:"tok-punctuation"}]);var Wu;const wi=new Qe;function FS(r){return Ce.define({combine:r?e=>e.concat(r):void 0})}const kS=new Qe;class Sr{constructor(e,t,n=[],i=""){this.data=e,this.name=i,et.prototype.hasOwnProperty("tree")||Object.defineProperty(et.prototype,"tree",{get(){return Xt(this)}}),this.parser=t,this.extension=[Ii.of(this),et.languageData.of((a,s,o)=>{let u=Yh(a,s,o),l=u.type.prop(wi);if(!l)return[];let c=a.facet(l),f=u.type.prop(kS);if(f){let h=u.resolve(s-u.from,o);for(let d of f)if(d.test(h,a)){let m=a.facet(d.facet);return d.type=="replace"?m:m.concat(c)}}return c})].concat(n)}isActiveAt(e,t,n=-1){return Yh(e,t,n).type.prop(wi)==this.data}findRegions(e){let t=e.facet(Ii);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(a,s)=>{if(a.prop(wi)==this.data){n.push({from:s,to:s+a.length});return}let o=a.prop(Qe.mounted);if(o){if(o.tree.prop(wi)==this.data){if(o.overlay)for(let u of o.overlay)n.push({from:u.from+s,to:u.to+s});else n.push({from:s,to:s+a.length});return}else if(o.overlay){let u=n.length;if(i(o.tree,o.overlay[0].from+s),n.length>u)return}}for(let u=0;u<a.children.length;u++){let l=a.children[u];l instanceof yt&&i(l,a.positions[u]+s)}};return i(Xt(e),0),n}get allowsNesting(){return!0}}Sr.setState=He.define();function Yh(r,e,t){let n=r.facet(Ii),i=Xt(r).topNode;if(!n||n.allowsNesting)for(let a=i;a;a=a.enter(e,t,Rt.ExcludeBuffers))a.type.isTop&&(i=a);return i}function Xt(r){let e=r.field(Sr.state,!1);return e?e.tree:yt.empty}class RS{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let ca=null;class ki{constructor(e,t,n=[],i,a,s,o,u){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=s,this.skipped=o,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new ki(e,t,[],yt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new RS(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=yt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Zn.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Zn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ca;ca=this;try{return e()}finally{ca=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Kh(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:a,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((l,c,f,h)=>u.push({fromA:l,toA:c,fromB:f,toB:h})),n=Zn.applyChanges(n,u),i=yt.empty,a=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let l of this.skipped){let c=e.mapPos(l.from,1),f=e.mapPos(l.to,-1);c<f&&o.push({from:c,to:f})}}}return new ki(this.parser,t,n,i,a,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=Kh(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends G1{createParse(t,n,i){let a=i[0].from,s=i[i.length-1].to;return{parsedPos:a,advance(){let u=ca;if(u){for(let l of i)u.tempSkipped.push(l);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=s,new yt(ir.none,[],[],s-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ca}}function Kh(r,e,t){return Zn.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ri{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Ri(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=ki.create(e.facet(Ii).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Ri(n)}}Sr.state=wt.define({create:Ri.init,update(r,e){for(let t of e.effects)if(t.is(Sr.setState))return t.value;return e.startState.facet(Ii)!=e.state.facet(Ii)?Ri.init(e.state):r.apply(e)}});let X1=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(X1=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Gu=typeof navigator<"u"&&(!((Wu=navigator.scheduling)===null||Wu===void 0)&&Wu.isInputPending)?()=>navigator.scheduling.isInputPending():null,IS=Mt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Sr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Sr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=X1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,a=n.field(Sr.state);if(a.tree==a.context.tree&&a.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Gu?Math.max(25,e.timeRemaining()-5):1e9),o=a.context.treeLen<i&&n.doc.length>i+1e3,u=a.context.work(()=>Gu&&Gu()||Date.now()>s,i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Sr.setState.of(new Ri(a.context))})),this.chunkBudget>0&&!(u&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Cr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ii=Ce.define({combine(r){return r.length?r[0]:null},enables:r=>[Sr.state,IS,Ne.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]}),Z1=Ce.define(),Hc=Ce.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function ti(r){let e=r.facet(Hc);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function _a(r,e){let t="",n=r.tabSize,i=r.facet(Hc)[0];if(i=="	"){for(;e>=n;)t+="	",e-=n;i=" "}for(let a=0;a<e;a++)t+=i;return t}function Vc(r,e){r instanceof et&&(r=new nu(r));for(let n of r.state.facet(Z1)){let i=n(r,e);if(i!==void 0)return i}let t=Xt(r.state);return t.length>=e?$S(r,t,e):null}class nu{constructor(e,t={}){this.state=e,this.options=t,this.unit=ti(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.countColumn(n,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(a+=s-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return Ki(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let s=a(i);if(s>-1)return s}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const PS=new Qe;function $S(r,e,t){let n=e.resolveStack(t),i=n.node.enterUnfinishedNodesBefore(t);if(i!=n.node){let a=[];for(let s=i;s!=n.node;s=s.parent)a.push(s);for(let s=a.length-1;s>=0;s--)n={node:a[s],next:n}}return J1(n,r,t)}function J1(r,e,t){for(let n=r;n;n=n.next){let i=LS(n.node);if(i)return i(Wc.create(e,t,n))}return 0}function _S(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function LS(r){let e=r.type.prop(PS);if(e)return e;let t=r.firstChild,n;if(t&&(n=t.type.prop(Qe.closedBy))){let i=r.lastChild,a=i&&n.indexOf(i.name)>-1;return s=>HS(s,!0,1,void 0,a&&!_S(s)?i.from:void 0)}return r.parent==null?zS:null}function zS(){return 0}class Wc extends nu{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new Wc(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(qS(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return J1(this.context.next,this.base,this.pos)}}function qS(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function US(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=r.options.simulateBreak,a=r.state.doc.lineAt(t.from),s=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let o=t.to;;){let u=e.childAfter(o);if(!u||u==n)return null;if(!u.type.isSkipped)return u.from<s?t:null;o=u.to}}function HS(r,e,t,n,i){let a=r.textAfter,s=a.match(/^\s*/)[0].length,o=n&&a.slice(s,s+n.length)==n||i==r.pos+s,u=e?US(r):null;return u?o?r.column(u.from):r.column(u.to):r.baseIndent+(o?0:r.unit*t)}const VS=200;function WS(){return et.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:n}=r.newSelection.main,i=t.lineAt(n);if(n>i.from+VS)return r;let a=t.sliceString(i.from,n);if(!e.some(l=>l.test(a)))return r;let{state:s}=r,o=-1,u=[];for(let{head:l}of s.selection.ranges){let c=s.doc.lineAt(l);if(c.from==o)continue;o=c.from;let f=Vc(s,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=_a(s,f);h!=d&&u.push({from:c.from,to:c.from+h.length,insert:d})}return u.length?[r,{changes:u,sequential:!0}]:r})}const GS=Ce.define(),YS=new Qe;function KS(r,e,t){let n=Xt(r);if(n.length<t)return null;let i=n.resolveStack(t,1),a=null;for(let s=i;s;s=s.next){let o=s.node;if(o.to<=t||o.from>t)continue;if(a&&o.from<e)break;let u=o.type.prop(YS);if(u&&(o.to<n.length-50||n.length==r.doc.length||!XS(o))){let l=u(o,r);l&&l.from<=t&&l.from>=e&&l.to>t&&(a=l)}}return a}function XS(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function j1(r,e,t){for(let n of r.facet(GS)){let i=n(r,e,t);if(i)return i}return KS(r,e,t)}function Q1(r,e){let t=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return t>=n?void 0:{from:t,to:n}}const Gc=He.define({map:Q1}),iu=He.define({map:Q1});function ey(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(r.lineBlockAt(t));return e}const es=wt.define({create(){return ke.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(Gc)&&!ZS(r,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(Yc),i=n?ke.replace({widget:new iN(n(e.state,t.value))}):Xh;r=r.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(iu)&&(r=r.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;r.between(n,n,(i,a)=>{i<n&&a>n&&(t=!0)}),t&&(r=r.update({filterFrom:n,filterTo:n,filter:(i,a)=>a<=n||i>=n}))}return r},provide:r=>Ne.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let n=r[t++],i=r[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Xh.range(n,i))}return ke.set(e,!0)}});function ty(r,e,t){var n;let i=null;return(n=r.field(es,!1))===null||n===void 0||n.between(e,t,(a,s)=>{(!i||i.from>a)&&(i={from:a,to:s})}),i}function ZS(r,e,t){let n=!1;return r.between(e,e,(i,a)=>{i==e&&a==t&&(n=!0)}),n}function ry(r,e){return r.field(es,!1)?e:e.concat(He.appendConfig.of(nN()))}const JS=r=>{for(let e of ey(r)){let t=j1(r.state,e.from,e.to);if(t)return r.dispatch({effects:ry(r.state,[Gc.of(t),ny(r,t)])}),!0}return!1},jS=r=>{if(!r.state.field(es,!1))return!1;let e=[];for(let t of ey(r)){let n=ty(r.state,t.from,t.to);n&&e.push(iu.of(n),ny(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function ny(r,e,t=!0){let n=r.state.doc.lineAt(e.from).number,i=r.state.doc.lineAt(e.to).number;return Ne.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${i}.`)}const QS=r=>{let{state:e}=r,t=[];for(let n=0;n<e.doc.length;){let i=r.lineBlockAt(n),a=j1(e,i.from,i.to);a&&t.push(Gc.of(a)),n=(a?r.lineBlockAt(a.to):i).to+1}return t.length&&r.dispatch({effects:ry(r.state,t)}),!!t.length},eN=r=>{let e=r.state.field(es,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(n,i)=>{t.push(iu.of({from:n,to:i}))}),r.dispatch({effects:t}),!0},tN=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:JS},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jS},{key:"Ctrl-Alt-[",run:QS},{key:"Ctrl-Alt-]",run:eN}],rN={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Yc=Ce.define({combine(r){return Or(r,rN)}});function nN(r){let e=[es,aN];return r&&e.push(Yc.of(r)),e}function iy(r,e){let{state:t}=r,n=t.facet(Yc),i=s=>{let o=r.lineBlockAt(r.posAtDOM(s.target)),u=ty(r.state,o.from,o.to);u&&r.dispatch({effects:iu.of(u)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,i,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=i,a}const Xh=ke.replace({widget:new class extends dn{toDOM(r){return iy(r,null)}}});class iN extends dn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return iy(e,this.value)}}const aN=Ne.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class au{constructor(e,t){this.specs=e;let n;function i(o){let u=Bn.newName();return(n||(n=Object.create(null)))["."+u]=o,u}const a=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof Sr?o=>o.prop(wi)==s.data:s?o=>o==s:void 0,this.style=K1(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:a}).style,this.module=n?new Bn(n):null,this.themeType=t.themeType}static define(e,t){return new au(e,t||{})}}const Zl=Ce.define(),ay=Ce.define({combine(r){return r.length?[r[0]]:null}});function Yu(r){let e=r.facet(Zl);return e.length?e:r.facet(ay)}function sN(r,e){let t=[uN],n;return r instanceof au&&(r.module&&t.push(Ne.styleModule.of(r.module)),n=r.themeType),e!=null&&e.fallback?t.push(ay.of(r)):n?t.push(Zl.computeN([Ne.darkTheme],i=>i.facet(Ne.darkTheme)==(n=="dark")?[r]:[])):t.push(Zl.of(r)),t}class oN{constructor(e){this.markCache=Object.create(null),this.tree=Xt(e.state),this.decorations=this.buildDeco(e,Yu(e.state))}update(e){let t=Xt(e.state),n=Yu(e.state),i=n!=Yu(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return ke.none;let n=new Qn;for(let{from:i,to:a}of e.visibleRanges)TS(this.tree,t,(s,o,u)=>{n.add(s,o,this.markCache[u]||(this.markCache[u]=ke.mark({class:u})))},i,a);return n.finish()}}const uN=Yi.high(Mt.fromClass(oN,{decorations:r=>r.decorations})),lN=au.define([{tag:Se.meta,color:"#404740"},{tag:Se.link,textDecoration:"underline"},{tag:Se.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Se.emphasis,fontStyle:"italic"},{tag:Se.strong,fontWeight:"bold"},{tag:Se.strikethrough,textDecoration:"line-through"},{tag:Se.keyword,color:"#708"},{tag:[Se.atom,Se.bool,Se.url,Se.contentSeparator,Se.labelName],color:"#219"},{tag:[Se.literal,Se.inserted],color:"#164"},{tag:[Se.string,Se.deleted],color:"#a11"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],color:"#e40"},{tag:Se.definition(Se.variableName),color:"#00f"},{tag:Se.local(Se.variableName),color:"#30a"},{tag:[Se.typeName,Se.namespace],color:"#085"},{tag:Se.className,color:"#167"},{tag:[Se.special(Se.variableName),Se.macroName],color:"#256"},{tag:Se.definition(Se.propertyName),color:"#00c"},{tag:Se.comment,color:"#940"},{tag:Se.invalid,color:"#f00"}]),cN=Ne.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),sy=1e4,oy="()[]{}",uy=Ce.define({combine(r){return Or(r,{afterCursor:!0,brackets:oy,maxScanDistance:sy,renderMatch:dN})}}),fN=ke.mark({class:"cm-matchingBracket"}),hN=ke.mark({class:"cm-nonmatchingBracket"});function dN(r){let e=[],t=r.matched?fN:hN;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const mN=wt.define({create(){return ke.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],n=e.state.facet(uy);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=Ur(e.state,i.head,-1,n)||i.head>0&&Ur(e.state,i.head-1,1,n)||n.afterCursor&&(Ur(e.state,i.head,1,n)||i.head<e.state.doc.length&&Ur(e.state,i.head+1,-1,n));a&&(t=t.concat(n.renderMatch(a,e.state)))}return ke.set(t,!0)},provide:r=>Ne.decorations.from(r)}),pN=[mN,cN];function gN(r={}){return[uy.of(r),pN]}const vN=new Qe;function Jl(r,e,t){let n=r.prop(e<0?Qe.openedBy:Qe.closedBy);if(n)return n;if(r.name.length==1){let i=t.indexOf(r.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function jl(r){let e=r.type.prop(vN);return e?e(r.node):r}function Ur(r,e,t,n={}){let i=n.maxScanDistance||sy,a=n.brackets||oy,s=Xt(r),o=s.resolveInner(e,t);for(let u=o;u;u=u.parent){let l=Jl(u.type,t,a);if(l&&u.from<u.to){let c=jl(u);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return yN(r,e,t,u,c,l,a)}}return bN(r,e,t,s,o.type,i,a)}function yN(r,e,t,n,i,a,s){let o=n.parent,u={from:i.from,to:i.to},l=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(n.from):c.childAfter(n.to)))do if(t<0?c.to<=n.from:c.from>=n.to){if(l==0&&a.indexOf(c.type.name)>-1&&c.from<c.to){let f=jl(c);return{start:u,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Jl(c.type,t,s))l++;else if(Jl(c.type,-t,s)){if(l==0){let f=jl(c);return{start:u,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}l--}}while(t<0?c.prevSibling():c.nextSibling());return{start:u,matched:!1}}function bN(r,e,t,n,i,a,s){let o=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),u=s.indexOf(o);if(u<0||u%2==0!=t>0)return null;let l={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=a;){let d=c.value;t<0&&(h+=d.length);let m=e+h*t;for(let p=t>0?0:d.length-1,v=t>0?d.length:-1;p!=v;p+=t){let g=s.indexOf(d[p]);if(!(g<0||n.resolveInner(m+p,1).type!=i))if(g%2==0==t>0)f++;else{if(f==1)return{start:l,end:{from:m+p,to:m+p+1},matched:g>>1==u>>1};f--}}t>0&&(h+=d.length)}return c.done?{start:l,matched:!1}:null}function Zh(r,e,t,n=0,i=0){e==null&&(e=r.search(/[^\s\u00a0]/),e==-1&&(e=r.length));let a=i;for(let s=n;s<e;s++)r.charCodeAt(s)==9?a+=t-a%t:a++;return a}class ly{constructor(e,t,n,i){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Zh(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Zh(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let i=s=>n?s.toLowerCase():s,a=this.string.substr(this.pos,e.length);return i(a)==i(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function xN(r){return{name:r.name||"",token:r.token,blankLine:r.blankLine||(()=>{}),startState:r.startState||(()=>!0),copyState:r.copyState||wN,indent:r.indent||(()=>null),languageData:r.languageData||{},tokenTable:r.tokenTable||Zc}}function wN(r){if(typeof r!="object")return r;let e={};for(let t in r){let n=r[t];e[t]=n instanceof Array?n.slice():n}return e}const Jh=new WeakMap;class Kc extends Sr{constructor(e){let t=FS(e.languageData),n=xN(e),i,a=new class extends G1{createParse(s,o,u){return new DN(i,s,o,u)}};super(t,a,[Z1.of((s,o)=>this.getIndent(s,o))],e.name),this.topNode=CN(t),i=this,this.streamParser=n,this.stateAfter=new Qe({perNode:!0}),this.tokenTable=e.tokenTable?new dy(n.tokenTable):NN}static define(e){return new Kc(e)}getIndent(e,t){let n=Xt(e.state),i=n.resolve(t);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let a,{overrideIndentation:s}=e.options;s&&(a=Jh.get(e.state),a!=null&&a<t-1e4&&(a=void 0));let o=Xc(this,n,0,i.from,a??t),u,l;if(o?(l=o.state,u=o.pos+1):(l=this.streamParser.startState(e.unit),u=0),t-u>1e4)return null;for(;u<t;){let f=e.state.doc.lineAt(u),h=Math.min(t,f.to);if(f.length){let d=s?s(f.from):-1,m=new ly(f.text,e.state.tabSize,e.unit,d<0?void 0:d);for(;m.pos<h-f.from;)fy(this.streamParser.token,m,l)}else this.streamParser.blankLine(l,e.unit);if(h==t)break;u=f.to+1}let c=e.lineAt(t);return s&&a==null&&Jh.set(e.state,c.from),this.streamParser.indent(l,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function Xc(r,e,t,n,i){let a=t>=n&&t+e.length<=i&&e.prop(r.stateAfter);if(a)return{state:r.streamParser.copyState(a),pos:t+e.length};for(let s=e.children.length-1;s>=0;s--){let o=e.children[s],u=t+e.positions[s],l=o instanceof yt&&u<i&&Xc(r,o,u,n,i);if(l)return l}return null}function cy(r,e,t,n,i){if(i&&t<=0&&n>=e.length)return e;!i&&e.type==r.topNode&&(i=!0);for(let a=e.children.length-1;a>=0;a--){let s=e.positions[a],o=e.children[a],u;if(s<n&&o instanceof yt){if(!(u=cy(r,o,t-s,n-s,i)))break;return i?new yt(e.type,e.children.slice(0,a).concat(u),e.positions.slice(0,a+1),s+u.length):u}}return null}function AN(r,e,t,n){for(let i of e){let a=i.from+(i.openStart?25:0),s=i.to-(i.openEnd?25:0),o=a<=t&&s>t&&Xc(r,i.tree,0-i.offset,t,s),u;if(o&&(u=cy(r,i.tree,t+i.offset,o.pos+i.offset,!1)))return{state:o.state,tree:u}}return{state:r.streamParser.startState(n?ti(n):4),tree:yt.empty}}class DN{constructor(e,t,n,i){this.lang=e,this.input=t,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let a=ki.get(),s=i[0].from,{state:o,tree:u}=AN(e,n,s,a==null?void 0:a.state);this.state=o,this.parsedPos=this.chunkStart=s+u.length;for(let l=0;l<u.children.length;l++)this.chunks.push(u.children[l]),this.chunkPos.push(u.positions[l]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(ti(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let e=ki.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let i=this.rangeIndex;;){let a=this.ranges[i].to;if(a>=n||(t=t.slice(0,a-(n-t.length)),i++,i==this.ranges.length))break;let s=this.ranges[i].from,o=this.lineAfter(s);t+=o,n=s+o.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let i=this.ranges[this.rangeIndex].to,a=e+t;if(n>0?i>a:i>=a)break;let s=this.ranges[++this.rangeIndex].from;t+=s-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,i,a){if(this.ranges.length>1){a=this.skipGapsTo(t,a,1),t+=a;let s=this.chunk.length;a=this.skipGapsTo(n,a,-1),n+=a,i+=this.chunk.length-s}return this.chunk.push(e,t,n,i),a}parseLine(e){let{line:t,end:n}=this.nextLine(),i=0,{streamParser:a}=this.lang,s=new ly(t,e?e.state.tabSize:4,e?ti(e.state):2);if(s.eol())a.blankLine(this.state,s.indentUnit);else for(;!s.eol();){let o=fy(a.token,s,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+s.start,this.parsedPos+s.pos,4,i)),s.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=yt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:SN,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new yt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new yt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function fy(r,e,t){e.start=e.pos;for(let n=0;n<10;n++){let i=r(e,t);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Zc=Object.create(null),La=[ir.none],SN=new Lc(La),jh=[],hy=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hy[r]=my(Zc,e);class dy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),hy)}resolve(e){return e?this.table[e]||(this.table[e]=my(this.extra,e)):0}}const NN=new dy(Zc);function Ku(r,e){jh.indexOf(r)>-1||(jh.push(r),console.warn(e))}function my(r,e){let t=null;for(let a of e.split(".")){let s=r[a]||Se[a];s?typeof s=="function"?t?t=s(t):Ku(a,`Modifier ${a} used at start of tag`):t?Ku(a,`Tag ${a} used as modifier`):t=s:Ku(a,`Unknown highlighting tag ${a}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),i=ir.define({id:La.length,name:n,props:[ES({[n]:t})]});return La.push(i),i.id}function CN(r){let e=ir.define({id:La.length,name:"Document",props:[wi.add(()=>r)],top:!0});return La.push(e),e}const EN=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),n=jc(r.state,t.from);return n.line?MN(r):n.block?ON(r):!1};function Jc(r,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=r(e,t);return i?(n(t.update(i)),!0):!1}}const MN=Jc(kN,0),TN=Jc(py,0),ON=Jc((r,e)=>py(r,e,FN(e)),0);function jc(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const fa=50;function BN(r,{open:e,close:t},n,i){let a=r.sliceDoc(n-fa,n),s=r.sliceDoc(i,i+fa),o=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(s)[0].length,l=a.length-o;if(a.slice(l-e.length,l)==e&&s.slice(u,u+t.length)==t)return{open:{pos:n-o,margin:o&&1},close:{pos:i+u,margin:u&&1}};let c,f;i-n<=2*fa?c=f=r.sliceDoc(n,i):(c=r.sliceDoc(n,n+fa),f=r.sliceDoc(i-fa,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,m=f.length-d-t.length;return c.slice(h,h+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:n+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function FN(r){let e=[];for(let t of r.selection.ranges){let n=r.doc.lineAt(t.from),i=t.to<=n.to?n:r.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function py(r,e,t=e.selection.ranges){let n=t.map(a=>jc(e,a.from).block);if(!n.every(a=>a))return null;let i=t.map((a,s)=>BN(e,n[s],a.from,a.to));if(r!=2&&!i.every(a=>a))return{changes:e.changes(t.map((a,s)=>i[s]?[]:[{from:a.from,insert:n[s].open+" "},{from:a.to,insert:" "+n[s].close}]))};if(r!=1&&i.some(a=>a)){let a=[];for(let s=0,o;s<i.length;s++)if(o=i[s]){let u=n[s],{open:l,close:c}=o;a.push({from:l.pos-u.open.length,to:l.pos+l.margin},{from:c.pos-c.margin,to:c.pos+u.close.length})}return{changes:a}}return null}function kN(r,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:a,to:s}of t){let o=n.length,u=1e9,l=jc(e,a).line;if(l){for(let c=a;c<=s;){let f=e.doc.lineAt(c);if(f.from>i&&(a==s||s>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,m=f.text.slice(h,h+l.length)==l?h:-1;h<f.text.length&&h<u&&(u=h),n.push({line:f,comment:m,token:l,indent:h,empty:d,single:!1})}c=f.to+1}if(u<1e9)for(let c=o;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=u);n.length==o+1&&(n[o].single=!0)}}if(r!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:o,token:u,indent:l,empty:c,single:f}of n)(f||!c)&&a.push({from:o.from+l,insert:u+" "});let s=e.changes(a);return{changes:s,selection:e.selection.map(s,1)}}else if(r!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:s,comment:o,token:u}of n)if(o>=0){let l=s.from+o,c=l+u.length;s.text[c-s.from]==" "&&c++,a.push({from:l,to:c})}return{changes:a}}return null}const Ql=hn.define(),RN=hn.define(),IN=Ce.define(),gy=Ce.define({combine(r){return Or(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}});function PN(r){let e=0;return r.iterChangedRanges((t,n)=>e=n),e}const vy=wt.define({create(){return Hr.empty},update(r,e){let t=e.state.facet(gy),n=e.annotation(Ql);if(n){let u=e.docChanged?he.single(PN(e.changes)):void 0,l=rr.fromTransaction(e,u),c=n.side,f=c==0?r.undone:r.done;return l?f=Ao(f,f.length,t.minDepth,l):f=xy(f,e.startState.selection),new Hr(c==0?n.rest:f,c==0?f:n.rest)}let i=e.annotation(RN);if((i=="full"||i=="before")&&(r=r.isolate()),e.annotation(Nt.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let a=rr.fromTransaction(e),s=e.annotation(Nt.time),o=e.annotation(Nt.userEvent);return a?r=r.addChanges(a,s,o,t,e):e.selection&&(r=r.addSelection(e.startState.selection,s,o,t.newGroupDelay)),(i=="full"||i=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Hr(r.done.map(rr.fromJSON),r.undone.map(rr.fromJSON))}});function $N(r={}){return[vy,gy.of(r),Ne.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?yy:e.inputType=="historyRedo"?ec:null;return n?(e.preventDefault(),n(t)):!1}})]}function su(r,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field(vy,!1);if(!i)return!1;let a=i.pop(r,t,e);return a?(n(a),!0):!1}}const yy=su(0,!1),ec=su(1,!1),_N=su(0,!0),LN=su(1,!0);class rr{constructor(e,t,n,i,a){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new rr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new rr(e.changes&&St.fromJSON(e.changes),[],e.mapped&&Vr.fromJSON(e.mapped),e.startSelection&&he.fromJSON(e.startSelection),e.selectionsAfter.map(he.fromJSON))}static fromTransaction(e,t){let n=yr;for(let i of e.startState.facet(IN)){let a=i(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new rr(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,yr)}static selection(e){return new rr(void 0,yr,void 0,void 0,e)}}function Ao(r,e,t,n){let i=e+1>t+20?e-t-1:0,a=r.slice(i,e);return a.push(n),a}function zN(r,e){let t=[],n=!1;return r.iterChangedRanges((i,a)=>t.push(i,a)),e.iterChangedRanges((i,a,s,o)=>{for(let u=0;u<t.length;){let l=t[u++],c=t[u++];o>=l&&s<=c&&(n=!0)}}),n}function qN(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function by(r,e){return r.length?e.length?r.concat(e):r:e}const yr=[],UN=200;function xy(r,e){if(r.length){let t=r[r.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-UN));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),Ao(r,r.length-1,1e9,t.setSelAfter(n)))}else return[rr.selection([e])]}function HN(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Xu(r,e){if(!r.length)return r;let t=r.length,n=yr;for(;t;){let i=VN(r[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let a=r.slice(0,t);return a[t-1]=i,a}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[rr.selection(n)]:yr}function VN(r,e,t){let n=by(r.selectionsAfter.length?r.selectionsAfter.map(o=>o.map(e)):yr,t);if(!r.changes)return rr.selection(n);let i=r.changes.map(e),a=e.mapDesc(r.changes,!0),s=r.mapped?r.mapped.composeDesc(a):a;return new rr(i,He.mapEffects(r.effects,e),s,r.startSelection.map(a),n)}const WN=/^(input\.type|delete)($|\.)/;class Hr{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Hr(this.done,this.undone):this}addChanges(e,t,n,i,a){let s=this.done,o=s[s.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!n||WN.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,zN(o.changes,e.changes))||n=="input.type.compose")?s=Ao(s,s.length-1,i.minDepth,new rr(e.changes.compose(o.changes),by(e.effects,o.effects),o.mapped,o.startSelection,yr)):s=Ao(s,s.length,i.minDepth,e),new Hr(s,yr,t,n)}addSelection(e,t,n,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:yr;return a.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&qN(a[a.length-1],e)?this:new Hr(xy(this.done,e),this.undone,t,n)}addMapping(e){return new Hr(Xu(this.done,e),Xu(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1];if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:Ql.of({side:e,rest:HN(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let s=i.length==1?yr:i.slice(0,i.length-1);return a.mapped&&(s=Xu(s,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:Ql.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Hr.empty=new Hr(yr,yr);const GN=[{key:"Mod-z",run:yy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ec,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ec,preventDefault:!0},{key:"Mod-u",run:_N,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:LN,preventDefault:!0}];function Xi(r,e){return he.create(r.ranges.map(e),r.mainIndex)}function Xr(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Br({state:r,dispatch:e},t){let n=Xi(r.selection,t);return n.eq(r.selection)?!1:(e(Xr(r,n)),!0)}function ou(r,e){return he.cursor(e?r.to:r.from)}function wy(r,e){return Br(r,t=>t.empty?r.moveByChar(t,e):ou(t,e))}function Ut(r){return r.textDirectionAt(r.state.selection.main.head)==vt.LTR}const Ay=r=>wy(r,!Ut(r)),Dy=r=>wy(r,Ut(r));function Sy(r,e){return Br(r,t=>t.empty?r.moveByGroup(t,e):ou(t,e))}const YN=r=>Sy(r,!Ut(r)),KN=r=>Sy(r,Ut(r));function XN(r,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function uu(r,e,t){let n=Xt(r).resolveInner(e.head),i=t?Qe.closedBy:Qe.openedBy;for(let u=e.head;;){let l=t?n.childAfter(u):n.childBefore(u);if(!l)break;XN(r,l,i)?n=l:u=t?l.to:l.from}let a=n.type.prop(i),s,o;return a&&(s=t?Ur(r,n.from,1):Ur(r,n.to,-1))&&s.matched?o=t?s.end.to:s.end.from:o=t?n.to:n.from,he.cursor(o,t?-1:1)}const ZN=r=>Br(r,e=>uu(r.state,e,!Ut(r))),JN=r=>Br(r,e=>uu(r.state,e,Ut(r)));function Ny(r,e){return Br(r,t=>{if(!t.empty)return ou(t,e);let n=r.moveVertically(t,e);return n.head!=t.head?n:r.moveToLineBoundary(t,e)})}const Cy=r=>Ny(r,!1),Ey=r=>Ny(r,!0);function My(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let a of r.state.facet(Ne.scrollMargins)){let s=a(r);s!=null&&s.top&&(t=Math.max(s==null?void 0:s.top,t)),s!=null&&s.bottom&&(n=Math.max(s==null?void 0:s.bottom,n))}i=r.scrollDOM.clientHeight-t-n}else i=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,i-5)}}function Ty(r,e){let t=My(r),{state:n}=r,i=Xi(n.selection,s=>s.empty?r.moveVertically(s,e,t.height):ou(s,e));if(i.eq(n.selection))return!1;let a;if(t.selfScroll){let s=r.coordsAtPos(n.selection.main.head),o=r.scrollDOM.getBoundingClientRect(),u=o.top+t.marginTop,l=o.bottom-t.marginBottom;s&&s.top>u&&s.bottom<l&&(a=Ne.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-u}))}return r.dispatch(Xr(n,i),{effects:a}),!0}const Qh=r=>Ty(r,!1),tc=r=>Ty(r,!0);function _n(r,e,t){let n=r.lineBlockAt(e.head),i=r.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=r.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let a=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(i=he.cursor(n.from+a))}return i}const jN=r=>Br(r,e=>_n(r,e,!0)),QN=r=>Br(r,e=>_n(r,e,!1)),eC=r=>Br(r,e=>_n(r,e,!Ut(r))),tC=r=>Br(r,e=>_n(r,e,Ut(r))),rC=r=>Br(r,e=>he.cursor(r.lineBlockAt(e.head).from,1)),nC=r=>Br(r,e=>he.cursor(r.lineBlockAt(e.head).to,-1));function iC(r,e,t){let n=!1,i=Xi(r.selection,a=>{let s=Ur(r,a.head,-1)||Ur(r,a.head,1)||a.head>0&&Ur(r,a.head-1,1)||a.head<r.doc.length&&Ur(r,a.head+1,-1);if(!s||!s.end)return a;n=!0;let o=s.start.from==a.head?s.end.to:s.end.from;return t?he.range(a.anchor,o):he.cursor(o)});return n?(e(Xr(r,i)),!0):!1}const aC=({state:r,dispatch:e})=>iC(r,e,!1);function wr(r,e){let t=Xi(r.state.selection,n=>{let i=e(n);return he.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(Xr(r.state,t)),!0)}function Oy(r,e){return wr(r,t=>r.moveByChar(t,e))}const By=r=>Oy(r,!Ut(r)),Fy=r=>Oy(r,Ut(r));function ky(r,e){return wr(r,t=>r.moveByGroup(t,e))}const sC=r=>ky(r,!Ut(r)),oC=r=>ky(r,Ut(r)),uC=r=>wr(r,e=>uu(r.state,e,!Ut(r))),lC=r=>wr(r,e=>uu(r.state,e,Ut(r)));function Ry(r,e){return wr(r,t=>r.moveVertically(t,e))}const Iy=r=>Ry(r,!1),Py=r=>Ry(r,!0);function $y(r,e){return wr(r,t=>r.moveVertically(t,e,My(r).height))}const ed=r=>$y(r,!1),td=r=>$y(r,!0),cC=r=>wr(r,e=>_n(r,e,!0)),fC=r=>wr(r,e=>_n(r,e,!1)),hC=r=>wr(r,e=>_n(r,e,!Ut(r))),dC=r=>wr(r,e=>_n(r,e,Ut(r))),mC=r=>wr(r,e=>he.cursor(r.lineBlockAt(e.head).from)),pC=r=>wr(r,e=>he.cursor(r.lineBlockAt(e.head).to)),rd=({state:r,dispatch:e})=>(e(Xr(r,{anchor:0})),!0),nd=({state:r,dispatch:e})=>(e(Xr(r,{anchor:r.doc.length})),!0),id=({state:r,dispatch:e})=>(e(Xr(r,{anchor:r.selection.main.anchor,head:0})),!0),ad=({state:r,dispatch:e})=>(e(Xr(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),gC=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),vC=({state:r,dispatch:e})=>{let t=cu(r).map(({from:n,to:i})=>he.range(n,Math.min(i+1,r.doc.length)));return e(r.update({selection:he.create(t),userEvent:"select"})),!0},yC=({state:r,dispatch:e})=>{let t=Xi(r.selection,n=>{var i;let a=Xt(r).resolveInner(n.head,1);for(;!(a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from||!(!((i=a.parent)===null||i===void 0)&&i.parent));)a=a.parent;return he.range(a.to,a.from)});return e(Xr(r,t)),!0},bC=({state:r,dispatch:e})=>{let t=r.selection,n=null;return t.ranges.length>1?n=he.create([t.main]):t.main.empty||(n=he.create([he.cursor(t.main.head)])),n?(e(Xr(r,n)),!0):!1};function lu(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:n}=r,i=n.changeByRange(a=>{let{from:s,to:o}=a;if(s==o){let u=e(s);u<s?(t="delete.backward",u=Ss(r,u,!1)):u>s&&(t="delete.forward",u=Ss(r,u,!0)),s=Math.min(s,u),o=Math.max(o,u)}else s=Ss(r,s,!1),o=Ss(r,o,!0);return s==o?{range:a}:{changes:{from:s,to:o},range:he.cursor(s)}});return i.changes.empty?!1:(r.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ne.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Ss(r,e,t){if(r instanceof Ne)for(let n of r.state.facet(Ne.atomicRanges).map(i=>i(r)))n.between(e,e,(i,a)=>{i<e&&a>e&&(e=t?a:i)});return e}const _y=(r,e)=>lu(r,t=>{let{state:n}=r,i=n.doc.lineAt(t),a,s;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(a=i.text.slice(0,t-i.from))){if(a[a.length-1]=="	")return t-1;let o=Ki(a,n.tabSize),u=o%ti(n)||ti(n);for(let l=0;l<u&&a[a.length-1-l]==" ";l++)t--;s=t}else s=zt(i.text,t-i.from,e,e)+i.from,s==t&&i.number!=(e?n.doc.lines:1)&&(s+=e?1:-1);return s}),rc=r=>_y(r,!1),Ly=r=>_y(r,!0),zy=(r,e)=>lu(r,t=>{let n=t,{state:i}=r,a=i.doc.lineAt(n),s=i.charCategorizer(n);for(let o=null;;){if(n==(e?a.to:a.from)){n==t&&a.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let u=zt(a.text,n-a.from,e)+a.from,l=a.text.slice(Math.min(n,u)-a.from,Math.max(n,u)-a.from),c=s(l);if(o!=null&&c!=o)break;(l!=" "||n!=t)&&(o=c),n=u}return n}),qy=r=>zy(r,!1),xC=r=>zy(r,!0),Uy=r=>lu(r,e=>{let t=r.lineBlockAt(e).to;return e<t?t:Math.min(r.state.doc.length,e+1)}),wC=r=>lu(r,e=>{let t=r.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),AC=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:rt.of(["",""])},range:he.cursor(n.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},DC=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let i=n.from,a=r.doc.lineAt(i),s=i==a.from?i-1:zt(a.text,i-a.from,!1)+a.from,o=i==a.to?i+1:zt(a.text,i-a.from,!0)+a.from;return{changes:{from:s,to:o,insert:r.doc.slice(i,o).append(r.doc.slice(s,i))},range:he.cursor(o)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function cu(r){let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.from),a=r.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=r.doc.lineAt(n.to-1)),t>=i.number){let s=e[e.length-1];s.to=a.to,s.ranges.push(n)}else e.push({from:i.from,to:a.to,ranges:[n]});t=a.number+1}return e}function Hy(r,e,t){if(r.readOnly)return!1;let n=[],i=[];for(let a of cu(r)){if(t?a.to==r.doc.length:a.from==0)continue;let s=r.doc.lineAt(t?a.to+1:a.from-1),o=s.length+1;if(t){n.push({from:a.to,to:s.to},{from:a.from,insert:s.text+r.lineBreak});for(let u of a.ranges)i.push(he.range(Math.min(r.doc.length,u.anchor+o),Math.min(r.doc.length,u.head+o)))}else{n.push({from:s.from,to:a.from},{from:a.to,insert:r.lineBreak+s.text});for(let u of a.ranges)i.push(he.range(u.anchor-o,u.head-o))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:he.create(i,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const SC=({state:r,dispatch:e})=>Hy(r,e,!1),NC=({state:r,dispatch:e})=>Hy(r,e,!0);function Vy(r,e,t){if(r.readOnly)return!1;let n=[];for(let i of cu(r))t?n.push({from:i.from,insert:r.doc.slice(i.from,i.to)+r.lineBreak}):n.push({from:i.to,insert:r.lineBreak+r.doc.slice(i.from,i.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const CC=({state:r,dispatch:e})=>Vy(r,e,!1),EC=({state:r,dispatch:e})=>Vy(r,e,!0),MC=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(cu(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),n=Xi(e.selection,i=>r.moveVertically(i,!0)).map(t);return r.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function TC(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Xt(r).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),a;return n&&i&&n.to<=e&&i.from>=e&&(a=n.type.prop(Qe.closedBy))&&a.indexOf(i.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(i.from).from&&!/\S/.test(r.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const OC=Wy(!1),BC=Wy(!0);function Wy(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:a,to:s}=i,o=e.doc.lineAt(a),u=!r&&a==s&&TC(e,a);r&&(a=s=(s<=o.to?o:e.doc.lineAt(s)).to);let l=new nu(e,{simulateBreak:a,simulateDoubleBreak:!!u}),c=Vc(l,a);for(c==null&&(c=Ki(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));s<o.to&&/\s/.test(o.text[s-o.from]);)s++;u?{from:a,to:s}=u:a>o.from&&a<o.from+100&&!/\S/.test(o.text.slice(0,a))&&(a=o.from);let f=["",_a(e,c)];return u&&f.push(_a(e,l.lineIndent(o.from,-1))),{changes:{from:a,to:s,insert:rt.of(f)},range:he.cursor(a+1+f[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function Qc(r,e){let t=-1;return r.changeByRange(n=>{let i=[];for(let s=n.from;s<=n.to;){let o=r.doc.lineAt(s);o.number>t&&(n.empty||n.to>o.from)&&(e(o,i,n),t=o.number),s=o.to+1}let a=r.changes(i);return{changes:i,range:he.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const FC=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),n=new nu(r,{overrideIndentation:a=>{let s=t[a];return s??-1}}),i=Qc(r,(a,s,o)=>{let u=Vc(n,a.from);if(u==null)return;/\S/.test(a.text)||(u=0);let l=/^\s*/.exec(a.text)[0],c=_a(r,u);(l!=c||o.from<a.from+l.length)&&(t[a.from]=u,s.push({from:a.from,to:a.from+l.length,insert:c}))});return i.changes.empty||e(r.update(i,{userEvent:"indent"})),!0},Gy=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(Qc(r,(t,n)=>{n.push({from:t.from,insert:r.facet(Hc)})}),{userEvent:"input.indent"})),!0),Yy=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(Qc(r,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let a=Ki(i,r.tabSize),s=0,o=_a(r,Math.max(0,a-ti(r)));for(;s<i.length&&s<o.length&&i.charCodeAt(s)==o.charCodeAt(s);)s++;n.push({from:t.from+s,to:t.from+i.length,insert:o.slice(s)})}),{userEvent:"delete.dedent"})),!0),kC=[{key:"Ctrl-b",run:Ay,shift:By,preventDefault:!0},{key:"Ctrl-f",run:Dy,shift:Fy},{key:"Ctrl-p",run:Cy,shift:Iy},{key:"Ctrl-n",run:Ey,shift:Py},{key:"Ctrl-a",run:rC,shift:mC},{key:"Ctrl-e",run:nC,shift:pC},{key:"Ctrl-d",run:Ly},{key:"Ctrl-h",run:rc},{key:"Ctrl-k",run:Uy},{key:"Ctrl-Alt-h",run:qy},{key:"Ctrl-o",run:AC},{key:"Ctrl-t",run:DC},{key:"Ctrl-v",run:tc}],RC=[{key:"ArrowLeft",run:Ay,shift:By,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:YN,shift:sC,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:eC,shift:hC,preventDefault:!0},{key:"ArrowRight",run:Dy,shift:Fy,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:KN,shift:oC,preventDefault:!0},{mac:"Cmd-ArrowRight",run:tC,shift:dC,preventDefault:!0},{key:"ArrowUp",run:Cy,shift:Iy,preventDefault:!0},{mac:"Cmd-ArrowUp",run:rd,shift:id},{mac:"Ctrl-ArrowUp",run:Qh,shift:ed},{key:"ArrowDown",run:Ey,shift:Py,preventDefault:!0},{mac:"Cmd-ArrowDown",run:nd,shift:ad},{mac:"Ctrl-ArrowDown",run:tc,shift:td},{key:"PageUp",run:Qh,shift:ed},{key:"PageDown",run:tc,shift:td},{key:"Home",run:QN,shift:fC,preventDefault:!0},{key:"Mod-Home",run:rd,shift:id},{key:"End",run:jN,shift:cC,preventDefault:!0},{key:"Mod-End",run:nd,shift:ad},{key:"Enter",run:OC},{key:"Mod-a",run:gC},{key:"Backspace",run:rc,shift:rc},{key:"Delete",run:Ly},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qy},{key:"Mod-Delete",mac:"Alt-Delete",run:xC},{mac:"Mod-Backspace",run:wC},{mac:"Mod-Delete",run:Uy}].concat(kC.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),IC=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ZN,shift:uC},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:JN,shift:lC},{key:"Alt-ArrowUp",run:SC},{key:"Shift-Alt-ArrowUp",run:CC},{key:"Alt-ArrowDown",run:NC},{key:"Shift-Alt-ArrowDown",run:EC},{key:"Escape",run:bC},{key:"Mod-Enter",run:BC},{key:"Alt-l",mac:"Ctrl-l",run:vC},{key:"Mod-i",run:yC,preventDefault:!0},{key:"Mod-[",run:Yy},{key:"Mod-]",run:Gy},{key:"Mod-Alt-\\",run:FC},{key:"Shift-Mod-k",run:MC},{key:"Shift-Mod-\\",run:aC},{key:"Mod-/",run:EN},{key:"Alt-A",run:TN}].concat(RC),PC={key:"Tab",run:Gy,shift:Yy};function ht(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?r.setAttribute(n,i):i!=null&&(r[n]=i)}e++}for(;e<arguments.length;e++)Ky(r,arguments[e]);return r}function Ky(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Ky(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}class $C{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class Wn{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,a=n.facet(jy).markerFilter;a&&(i=a(i));let s=ke.set(i.map(o=>o.from==o.to||o.from==o.to-1&&n.doc.lineAt(o.from).to==o.from?ke.widget({widget:new VC(o),diagnostic:o}).range(o.from):ke.mark({attributes:{class:"cm-lintRange cm-lintRange-"+o.severity+(o.markClass?" "+o.markClass:"")},diagnostic:o}).range(o.from,o.to)),!0);return new Wn(s,t,Pi(s))}}function Pi(r,e=null,t=0){let n=null;return r.between(t,1e9,(i,a,{spec:s})=>{if(!(e&&s.diagnostic!=e))return n=new $C(i,a,s.diagnostic),!1}),n}function Xy(r,e){let t=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(n=>n.is(ef))||r.changes.touchesRange(t.from,t.to))}function _C(r,e){return r.field(hr,!1)?e:e.concat(He.appendConfig.of(jC))}const ef=He.define(),tf=He.define(),Zy=He.define(),hr=wt.define({create(){return new Wn(ke.none,null,null)},update(r,e){if(e.docChanged){let t=r.diagnostics.map(e.changes),n=null;if(r.selected){let i=e.changes.mapPos(r.selected.from,1);n=Pi(t,r.selected.diagnostic,i)||Pi(t,null,i)}r=new Wn(t,r.panel,n)}for(let t of e.effects)t.is(ef)?r=Wn.init(t.value,r.panel,e.state):t.is(tf)?r=new Wn(r.diagnostics,t.value?fu.open:null,r.selected):t.is(Zy)&&(r=new Wn(r.diagnostics,r.panel,t.value));return r},provide:r=>[Pa.from(r,e=>e.panel),Ne.decorations.from(r,e=>e.diagnostics)]}),LC=ke.mark({class:"cm-lintRange cm-lintRange-active"});function zC(r,e,t){let{diagnostics:n}=r.state.field(hr),i=[],a=2e8,s=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(u,l,{spec:c})=>{e>=u&&e<=l&&(u==l||(e>u||t>0)&&(e<l||t<0))&&(i.push(c.diagnostic),a=Math.min(u,a),s=Math.max(l,s))});let o=r.state.facet(jy).tooltipFilter;return o&&(i=o(i)),i.length?{pos:a,end:s,above:r.state.doc.lineAt(a).to<s,create(){return{dom:Jy(r,i)}}}:null}function Jy(r,e){return ht("ul",{class:"cm-tooltip-lint"},e.map(t=>eb(r,t,!1)))}const qC=r=>{let e=r.state.field(hr,!1);(!e||!e.panel)&&r.dispatch({effects:_C(r.state,[tf.of(!0)])});let t=Ia(r,fu.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},sd=r=>{let e=r.state.field(hr,!1);return!e||!e.panel?!1:(r.dispatch({effects:tf.of(!1)}),!0)},UC=r=>{let e=r.state.field(hr,!1);if(!e)return!1;let t=r.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},HC=[{key:"Mod-Shift-m",run:qC,preventDefault:!0},{key:"F8",run:UC}],jy=Ce.define({combine(r){return Object.assign({sources:r.map(e=>e.source)},Or(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function Qy(r){let e=[];if(r)e:for(let{name:t}of r){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function eb(r,e,t){var n;let i=t?Qy(e.actions):[];return ht("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ht("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,s)=>{let o=!1,u=h=>{if(h.preventDefault(),o)return;o=!0;let d=Pi(r.state.field(hr).diagnostics,e);d&&a.apply(r,d.from,d.to)},{name:l}=a,c=i[s]?l.indexOf(i[s]):-1,f=c<0?l:[l.slice(0,c),ht("u",l.slice(c,c+1)),l.slice(c+1)];return ht("button",{type:"button",class:"cm-diagnosticAction",onclick:u,onmousedown:u,"aria-label":` Action: ${l}${c<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&ht("div",{class:"cm-diagnosticSource"},e.source))}class VC extends dn{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ht("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class od{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=eb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class fu{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)sd(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],s=Qy(a.actions);for(let o=0;o<s.length;o++)if(s[o].toUpperCase().charCodeAt(0)==i.keyCode){let u=Pi(this.view.state.field(hr).diagnostics,a);u&&a.actions[o].apply(e,u.from,u.to)}}else return;i.preventDefault()},n=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=ht("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=ht("div",{class:"cm-panel-lint"},this.list,ht("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sd(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(hr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(hr),n=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(s,o,{spec:u})=>{let l=-1,c;for(let f=n;f<this.items.length;f++)if(this.items[f].diagnostic==u.diagnostic){l=f;break}l<0?(c=new od(this.view,u.diagnostic),this.items.splice(n,0,c),i=!0):(c=this.items[l],l>n&&(this.items.splice(n,l-n),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),a=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new od(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:o})=>{let u=o.height/this.list.offsetHeight;s.top<o.top?this.list.scrollTop-=(o.top-s.top)/u:s.bottom>o.bottom&&(this.list.scrollTop+=(s.bottom-o.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(hr),n=Pi(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Zy.of(n)})}static open(e){return new fu(e)}}function ao(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Ns(r){return ao(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const WC=Ne.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ns("#d11")},".cm-lintRange-warning":{backgroundImage:Ns("orange")},".cm-lintRange-info":{backgroundImage:Ns("#999")},".cm-lintRange-hint":{backgroundImage:Ns("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function ud(r){return r=="error"?4:r=="warning"?3:r=="info"?2:1}class GC extends un{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,n)=>ud(t)<ud(n.severity)?n.severity:t,"hint")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let n=this.diagnostics,i=e.state.facet(hu).tooltipFilter;return i&&(n=i(n)),n.length&&(t.onmouseover=()=>KC(e,t,n)),t}}function YC(r,e){let t=n=>{let i=e.getBoundingClientRect();if(!(n.clientX>i.left-10&&n.clientX<i.right+10&&n.clientY>i.top-10&&n.clientY<i.bottom+10)){for(let a=n.target;a;a=a.parentNode)if(a.nodeType==1&&a.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),r.state.field(rb)&&r.dispatch({effects:rf.of(null)})}};window.addEventListener("mousemove",t)}function KC(r,e,t){function n(){let s=r.elementAtHeight(e.getBoundingClientRect().top+5-r.documentTop);r.coordsAtPos(s.from)&&r.dispatch({effects:rf.of({pos:s.from,above:!1,create(){return{dom:Jy(r,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,YC(r,e)}let{hoverTime:i}=r.state.facet(hu),a=setTimeout(n,i);e.onmouseout=()=>{clearTimeout(a),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(a),a=setTimeout(n,i)}}function XC(r,e){let t=Object.create(null);for(let i of e){let a=r.lineAt(i.from);(t[a.from]||(t[a.from]=[])).push(i)}let n=[];for(let i in t)n.push(new GC(t[i]).range(+i));return nt.of(n,!0)}const ZC=aS({class:"cm-gutter-lint",markers:r=>r.state.field(tb)}),tb=wt.define({create(){return nt.empty},update(r,e){r=r.map(e.changes);let t=e.state.facet(hu).markerFilter;for(let n of e.effects)if(n.is(ef)){let i=n.value;t&&(i=t(i||[])),r=XC(e.state.doc,i.slice(0))}return r}}),rf=He.define(),rb=wt.define({create(){return null},update(r,e){return r&&e.docChanged&&(r=Xy(e,r)?null:Object.assign(Object.assign({},r),{pos:e.changes.mapPos(r.pos)})),e.effects.reduce((t,n)=>n.is(rf)?n.value:t,r)},provide:r=>ru.from(r)}),JC=Ne.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:ao('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:ao('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:ao('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),jC=[hr,Ne.decorations.compute([hr],r=>{let{selected:e,panel:t}=r.field(hr);return!e||!t||e.from==e.to?ke.none:ke.set([LC.range(e.from,e.to)])}),rS(zC,{hideOn:Xy}),WC],hu=Ce.define({combine(r){return Or(r,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function QC(r={}){return[hu.of(r),tb,ZC,JC,rb]}function eE(r,e){function t(D){return new RegExp("^(("+D.join(")|(")+"))\\b")}const n=new RegExp("^[-+*/&|^~<>!%']"),i=new RegExp("^[([{},:=;.?]"),a=new RegExp("^((==)|(!=)|(<=)|(>=)|(<<)|(>>)|(\\.[-+*/^]))"),s=new RegExp("^((!=)|(^\\|))"),o=new RegExp("^((>>>)|(<<<))"),u=new RegExp("^[\\])]"),l=new RegExp("^[_A-Za-z¡-￿][_A-Za-z0-9¡-￿]*"),c=[],f=[],h=["expr","type"],d=["e","E","i","Infinity","LN2","LN10","LOG2E","LOG10E","NaN","null","phi","pi","PI","SQRT1_2","SQRT2","tau","undefined","version"];for(const D in r().expression.mathWithTransform)h.includes(D)||(typeof r()[D]=="function"?c.push(D):d.includes(D)||f.push(D));const m=[];for(const D in r().Unit.UNITS)for(const N in r().Unit.UNITS[D].prefixes)m.push(N+D);const p=t(c),v=t(["to","in","and","not","or","xor","mod"]),g=t(Array.from(new Set(m))),A=t(f);function y(D,N){return!D.sol()&&D.peek()==="'"?(D.next(),N.tokenize=x,"operator"):(N.tokenize=x,x(D,N))}function w(D,N){return D.match(/^.*#}/)?(N.tokenize=x,"comment"):(D.skipToEnd(),"comment")}function x(D,N){if(D.eatSpace())return null;if(D.match("#{"))return N.tokenize=w,D.skipToEnd(),"comment";if(D.match(/^#/))return D.skipToEnd(),"comment";if(D.match(/^[0-9.+-]/,!1)){if(D.match(/^[+-]?0x[0-9a-fA-F]+[ij]?/))return D.tokenize=x,"number";if(D.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?[ij]?/)||D.match(/^[+-]?\d+([EeDd][+-]?\d+)?[ij]?/))return"number"}if(D.match(t(d)))return"number";let C=D.match(/^"(?:[^"]|"")*("|$)/)||D.match(/^'(?:[^']|'')*('|$)/);return C?C[1]?"string":"string error":D.match(v)?"keyword":D.match(p)?"builtin":D.match(A)?"tag":D.match(g)?"attribute":D.match(l)?"variable":D.match(n)||D.match(a)?"operator":D.match(i)||D.match(s)||D.match(o)?null:D.match(u)?(N.tokenize=y,null):(D.next(),"error")}return{name:"mathjs",startState:function(){return{tokenize:x}},token:function(D,N){const C=N.tokenize(D,N);return(C==="number"||C==="variable")&&(N.tokenize=y),C},languageData:{commentTokens:{line:"#"},autocomplete:b}};function b(D){let N=D.matchBefore(/\w*/);if(N.from==N.to&&!D.explicit)return null;let C=[];c.forEach(S=>C.push({label:S,type:"function"})),f.forEach(S=>C.push({label:S,type:"constant"})),d.forEach(S=>C.push({label:S,type:"variable"})),e().forEach((S,M)=>C.push({label:M,type:"property"}));for(const S in r().Unit.UNITS)Cs(r().Unit.UNITS,S)&&S.startsWith(N.text)&&C.push({label:S,type:"enum"});for(const S in r().Unit.PREFIXES)if(Cs(r().Unit.PREFIXES,S)){const M=r().Unit.PREFIXES[S];for(const E in M)if(Cs(M,E)){if(E.startsWith(N.text))C.push({label:E,type:"enum"});else if(N.text.startsWith(E)){const R=N.text.substring(E.length);for(const I in r().Unit.UNITS){const k=E+I;Cs(r().Unit.UNITS,I)&&!C.includes(k)&&I.startsWith(R)&&r().Unit.isValuelessUnit(k)&&C.push({label:k,type:"enum"})}}}}return{from:N.from,options:C}}}function Cs(r,e){return r&&Object.hasOwnProperty.call(r,e)}const ld=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class $i{constructor(e,t,n=0,i=e.length,a,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=a?o=>a(ld(o)):ld,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ft(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Mc(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=gr(e);let i=this.normalize(t);for(let a=0,s=n;;a++){let o=i.charCodeAt(a),u=this.match(o,s);if(a==i.length-1){if(u)return this.value=u,this;break}s==n&&a<t.length&&t.charCodeAt(a)==o&&s++}}}match(e,t){let n=null;for(let i=0;i<this.matches.length;i+=2){let a=this.matches[i],s=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?n={from:this.matches[i+1],to:t+1}:(this.matches[i]++,s=!0)),s||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&($i.prototype[Symbol.iterator]=function(){return this});const nb={from:-1,to:-1,match:/.*/.exec("")},nf="gm"+(/x/.unicode==null?"":"u");class ib{constructor(e,t,n,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=nb,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new ab(e,t,n,i,a);this.re=new RegExp(t,nf+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=Do(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=Do(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Zu=new WeakMap;class Ei{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=Zu.get(e);if(!i||i.from>=n||i.to<=t){let o=new Ei(t,e.sliceString(t,n));return Zu.set(e,o),o}if(i.from==t&&i.to==n)return i;let{text:a,from:s}=i;return s>t&&(a=e.sliceString(t,s)+a,s=t),i.to<n&&(a+=e.sliceString(i.to,n)),Zu.set(e,new Ei(s,a)),new Ei(t,a.slice(t-s,n-s))}}class ab{constructor(e,t,n,i,a){this.text=e,this.to=a,this.done=!1,this.value=nb,this.matchPos=Do(e,i),this.re=new RegExp(t,nf+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Ei.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=Do(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ei.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ib.prototype[Symbol.iterator]=ab.prototype[Symbol.iterator]=function(){return this});function tE(r){try{return new RegExp(r,nf),!0}catch{return!1}}function Do(r,e){if(e>=r.length)return e;let t=r.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function nc(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=ht("input",{class:"cm-textfield",name:"line",value:e}),n=ht("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),r.dispatch({effects:So.of(!1)}),r.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},ht("label",r.state.phrase("Go to line"),": ",t)," ",ht("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!a)return;let{state:s}=r,o=s.doc.lineAt(s.selection.main.head),[,u,l,c,f]=a,h=c?+c.slice(1):0,d=l?+l:o.number;if(l&&f){let v=d/100;u&&(v=v*(u=="-"?-1:1)+o.number/s.doc.lines),d=Math.round(s.doc.lines*v)}else l&&u&&(d=d*(u=="-"?-1:1)+o.number);let m=s.doc.line(Math.max(1,Math.min(s.doc.lines,d))),p=he.cursor(m.from+Math.max(0,Math.min(h,m.length)));r.dispatch({effects:[So.of(!1),Ne.scrollIntoView(p.from,{y:"center"})],selection:p}),r.focus()}return{dom:n}}const So=He.define(),cd=wt.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(So)&&(r=t.value);return r},provide:r=>Pa.from(r,e=>e?nc:null)}),rE=r=>{let e=Ia(r,nc);if(!e){let t=[So.of(!0)];r.state.field(cd,!1)==null&&t.push(He.appendConfig.of([cd,nE])),r.dispatch({effects:t}),e=Ia(r,nc)}return e&&e.dom.querySelector("input").select(),!0},nE=Ne.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),iE={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},sb=Ce.define({combine(r){return Or(r,iE,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function aE(r){let e=[cE,lE];return r&&e.push(sb.of(r)),e}const sE=ke.mark({class:"cm-selectionMatch"}),oE=ke.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function fd(r,e,t,n){return(t==0||r(e.sliceDoc(t-1,t))!=gt.Word)&&(n==e.doc.length||r(e.sliceDoc(n,n+1))!=gt.Word)}function uE(r,e,t,n){return r(e.sliceDoc(t,t+1))==gt.Word&&r(e.sliceDoc(n-1,n))==gt.Word}const lE=Mt.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(sb),{state:t}=r,n=t.selection;if(n.ranges.length>1)return ke.none;let i=n.main,a,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return ke.none;let u=t.wordAt(i.head);if(!u)return ke.none;s=t.charCategorizer(i.head),a=t.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return ke.none;if(e.wholeWords){if(a=t.sliceDoc(i.from,i.to),s=t.charCategorizer(i.head),!(fd(s,t,i.from,i.to)&&uE(s,t,i.from,i.to)))return ke.none}else if(a=t.sliceDoc(i.from,i.to).trim(),!a)return ke.none}let o=[];for(let u of r.visibleRanges){let l=new $i(t.doc,a,u.from,u.to);for(;!l.next().done;){let{from:c,to:f}=l.value;if((!s||fd(s,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?o.push(oE.range(c,f)):(c>=i.to||f<=i.from)&&o.push(sE.range(c,f)),o.length>e.maxMatches))return ke.none}}return ke.set(o)}},{decorations:r=>r.decorations}),cE=Ne.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),fE=({state:r,dispatch:e})=>{let{selection:t}=r,n=he.create(t.ranges.map(i=>r.wordAt(i.head)||he.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(r.update({selection:n})),!0)};function hE(r,e){let{main:t,ranges:n}=r.selection,i=r.wordAt(t.head),a=i&&i.from==t.from&&i.to==t.to;for(let s=!1,o=new $i(r.doc,e,n[n.length-1].to);;)if(o.next(),o.done){if(s)return null;o=new $i(r.doc,e,0,Math.max(0,n[n.length-1].from-1)),s=!0}else{if(s&&n.some(u=>u.from==o.value.from))continue;if(a){let u=r.wordAt(o.value.from);if(!u||u.from!=o.value.from||u.to!=o.value.to)continue}return o.value}}const dE=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(a=>a.from===a.to))return fE({state:r,dispatch:e});let n=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(a=>r.sliceDoc(a.from,a.to)!=n))return!1;let i=hE(r,n);return i?(e(r.update({selection:r.selection.addRange(he.range(i.from,i.to),!1),effects:Ne.scrollIntoView(i.to)})),!0):!1},ai=Ce.define({combine(r){return Or(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new CE(e),scrollToMatch:e=>Ne.scrollIntoView(e)})}});function mE(r){return r?[ai.of(r),ac]:ac}class ob{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||tE(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new yE(this):new gE(this)}getCursor(e,t=0,n){let i=e.doc?e:et.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?bi(this,i,t,n):yi(this,i,t,n)}}class ub{constructor(e){this.spec=e}}function yi(r,e,t,n){return new $i(e.doc,r.unquoted,t,n,r.caseSensitive?void 0:i=>i.toLowerCase(),r.wholeWord?pE(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function pE(r,e){return(t,n,i,a)=>((a>t||a+i.length<n)&&(a=Math.max(0,t-2),i=r.sliceString(a,Math.min(r.length,n+2))),(e(No(i,t-a))!=gt.Word||e(Co(i,t-a))!=gt.Word)&&(e(Co(i,n-a))!=gt.Word||e(No(i,n-a))!=gt.Word))}class gE extends ub{constructor(e){super(e)}nextMatch(e,t,n){let i=yi(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=yi(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let a=Math.max(t,i-1e4-this.spec.unquoted.length),s=yi(this.spec,e,a,i),o=null;for(;!s.nextOverlapping().done;)o=s.value;if(o)return o;if(a==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=yi(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=yi(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function bi(r,e,t,n){return new ib(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?vE(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function No(r,e){return r.slice(zt(r,e,!1),e)}function Co(r,e){return r.slice(e,zt(r,e))}function vE(r){return(e,t,n)=>!n[0].length||(r(No(n.input,n.index))!=gt.Word||r(Co(n.input,n.index))!=gt.Word)&&(r(Co(n.input,n.index+n[0].length))!=gt.Word||r(No(n.input,n.index+n[0].length))!=gt.Word)}class yE extends ub{nextMatch(e,t,n){let i=bi(this.spec,e,n,e.doc.length).next();return i.done&&(i=bi(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let a=Math.max(t,n-i*1e4),s=bi(this.spec,e,a,n),o=null;for(;!s.next().done;)o=s.value;if(o&&(a==t||o.from>a+10))return o;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=bi(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=bi(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const za=He.define(),af=He.define(),Mn=wt.define({create(r){return new Ju(ic(r).create(),null)},update(r,e){for(let t of e.effects)t.is(za)?r=new Ju(t.value.create(),r.panel):t.is(af)&&(r=new Ju(r.query,t.value?sf:null));return r},provide:r=>Pa.from(r,e=>e.panel)});class Ju{constructor(e,t){this.query=e,this.panel=t}}const bE=ke.mark({class:"cm-searchMatch"}),xE=ke.mark({class:"cm-searchMatch cm-searchMatch-selected"}),wE=Mt.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Mn))}update(r){let e=r.state.field(Mn);(e!=r.startState.field(Mn)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return ke.none;let{view:t}=this,n=new Qn;for(let i=0,a=t.visibleRanges,s=a.length;i<s;i++){let{from:o,to:u}=a[i];for(;i<s-1&&u>a[i+1].from-2*250;)u=a[++i].to;r.highlight(t.state,o,u,(l,c)=>{let f=t.state.selection.ranges.some(h=>h.from==l&&h.to==c);n.add(l,c,f?xE:bE)})}return n.finish()}},{decorations:r=>r.decorations});function ts(r){return e=>{let t=e.state.field(Mn,!1);return t&&t.query.spec.valid?r(e,t):fb(e)}}const Eo=ts((r,{query:e})=>{let{to:t}=r.state.selection.main,n=e.nextMatch(r.state,t,t);if(!n)return!1;let i=he.single(n.from,n.to),a=r.state.facet(ai);return r.dispatch({selection:i,effects:[of(r,n),a.scrollToMatch(i.main,r)],userEvent:"select.search"}),cb(r),!0}),Mo=ts((r,{query:e})=>{let{state:t}=r,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let a=he.single(i.from,i.to),s=r.state.facet(ai);return r.dispatch({selection:a,effects:[of(r,i),s.scrollToMatch(a.main,r)],userEvent:"select.search"}),cb(r),!0}),AE=ts((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:he.create(t.map(n=>he.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),DE=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,a=[],s=0;for(let o=new $i(r.doc,r.sliceDoc(n,i));!o.next().done;){if(a.length>1e3)return!1;o.value.from==n&&(s=a.length),a.push(he.range(o.value.from,o.value.to))}return e(r.update({selection:he.create(a,s),userEvent:"select.search.matches"})),!0},hd=ts((r,{query:e})=>{let{state:t}=r,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,n,n);if(!a)return!1;let s=[],o,u,l=[];if(a.from==n&&a.to==i&&(u=t.toText(e.getReplacement(a)),s.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(t,a.from,a.to),l.push(Ne.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let c=s.length==0||s[0].from>=a.to?0:a.to-a.from-u.length;o=he.single(a.from-c,a.to-c),l.push(of(r,a)),l.push(t.facet(ai).scrollToMatch(o.main,r))}return r.dispatch({changes:s,selection:o,effects:l,userEvent:"input.replace"}),!0}),SE=ts((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(i=>{let{from:a,to:s}=i;return{from:a,to:s,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:Ne.announce.of(n),userEvent:"input.replace.all"}),!0});function sf(r){return r.state.facet(ai).createPanel(r)}function ic(r,e){var t,n,i,a,s;let o=r.selection.main,u=o.empty||o.to>o.from+100?"":r.sliceDoc(o.from,o.to);if(e&&!u)return e;let l=r.facet(ai);return new ob({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:l.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:l.regexp,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:l.wholeWord})}function lb(r){let e=Ia(r,sf);return e&&e.dom.querySelector("[main-field]")}function cb(r){let e=lb(r);e&&e==r.root.activeElement&&e.select()}const fb=r=>{let e=r.state.field(Mn,!1);if(e&&e.panel){let t=lb(r);if(t&&t!=r.root.activeElement){let n=ic(r.state,e.query.spec);n.valid&&r.dispatch({effects:za.of(n)}),t.focus(),t.select()}}else r.dispatch({effects:[af.of(!0),e?za.of(ic(r.state,e.query.spec)):He.appendConfig.of(ac)]});return!0},hb=r=>{let e=r.state.field(Mn,!1);if(!e||!e.panel)return!1;let t=Ia(r,sf);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:af.of(!1)}),!0},NE=[{key:"Mod-f",run:fb,scope:"editor search-panel"},{key:"F3",run:Eo,shift:Mo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Eo,shift:Mo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:hb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:DE},{key:"Alt-g",run:rE},{key:"Mod-d",run:dE,preventDefault:!0}];class CE{constructor(e){this.view=e;let t=this.query=e.state.field(Mn).query.spec;this.commit=this.commit.bind(this),this.searchField=ht("input",{value:t.search,placeholder:or(e,"Find"),"aria-label":or(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ht("input",{value:t.replace,placeholder:or(e,"Replace"),"aria-label":or(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ht("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ht("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ht("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,a,s){return ht("button",{class:"cm-button",name:i,onclick:a,type:"button"},s)}this.dom=ht("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>Eo(e),[or(e,"next")]),n("prev",()=>Mo(e),[or(e,"previous")]),n("select",()=>AE(e),[or(e,"all")]),ht("label",null,[this.caseField,or(e,"match case")]),ht("label",null,[this.reField,or(e,"regexp")]),ht("label",null,[this.wordField,or(e,"by word")]),...e.state.readOnly?[]:[ht("br"),this.replaceField,n("replace",()=>hd(e),[or(e,"replace")]),n("replaceAll",()=>SE(e),[or(e,"replace all")])],ht("button",{name:"close",onclick:()=>hb(e),"aria-label":or(e,"close"),type:"button"},["×"])])}commit(){let e=new ob({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:za.of(e)}))}keydown(e){vD(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Mo:Eo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),hd(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(za)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ai).top}}function or(r,e){return r.state.phrase(e)}const Es=30,Ms=/[\s\.,:;?!]/;function of(r,{from:e,to:t}){let n=r.state.doc.lineAt(e),i=r.state.doc.lineAt(t).to,a=Math.max(n.from,e-Es),s=Math.min(i,t+Es),o=r.state.sliceDoc(a,s);if(a!=n.from){for(let u=0;u<Es;u++)if(!Ms.test(o[u+1])&&Ms.test(o[u])){o=o.slice(u);break}}if(s!=i){for(let u=o.length-1;u>o.length-Es;u--)if(!Ms.test(o[u-1])&&Ms.test(o[u])){o=o.slice(0,u);break}}return Ne.announce.of(`${r.state.phrase("current match")}. ${o} ${r.state.phrase("on line")} ${n.number}.`)}const EE=Ne.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ac=[Mn,Yi.low(wE),EE];class db{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=Xt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),a=i.search(mb(e,!1));return a<0?null:{from:n+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function dd(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function ME(r){let e=Object.create(null),t=Object.create(null);for(let{label:i}of r){e[i[0]]=!0;for(let a=1;a<i.length;a++)t[i[a]]=!0}let n=dd(e)+dd(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function TE(r){let e=r.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:ME(e);return i=>{let a=i.matchBefore(n);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:t}:null}}class md{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function Tn(r){return r.selection.main.from}function mb(r,e){var t;let{source:n}=r,i=e&&n[0]!="^",a=n[n.length-1]!="$";return!i&&!a?r:new RegExp(`${i?"^":""}(?:${n})${a?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const OE=hn.define();function BE(r,e,t,n){let{main:i}=r.selection,a=t-i.from,s=n-i.from;return Object.assign(Object.assign({},r.changeByRange(o=>o!=i&&t!=n&&r.sliceDoc(o.from+a,o.from+s)!=r.sliceDoc(t,n)?{range:o}:{changes:{from:o.from+a,to:n==i.from?o.to:o.from+s,insert:e},range:he.cursor(o.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const pd=new WeakMap;function FE(r){if(!Array.isArray(r))return r;let e=pd.get(r);return e||pd.set(r,e=TE(r)),e}const uf=He.define(),qa=He.define();class kE{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Ft(e,t),i=gr(n);this.chars.push(n);let a=e.slice(t,t+i),s=a.toUpperCase();this.folded.push(Ft(s==a?a.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:n,any:i,precise:a,byWord:s}=this;if(t.length==1){let A=Ft(e,0),y=gr(A),w=y==e.length?0:-100;if(A!=t[0])if(A==n[0])w+=-200;else return!1;return this.ret(w,[0,y])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=t.length,l=0;if(o<0){for(let A=0,y=Math.min(e.length,200);A<y&&l<u;){let w=Ft(e,A);(w==t[l]||w==n[l])&&(i[l++]=A),A+=gr(w)}if(l<u)return!1}let c=0,f=0,h=!1,d=0,m=-1,p=-1,v=/[a-z]/.test(e),g=!0;for(let A=0,y=Math.min(e.length,200),w=0;A<y&&f<u;){let x=Ft(e,A);o<0&&(c<u&&x==t[c]&&(a[c++]=A),d<u&&(x==t[d]||x==n[d]?(d==0&&(m=A),p=A+1,d++):d=0));let b,D=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(b=Mc(x))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!A||D==1&&v||w==0&&D!=0)&&(t[f]==x||n[f]==x&&(h=!0)?s[f++]=A:s.length&&(g=!1)),w=D,A+=gr(x)}return f==u&&s[0]==0&&g?this.result(-100+(h?-200:0),s,e):d==u&&m==0?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):d==u?this.ret(-200+-700-e.length,[m,p]):f==u?this.result(-100+(h?-200:0)+-700+(g?0:-1100),s,e):t.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],a=0;for(let s of t){let o=s+(this.astral?gr(Ft(n,s)):1);a&&i[a-1]==s?i[a-1]=o:(i[a++]=s,i[a++]=o)}return this.ret(e-n.length,i)}}const nr=Ce.define({combine(r){return Or(r,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:RE,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>gd(e(n),t(n)),optionClass:(e,t)=>n=>gd(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function gd(r,e){return r?e?r+" "+e:r:e}function RE(r,e,t,n,i,a){let s=r.textDirection==vt.RTL,o=s,u=!1,l="top",c,f,h=e.left-i.left,d=i.right-e.right,m=n.right-n.left,p=n.bottom-n.top;if(o&&h<Math.min(m,d)?o=!1:!o&&d<Math.min(m,h)&&(o=!0),m<=(o?h:d))c=Math.max(i.top,Math.min(t.top,i.bottom-p))-e.top,f=Math.min(400,o?h:d);else{u=!0,f=Math.min(400,(s?e.right:i.right-e.left)-30);let A=i.bottom-e.bottom;A>=p||A>e.top?c=t.bottom-e.top:(l="bottom",c=e.bottom-t.top)}let v=(e.bottom-e.top)/a.offsetHeight,g=(e.right-e.left)/a.offsetWidth;return{style:`${l}: ${c/v}px; max-width: ${f/g}px`,class:"cm-completionInfo-"+(u?s?"left-narrow":"right-narrow":o?"left":"right")}}function IE(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i){let a=document.createElement("span");a.className="cm-completionLabel";let s=t.displayLabel||t.label,o=0;for(let u=0;u<i.length;){let l=i[u++],c=i[u++];l>o&&a.appendChild(document.createTextNode(s.slice(o,l)));let f=a.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(s.slice(l,c))),f.className="cm-completionMatchedText",o=c}return o<s.length&&a.appendChild(document.createTextNode(s.slice(o))),a},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function vd(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((r-e)/t);return{from:r-(n+1)*t,to:r-n*t}}class PE{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:a,selected:s}=i.open,o=e.state.facet(nr);this.optionContent=IE(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=vd(a.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{for(let l=u.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<a.length){this.applyCompletion(e,a[+c[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let l=e.state.field(this.stateField,!1);l&&l.tooltip&&e.state.facet(nr).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:qa.of(null)})}),this.list=this.dom.appendChild(this.createListBox(a,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var t,n,i;let a=e.state.field(this.stateField),s=e.startState.field(this.stateField);this.updateTooltipClass(e.state),a!=s&&(this.updateSel(),((t=a.open)===null||t===void 0?void 0:t.disabled)!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=a.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=vd(t.options.length,t.selected,this.view.state.facet(nr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(n);if(!a)return;"then"in a?a.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,n)}).catch(s=>Cr(this.view.state,s,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:a}=e;n.appendChild(i),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&_E(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),a=this.space;if(!a){let s=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return i.top>Math.min(a.bottom,t.bottom)-10||i.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(nr).positionInfo(this.view,t,i,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let s=n.from;s<n.to;s++){let{completion:o,match:u}=e[s],{section:l}=o;if(l){let h=typeof l=="string"?l:l.name;if(h!=a&&(s>n.from||n.from==0))if(a=h,typeof l!="string"&&l.header)i.appendChild(l.header(l));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let f=this.optionClass(o);f&&(c.className=f);for(let h of this.optionContent){let d=h(o,this.view.state,u);d&&c.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function $E(r,e){return t=>new PE(t,r,e)}function _E(r,e){let t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/r.offsetHeight;n.top<t.top?r.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(r.scrollTop+=(n.bottom-t.bottom)/i)}function yd(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function LE(r,e){let t=[],n=null,i=u=>{t.push(u);let{section:l}=u.completion;if(l){n||(n=[]);let c=typeof l=="string"?l:l.name;n.some(f=>f.name==c)||n.push(typeof l=="string"?{name:c}:l)}};for(let u of r)if(u.hasResult()){let l=u.result.getMatch;if(u.result.filter===!1)for(let c of u.result.options)i(new md(c,u.source,l?l(c):[],1e9-t.length));else{let c=new kE(e.sliceDoc(u.from,u.to));for(let f of u.result.options)if(c.match(f.label)){let h=f.displayLabel?l?l(f,c.matched):[]:c.matched;i(new md(f,u.source,h,c.score+(f.boost||0)))}}}if(n){let u=Object.create(null),l=0,c=(f,h)=>{var d,m;return((d=f.rank)!==null&&d!==void 0?d:1e9)-((m=h.rank)!==null&&m!==void 0?m:1e9)||(f.name<h.name?-1:1)};for(let f of n.sort(c))l-=1e5,u[f.name]=l;for(let f of t){let{section:h}=f.completion;h&&(f.score+=u[typeof h=="string"?h:h.name])}}let a=[],s=null,o=e.facet(nr).compareCompletions;for(let u of t.sort((l,c)=>c.score-l.score||o(l.completion,c.completion))){let l=u.completion;!s||s.label!=l.label||s.detail!=l.detail||s.type!=null&&l.type!=null&&s.type!=l.type||s.apply!=l.apply||s.boost!=l.boost?a.push(u):yd(u.completion)>yd(s)&&(a[a.length-1]=u),s=u.completion}return a}class Ai{constructor(e,t,n,i,a,s){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=a,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ai(this.options,bd(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,a){let s=LE(e,t);if(!s.length)return i&&e.some(u=>u.state==1)?new Ai(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let o=t.facet(nr).selectOnOpen?0:-1;if(i&&i.selected!=o&&i.selected!=-1){let u=i.options[i.selected].completion;for(let l=0;l<s.length;l++)if(s[l].completion==u){o=l;break}}return new Ai(s,bd(n,o),{pos:e.reduce((u,l)=>l.hasResult()?Math.min(u,l.from):u,1e8),create:$E(cr,vb),above:a.aboveCursor},i?i.timestamp:Date.now(),o,!1)}map(e){return new Ai(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class To{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new To(UE,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(nr),a=(n.override||t.languageDataAt("autocomplete",Tn(t)).map(FE)).map(o=>(this.active.find(l=>l.source==o)||new er(o,this.active.some(l=>l.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((o,u)=>o==this.active[u])&&(a=this.active);let s=this.open;s&&e.docChanged&&(s=s.map(e.changes)),e.selection||a.some(o=>o.hasResult()&&e.changes.touchesRange(o.from,o.to))||!zE(a,this.active)?s=Ai.build(a,t,this.id,s,n):s&&s.disabled&&!a.some(o=>o.state==1)&&(s=null),!s&&a.every(o=>o.state!=1)&&a.some(o=>o.hasResult())&&(a=a.map(o=>o.hasResult()?new er(o.source,0):o));for(let o of e.effects)o.is(gb)&&(s=s&&s.setSelected(o.value,this.id));return a==this.active&&s==this.open?this:new To(a,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:qE}}function zE(r,e){if(r==e)return!0;for(let t=0,n=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let i=t==r.length,a=n==e.length;if(i||a)return i==a;if(r[t++].result!=e[n++].result)return!1}}const qE={"aria-autocomplete":"list"};function bd(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const UE=[];function sc(r){return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class er{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=sc(e),i=this;n?i=i.handleUserEvent(e,n,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new er(i.source,0));for(let a of e.effects)if(a.is(uf))i=new er(i.source,1,a.value?Tn(e.state):-1);else if(a.is(qa))i=new er(i.source,0);else if(a.is(pb))for(let s of a.value)s.source==i.source&&(i=s);return i}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new er(this.source,1)}handleChange(e){return e.changes.touchesRange(Tn(e.startState))?new er(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new er(this.source,this.state,e.mapPos(this.explicitPos))}}class Mi extends er{constructor(e,t,n,i,a){super(e,2,t),this.result=n,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,t,n){var i;let a=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),o=Tn(e.state);if((this.explicitPos<0?o<=a:o<this.from)||o>s||t=="delete"&&Tn(e.startState)==this.from)return new er(this.source,t=="input"&&n.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),l;return HE(this.result.validFor,e.state,a,s)?new Mi(this.source,u,this.result,a,s):this.result.update&&(l=this.result.update(this.result,a,s,new db(e.state,o,u>=0)))?new Mi(this.source,u,l,l.from,(i=l.to)!==null&&i!==void 0?i:Tn(e.state)):new er(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new er(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Mi(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function HE(r,e,t,n){if(!r)return!1;let i=e.sliceDoc(t,n);return typeof r=="function"?r(i,t,n,e):mb(r,!0).test(i)}const pb=He.define({map(r,e){return r.map(t=>t.map(e))}}),gb=He.define(),cr=wt.define({create(){return To.start()},update(r,e){return r.update(e)},provide:r=>[ru.from(r,e=>e.tooltip),Ne.contentAttributes.from(r,e=>e.attrs)]});function vb(r,e){const t=e.completion.apply||e.completion.label;let n=r.state.field(cr).active.find(i=>i.source==e.source);return n instanceof Mi?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},BE(r.state,t,n.from,n.to)),{annotations:OE.of(e.completion)})):t(r,e.completion,n.from,n.to),!0):!1}function Ts(r,e="option"){return t=>{let n=t.state.field(cr,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(nr).interactionDelay)return!1;let i=1,a;e=="page"&&(a=L1(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:s}=n.open.options,o=n.open.selected>-1?n.open.selected+i*(r?1:-1):r?0:s-1;return o<0?o=e=="page"?0:s-1:o>=s&&(o=e=="page"?s-1:0),t.dispatch({effects:gb.of(o)}),!0}}const VE=r=>{let e=r.state.field(cr,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(nr).interactionDelay?!1:vb(r,e.open.options[e.open.selected])},WE=r=>r.state.field(cr,!1)?(r.dispatch({effects:uf.of(!0)}),!0):!1,GE=r=>{let e=r.state.field(cr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:qa.of(null)}),!0)};class YE{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const xd=50,KE=50,XE=1e3,ZE=Mt.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of r.state.field(cr).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(cr);if(!r.selectionSet&&!r.docChanged&&r.startState.field(cr)==e)return;let t=r.transactions.some(n=>(n.selection||n.docChanged)&&!sc(n));for(let n=0;n<this.running.length;n++){let i=this.running[n];if(t||i.updates.length+r.transactions.length>KE&&Date.now()-i.time>XE){for(let a of i.context.abortListeners)try{a()}catch(s){Cr(this.view.state,s)}i.context.abortListeners=null,this.running.splice(n--,1)}else i.updates.push(...r.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(i=>i.active.source==n.source))?setTimeout(()=>this.startUpdate(),xd):-1,this.composing!=0)for(let n of r.transactions)sc(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:r}=this.view,e=r.field(cr);for(let t of e.active)t.state==1&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Tn(e),n=new db(e,t,r.explicitPos==t),i=new YE(r,n);this.running.push(i),Promise.resolve(r.source(n)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:qa.of(null)}),Cr(this.view.state,a)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),xd))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(nr);for(let n=0;n<this.running.length;n++){let i=this.running[n];if(i.done===void 0)continue;if(this.running.splice(n--,1),i.done){let s=new Mi(i.active.source,i.active.explicitPos,i.done,i.done.from,(r=i.done.to)!==null&&r!==void 0?r:Tn(i.updates.length?i.updates[0].startState:this.view.state));for(let o of i.updates)s=s.update(o,t);if(s.hasResult()){e.push(s);continue}}let a=this.view.state.field(cr).active.find(s=>s.source==i.active.source);if(a&&a.state==1)if(i.done==null){let s=new er(i.active.source,0);for(let o of i.updates)s=s.update(o,t);s.state!=1&&e.push(s)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:pb.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(cr,!1);if(e&&e.tooltip&&this.view.state.facet(nr).closeOnBlur){let t=e.open&&L1(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&this.view.dispatch({effects:qa.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:uf.of(!1)}),20),this.composing=0}}}),JE=Ne.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ua={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Yn=He.define({map(r,e){let t=e.mapPos(r,-1,Wt.TrackAfter);return t??void 0}}),lf=new class extends jn{};lf.startSide=1;lf.endSide=-1;const yb=wt.define({create(){return nt.empty},update(r,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(n,-1)&&(r=nt.empty)}r=r.map(e.changes);for(let t of e.effects)t.is(Yn)&&(r=r.update({add:[lf.range(t.value,t.value+1)]}));return r}});function jE(){return[eM,yb]}const ju="()[]{}<>";function bb(r){for(let e=0;e<ju.length;e+=2)if(ju.charCodeAt(e)==r)return ju.charAt(e+1);return Mc(r<128?r:r+1)}function xb(r,e){return r.languageDataAt("closeBrackets",e)[0]||Ua}const QE=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),eM=Ne.inputHandler.of((r,e,t,n)=>{if((QE?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let i=r.state.selection.main;if(n.length>2||n.length==2&&gr(Ft(n,0))==1||e!=i.from||t!=i.to)return!1;let a=nM(r.state,n);return a?(r.dispatch(a),!0):!1}),tM=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=xb(r,r.selection.main.head).brackets||Ua.brackets,i=null,a=r.changeByRange(s=>{if(s.empty){let o=iM(r.doc,s.head);for(let u of n)if(u==o&&du(r.doc,s.head)==bb(Ft(u,0)))return{changes:{from:s.head-u.length,to:s.head+u.length},range:he.cursor(s.head-u.length)}}return{range:i=s}});return i||e(r.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},rM=[{key:"Backspace",run:tM}];function nM(r,e){let t=xb(r,r.selection.main.head),n=t.brackets||Ua.brackets;for(let i of n){let a=bb(Ft(i,0));if(e==i)return a==i?oM(r,i,n.indexOf(i+i+i)>-1,t):aM(r,i,a,t.before||Ua.before);if(e==a&&wb(r,r.selection.main.from))return sM(r,i,a)}return null}function wb(r,e){let t=!1;return r.field(yb).between(0,r.doc.length,n=>{n==e&&(t=!0)}),t}function du(r,e){let t=r.sliceString(e,e+2);return t.slice(0,gr(Ft(t,0)))}function iM(r,e){let t=r.sliceString(e-2,e);return gr(Ft(t,0))==t.length?t:t.slice(1)}function aM(r,e,t,n){let i=null,a=r.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:Yn.of(s.to+e.length),range:he.range(s.anchor+e.length,s.head+e.length)};let o=du(r.doc,s.head);return!o||/\s/.test(o)||n.indexOf(o)>-1?{changes:{insert:e+t,from:s.head},effects:Yn.of(s.head+e.length),range:he.cursor(s.head+e.length)}:{range:i=s}});return i?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function sM(r,e,t){let n=null,i=r.changeByRange(a=>a.empty&&du(r.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:he.cursor(a.head+t.length)}:n={range:a});return n?null:r.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function oM(r,e,t,n){let i=n.stringPrefixes||Ua.stringPrefixes,a=null,s=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Yn.of(o.to+e.length),range:he.range(o.anchor+e.length,o.head+e.length)};let u=o.head,l=du(r.doc,u),c;if(l==e){if(wd(r,u))return{changes:{insert:e+e,from:u},effects:Yn.of(u+e.length),range:he.cursor(u+e.length)};if(wb(r,u)){let h=t&&r.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+h.length,insert:h},range:he.cursor(u+h.length)}}}else{if(t&&r.sliceDoc(u-2*e.length,u)==e+e&&(c=Ad(r,u-2*e.length,i))>-1&&wd(r,c))return{changes:{insert:e+e+e+e,from:u},effects:Yn.of(u+e.length),range:he.cursor(u+e.length)};if(r.charCategorizer(u)(l)!=gt.Word&&Ad(r,u,i)>-1&&!uM(r,u,e,i))return{changes:{insert:e+e,from:u},effects:Yn.of(u+e.length),range:he.cursor(u+e.length)}}return{range:a=o}});return a?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function wd(r,e){let t=Xt(r).resolveInner(e+1);return t.parent&&t.from==e}function uM(r,e,t,n){let i=Xt(r).resolveInner(e,-1),a=n.reduce((s,o)=>Math.max(s,o.length),0);for(let s=0;s<5;s++){let o=r.sliceDoc(i.from,Math.min(i.to,i.from+t.length+a)),u=o.indexOf(t);if(!u||u>-1&&n.indexOf(o.slice(0,u))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+u;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let l=i.to==e&&i.parent;if(!l)break;i=l}return!1}function Ad(r,e,t){let n=r.charCategorizer(e);if(n(r.sliceDoc(e-1,e))!=gt.Word)return e;for(let i of t){let a=e-i.length;if(r.sliceDoc(a,e)==i&&n(r.sliceDoc(a-1,a))!=gt.Word)return a}return-1}function lM(r={}){return[cr,nr.of(r),ZE,cM,JE]}const Ab=[{key:"Ctrl-Space",run:WE},{key:"Escape",run:GE},{key:"ArrowDown",run:Ts(!0)},{key:"ArrowUp",run:Ts(!1)},{key:"PageDown",run:Ts(!0,"page")},{key:"PageUp",run:Ts(!1,"page")},{key:"Enter",run:VE}],cM=Yi.highest(vo.computeN([nr],r=>r.facet(nr).defaultKeymap?[Ab]:[]));function Vt(){return Vt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Vt.apply(this,arguments)}var Db={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function _e(r){return typeof r=="number"}function Ue(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function Er(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function si(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function tr(r){return r&&r.constructor.prototype.isUnit===!0||!1}function It(r){return typeof r=="string"}var je=Array.isArray;function Oe(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function ln(r){return Array.isArray(r)||Oe(r)}function Ha(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Nn(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function mu(r){return r&&r.constructor.prototype.isRange===!0||!1}function rs(r){return r&&r.constructor.prototype.isIndex===!0||!1}function Sb(r){return typeof r=="boolean"}function Nb(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function cf(r){return r&&r.constructor.prototype.isHelp===!0||!1}function Cb(r){return typeof r=="function"}function Eb(r){return r instanceof Date}function Mb(r){return r instanceof RegExp}function pu(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!Er(r)&&!si(r))}function Tb(r){return r===null}function Ob(r){return r===void 0}function In(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function lr(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function Bb(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fb(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function kb(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Xe(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function oc(r){return Xe(r)||xt(r)&&r.args.length===1&&Xe(r.args[0])&&"-+~".includes(r.op)}function Zi(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function cn(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function oi(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function tt(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function ns(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function xt(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Gr(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Rb(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ib(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ct(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function ff(r){return r&&r.constructor.prototype.isChain===!0||!1}function ot(r){var e=typeof r;return e==="object"?r===null?"null":Ue(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Be(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Be(t)});if(r instanceof Date)return new Date(r.valueOf());if(Ue(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return ba(r,Be)}function ba(r,e){var t={};for(var n in r)De(r,n)&&(t[n]=e(r[n]));return t}function Pb(r,e){for(var t in e)De(e,t)&&(r[t]=e[t]);return r}function $b(r,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(De(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)r[t]===void 0&&(r[t]={}),r[t]&&r[t].constructor===Object?$b(r[t],e[t]):r[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");r[t]=e[t]}return r}function ri(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!ri(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!ri(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function fM(r){var e={};return _b(r,e),e}function _b(r,e){for(var t in r)if(De(r,t)){var n=r[t];typeof n=="object"&&n!==null?_b(n,e):e[t]=n}}function so(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(s){i=s,n=!1},configurable:!0,enumerable:!0})}function De(r,e){return r&&Object.hasOwnProperty.call(r,e)}function hM(r){return r&&typeof r.factory=="function"}function dM(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=r[i];a!==void 0&&(t[i]=a)}return t}function Dd(r){return Object.keys(r).map(e=>r[e])}var Sd=["Matrix","Array"],Nd=["number","BigNumber","Fraction"];function mM(r,e){function t(n){if(n){var i=ba(r,Be);Cd(n,"matrix",Sd),Cd(n,"number",Nd),$b(r,n);var a=ba(r,Be),s=ba(n,Be);return e("config",a,i,s),a}else return ba(r,Be)}return t.MATRIX_OPTIONS=Sd,t.NUMBER_OPTIONS=Nd,Object.keys(Db).forEach(n=>{Object.defineProperty(t,n,{get:()=>r[n],enumerable:!0,configurable:!0})}),t}function pM(r,e){return r.indexOf(e)!==-1}function Cd(r,e,t){r[e]!==void 0&&!pM(t,r[e])&&console.warn('Warning: Unknown value "'+r[e]+'" for configuration option "'+e+'". Available options: '+t.map(n=>JSON.stringify(n)).join(", ")+".")}function Ed(){return!0}function pr(){return!1}function mi(){}const Md="Argument is not a typed-function.";function Lb(){function r($){return typeof $=="object"&&$!==null&&$.constructor===Object}const e=[{name:"number",test:function($){return typeof $=="number"}},{name:"string",test:function($){return typeof $=="string"}},{name:"boolean",test:function($){return typeof $=="boolean"}},{name:"Function",test:function($){return typeof $=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function($){return $ instanceof Date}},{name:"RegExp",test:function($){return $ instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function($){return $===null}},{name:"undefined",test:function($){return $===void 0}}],t={name:"any",test:Ed,isAny:!0};let n,i,a=0,s={createCount:0};function o($){const q=n.get($);if(q)return q;let Z='Unknown type "'+$+'"';const re=$.toLowerCase();let ue;for(ue of i)if(ue.toLowerCase()===re){Z+='. Did you mean "'+ue+'" ?';break}throw new TypeError(Z)}function u($){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Z=q?o(q).index:i.length,re=[];for(let se=0;se<$.length;++se){if(!$[se]||typeof $[se].name!="string"||typeof $[se].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const ge=$[se].name;if(n.has(ge))throw new TypeError('Duplicate type name "'+ge+'"');re.push(ge),n.set(ge,{name:ge,test:$[se].test,isAny:$[se].isAny,index:Z+se,conversionsTo:[]})}const ue=i.slice(Z);i=i.slice(0,Z).concat(re).concat(ue);for(let se=Z+re.length;se<i.length;++se)n.get(i[se]).index=se}function l(){n=new Map,i=[],a=0,u([t],!1)}l(),u(e);function c(){let $;for($ of i)n.get($).conversionsTo=[];a=0}function f($){const q=i.filter(Z=>{const re=n.get(Z);return!re.isAny&&re.test($)});return q.length?q:["any"]}function h($){return $&&typeof $=="function"&&"_typedFunctionData"in $}function d($,q,Z){if(!h($))throw new TypeError(Md);const re=Z&&Z.exact,ue=Array.isArray(q)?q.join(","):q,se=w(ue),ge=v(se);if(!re||ge in $.signatures){const We=$._typedFunctionData.signatureMap.get(ge);if(We)return We}const me=se.length;let be;if(re){be=[];let We;for(We in $.signatures)be.push($._typedFunctionData.signatureMap.get(We))}else be=$._typedFunctionData.signatures;for(let We=0;We<me;++We){const Ge=se[We],Ye=[];let ze;for(ze of be){const lt=N(ze.params,We);if(!(!lt||Ge.restParam&&!lt.restParam)){if(!lt.hasAny){const B=y(lt);if(Ge.types.some(W=>!B.has(W.name)))continue}Ye.push(ze)}}if(be=Ye,be.length===0)break}let pe;for(pe of be)if(pe.params.length<=me)return pe;throw new TypeError("Signature not found (signature: "+($.name||"unnamed")+"("+v(se,", ")+"))")}function m($,q,Z){return d($,q,Z).implementation}function p($,q){const Z=o(q);if(Z.test($))return $;const re=Z.conversionsTo;if(re.length===0)throw new Error("There are no conversions to "+q+" defined.");for(let ue=0;ue<re.length;ue++)if(o(re[ue].from).test($))return re[ue].convert($);throw new Error("Cannot convert "+$+" to "+q)}function v($){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return $.map(Z=>Z.name).join(q)}function g($){const q=$.indexOf("...")===0,re=(q?$.length>3?$.slice(3):"any":$).split("|").map(me=>o(me.trim()));let ue=!1,se=q?"...":"";return{types:re.map(function(me){return ue=me.isAny||ue,se+=me.name+"|",{name:me.name,typeIndex:me.index,test:me.test,isAny:me.isAny,conversion:null,conversionIndex:-1}}),name:se.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:q}}function A($){const q=$.types.map(ge=>ge.name),Z=O(q);let re=$.hasAny,ue=$.name;const se=Z.map(function(ge){const me=o(ge.from);return re=me.isAny||re,ue+="|"+ge.from,{name:ge.from,typeIndex:me.index,test:me.test,isAny:me.isAny,conversion:ge,conversionIndex:ge.index}});return{types:$.types.concat(se),name:ue,hasAny:re,hasConversion:se.length>0,restParam:$.restParam}}function y($){return $.typeSet||($.typeSet=new Set,$.types.forEach(q=>$.typeSet.add(q.name))),$.typeSet}function w($){const q=[];if(typeof $!="string")throw new TypeError("Signatures must be strings");const Z=$.trim();if(Z==="")return q;const re=Z.split(",");for(let ue=0;ue<re.length;++ue){const se=g(re[ue].trim());if(se.restParam&&ue!==re.length-1)throw new SyntaxError('Unexpected rest parameter "'+re[ue]+'": only allowed for the last parameter');if(se.types.length===0)return null;q.push(se)}return q}function x($){const q=ie($);return q?q.restParam:!1}function b($){if(!$||$.types.length===0)return Ed;if($.types.length===1)return o($.types[0].name).test;if($.types.length===2){const q=o($.types[0].name).test,Z=o($.types[1].name).test;return function(ue){return q(ue)||Z(ue)}}else{const q=$.types.map(function(Z){return o(Z.name).test});return function(re){for(let ue=0;ue<q.length;ue++)if(q[ue](re))return!0;return!1}}}function D($){let q,Z,re;if(x($)){q=le($).map(b);const ue=q.length,se=b(ie($)),ge=function(me){for(let be=ue;be<me.length;be++)if(!se(me[be]))return!1;return!0};return function(be){for(let pe=0;pe<q.length;pe++)if(!q[pe](be[pe]))return!1;return ge(be)&&be.length>=ue+1}}else return $.length===0?function(se){return se.length===0}:$.length===1?(Z=b($[0]),function(se){return Z(se[0])&&se.length===1}):$.length===2?(Z=b($[0]),re=b($[1]),function(se){return Z(se[0])&&re(se[1])&&se.length===2}):(q=$.map(b),function(se){for(let ge=0;ge<q.length;ge++)if(!q[ge](se[ge]))return!1;return se.length===q.length})}function N($,q){return q<$.length?$[q]:x($)?ie($):null}function C($,q){const Z=N($,q);return Z?y(Z):new Set}function S($){return $.conversion===null||$.conversion===void 0}function M($,q){const Z=new Set;return $.forEach(re=>{const ue=C(re.params,q);let se;for(se of ue)Z.add(se)}),Z.has("any")?["any"]:Array.from(Z)}function E($,q,Z){let re,ue;const se=$||"unnamed";let ge=Z,me;for(me=0;me<q.length;me++){const Ge=[];if(ge.forEach(Ye=>{const ze=N(Ye.params,me),lt=b(ze);(me<Ye.params.length||x(Ye.params))&&lt(q[me])&&Ge.push(Ye)}),Ge.length===0){if(ue=M(ge,me),ue.length>0){const Ye=f(q[me]);return re=new TypeError("Unexpected type of argument in function "+se+" (expected: "+ue.join(" or ")+", actual: "+Ye.join(" | ")+", index: "+me+")"),re.data={category:"wrongType",fn:se,index:me,actual:Ye,expected:ue},re}}else ge=Ge}const be=ge.map(function(Ge){return x(Ge.params)?1/0:Ge.params.length});if(q.length<Math.min.apply(null,be))return ue=M(ge,me),re=new TypeError("Too few arguments in function "+se+" (expected: "+ue.join(" or ")+", index: "+q.length+")"),re.data={category:"tooFewArgs",fn:se,index:q.length,expected:ue},re;const pe=Math.max.apply(null,be);if(q.length>pe)return re=new TypeError("Too many arguments in function "+se+" (expected: "+pe+", actual: "+q.length+")"),re.data={category:"tooManyArgs",fn:se,index:q.length,expectedLength:pe},re;const We=[];for(let Ge=0;Ge<q.length;++Ge)We.push(f(q[Ge]).join("|"));return re=new TypeError('Arguments of type "'+We.join(", ")+'" do not match any of the defined signatures of function '+se+"."),re.data={category:"mismatch",actual:We},re}function R($){let q=i.length+1;for(let Z=0;Z<$.types.length;Z++)S($.types[Z])&&(q=Math.min(q,$.types[Z].typeIndex));return q}function I($){let q=a+1;for(let Z=0;Z<$.types.length;Z++)S($.types[Z])||(q=Math.min(q,$.types[Z].conversionIndex));return q}function k($,q){if($.hasAny){if(!q.hasAny)return 1}else if(q.hasAny)return-1;if($.restParam){if(!q.restParam)return 1}else if(q.restParam)return-1;if($.hasConversion){if(!q.hasConversion)return 1}else if(q.hasConversion)return-1;const Z=R($)-R(q);if(Z<0)return-1;if(Z>0)return 1;const re=I($)-I(q);return re<0?-1:re>0?1:0}function T($,q){const Z=$.params,re=q.params,ue=ie(Z),se=ie(re),ge=x(Z),me=x(re);if(ge&&ue.hasAny){if(!me||!se.hasAny)return 1}else if(me&&se.hasAny)return-1;let be=0,pe=0,We;for(We of Z)We.hasAny&&++be,We.hasConversion&&++pe;let Ge=0,Ye=0;for(We of re)We.hasAny&&++Ge,We.hasConversion&&++Ye;if(be!==Ge)return be-Ge;if(ge&&ue.hasConversion){if(!me||!se.hasConversion)return 1}else if(me&&se.hasConversion)return-1;if(pe!==Ye)return pe-Ye;if(ge){if(!me)return 1}else if(me)return-1;const ze=(Z.length-re.length)*(ge?-1:1);if(ze!==0)return ze;const lt=[];let B=0;for(let ne=0;ne<Z.length;++ne){const ye=k(Z[ne],re[ne]);lt.push(ye),B+=ye}if(B!==0)return B;let W;for(W of lt)if(W!==0)return W;return 0}function O($){if($.length===0)return[];const q=$.map(o);$.length>1&&q.sort((ue,se)=>ue.index-se.index);let Z=q[0].conversionsTo;if($.length===1)return Z;Z=Z.concat([]);const re=new Set($);for(let ue=1;ue<q.length;++ue){let se;for(se of q[ue].conversionsTo)re.has(se.from)||(Z.push(se),re.add(se.from))}return Z}function U($,q){let Z=q;if($.some(ue=>ue.hasConversion)){const ue=x($),se=$.map(F);Z=function(){const me=[],be=ue?arguments.length-1:arguments.length;for(let pe=0;pe<be;pe++)me[pe]=se[pe](arguments[pe]);return ue&&(me[be]=arguments[be].map(se[be])),q.apply(this,me)}}let re=Z;if(x($)){const ue=$.length-1;re=function(){return Z.apply(this,ee(arguments,0,ue).concat([ee(arguments,ue)]))}}return re}function F($){let q,Z,re,ue;const se=[],ge=[];switch($.types.forEach(function(me){me.conversion&&(se.push(o(me.conversion.from).test),ge.push(me.conversion.convert))}),ge.length){case 0:return function(be){return be};case 1:return q=se[0],re=ge[0],function(be){return q(be)?re(be):be};case 2:return q=se[0],Z=se[1],re=ge[0],ue=ge[1],function(be){return q(be)?re(be):Z(be)?ue(be):be};default:return function(be){for(let pe=0;pe<ge.length;pe++)if(se[pe](be))return ge[pe](be);return be}}}function _($){function q(Z,re,ue){if(re<Z.length){const se=Z[re];let ge=[];if(se.restParam){const me=se.types.filter(S);me.length<se.types.length&&ge.push({types:me,name:"..."+me.map(be=>be.name).join("|"),hasAny:me.some(be=>be.isAny),hasConversion:!1,restParam:!0}),ge.push(se)}else ge=se.types.map(function(me){return{types:[me],name:me.name,hasAny:me.isAny,hasConversion:me.conversion,restParam:!1}});return we(ge,function(me){return q(Z,re+1,ue.concat([me]))})}else return[ue]}return q($,0,[])}function G($,q){const Z=Math.max($.length,q.length);for(let me=0;me<Z;me++){const be=C($,me),pe=C(q,me);let We=!1,Ge;for(Ge of pe)if(be.has(Ge)){We=!0;break}if(!We)return!1}const re=$.length,ue=q.length,se=x($),ge=x(q);return se?ge?re===ue:ue>=re:ge?re>=ue:re===ue}function K($){return $.map(q=>te(q)?z(q.referToSelf.callback):V(q)?xe(q.referTo.references,q.referTo.callback):q)}function L($,q,Z){const re=[];let ue;for(ue of $){let se=Z[ue];if(typeof se!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(se=q[se],typeof se!="function")return!1;re.push(se)}return re}function X($,q,Z){const re=K($),ue=new Array(re.length).fill(!1);let se=!0;for(;se;){se=!1;let ge=!0;for(let me=0;me<re.length;++me){if(ue[me])continue;const be=re[me];if(te(be))re[me]=be.referToSelf.callback(Z),re[me].referToSelf=be.referToSelf,ue[me]=!0,ge=!1;else if(V(be)){const pe=L(be.referTo.references,re,q);pe?(re[me]=be.referTo.callback.apply(this,pe),re[me].referTo=be.referTo,ue[me]=!0,ge=!1):se=!0}}if(ge&&se)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return re}function Q($){const q=/\bthis(\(|\.signatures\b)/;Object.keys($).forEach(Z=>{const re=$[Z];if(q.test(re.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function J($,q){if(s.createCount++,Object.keys(q).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&Q(q);const Z=[],re=[],ue={},se=[];let ge;for(ge in q){if(!Object.prototype.hasOwnProperty.call(q,ge))continue;const it=w(ge);if(!it)continue;Z.forEach(function(sa){if(G(sa,it))throw new TypeError('Conflicting signatures "'+v(sa)+'" and "'+v(it)+'".')}),Z.push(it);const Qt=re.length;re.push(q[ge]);const A2=it.map(A);let os;for(os of _(A2)){const sa=v(os);se.push({params:os,name:sa,fn:Qt}),os.every(D2=>!D2.hasConversion)&&(ue[sa]=Qt)}}se.sort(T);const me=X(re,ue,aa);let be;for(be in ue)Object.prototype.hasOwnProperty.call(ue,be)&&(ue[be]=me[ue[be]]);const pe=[],We=new Map;for(be of se)We.has(be.name)||(be.fn=me[be.fn],pe.push(be),We.set(be.name,be));const Ge=pe[0]&&pe[0].params.length<=2&&!x(pe[0].params),Ye=pe[1]&&pe[1].params.length<=2&&!x(pe[1].params),ze=pe[2]&&pe[2].params.length<=2&&!x(pe[2].params),lt=pe[3]&&pe[3].params.length<=2&&!x(pe[3].params),B=pe[4]&&pe[4].params.length<=2&&!x(pe[4].params),W=pe[5]&&pe[5].params.length<=2&&!x(pe[5].params),ne=Ge&&Ye&&ze&&lt&&B&&W;for(let it=0;it<pe.length;++it)pe[it].test=D(pe[it].params);const ye=Ge?b(pe[0].params[0]):pr,$e=Ye?b(pe[1].params[0]):pr,Ke=ze?b(pe[2].params[0]):pr,sr=lt?b(pe[3].params[0]):pr,Ou=B?b(pe[4].params[0]):pr,jw=W?b(pe[5].params[0]):pr,Qw=Ge?b(pe[0].params[1]):pr,e2=Ye?b(pe[1].params[1]):pr,t2=ze?b(pe[2].params[1]):pr,r2=lt?b(pe[3].params[1]):pr,n2=B?b(pe[4].params[1]):pr,i2=W?b(pe[5].params[1]):pr;for(let it=0;it<pe.length;++it)pe[it].implementation=U(pe[it].params,pe[it].fn);const a2=Ge?pe[0].implementation:mi,s2=Ye?pe[1].implementation:mi,o2=ze?pe[2].implementation:mi,u2=lt?pe[3].implementation:mi,l2=B?pe[4].implementation:mi,c2=W?pe[5].implementation:mi,f2=Ge?pe[0].params.length:-1,h2=Ye?pe[1].params.length:-1,d2=ze?pe[2].params.length:-1,m2=lt?pe[3].params.length:-1,p2=B?pe[4].params.length:-1,g2=W?pe[5].params.length:-1,v2=ne?6:0,y2=pe.length,b2=pe.map(it=>it.test),x2=pe.map(it=>it.implementation),w2=function(){for(let Qt=v2;Qt<y2;Qt++)if(b2[Qt](arguments))return x2[Qt].apply(this,arguments);return s.onMismatch($,arguments,pe)};function aa(it,Qt){return arguments.length===f2&&ye(it)&&Qw(Qt)?a2.apply(this,arguments):arguments.length===h2&&$e(it)&&e2(Qt)?s2.apply(this,arguments):arguments.length===d2&&Ke(it)&&t2(Qt)?o2.apply(this,arguments):arguments.length===m2&&sr(it)&&r2(Qt)?u2.apply(this,arguments):arguments.length===p2&&Ou(it)&&n2(Qt)?l2.apply(this,arguments):arguments.length===g2&&jw(it)&&i2(Qt)?c2.apply(this,arguments):w2.apply(this,arguments)}try{Object.defineProperty(aa,"name",{value:$})}catch{}return aa.signatures=ue,aa._typedFunctionData={signatures:pe,signatureMap:We},aa}function ae($,q,Z){throw E($,q,Z)}function le($){return ee($,0,$.length-1)}function ie($){return $[$.length-1]}function ee($,q,Z){return Array.prototype.slice.call($,q,Z)}function fe($,q){for(let Z=0;Z<$.length;Z++)if(q($[Z]))return $[Z]}function we($,q){return Array.prototype.concat.apply([],$.map(q))}function ve(){const $=le(arguments).map(Z=>v(w(Z))),q=ie(arguments);if(typeof q!="function")throw new TypeError("Callback function expected as last argument");return xe($,q)}function xe($,q){return{referTo:{references:$,callback:q}}}function z($){if(typeof $!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:$}}}function V($){return $&&typeof $.referTo=="object"&&Array.isArray($.referTo.references)&&typeof $.referTo.callback=="function"}function te($){return $&&typeof $.referToSelf=="object"&&typeof $.referToSelf.callback=="function"}function H($,q){if(!$)return q;if(q&&q!==$){const Z=new Error("Function names do not match (expected: "+$+", actual: "+q+")");throw Z.data={actual:q,expected:$},Z}return $}function Y($){let q;for(const Z in $)Object.prototype.hasOwnProperty.call($,Z)&&(h($[Z])||typeof $[Z].signature=="string")&&(q=H(q,$[Z].name));return q}function j($,q){let Z;for(Z in q)if(Object.prototype.hasOwnProperty.call(q,Z)){if(Z in $&&q[Z]!==$[Z]){const re=new Error('Signature "'+Z+'" is defined twice');throw re.data={signature:Z,sourceFunction:q[Z],destFunction:$[Z]},re}$[Z]=q[Z]}}const ce=s;s=function($){const q=typeof $=="string",Z=q?1:0;let re=q?$:"";const ue={};for(let se=Z;se<arguments.length;++se){const ge=arguments[se];let me={},be;if(typeof ge=="function"?(be=ge.name,typeof ge.signature=="string"?me[ge.signature]=ge:h(ge)&&(me=ge.signatures)):r(ge)&&(me=ge,q||(be=Y(ge))),Object.keys(me).length===0){const pe=new TypeError("Argument to 'typed' at index "+se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw pe.data={index:se,argument:ge},pe}q||(re=H(re,be)),j(ue,me)}return J(re||"",ue)},s.create=Lb,s.createCount=ce.createCount,s.onMismatch=ae,s.throwMismatchError=ae,s.createError=E,s.clear=l,s.clearConversions=c,s.addTypes=u,s._findType=o,s.referTo=ve,s.referToSelf=z,s.convert=p,s.findSignature=d,s.find=m,s.isTypedFunction=h,s.warnAgainstDeprecatedThis=!0,s.addType=function($,q){let Z="any";q!==!1&&n.has("Object")&&(Z="Object"),s.addTypes([$],Z)};function oe($){if(!$||typeof $.from!="string"||typeof $.to!="string"||typeof $.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if($.to===$.from)throw new SyntaxError('Illegal to define conversion from "'+$.from+'" to itself.')}return s.addConversion=function($){oe($);const q=o($.to);if(q.conversionsTo.every(function(Z){return Z.from!==$.from}))q.conversionsTo.push({from:$.from,convert:$.convert,index:a++});else throw new Error('There is already a conversion from "'+$.from+'" to "'+q.name+'"')},s.addConversions=function($){$.forEach(s.addConversion)},s.removeConversion=function($){oe($);const q=o($.to),Z=fe(q.conversionsTo,ue=>ue.from===$.from);if(!Z)throw new Error("Attempt to remove nonexistent conversion from "+$.from+" to "+$.to);if(Z.convert!==$.convert)throw new Error("Conversion to remove does not match existing conversion");const re=q.conversionsTo.indexOf(Z);q.conversionsTo.splice(re,1)},s.resolve=function($,q){if(!h($))throw new TypeError(Md);const Z=$._typedFunctionData.signatures;for(let re=0;re<Z.length;++re)if(Z[re].test(q))return Z[re];return null},s}const Kn=Lb();function Ee(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}var Cn=Math.sign||function(r){return r>0?1:r<0?-1:0},gM=Math.log2||function(e){return Math.log(e)/Math.LN2},vM=Math.log10||function(e){return Math.log(e)/Math.LN10},yM=Math.log1p||function(r){return Math.log(r+1)},bM=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},xM=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Qu(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ee(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Ee(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),a="i".concat(t)}var s="";return r<0&&(r=-r,s="-"),"".concat(s).concat(i).concat(r.toString(e)).concat(a)}function Jn(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var t="auto",n,i;if(e&&(e.notation&&(t=e.notation),_e(e)?n=e:_e(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return zb(r,n);case"exponential":return qb(r,n);case"engineering":return wM(r,n);case"bin":return Qu(r,2,i);case"oct":return Qu(r,8,i);case"hex":return Qu(r,16,i);case"auto":return AM(r,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function gu(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:t,coefficients:s,exponent:i}}function wM(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=gu(r),n=vu(t,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(_e(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),u=0;u<o;u++)a.push(0);for(var l=Math.abs(i-s),c=1;l>0;)c++,l--;var f=a.slice(c).join(""),h=_e(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=a.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+s.toString();return n.sign+d}function zb(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=gu(r),n=typeof e=="number"?vu(t,t.exponent+1+e):t,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(Ti(s-i.length))),a<0&&(i=Ti(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function qb(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=gu(r),n=e?vu(t,e):t,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Ti(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function AM(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=t&&t.lowerExp!==void 0?t.lowerExp:-3,i=t&&t.upperExp!==void 0?t.upperExp:5,a=gu(r),s=e?vu(a,e):a;if(s.exponent<n||s.exponent>=i)return qb(r,e);var o=s.coefficients,u=s.exponent;o.length<e&&(o=o.concat(Ti(e-o.length))),o=o.concat(Ti(u-o.length+1+(o.length<e?e-o.length:0))),o=Ti(-u).concat(o);var l=u>0?u:0;return l<o.length-1&&o.splice(l+1,0,"."),s.sign+o.join("")}function vu(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),t.exponent++,a++),a--,n[a]++}}return t}function Ti(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function DM(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var SM=Number.EPSILON||2220446049250313e-31;function dr(r,e,t){if(t==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<SM?!0:n<=Math.max(Math.abs(r),Math.abs(e))*t}return!1}var NM=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},CM=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},EM=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},MM=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},TM=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},OM=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function BM(r,e){var t=r>0?!0:r<0?!1:1/r===1/0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function el(r,e,t){var n=r.constructor,i=new n(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ee(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),a="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(a);case 8:return"".concat(r.toOctal()).concat(a);case 16:return"".concat(r.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function FM(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var t="auto",n,i;if(e!==void 0&&(e.notation&&(t=e.notation),typeof e=="number"?n=e:e.precision!==void 0&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return RM(r,n);case"exponential":return Td(r,n);case"engineering":return kM(r,n);case"bin":return el(r,2,i);case"oct":return el(r,8,i);case"hex":return el(r,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,s=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var o,u=r.toSignificantDigits(n),l=u.e;return l>=a&&l<s?o=u.toFixed():o=Td(r,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function kM(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.indexOf("e")!==-1){var s=r.constructor;a=new s(a).toFixed()}return a+"e"+(t>=0?"+":"")+n.toString()}function Td(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function RM(r,e){return r.toFixed(e)}function IM(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function qe(r,e){var t=PM(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function PM(r,e){if(typeof r=="number")return Jn(r,e);if(Ue(r))return FM(r,e);if($M(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return Ub(r,e);if(It(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>'"'+n+'": '+qe(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function Os(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);i==="\\"?(t+=i,n++,i=e.charAt(n),(i===""||'"\\/bfnrtu'.indexOf(i)===-1)&&(t+="\\"),t+=i):i==='"'?t+='\\"':t+=i,n++}return'"'+t+'"'}function vr(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function Ub(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=Ub(r[i],e);return t+="]",t}else return qe(r,e)}function $M(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function uc(r,e){if(!It(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+ot(r)+", index: 0)");if(!It(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+ot(e)+", index: 1)");return r===e?0:r>e?1:-1}function Le(r,e,t){if(!(this instanceof Le))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Le.prototype=new RangeError;Le.prototype.constructor=RangeError;Le.prototype.name="DimensionError";Le.prototype.isDimensionError=!0;function Ar(r,e,t){if(!(this instanceof Ar))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ar.prototype=new RangeError;Ar.prototype.constructor=RangeError;Ar.prototype.name="IndexError";Ar.prototype.isIndexError=!0;function Pe(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function Hb(r,e,t){var n,i=r.length;if(i!==e[t])throw new Le(i,e[t]);if(t<e.length-1){var a=t+1;for(n=0;n<i;n++){var s=r[n];if(!Array.isArray(s))throw new Le(e.length-1,e.length,"<");Hb(r[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new Le(e.length+1,e.length,">")}function Od(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new Le(r.length,0)}else Hb(r,e,0)}function Oo(r,e){var t=r.isMatrix?r._size:Pe(r),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==t[a])throw new Le(i,t[a])})}function at(r,e){if(r!==void 0){if(!_e(r)||!Ee(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Ar(r,e)}}function _i(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&je(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(It(t)&&t.length===0)return!0}return!1}function Li(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!_e(i)||!Ee(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+qe(e)+")")}),(_e(r)||Ue(r))&&(r=[r]);var n=t!==void 0?t:0;return lc(r,e,0,n),r}function lc(r,e,t,n){var i,a,s=r.length,o=e[t],u=Math.min(s,o);if(r.length=o,t<e.length-1){var l=t+1;for(i=0;i<u;i++)a=r[i],Array.isArray(a)||(a=[a],r[i]=a),lc(a,e,l,n);for(i=u;i<o;i++)a=[],r[i]=a,lc(a,e,l,n)}else{for(i=0;i<u;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=u;i<o;i++)r[i]=n}}function hf(r,e){var t=Je(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Le(0,n,"!=");e=df(e,n);var i=Vb(e);if(n!==i)throw new Le(i,n,"!=");try{return _M(t,e)}catch(a){throw a instanceof Le?new Le(i,n,"!="):a}}function df(r,e){var t=Vb(r),n=r.slice(),i=-1,a=r.indexOf(i),s=r.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,u=e%t===0;if(o)if(u)n[a]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function Vb(r){return r.reduce((e,t)=>e*t,1)}function _M(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=t.length/a,o=0;o<s;o++)n.push(t.slice(o*a,(o+1)*a));t=n}return t}function Bo(r,e){for(var t=e||Pe(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=Wb(r,n,0),t.length=n),r}function Wb(r,e,t){var n,i;if(t<e){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=Wb(r[n],e,a)}else for(;Array.isArray(r);)r=r[0];return r}function Gb(r,e,t,n){var i=n||Pe(r);if(t)for(var a=0;a<t;a++)r=[r],i.unshift(1);for(r=Yb(r,e,0);i.length<e;)i.push(1);return r}function Yb(r,e,t){var n,i;if(Array.isArray(r)){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=Yb(r[n],e,a)}else for(var s=t;s<e;s++)r=[r];return r}function Je(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function an(r,e){return Array.prototype.map.call(r,e)}function yu(r,e){Array.prototype.forEach.call(r,e)}function Kb(r,e){if(Pe(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function Fo(r,e){if(Pe(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function Bd(r,e){return Array.prototype.join.call(r,e)}function zi(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function ko(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function Va(r,e){for(var t,n=0,i=0;i<r.length;i++){var a=r[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?Va(a,e):e(a);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function Fd(r,e){return r.indexOf(e)!==-1}function Xb(r,e,t,n){if(n<t){if(r.length!==e.length)throw new Le(r.length,e.length);for(var i=[],a=0;a<r.length;a++)i[a]=Xb(r[a],e[a],t,n+1);return i}else return r.concat(e)}function Zb(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return Xb(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function LM(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(h=>h.length),i=Math.max(...n),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var o=e[s],u=n[s],l=0;l<u;l++){var c=i-u+l;o[l]>a[c]&&(a[c]=o[l])}for(var f=0;f<e.length;f++)Ro(e[f],a);return a}function Ro(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var a=t-n+i;if(r[i]<e[a]&&r[i]>1||r[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[a]))}}function kd(r,e){var t=Pe(r);if(ri(t,e))return r;Ro(t,e);var n=LM(t,e),i=n.length,a=[...Array(i-t.length).fill(1),...t],s=qM(r);t.length<i&&(s=hf(s,a),t=Pe(s));for(var o=0;o<i;o++)t[o]<n[o]&&(s=zM(s,n[o],o),t=Pe(s));return s}function zM(r,e,t){return Zb(...Array(e).fill(r),t)}function qM(r){return Vt([],r)}function P(r,e,t,n){function i(a){var s=dM(a,e.map(Jb));return UM(r,e,a),t(s)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ca(r){return typeof r=="function"&&typeof r.fn=="string"&&Array.isArray(r.dependencies)}function UM(r,e,t){var n=e.filter(a=>!HM(a)).every(a=>t[a]!==void 0);if(!n){var i=e.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function HM(r){return r&&r[0]==="?"}function Jb(r){return r&&r[0]==="?"?r.slice(1):r}function Kt(r,e){if(Qb(r)&&jb(r,e))return r[e];throw typeof r[e]=="function"&&mf(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function qi(r,e,t){if(Qb(r)&&jb(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function VM(r,e){return e in r}function jb(r,e){return!r||typeof r!="object"?!1:De(GM,e)?!0:!(e in Object.prototype||e in Function.prototype)}function WM(r,e){if(!mf(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function mf(r,e){return r==null||typeof r[e]!="function"||De(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:De(YM,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Qb(r){return typeof r=="object"&&r&&r.constructor===Object}var GM={length:!0,name:!0},YM={toString:!0,valueOf:!0,toLocaleString:!0};class pf{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Kt(this.wrappedObject,e)}set(e,t){return qi(this.wrappedObject,e,t),this}has(e){return VM(this.wrappedObject,e)}}function Ui(){return new Map}function Oi(r){if(!r)return Ui();if(gf(r))return r;if(pu(r))return new pf(r);throw new Error("createMap can create maps from objects or Maps")}function KM(r){if(r instanceof pf)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);qi(e,t,n)}return e}function gf(r){return r?r instanceof Map||r instanceof pf||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function Rd(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];for(var i of t)if(i){if(gf(i))for(var a of i.keys())r.set(a,i.get(a));else if(pu(i))for(var s of Object.keys(i))r.set(s,i[s])}return r}var ex=function(){return ex=Kn.create,Kn},XM=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ZM=P("typed",XM,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:a}=e,s=ex();return s.clear(),s.addTypes([{name:"number",test:_e},{name:"Complex",test:Er},{name:"BigNumber",test:Ue},{name:"Fraction",test:si},{name:"Unit",test:tr},{name:"identifier",test:o=>It&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:It},{name:"Chain",test:ff},{name:"Array",test:je},{name:"Matrix",test:Oe},{name:"DenseMatrix",test:Ha},{name:"SparseMatrix",test:Nn},{name:"Range",test:mu},{name:"Index",test:rs},{name:"boolean",test:Sb},{name:"ResultSet",test:Nb},{name:"Help",test:cf},{name:"function",test:Cb},{name:"Date",test:Eb},{name:"RegExp",test:Mb},{name:"null",test:Tb},{name:"undefined",test:Ob},{name:"AccessorNode",test:In},{name:"ArrayNode",test:lr},{name:"AssignmentNode",test:Bb},{name:"BlockNode",test:Fb},{name:"ConditionalNode",test:kb},{name:"ConstantNode",test:Xe},{name:"FunctionNode",test:cn},{name:"FunctionAssignmentNode",test:Zi},{name:"IndexNode",test:oi},{name:"Node",test:tt},{name:"ObjectNode",test:ns},{name:"OperatorNode",test:xt},{name:"ParenthesisNode",test:Gr},{name:"RangeNode",test:Rb},{name:"RelationalNode",test:Ib},{name:"SymbolNode",test:Ct},{name:"Map",test:gf},{name:"Object",test:pu}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(t||tl(u),DM(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new t(u)}},{from:"number",to:"Complex",convert:function(u){return n||Bs(u),new n(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return n||Bs(u),new n(u.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return n||Bs(u),new n(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){a||rl(u);var l=new a(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){t||tl(u);try{return new t(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(u){a||rl(u);try{return new a(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){n||Bs(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return t||tl(u),new t(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return a||rl(u),new a(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||JM(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&ln(u[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&ln(u[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s});function tl(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function Bs(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function JM(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function rl(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var jM="ResultSet",QM=[],eT=P(jM,QM,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Di=9e15,Ln=1e9,cc="0123456789abcdef",Io="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Po="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",fc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Di,maxE:Di,crypto:!1},tx,en,Re=!0,bu="[DecimalError] ",Pn=bu+"Invalid argument: ",rx=bu+"Precision limit exceeded",nx=bu+"crypto unavailable",ix="[object Decimal]",qt=Math.floor,Dt=Math.pow,tT=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rT=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nT=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ax=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr=1e7,Fe=7,iT=9007199254740991,aT=Io.length-1,hc=Po.length-1,de={toStringTag:ix};de.absoluteValue=de.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Te(r)};de.ceil=function(){return Te(new this.constructor(this),this.e+1,2)};de.clampedTo=de.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(Pn+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};de.comparedTo=de.cmp=function(r){var e,t,n,i,a=this,s=a.d,o=(r=new a.constructor(r)).d,u=a.s,l=r.s;if(!s||!o)return!u||!l?NaN:u!==l?u:s===o?0:!s^u<0?1:-1;if(!s[0]||!o[0])return s[0]?u:o[0]?-l:0;if(u!==l)return u;if(a.e!==r.e)return a.e>r.e^u<0?1:-1;for(n=s.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(s[e]!==o[e])return s[e]>o[e]^u<0?1:-1;return n===i?0:n>i^u<0?1:-1};de.cosine=de.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Fe,n.rounding=1,t=sT(n,cx(n,t)),n.precision=r,n.rounding=e,Te(en==2||en==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};de.cubeRoot=de.cbrt=function(){var r,e,t,n,i,a,s,o,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Re=!1,a=c.s*Dt(c.s*c,1/3),!a||Math.abs(a)==1/0?(t=Pt(c.d),r=c.e,(a=(r-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=Dt(t,1/3),r=qt((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new f(t),n.s=c.s):n=new f(a.toString()),s=(r=f.precision)+3;;)if(o=n,u=o.times(o).times(o),l=u.plus(c),n=ft(l.plus(c).times(o),l.plus(u),s+2,1),Pt(o.d).slice(0,s)===(t=Pt(n.d)).slice(0,s))if(t=t.slice(s-3,s+1),t=="9999"||!i&&t=="4999"){if(!i&&(Te(o,r+1,0),o.times(o).times(o).eq(c))){n=o;break}s+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Te(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return Re=!0,Te(n,r,f.rounding,e)};de.decimalPlaces=de.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-qt(this.e/Fe))*Fe,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};de.dividedBy=de.div=function(r){return ft(this,new this.constructor(r))};de.dividedToIntegerBy=de.divToInt=function(r){var e=this,t=e.constructor;return Te(ft(e,new t(r),0,1,1),t.precision,t.rounding)};de.equals=de.eq=function(r){return this.cmp(r)===0};de.floor=function(){return Te(new this.constructor(this),this.e+1,3)};de.greaterThan=de.gt=function(r){return this.cmp(r)>0};de.greaterThanOrEqualTo=de.gte=function(r){var e=this.cmp(r);return e==1||e===0};de.hyperbolicCosine=de.cosh=function(){var r,e,t,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;t=s.precision,n=s.rounding,s.precision=t+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(r=Math.ceil(i/3),e=(1/wu(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=Hi(s,1,a.times(e),new s(1),!0);for(var u,l=r,c=new s(8);l--;)u=a.times(a),a=o.minus(u.times(c.minus(u.times(c))));return Te(a,s.precision=t,s.rounding=n,!0)};de.hyperbolicSine=de.sinh=function(){var r,e,t,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Hi(a,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/wu(5,r)),i=Hi(a,2,i,i,!0);for(var s,o=new a(5),u=new a(16),l=new a(20);r--;)s=i.times(i),i=i.times(o.plus(s.times(u.times(s).plus(l))))}return a.precision=e,a.rounding=t,Te(i,e,t,!0)};de.hyperbolicTangent=de.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,ft(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};de.inverseCosine=de.acos=function(){var r,e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,a=t.rounding;return n!==-1?n===0?e.isNeg()?Nr(t,i,a):new t(0):new t(NaN):e.isZero()?Nr(t,i+4,a).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=Nr(t,i+4,a).times(.5),t.precision=i,t.rounding=a,r.minus(e))};de.inverseHyperbolicCosine=de.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Re=!1,t=t.times(t).minus(1).sqrt().plus(t),Re=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};de.inverseHyperbolicSine=de.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Re=!1,t=t.times(t).plus(1).sqrt().plus(t),Re=!0,n.precision=r,n.rounding=e,t.ln())};de.inverseHyperbolicTangent=de.atanh=function(){var r,e,t,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=a.precision,e=a.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Te(new a(i),r,e,!0):(a.precision=t=n-i.e,i=ft(i.plus(1),new a(1).minus(i),t+r,1),a.precision=r+4,a.rounding=1,i=i.ln(),a.precision=r,a.rounding=e,i.times(.5))):new a(NaN)};de.inverseSine=de.asin=function(){var r,e,t,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,n=a.rounding,e!==-1?e===0?(r=Nr(a,t+4,n).times(.5),r.s=i.s,r):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=n,i.times(2)))};de.inverseTangent=de.atan=function(){var r,e,t,n,i,a,s,o,u,l=this,c=l.constructor,f=c.precision,h=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=hc)return s=Nr(c,f+4,h).times(.25),s.s=l.s,s}else{if(!l.s)return new c(NaN);if(f+4<=hc)return s=Nr(c,f+4,h).times(.5),s.s=l.s,s}for(c.precision=o=f+10,c.rounding=1,t=Math.min(28,o/Fe+2|0),r=t;r;--r)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Re=!1,e=Math.ceil(o/Fe),n=1,u=l.times(l),s=new c(l),i=l;r!==-1;)if(i=i.times(u),a=s.minus(i.div(n+=2)),i=i.times(u),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(r=e;s.d[r]===a.d[r]&&r--;);return t&&(s=s.times(2<<t-1)),Re=!0,Te(s,c.precision=f,c.rounding=h,!0)};de.isFinite=function(){return!!this.d};de.isInteger=de.isInt=function(){return!!this.d&&qt(this.e/Fe)>this.d.length-2};de.isNaN=function(){return!this.s};de.isNegative=de.isNeg=function(){return this.s<0};de.isPositive=de.isPos=function(){return this.s>0};de.isZero=function(){return!!this.d&&this.d[0]===0};de.lessThan=de.lt=function(r){return this.cmp(r)<0};de.lessThanOrEqualTo=de.lte=function(r){return this.cmp(r)<1};de.logarithm=de.log=function(r){var e,t,n,i,a,s,o,u,l=this,c=l.constructor,f=c.precision,h=c.rounding,d=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=l.d,l.s<0||!t||!t[0]||l.eq(1))return new c(t&&!t[0]?-1/0:l.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(Re=!1,o=f+d,s=En(l,o),n=e?$o(c,o+10):En(r,o),u=ft(s,n,o,1),Wa(u.d,i=f,h))do if(o+=10,s=En(l,o),n=e?$o(c,o+10):En(r,o),u=ft(s,n,o,1),!a){+Pt(u.d).slice(i+1,i+15)+1==1e14&&(u=Te(u,f+1,0));break}while(Wa(u.d,i+=10,h));return Re=!0,Te(u,f,h)};de.minus=de.sub=function(r){var e,t,n,i,a,s,o,u,l,c,f,h,d=this,m=d.constructor;if(r=new m(r),!d.d||!r.d)return!d.s||!r.s?r=new m(NaN):d.d?r.s=-r.s:r=new m(r.d||d.s!==r.s?d:NaN),r;if(d.s!=r.s)return r.s=-r.s,d.plus(r);if(l=d.d,h=r.d,o=m.precision,u=m.rounding,!l[0]||!h[0]){if(h[0])r.s=-r.s;else if(l[0])r=new m(d);else return new m(u===3?-0:0);return Re?Te(r,o,u):r}if(t=qt(r.e/Fe),c=qt(d.e/Fe),l=l.slice(),a=c-t,a){for(f=a<0,f?(e=l,a=-a,s=h.length):(e=h,t=c,s=l.length),n=Math.max(Math.ceil(o/Fe),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=l.length,s=h.length,f=n<s,f&&(s=n),n=0;n<s;n++)if(l[n]!=h[n]){f=l[n]<h[n];break}a=0}for(f&&(e=l,l=h,h=e,r.s=-r.s),s=l.length,n=h.length-s;n>0;--n)l[s++]=0;for(n=h.length;n>a;){if(l[--n]<h[n]){for(i=n;i&&l[--i]===0;)l[i]=Mr-1;--l[i],l[n]+=Mr}l[n]-=h[n]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--t;return l[0]?(r.d=l,r.e=xu(l,t),Re?Te(r,o,u):r):new m(u===3?-0:0)};de.modulo=de.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Te(new n(t),n.precision,n.rounding):(Re=!1,n.modulo==9?(e=ft(t,r.abs(),0,3,1),e.s*=r.s):e=ft(t,r,0,n.modulo,1),e=e.times(r),Re=!0,t.minus(e))};de.naturalExponential=de.exp=function(){return dc(this)};de.naturalLogarithm=de.ln=function(){return En(this)};de.negated=de.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Te(r)};de.plus=de.add=function(r){var e,t,n,i,a,s,o,u,l,c,f=this,h=f.constructor;if(r=new h(r),!f.d||!r.d)return!f.s||!r.s?r=new h(NaN):f.d||(r=new h(r.d||f.s===r.s?f:NaN)),r;if(f.s!=r.s)return r.s=-r.s,f.minus(r);if(l=f.d,c=r.d,o=h.precision,u=h.rounding,!l[0]||!c[0])return c[0]||(r=new h(f)),Re?Te(r,o,u):r;if(a=qt(f.e/Fe),n=qt(r.e/Fe),l=l.slice(),i=a-n,i){for(i<0?(t=l,i=-i,s=c.length):(t=c,n=a,s=l.length),a=Math.ceil(o/Fe),s=a>s?a+1:s+1,i>s&&(i=s,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(s=l.length,i=c.length,s-i<0&&(i=s,t=c,c=l,l=t),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Mr|0,l[i]%=Mr;for(e&&(l.unshift(e),++n),s=l.length;l[--s]==0;)l.pop();return r.d=l,r.e=xu(l,n),Re?Te(r,o,u):r};de.precision=de.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Pn+r);return t.d?(e=sx(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};de.round=function(){var r=this,e=r.constructor;return Te(new e(r),r.e+1,e.rounding)};de.sine=de.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Fe,n.rounding=1,t=uT(n,cx(n,t)),n.precision=r,n.rounding=e,Te(en>2?t.neg():t,r,e,!0)):new n(NaN)};de.squareRoot=de.sqrt=function(){var r,e,t,n,i,a,s=this,o=s.d,u=s.e,l=s.s,c=s.constructor;if(l!==1||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?s:1/0);for(Re=!1,l=Math.sqrt(+s),l==0||l==1/0?(e=Pt(o),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=qt((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new c(e)):n=new c(l.toString()),t=(u=c.precision)+3;;)if(a=n,n=a.plus(ft(s,a,t+2,1)).times(.5),Pt(a.d).slice(0,t)===(e=Pt(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Te(a,u+1,0),a.times(a).eq(s))){n=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Te(n,u+1,1),r=!n.times(n).eq(s));break}return Re=!0,Te(n,u,c.rounding,r)};de.tangent=de.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=ft(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Te(en==2||en==4?t.neg():t,r,e,!0)):new n(NaN)};de.times=de.mul=function(r){var e,t,n,i,a,s,o,u,l,c=this,f=c.constructor,h=c.d,d=(r=new f(r)).d;if(r.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!r.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?r.s/0:r.s*0);for(t=qt(c.e/Fe)+qt(r.e/Fe),u=h.length,l=d.length,u<l&&(a=h,h=d,d=a,s=u,u=l,l=s),a=[],s=u+l,n=s;n--;)a.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)o=a[i]+d[n]*h[i-n-1]+e,a[i--]=o%Mr|0,e=o/Mr|0;a[i]=(a[i]+e)%Mr|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),r.d=a,r.e=xu(a,t),Re?Te(r,f.precision,f.rounding):r};de.toBinary=function(r,e){return vf(this,2,r,e)};de.toDecimalPlaces=de.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(ar(r,0,Ln),e===void 0?e=n.rounding:ar(e,0,8),Te(t,r+t.e+1,e))};de.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Yr(n,!0):(ar(r,0,Ln),e===void 0?e=i.rounding:ar(e,0,8),n=Te(new i(n),r+1,e),t=Yr(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};de.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?t=Yr(i):(ar(r,0,Ln),e===void 0?e=a.rounding:ar(e,0,8),n=Te(new a(i),r+i.e+1,e),t=Yr(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};de.toFraction=function(r){var e,t,n,i,a,s,o,u,l,c,f,h,d=this,m=d.d,p=d.constructor;if(!m)return new p(d);if(l=t=new p(1),n=u=new p(0),e=new p(n),a=e.e=sx(m)-d.e-1,s=a%Fe,e.d[0]=Dt(10,s<0?Fe+s:s),r==null)r=a>0?e:l;else{if(o=new p(r),!o.isInt()||o.lt(l))throw Error(Pn+o);r=o.gt(e)?a>0?e:l:o}for(Re=!1,o=new p(Pt(m)),c=p.precision,p.precision=a=m.length*Fe*2;f=ft(o,e,0,1,1),i=t.plus(f.times(n)),i.cmp(r)!=1;)t=n,n=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=o.minus(f.times(i)),o=i;return i=ft(r.minus(t),n,0,1,1),u=u.plus(i.times(l)),t=t.plus(i.times(n)),u.s=l.s=d.s,h=ft(l,n,a,1).minus(d).abs().cmp(ft(u,t,a,1).minus(d).abs())<1?[l,n]:[u,t],p.precision=c,Re=!0,h};de.toHexadecimal=de.toHex=function(r,e){return vf(this,16,r,e)};de.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:ar(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Re=!1,t=ft(t,r,0,e,1).times(r),Re=!0,Te(t)):(r.s=t.s,t=r),t};de.toNumber=function(){return+this};de.toOctal=function(r,e){return vf(this,8,r,e)};de.toPower=de.pow=function(r){var e,t,n,i,a,s,o=this,u=o.constructor,l=+(r=new u(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new u(Dt(+o,l));if(o=new u(o),o.eq(1))return o;if(n=u.precision,a=u.rounding,r.eq(1))return Te(o,n,a);if(e=qt(r.e/Fe),e>=r.d.length-1&&(t=l<0?-l:l)<=iT)return i=ox(u,o,t,n),r.s<0?new u(1).div(i):Te(i,n,a);if(s=o.s,s<0){if(e<r.d.length-1)return new u(NaN);if(r.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return t=Dt(+o,l),e=t==0||!isFinite(t)?qt(l*(Math.log("0."+Pt(o.d))/Math.LN10+o.e+1)):new u(t+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(Re=!1,u.rounding=o.s=1,t=Math.min(12,(e+"").length),i=dc(r.times(En(o,n+t)),n),i.d&&(i=Te(i,n+5,1),Wa(i.d,n,a)&&(e=n+10,i=Te(dc(r.times(En(o,e+t)),e),e+5,1),+Pt(i.d).slice(n+1,n+15)+1==1e14&&(i=Te(i,n+1,0)))),i.s=s,Re=!0,u.rounding=a,Te(i,n,a))};de.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Yr(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(ar(r,1,Ln),e===void 0?e=i.rounding:ar(e,0,8),n=Te(new i(n),r,e),t=Yr(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};de.toSignificantDigits=de.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(ar(r,1,Ln),e===void 0?e=n.rounding:ar(e,0,8)),Te(new n(t),r,e)};de.toString=function(){var r=this,e=r.constructor,t=Yr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};de.truncated=de.trunc=function(){return Te(new this.constructor(this),this.e+1,1)};de.valueOf=de.toJSON=function(){var r=this,e=r.constructor,t=Yr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Pt(r){var e,t,n,i=r.length-1,a="",s=r[0];if(i>0){for(a+=s,e=1;e<i;e++)n=r[e]+"",t=Fe-n.length,t&&(a+=yn(t)),a+=n;s=r[e],n=s+"",t=Fe-n.length,t&&(a+=yn(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function ar(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Pn+r)}function Wa(r,e,t,n){var i,a,s,o;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=Fe,i=0):(i=Math.ceil((e+1)/Fe),e%=Fe),a=Dt(10,Fe-e),o=r[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):s=(t<4&&o+1==a||t>3&&o+1==a/2)&&(r[i+1]/a/100|0)==Dt(10,e-2)-1||(o==a/2||o==0)&&(r[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||t<4)&&o==9999||!n&&t>3&&o==4999):s=((n||t<4)&&o+1==a||!n&&t>3&&o+1==a/2)&&(r[i+1]/a/1e3|0)==Dt(10,e-3)-1,s}function oo(r,e,t){for(var n,i=[0],a,s=0,o=r.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=cc.indexOf(r.charAt(s++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function sT(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/wu(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=Hi(r,1,e.times(i),new r(1));for(var a=t;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return r.precision-=t,e}var ft=function(){function r(n,i,a){var s,o=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+o,n[u]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,u;if(a!=s)u=a>s?1:-1;else for(o=u=0;o<a;o++)if(n[o]!=i[o]){u=n[o]>i[o]?1:-1;break}return u}function t(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,u){var l,c,f,h,d,m,p,v,g,A,y,w,x,b,D,N,C,S,M,E,R=n.constructor,I=n.s==i.s?1:-1,k=n.d,T=i.d;if(!k||!k[0]||!T||!T[0])return new R(!n.s||!i.s||(k?T&&k[0]==T[0]:!T)?NaN:k&&k[0]==0||!T?I*0:I/0);for(u?(d=1,c=n.e-i.e):(u=Mr,d=Fe,c=qt(n.e/d)-qt(i.e/d)),M=T.length,C=k.length,g=new R(I),A=g.d=[],f=0;T[f]==(k[f]||0);f++);if(T[f]>(k[f]||0)&&c--,a==null?(b=a=R.precision,s=R.rounding):o?b=a+(n.e-i.e)+1:b=a,b<0)A.push(1),m=!0;else{if(b=b/d+2|0,f=0,M==1){for(h=0,T=T[0],b++;(f<C||h)&&b--;f++)D=h*u+(k[f]||0),A[f]=D/T|0,h=D%T|0;m=h||f<C}else{for(h=u/(T[0]+1)|0,h>1&&(T=r(T,h,u),k=r(k,h,u),M=T.length,C=k.length),N=M,y=k.slice(0,M),w=y.length;w<M;)y[w++]=0;E=T.slice(),E.unshift(0),S=T[0],T[1]>=u/2&&++S;do h=0,l=e(T,y,M,w),l<0?(x=y[0],M!=w&&(x=x*u+(y[1]||0)),h=x/S|0,h>1?(h>=u&&(h=u-1),p=r(T,h,u),v=p.length,w=y.length,l=e(p,y,v,w),l==1&&(h--,t(p,M<v?E:T,v,u))):(h==0&&(l=h=1),p=T.slice()),v=p.length,v<w&&p.unshift(0),t(y,p,w,u),l==-1&&(w=y.length,l=e(T,y,M,w),l<1&&(h++,t(y,M<w?E:T,w,u))),w=y.length):l===0&&(h++,y=[0]),A[f++]=h,l&&y[0]?y[w++]=k[N]||0:(y=[k[N]],w=1);while((N++<C||y[0]!==void 0)&&b--);m=y[0]!==void 0}A[0]||A.shift()}if(d==1)g.e=c,tx=m;else{for(f=1,h=A[0];h>=10;h/=10)f++;g.e=f+c*d-1,Te(g,o?a+g.e+1:a,s,m)}return g}}();function Te(r,e,t,n){var i,a,s,o,u,l,c,f,h,d=r.constructor;e:if(e!=null){if(f=r.d,!f)return r;for(i=1,o=f[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=Fe,s=e,c=f[h=0],u=c/Dt(10,i-s-1)%10|0;else if(h=Math.ceil((a+1)/Fe),o=f.length,h>=o)if(n){for(;o++<=h;)f.push(0);c=u=0,i=1,a%=Fe,s=a-Fe+1}else break e;else{for(c=o=f[h],i=1;o>=10;o/=10)i++;a%=Fe,s=a-Fe+i,u=s<0?0:c/Dt(10,i-s-1)%10|0}if(n=n||e<0||f[h+1]!==void 0||(s<0?c:c%Dt(10,i-s-1)),l=t<4?(u||n)&&(t==0||t==(r.s<0?3:2)):u>5||u==5&&(t==4||n||t==6&&(a>0?s>0?c/Dt(10,i-s):0:f[h-1])%10&1||t==(r.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=r.e+1,f[0]=Dt(10,(Fe-e%Fe)%Fe),r.e=-e||0):f[0]=r.e=0,r;if(a==0?(f.length=h,o=1,h--):(f.length=h+1,o=Dt(10,Fe-a),f[h]=s>0?(c/Dt(10,i-s)%Dt(10,s)|0)*o:0),l)for(;;)if(h==0){for(a=1,s=f[0];s>=10;s/=10)a++;for(s=f[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(r.e++,f[0]==Mr&&(f[0]=1));break}else{if(f[h]+=o,f[h]!=Mr)break;f[h--]=0,o=1}for(a=f.length;f[--a]===0;)f.pop()}return Re&&(r.e>d.maxE?(r.d=null,r.e=NaN):r.e<d.minE&&(r.e=0,r.d=[0])),r}function Yr(r,e,t){if(!r.isFinite())return lx(r);var n,i=r.e,a=Pt(r.d),s=a.length;return e?(t&&(n=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+yn(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):i<0?(a="0."+yn(-i-1)+a,t&&(n=t-s)>0&&(a+=yn(n))):i>=s?(a+=yn(i+1-s),t&&(n=t-i-1)>0&&(a=a+"."+yn(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-s)>0&&(i+1===s&&(a+="."),a+=yn(n))),a}function xu(r,e){var t=r[0];for(e*=Fe;t>=10;t/=10)e++;return e}function $o(r,e,t){if(e>aT)throw Re=!0,t&&(r.precision=t),Error(rx);return Te(new r(Io),e,1,!0)}function Nr(r,e,t){if(e>hc)throw Error(rx);return Te(new r(Po),e,t,!0)}function sx(r){var e=r.length-1,t=e*Fe+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function yn(r){for(var e="";r--;)e+="0";return e}function ox(r,e,t,n){var i,a=new r(1),s=Math.ceil(n/Fe+4);for(Re=!1;;){if(t%2&&(a=a.times(e),Pd(a.d,s)&&(i=!0)),t=qt(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),Pd(e.d,s)}return Re=!0,a}function Id(r){return r.d[r.d.length-1]&1}function ux(r,e,t){for(var n,i=new r(e[0]),a=0;++a<e.length;)if(n=new r(e[a]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function dc(r,e){var t,n,i,a,s,o,u,l=0,c=0,f=0,h=r.constructor,d=h.rounding,m=h.precision;if(!r.d||!r.d[0]||r.e>17)return new h(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:0/0);for(e==null?(Re=!1,u=m):u=e,o=new h(.03125);r.e>-2;)r=r.times(o),f+=5;for(n=Math.log(Dt(2,f))/Math.LN10*2+5|0,u+=n,t=a=s=new h(1),h.precision=u;;){if(a=Te(a.times(r),u,1),t=t.times(++c),o=s.plus(ft(a,t,u,1)),Pt(o.d).slice(0,u)===Pt(s.d).slice(0,u)){for(i=f;i--;)s=Te(s.times(s),u,1);if(e==null)if(l<3&&Wa(s.d,u-n,d,l))h.precision=u+=10,t=a=o=new h(1),c=0,l++;else return Te(s,h.precision=m,d,Re=!0);else return h.precision=m,s}s=o}}function En(r,e){var t,n,i,a,s,o,u,l,c,f,h,d=1,m=10,p=r,v=p.d,g=p.constructor,A=g.rounding,y=g.precision;if(p.s<0||!v||!v[0]||!p.e&&v[0]==1&&v.length==1)return new g(v&&!v[0]?-1/0:p.s!=1?NaN:v?0:p);if(e==null?(Re=!1,c=y):c=e,g.precision=c+=m,t=Pt(v),n=t.charAt(0),Math.abs(a=p.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)p=p.times(r),t=Pt(p.d),n=t.charAt(0),d++;a=p.e,n>1?(p=new g("0."+t),a++):p=new g(n+"."+t.slice(1))}else return l=$o(g,c+2,y).times(a+""),p=En(new g(n+"."+t.slice(1)),c-m).plus(l),g.precision=y,e==null?Te(p,y,A,Re=!0):p;for(f=p,u=s=p=ft(p.minus(1),p.plus(1),c,1),h=Te(p.times(p),c,1),i=3;;){if(s=Te(s.times(h),c,1),l=u.plus(ft(s,new g(i),c,1)),Pt(l.d).slice(0,c)===Pt(u.d).slice(0,c))if(u=u.times(2),a!==0&&(u=u.plus($o(g,c+2,y).times(a+""))),u=ft(u,new g(d),c,1),e==null)if(Wa(u.d,c-m,A,o))g.precision=c+=m,l=s=p=ft(f.minus(1),f.plus(1),c,1),h=Te(p.times(p),c,1),i=o=1;else return Te(u,g.precision=y,A,Re=!0);else return g.precision=y,u;u=l,i+=2}}function lx(r){return String(r.s*r.s/0)}function mc(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Fe,t<0&&(n+=Fe),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Fe;n<i;)r.d.push(+e.slice(n,n+=Fe));e=e.slice(n),n=Fe-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),Re&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function oT(r,e){var t,n,i,a,s,o,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),ax.test(e))return mc(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(rT.test(e))t=16,e=e.toLowerCase();else if(tT.test(e))t=2;else if(nT.test(e))t=8;else throw Error(Pn+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=r.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=ox(n,new n(t),a,a*2)),l=oo(e,t,Mr),c=l.length-1,a=c;l[a]===0;--a)l.pop();return a<0?new n(r.s*0):(r.e=xu(l,c),r.d=l,Re=!1,s&&(r=ft(r,i,o*4)),u&&(r=r.times(Math.abs(u)<54?Dt(2,u):$n.pow(2,u))),Re=!0,r)}function uT(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:Hi(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/wu(5,t)),e=Hi(r,2,e,e);for(var i,a=new r(5),s=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function Hi(r,e,t,n,i){var a,s,o,u,l=r.precision,c=Math.ceil(l/Fe);for(Re=!1,u=t.times(t),o=new r(n);;){if(s=ft(o.times(u),new r(e++*e++),l,1),o=i?n.plus(s):n.minus(s),n=ft(s.times(u),new r(e++*e++),l,1),s=o.plus(n),s.d[c]!==void 0){for(a=c;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return Re=!0,s.d.length=c+1,s}function wu(r,e){for(var t=r;--e;)t*=r;return t}function cx(r,e){var t,n=e.s<0,i=Nr(r,r.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return en=n?4:1,e;if(t=e.divToInt(i),t.isZero())en=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return en=Id(t)?n?2:3:n?4:1,e;en=Id(t)?n?1:4:n?3:2}return e.minus(i).abs()}function vf(r,e,t,n){var i,a,s,o,u,l,c,f,h,d=r.constructor,m=t!==void 0;if(m?(ar(t,1,Ln),n===void 0?n=d.rounding:ar(n,0,8)):(t=d.precision,n=d.rounding),!r.isFinite())c=lx(r);else{for(c=Yr(r),s=c.indexOf("."),m?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,s>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-s,h.d=oo(Yr(h),10,i),h.e=h.d.length),f=oo(c,10,i),a=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?a--:(r=new d(r),r.d=f,r.e=a,r=ft(r,h,t,n,0,i),f=r.d,a=r.e,l=tx),s=f[t],o=i/2,l=l||f[t+1]!==void 0,l=n<4?(s!==void 0||l)&&(n===0||n===(r.s<0?3:2)):s>o||s===o&&(n===4||l||n===6&&f[t-1]&1||n===(r.s<0?8:7)),f.length=t,l)for(;++f[--t]>i-1;)f[t]=0,t||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=cc.charAt(f[s]);if(m){if(u>1)if(e==16||e==8){for(s=e==16?4:3,--u;u%s;u++)c+="0";for(f=oo(c,i,e),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=cc.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>u)for(a-=u;a--;)c+="0";else a<u&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function Pd(r,e){if(r.length>e)return r.length=e,!0}function lT(r){return new this(r).abs()}function cT(r){return new this(r).acos()}function fT(r){return new this(r).acosh()}function hT(r,e){return new this(r).plus(e)}function dT(r){return new this(r).asin()}function mT(r){return new this(r).asinh()}function pT(r){return new this(r).atan()}function gT(r){return new this(r).atanh()}function vT(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,a=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Nr(this,a,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Nr(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Nr(this,a,1).times(.5),t.s=r.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(ft(r,e,a,1)),e=Nr(this,a,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(ft(r,e,a,1)),t}function yT(r){return new this(r).cbrt()}function bT(r){return Te(r=new this(r),r.e+1,2)}function xT(r,e,t){return new this(r).clamp(e,t)}function wT(r){if(!r||typeof r!="object")throw Error(bu+"Object expected");var e,t,n,i=r.defaults===!0,a=["precision",1,Ln,"rounding",0,8,"toExpNeg",-Di,0,"toExpPos",0,Di,"maxE",0,Di,"minE",-Di,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=fc[t]),(n=r[t])!==void 0)if(qt(n)===n&&n>=a[e+1]&&n<=a[e+2])this[t]=n;else throw Error(Pn+t+": "+n);if(t="crypto",i&&(this[t]=fc[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(nx);else this[t]=!1;else throw Error(Pn+t+": "+n);return this}function AT(r){return new this(r).cos()}function DT(r){return new this(r).cosh()}function fx(r){var e,t,n;function i(a){var s,o,u,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,$d(a)){l.s=a.s,Re?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;Re?s>i.maxE?(l.e=NaN,l.d=null):s<i.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[a]):(l.e=s,l.d=[a]);return}else if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return mc(l,a.toString())}else if(u!=="string")throw Error(Pn+a);return(o=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(o===43&&(a=a.slice(1)),l.s=1),ax.test(a)?mc(l,a):oT(l,a)}if(i.prototype=de,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=wT,i.clone=fx,i.isDecimal=$d,i.abs=lT,i.acos=cT,i.acosh=fT,i.add=hT,i.asin=dT,i.asinh=mT,i.atan=pT,i.atanh=gT,i.atan2=vT,i.cbrt=yT,i.ceil=bT,i.clamp=xT,i.cos=AT,i.cosh=DT,i.div=ST,i.exp=NT,i.floor=CT,i.hypot=ET,i.ln=MT,i.log=TT,i.log10=BT,i.log2=OT,i.max=FT,i.min=kT,i.mod=RT,i.mul=IT,i.pow=PT,i.random=$T,i.round=_T,i.sign=LT,i.sin=zT,i.sinh=qT,i.sqrt=UT,i.sub=HT,i.sum=VT,i.tan=WT,i.tanh=GT,i.trunc=YT,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function ST(r,e){return new this(r).div(e)}function NT(r){return new this(r).exp()}function CT(r){return Te(r=new this(r),r.e+1,3)}function ET(){var r,e,t=new this(0);for(Re=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Re=!0,new this(1/0);t=e}return Re=!0,t.sqrt()}function $d(r){return r instanceof $n||r&&r.toStringTag===ix||!1}function MT(r){return new this(r).ln()}function TT(r,e){return new this(r).log(e)}function OT(r){return new this(r).log(2)}function BT(r){return new this(r).log(10)}function FT(){return ux(this,arguments,"lt")}function kT(){return ux(this,arguments,"gt")}function RT(r,e){return new this(r).mod(e)}function IT(r,e){return new this(r).mul(e)}function PT(r,e){return new this(r).pow(e)}function $T(r){var e,t,n,i,a=0,s=new this(1),o=[];if(r===void 0?r=this.precision:ar(r,1,Ln),n=Math.ceil(r/Fe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(nx);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],r%=Fe,n&&r&&(i=Dt(10,Fe-r),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=Fe)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<Fe&&(t-=Fe-n)}return s.e=t,s.d=o,s}function _T(r){return Te(r=new this(r),r.e+1,this.rounding)}function LT(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function zT(r){return new this(r).sin()}function qT(r){return new this(r).sinh()}function UT(r){return new this(r).sqrt()}function HT(r,e){return new this(r).sub(e)}function VT(){var r=0,e=arguments,t=new this(e[r]);for(Re=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Re=!0,Te(t,this.precision,this.rounding)}function WT(r){return new this(r).tan()}function GT(r){return new this(r).tanh()}function YT(r){return Te(r=new this(r),r.e+1,1)}de[Symbol.for("nodejs.util.inspect.custom")]=de.toString;de[Symbol.toStringTag]="Decimal";var $n=de.constructor=fx(fc);Io=new $n(Io);Po=new $n(Po);var KT="BigNumber",XT=["?on","config"],ZT=P(KT,XT,r=>{var{on:e,config:t}=r,n=$n.clone({precision:t.precision,modulo:$n.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function JT(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var hx={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(t){var n=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var h=Math.PI/4;if(-h>f||f>h)return Math.cos(f)-1;var d=f*f;return d*(d*(d*(d*(d*(d*(d*(d/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(f,h){var d=Math.abs(f),m=Math.abs(h);return d<3e3&&m<3e3?Math.sqrt(d*d+m*m):(d<m?(d=m,m=f/h):m=h/f,d*Math.sqrt(1+m*m))},o=function(){throw SyntaxError("Invalid Param")};function u(f,h){var d=Math.abs(f),m=Math.abs(h);return f===0?Math.log(m):h===0?Math.log(d):d<3e3&&m<3e3?Math.log(f*f+h*h)*.5:(f=f/2,h=h/2,.5*Math.log(f*f+h*h)+Math.LN2)}var l=function(f,h){var d={re:0,im:0};if(f==null)d.re=d.im=0;else if(h!==void 0)d.re=f,d.im=h;else switch(typeof f){case"object":if("im"in f&&"re"in f)d.re=f.re,d.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;d.re=f.abs*Math.cos(f.arg),d.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;d.re=f.r*Math.cos(f.phi),d.im=f.r*Math.sin(f.phi)}else f.length===2?(d.re=f[0],d.im=f[1]):o();break;case"string":d.im=d.re=0;var m=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),p=1,v=0;m===null&&o();for(var g=0;g<m.length;g++){var A=m[g];A===" "||A==="	"||A===`
`||(A==="+"?p++:A==="-"?v++:A==="i"||A==="I"?(p+v===0&&o(),m[g+1]!==" "&&!isNaN(m[g+1])?(d.im+=parseFloat((v%2?"-":"")+m[g+1]),g++):d.im+=parseFloat((v%2?"-":"")+"1"),p=v=0):((p+v===0||isNaN(A))&&o(),m[g+1]==="i"||m[g+1]==="I"?(d.im+=parseFloat((v%2?"-":"")+A),g++):d.re+=parseFloat((v%2?"-":"")+A),p=v=0))}p+v>0&&o();break;case"number":d.im=0,d.re=f;break;default:o()}return isNaN(d.re)||isNaN(d.im),d};function c(f,h){if(!(this instanceof c))return new c(f,h);var d=l(f,h);this.re=d.re,this.im=d.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re+d.re,this.im+d.im)},sub:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re-d.re,this.im-d.im)},mul:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isZero()||this.isZero()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:d.im===0&&this.im===0?new c(this.re*d.re,0):new c(this.re*d.re-this.im*d.im,this.re*d.im+this.im*d.re)},div:function(f,h){var d=new c(f,h);if(this.isZero()&&d.isZero()||this.isInfinite()&&d.isInfinite())return c.NAN;if(this.isInfinite()||d.isZero())return c.INFINITY;if(this.isZero()||d.isInfinite())return c.ZERO;f=this.re,h=this.im;var m=d.re,p=d.im,v,g;return p===0?new c(f/m,h/m):Math.abs(m)<Math.abs(p)?(g=m/p,v=m*g+p,new c((f*g+h)/v,(h*g-f)/v)):(g=p/m,v=p*g+m,new c((f+h*g)/v,(h-f*g)/v))},pow:function(f,h){var d=new c(f,h);if(f=this.re,h=this.im,d.isZero())return c.ONE;if(d.im===0){if(h===0&&f>0)return new c(Math.pow(f,d.re),0);if(f===0)switch((d.re%4+4)%4){case 0:return new c(Math.pow(h,d.re),0);case 1:return new c(0,Math.pow(h,d.re));case 2:return new c(-Math.pow(h,d.re),0);case 3:return new c(0,-Math.pow(h,d.re))}}if(f===0&&h===0&&d.re>0&&d.im>=0)return c.ZERO;var m=Math.atan2(h,f),p=u(f,h);return f=Math.exp(d.re*p-d.im*m),h=d.im*p+d.re*m,new c(f*Math.cos(h),f*Math.sin(h))},sqrt:function(){var f=this.re,h=this.im,d=this.abs(),m,p;if(f>=0){if(h===0)return new c(Math.sqrt(f),0);m=.5*Math.sqrt(2*(d+f))}else m=Math.abs(h)/Math.sqrt(2*(d-f));return f<=0?p=.5*Math.sqrt(2*(d-f)):p=Math.abs(h)/Math.sqrt(2*(d+f)),new c(m,h<0?-p:p)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,h=this.im;return new c(Math.expm1(f)*Math.cos(h)+a(h),Math.exp(f)*Math.sin(h))},log:function(){var f=this.re,h=this.im;return new c(u(f,h),Math.atan2(h,f))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,h=this.im;return new c(Math.sin(f)*n(h),Math.cos(f)*i(h))},cos:function(){var f=this.re,h=this.im;return new c(Math.cos(f)*n(h),-Math.sin(f)*i(h))},tan:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)+n(h);return new c(Math.sin(f)/d,i(h)/d)},cot:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)-n(h);return new c(-Math.sin(f)/d,i(h)/d)},sec:function(){var f=this.re,h=this.im,d=.5*n(2*h)+.5*Math.cos(2*f);return new c(Math.cos(f)*n(h)/d,Math.sin(f)*i(h)/d)},csc:function(){var f=this.re,h=this.im,d=.5*n(2*h)-.5*Math.cos(2*f);return new c(Math.sin(f)*n(h)/d,-Math.cos(f)*i(h)/d)},asin:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),m=new c(d.re-h,d.im+f).log();return new c(m.im,-m.re)},acos:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),m=new c(d.re-h,d.im+f).log();return new c(Math.PI/2-m.im,m.re)},atan:function(){var f=this.re,h=this.im;if(f===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var d=f*f+(1-h)*(1-h),m=new c((1-h*h-f*f)/d,-2*f/d).log();return new c(-.5*m.im,.5*m.re)},acot:function(){var f=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,f),0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atan():new c(f!==0?f/0:0,h!==0?-h/0:0).atan()},asec:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acos():new c(f!==0?f/0:0,h!==0?-h/0:0).acos()},acsc:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(Math.PI/2,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asin():new c(f!==0?f/0:0,h!==0?-h/0:0).asin()},sinh:function(){var f=this.re,h=this.im;return new c(i(f)*Math.cos(h),n(f)*Math.sin(h))},cosh:function(){var f=this.re,h=this.im;return new c(n(f)*Math.cos(h),i(f)*Math.sin(h))},tanh:function(){var f=2*this.re,h=2*this.im,d=n(f)+Math.cos(h);return new c(i(f)/d,Math.sin(h)/d)},coth:function(){var f=2*this.re,h=2*this.im,d=n(f)-Math.cos(h);return new c(i(f)/d,-Math.sin(h)/d)},csch:function(){var f=this.re,h=this.im,d=Math.cos(2*h)-n(2*f);return new c(-2*i(f)*Math.cos(h)/d,2*n(f)*Math.sin(h)/d)},sech:function(){var f=this.re,h=this.im,d=Math.cos(2*h)+n(2*f);return new c(2*n(f)*Math.cos(h)/d,-2*i(f)*Math.sin(h)/d)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var h=this.asin();return this.re=-this.im,this.im=f,f=h.re,h.re=-h.im,h.im=f,h},acosh:function(){var f=this.acos();if(f.im<=0){var h=f.re;f.re=-f.im,f.im=h}else{var h=f.im;f.im=-f.re,f.re=h}return f},atanh:function(){var f=this.re,h=this.im,d=f>1&&h===0,m=1-f,p=1+f,v=m*m+h*h,g=v!==0?new c((p*m-h*h)/v,(h*m+p*h)/v):new c(f!==-1?f/0:0,h!==0?h/0:0),A=g.re;return g.re=u(g.re,g.im)/2,g.im=Math.atan2(g.im,A)/2,d&&(g.im=-g.im),g},acoth:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,Math.PI/2);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atanh():new c(f!==0?f/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var f=this.re,h=this.im;if(h===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asinh():new c(f!==0?f/0:0,h!==0?-h/0:0).asinh()},asech:function(){var f=this.re,h=this.im;if(this.isZero())return c.INFINITY;var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acosh():new c(f!==0?f/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,h=this.im,d=f*f+h*h;return new c(f/d,-h/d)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,h){var d=new c(f,h);return Math.abs(d.re-this.re)<=c.EPSILON&&Math.abs(d.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,h=this.im,d="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?d+f:(f!==0?(d+=f,d+=" ",h<0?(h=-h,d+="-"):d+="+",d+=" "):h<0&&(h=-h,d+="-"),h!==1&&(d+=h),d+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,r.exports=c})()})(hx);var jT=hx.exports;const Ot=Ji(jT);var QT="Complex",e3=[],t3=P(QT,e3,()=>(Object.defineProperty(Ot,"name",{value:"Complex"}),Ot.prototype.constructor=Ot,Ot.prototype.type="Complex",Ot.prototype.isComplex=!0,Ot.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ot.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ot.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Jn(this.re,r),a=Jn(this.im,r),s=_e(r)?r:r?r.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=a+"i":t<0?t===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+a+"i",e},Ot.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Ot(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(_e(t)){if(tr(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),_e(n))return new Ot({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ot.prototype.valueOf=Ot.prototype.toString,Ot.fromJSON=function(r){return new Ot(r)},Ot.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Ot),{isClass:!0}),dx={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(t){var n=2e3,i={s:1,n:0,d:1};function a(g,A){if(isNaN(g=parseInt(g,10)))throw p();return g*A}function s(g,A){if(A===0)throw m();var y=Object.create(d.prototype);y.s=g<0?-1:1,g=g<0?-g:g;var w=h(g,A);return y.n=g/w,y.d=A/w,y}function o(g){for(var A={},y=g,w=2,x=4;x<=y;){for(;y%w===0;)y/=w,A[w]=(A[w]||0)+1;x+=1+2*w++}return y!==g?y>1&&(A[y]=(A[y]||0)+1):A[g]=(A[g]||0)+1,A}var u=function(g,A){var y=0,w=1,x=1,b=0,D=0,N=0,C=1,S=1,M=0,E=1,R=1,I=1,k=1e7,T;if(g!=null)if(A!==void 0){if(y=g,w=A,x=y*w,y%1!==0||w%1!==0)throw v()}else switch(typeof g){case"object":{if("d"in g&&"n"in g)y=g.n,w=g.d,"s"in g&&(y*=g.s);else if(0 in g)y=g[0],1 in g&&(w=g[1]);else throw p();x=y*w;break}case"number":{if(g<0&&(x=g,g=-g),g%1===0)y=g;else if(g>0){for(g>=1&&(S=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=S);E<=k&&I<=k;)if(T=(M+R)/(E+I),g===T){E+I<=k?(y=M+R,w=E+I):I>E?(y=R,w=I):(y=M,w=E);break}else g>T?(M+=R,E+=I):(R+=M,I+=E),E>k?(y=R,w=I):(y=M,w=E);y*=S}else(isNaN(g)||isNaN(A))&&(w=y=NaN);break}case"string":{if(E=g.match(/\d+|./g),E===null)throw p();if(E[M]==="-"?(x=-1,M++):E[M]==="+"&&M++,E.length===M+1?D=a(E[M++],x):E[M+1]==="."||E[M]==="."?(E[M]!=="."&&(b=a(E[M++],x)),M++,(M+1===E.length||E[M+1]==="("&&E[M+3]===")"||E[M+1]==="'"&&E[M+3]==="'")&&(D=a(E[M],x),C=Math.pow(10,E[M].length),M++),(E[M]==="("&&E[M+2]===")"||E[M]==="'"&&E[M+2]==="'")&&(N=a(E[M+1],x),S=Math.pow(10,E[M+1].length)-1,M+=3)):E[M+1]==="/"||E[M+1]===":"?(D=a(E[M],x),C=a(E[M+2],1),M+=3):E[M+3]==="/"&&E[M+1]===" "&&(b=a(E[M],x),D=a(E[M+2],x),C=a(E[M+4],1),M+=5),E.length<=M){w=C*S,x=y=N+w*b+S*D;break}}default:throw p()}if(w===0)throw m();i.s=x<0?-1:1,i.n=Math.abs(y),i.d=Math.abs(w)};function l(g,A,y){for(var w=1;A>0;g=g*g%y,A>>=1)A&1&&(w=w*g%y);return w}function c(g,A){for(;A%2===0;A/=2);for(;A%5===0;A/=5);if(A===1)return 0;for(var y=10%A,w=1;y!==1;w++)if(y=y*10%A,w>n)return 0;return w}function f(g,A,y){for(var w=1,x=l(10,y,A),b=0;b<300;b++){if(w===x)return b;w=w*10%A,x=x*10%A}return 0}function h(g,A){if(!g)return A;if(!A)return g;for(;;){if(g%=A,!g)return A;if(A%=g,!A)return g}}function d(g,A){if(u(g,A),this instanceof d)g=h(i.d,i.n),this.s=i.s,this.n=i.n/g,this.d=i.d/g;else return s(i.s*i.n,i.d)}var m=function(){return new Error("Division by Zero")},p=function(){return new Error("Invalid argument")},v=function(){return new Error("Parameters must be integer")};d.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(g,A){return u(g,A),s(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(g,A){return u(g,A),s(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(g,A){return u(g,A),s(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(g,A){return u(g,A),s(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(g,A){if(isNaN(this.n)||isNaN(this.d))return new d(NaN);if(g===void 0)return s(this.s*this.n%this.d,1);if(u(g,A),i.n===0&&this.d===0)throw m();return s(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(g,A){return u(g,A),s(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(g,A){return u(g,A),i.n===0&&this.n===0?s(0,1):s(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):s(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):s(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):s(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(g,A){if(u(g,A),i.d===1)return i.s<0?s(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):s(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var y=o(this.n),w=o(this.d),x=1,b=1;for(var D in y)if(D!=="1"){if(D==="0"){x=0;break}if(y[D]*=i.n,y[D]%i.d===0)y[D]/=i.d;else return null;x*=Math.pow(D,y[D])}for(var D in w)if(D!=="1"){if(w[D]*=i.n,w[D]%i.d===0)w[D]/=i.d;else return null;b*=Math.pow(D,w[D])}return i.s<0?s(b,x):s(x,b)},equals:function(g,A){return u(g,A),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(g,A){u(g,A);var y=this.s*this.n*i.d-i.s*i.n*this.d;return(0<y)-(y<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var A=this.abs(),y=A.toContinued(),w=1;w<y.length;w++){for(var x=s(y[w-1],1),b=w-2;b>=0;b--)x=x.inverse().add(y[b]);if(Math.abs(x.sub(A).valueOf())<g)return x.mul(this.s)}return this},divisible:function(g,A){return u(g,A),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var A,y="",w=this.n,x=this.d;return this.s<0&&(y+="-"),x===1?y+=w:(g&&(A=Math.floor(w/x))>0&&(y+=A,y+=" ",w%=x),y+=w,y+="/",y+=x),y},toLatex:function(g){var A,y="",w=this.n,x=this.d;return this.s<0&&(y+="-"),x===1?y+=w:(g&&(A=Math.floor(w/x))>0&&(y+=A,w%=x),y+="\\frac{",y+=w,y+="}{",y+=x,y+="}"),y},toContinued:function(){var g,A=this.n,y=this.d,w=[];if(isNaN(A)||isNaN(y))return w;do w.push(Math.floor(A/y)),g=A%y,A=y,y=g;while(A!==1);return w},toString:function(g){var A=this.n,y=this.d;if(isNaN(A)||isNaN(y))return"NaN";g=g||15;var w=c(A,y),x=f(A,y,w),b=this.s<0?"-":"";if(b+=A/y|0,A%=y,A*=10,A&&(b+="."),w){for(var D=x;D--;)b+=A/y|0,A%=y,A*=10;b+="(";for(var D=w;D--;)b+=A/y|0,A%=y,A*=10;b+=")"}else for(var D=g;A&&D--;)b+=A/y|0,A%=y,A*=10;return b}},Object.defineProperty(d,"__esModule",{value:!0}),d.default=d,d.Fraction=d,r.exports=d})()})(dx);var r3=dx.exports;const jr=Ji(r3);var n3="Fraction",i3=[],a3=P(n3,i3,()=>(Object.defineProperty(jr,"name",{value:"Fraction"}),jr.prototype.constructor=jr,jr.prototype.type="Fraction",jr.prototype.isFraction=!0,jr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},jr.fromJSON=function(r){return new jr(r)},jr),{isClass:!0}),s3="Range",o3=[],u3=P(s3,o3,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=t!=null,s=n!=null;if(i){if(Ue(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(a){if(Ue(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(s){if(Ue(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(t):0,this.step=s?parseFloat(n):1}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,a=i-t;return Cn(n)===Cn(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;t<i;)e(t,[a],this),t+=n,a++;else if(n<0)for(;t>i;)e(t,[a],this),t+=n,a++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,a){t[i[0]]=e(n,i,a)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Jn(this.start,e);return this.step!==1&&(t+=":"+Jn(this.step,e)),t+=":"+Jn(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),l3="Matrix",c3=[],f3=P(l3,c3,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function h3(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),a=0,s=function(u){var l=i[u];if(l&&(delete n[l],delete i[u],--e,t===l)){if(!e){a=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(u){var l=i[u],c=++a;if(n[c]=u,i[u]=c,!l)return++e,e<=r?void 0:(u=n[t],s(u),u);if(delete n[l],t===l)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:s,clear:function(){e=a=0,t=1,n=Object.create(null),i=Object.create(null)}}}function is(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:h3(t||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e(i);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var o=r.apply(r,i);return n.cache.values.set(s,o),n.cache.values.delete(n.cache.lru.hit(s)),o}}function mx(r){return Object.keys(r.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var d3="DenseMatrix",m3=["Matrix"],p3=P(d3,m3,r=>{var{Matrix:e}=r;function t(c,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!It(f))throw new Error("Invalid datatype: "+f);if(Oe(c))c.type==="DenseMatrix"?(this._data=Be(c._data),this._size=Be(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&je(c.data)&&je(c.size))this._data=c.data,this._size=c.size,Od(this._data,this._size),this._datatype=f||c.datatype;else if(je(c))this._data=l(c),this._size=Pe(this._data),Od(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+ot(c)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,f){return new t(c,f)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Va(this._data,ot)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,f){return new t(c,f)},t.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!je(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Le(c.length,this._size.length);for(var f=0;f<c.length;f++)at(c[f],this._size[f]);for(var h=this._data,d=0,m=c.length;d<m;d++){var p=c[d];at(p,h.length),h=h[p]}return h},t.prototype.set=function(c,f,h){if(!je(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Le(c.length,this._size.length,"<");var d,m,p,v=c.map(function(A){return A+1});u(this,v,h);var g=this._data;for(d=0,m=c.length-1;d<m;d++)p=c[d],at(p,g.length),g=g[p];return p=c[c.length-1],at(p,g.length),g[p]=f,this};function n(c,f){if(!rs(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var d=f.size();if(d.length!==c._size.length)throw new Le(d.length,c._size.length);for(var m=f.min(),p=f.max(),v=0,g=c._size.length;v<g;v++)at(m[v],c._size[v]),at(p[v],c._size[v]);return new t(i(c._data,f,d.length,0),c._datatype)}function i(c,f,h,d){var m=d===h-1,p=f.dimension(d);return m?p.map(function(v){return at(v,c.length),c[v]}).valueOf():p.map(function(v){at(v,c.length);var g=c[v];return i(g,f,h,d+1)}).valueOf()}function a(c,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),p=f.isScalar(),v;if(Oe(h)?(v=h.size(),h=h.valueOf()):v=Pe(h),p){if(v.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,d)}else{if(!ri(v,m))try{v.length===0?h=kd([h],m):h=kd(h,m),v=Pe(h)}catch{}if(m.length<c._size.length)throw new Le(m.length,c._size.length,"<");if(v.length<m.length){for(var g=0,A=0;m[g]===1&&v[g]===1;)g++;for(;m[g]===1;)A++,g++;h=Gb(h,m.length,A,v)}if(!ri(m,v))throw new Le(m,v,">");var y=f.max().map(function(b){return b+1});u(c,y,d);var w=m.length,x=0;s(c._data,f,h,w,x)}return c}function s(c,f,h,d,m){var p=m===d-1,v=f.dimension(m);p?v.forEach(function(g,A){at(g),c[g]=h[A[0]]}):v.forEach(function(g,A){at(g),s(c[g],f,h[A[0]],d,m+1)})}t.prototype.resize=function(c,f,h){if(!ln(c))throw new TypeError("Array or Matrix expected");var d=c.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),m=h?this.clone():this;return o(m,d,f)};function o(c,f,h){if(f.length===0){for(var d=c._data;je(d);)d=d[0];return d}return c._size=f.slice(0),c._data=Li(c._data,c._size,h),c}t.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=hf(h._data,c);var d=h._size.reduce((m,p)=>m*p);return h._size=df(c,d),h};function u(c,f,h){for(var d=c._size.slice(0),m=!1;d.length<f.length;)d.push(0),m=!0;for(var p=0,v=f.length;p<v;p++)f[p]>d[p]&&(d[p]=f[p],m=!0);m&&o(c,d,h)}t.prototype.clone=function(){var c=new t({data:Be(this._data),size:Be(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var f=this,h=mx(c),d=function v(g,A){return je(g)?g.map(function(y,w){return v(y,A.concat(w))}):h===1?c(g):h===2?c(g,A):c(g,A,f)},m=d(this._data,[]),p=this._datatype!==void 0?Va(m,ot):void 0;return new t(m,p)},t.prototype.forEach=function(c){var f=this,h=function d(m,p){je(m)?m.forEach(function(v,g){d(v,p.concat(g))}):c(m,p,f)};h(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*f(h,d){if(je(h))for(var m=0;m<h.length;m++)yield*f(h[m],d.concat(m));else yield{value:h,index:d}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)c.push(new t([d],this._datatype));return c},t.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,m=function(g){var A=d.map(y=>[y[g]]);f.push(new t(A,c._datatype))},p=0;p<h[1];p++)m(p);return f},t.prototype.toArray=function(){return Be(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return qe(this._data,c)},t.prototype.toString=function(){return qe(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Ue(c)&&(c=c.toNumber()),!_e(c)||!Ee(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,d=this._size[0],m=this._size[1],p=Math.min(d-h,m-f),v=[],g=0;g<p;g++)v[g]=this._data[g+h][g+f];return new t({data:v,size:[p],datatype:this._datatype})},t.diagonal=function(c,f,h,d){if(!je(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(D){if(Ue(D)&&(D=D.toNumber()),!_e(D)||!Ee(D)||D<1)throw new Error("Size values must be positive integers");return D}),h){if(Ue(h)&&(h=h.toNumber()),!_e(h)||!Ee(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var m=h>0?h:0,p=h<0?-h:0,v=c[0],g=c[1],A=Math.min(v-p,g-m),y;if(je(f)){if(f.length!==A)throw new Error("Invalid value array length");y=function(N){return f[N]}}else if(Oe(f)){var w=f.size();if(w.length!==1||w[0]!==A)throw new Error("Invalid matrix length");y=function(N){return f.get([N])}}else y=function(){return f};d||(d=Ue(y(0))?y(0).mul(0):0);var x=[];if(c.length>0){x=Li(x,c,d);for(var b=0;b<A;b++)x[b+p][b+m]=y(b)}return new t({data:x,size:[v,g]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,f){if(!_e(c)||!Ee(c)||!_e(f)||!Ee(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return at(c,this._size[0]),at(f,this._size[0]),t._swapRows(c,f,this._data),this},t._swapRows=function(c,f,h){var d=h[c];h[c]=h[f],h[f]=d};function l(c){return Oe(c)?l(c.valueOf()):je(c)?c.map(l):c}return t},{isClass:!0}),_d="clone",g3=["typed"],v3=P(_d,g3,r=>{var{typed:e}=r;return e(_d,{any:Be})});function px(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var s=[];for(n=0;n<e;n++)s.push(r[n][i]);a.push(s)}return a}function ji(r){for(var e=0;e<r.length;e++)if(ln(r[e]))return!0;return!1}function fn(r,e){Oe(r)&&(r=r.valueOf());for(var t=0,n=r.length;t<n;t++){var i=r[t];Array.isArray(i)?fn(i,e):e(i)}}function Ve(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return Ve(n,e)}):e(r)}function Au(r,e,t){var n=Array.isArray(r)?Pe(r):r.size();if(e<0||e>=n.length)throw new Ar(e,n.length);return Oe(r)?r.create(_o(r.valueOf(),e,t)):_o(r,e,t)}function _o(r,e,t){var n,i,a,s;if(e<=0)if(Array.isArray(r[0])){for(s=px(r),i=[],n=0;n<s.length;n++)i[n]=_o(s[n],e-1,t);return i}else{for(a=r[0],n=1;n<r.length;n++)a=t(a,r[n]);return a}else{for(i=[],n=0;n<r.length;n++)i[n]=_o(r[n],e-1,t);return i}}function Ld(r,e,t,n,i,a,s,o,u,l,c){var f=r._values,h=r._index,d=r._ptr,m,p,v,g;if(n)for(p=d[e],v=d[e+1],m=p;m<v;m++)g=h[m],t[g]!==a?(t[g]=a,s.push(g),l?(n[g]=u?o(f[m],c):o(c,f[m]),i[g]=a):n[g]=f[m]):(n[g]=u?o(f[m],n[g]):o(n[g],f[m]),i[g]=a);else for(p=d[e],v=d[e+1],m=p;m<v;m++)g=h[m],t[g]!==a?(t[g]=a,s.push(g)):i[g]=a}var zd="isInteger",y3=["typed"],b3=P(zd,y3,r=>{var{typed:e}=r;return e(zd,{number:Ee,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Fr="number",as="number, number";function gx(r){return Math.abs(r)}gx.signature=Fr;function vx(r,e){return r+e}vx.signature=as;function yx(r,e){return r*e}yx.signature=as;function bx(r){return-r}bx.signature=Fr;function xx(r){return r}xx.signature=Fr;function xa(r){return bM(r)}xa.signature=Fr;function wx(r){return r*r*r}wx.signature=Fr;function Ax(r){return Math.exp(r)}Ax.signature=Fr;function Dx(r){return xM(r)}Dx.signature=Fr;function Sx(r,e){if(!Ee(r)||!Ee(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}Sx.signature=as;function x3(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function Nx(r){return vM(r)}Nx.signature=Fr;function Cx(r){return gM(r)}Cx.signature=Fr;function qd(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function pc(r){return Cn(r)}pc.signature=Fr;function Ex(r){return r*r}Ex.signature=Fr;function Mx(r,e){var t,n,i,a=0,s=1,o=1,u=0;if(!Ee(r)||!Ee(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=a,a=s-n*a,s=t,t=o,o=u-n*o,u=t,r=e,e=i;var l;return r<0?l=[-r,-s,-u]:l=[r,r?s:0,u],l}Mx.signature=as;function Tx(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}Tx.signature=as;function Ud(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Ee(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(zb(r,e))}var w3="number",Qi="number, number";function Ox(r,e){if(!Ee(r)||!Ee(e))throw new Error("Integers expected in function bitAnd");return r&e}Ox.signature=Qi;function Bx(r){if(!Ee(r))throw new Error("Integer expected in function bitNot");return~r}Bx.signature=w3;function Fx(r,e){if(!Ee(r)||!Ee(e))throw new Error("Integers expected in function bitOr");return r|e}Fx.signature=Qi;function kx(r,e){if(!Ee(r)||!Ee(e))throw new Error("Integers expected in function bitXor");return r^e}kx.signature=Qi;function Rx(r,e){if(!Ee(r)||!Ee(e))throw new Error("Integers expected in function leftShift");return r<<e}Rx.signature=Qi;function Ix(r,e){if(!Ee(r)||!Ee(e))throw new Error("Integers expected in function rightArithShift");return r>>e}Ix.signature=Qi;function Px(r,e){if(!Ee(r)||!Ee(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}Px.signature=Qi;function tn(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return tn(r,t)*tn(t+1,e)}function $x(r,e){if(!Ee(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ee(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,a=2,s=e<t?e:t,o=i;o<=r;++o)for(n*=o;a<=s&&n%a===0;)n/=a,++a;return a<=s&&(n/=tn(a,s)),n}$x.signature="number, number";var A3=Math.PI,D3=2*Math.PI,S3=Math.E,N3=1.618033988749895,C3="number",yf="number, number";function _x(r){return!r}_x.signature=C3;function Lx(r,e){return!!(r||e)}Lx.signature=yf;function zx(r,e){return!!r!=!!e}zx.signature=yf;function qx(r,e){return!!(r&&e)}qx.signature=yf;function Lo(r){var e;if(Ee(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:tn(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*Lo(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,a=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*r))}--r,e=Bi[0];for(var s=1;s<Bi.length;++s)e+=Bi[s]/(r+s);var o=r+Ux+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,r+.5)*Math.exp(-o)*e}Lo.signature="number";var Ux=4.7421875,Bi=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Hx=.9189385332046728,E3=5,M3=7,Hd=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function zo(r){if(r<0)return NaN;if(r===0)return 1/0;if(!isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-zo(1-r);r=r-1;for(var e=r+E3+.5,t=Hd[0],n=M3-1;n>=1;n--)t+=Hd[n]/(r+n);return Hx+(r+.5)*Math.log(e)-e+Math.log(t)}zo.signature="number";var Ht="number";function Vx(r){return NM(r)}Vx.signature=Ht;function Wx(r){return Math.atan(1/r)}Wx.signature=Ht;function Gx(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}Gx.signature=Ht;function Yx(r){return Math.asin(1/r)}Yx.signature=Ht;function Kx(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}Kx.signature=Ht;function Xx(r){return Math.acos(1/r)}Xx.signature=Ht;function Zx(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}Zx.signature=Ht;function Jx(r){return CM(r)}Jx.signature=Ht;function jx(r){return EM(r)}jx.signature=Ht;function Qx(r){return 1/Math.tan(r)}Qx.signature=Ht;function ew(r){var e=Math.exp(2*r);return(e+1)/(e-1)}ew.signature=Ht;function tw(r){return 1/Math.sin(r)}tw.signature=Ht;function rw(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*Cn(r)}rw.signature=Ht;function nw(r){return 1/Math.cos(r)}nw.signature=Ht;function iw(r){return 2/(Math.exp(r)+Math.exp(-r))}iw.signature=Ht;function aw(r){return TM(r)}aw.signature=Ht;var Du="number";function sw(r){return r<0}sw.signature=Du;function ow(r){return r>0}ow.signature=Du;function uw(r){return r===0}uw.signature=Du;function lw(r){return Number.isNaN(r)}lw.signature=Du;var Vd="isNegative",T3=["typed"],O3=P(Vd,T3,r=>{var{typed:e}=r;return e(Vd,{number:sw,BigNumber:function(n){return n.isNeg()&&!n.isZero()&&!n.isNaN()},Fraction:function(n){return n.s<0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Wd="isNumeric",B3=["typed"],F3=P(Wd,B3,r=>{var{typed:e}=r;return e(Wd,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Gd="hasNumericValue",k3=["typed","isNumeric"],R3=P(Gd,k3,r=>{var{typed:e,isNumeric:t}=r;return e(Gd,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),Yd="isPositive",I3=["typed"],P3=P(Yd,I3,r=>{var{typed:e}=r;return e(Yd,{number:ow,BigNumber:function(n){return!n.isNeg()&&!n.isZero()&&!n.isNaN()},Fraction:function(n){return n.s>0&&n.n>0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Kd="isZero",$3=["typed"],_3=P(Kd,$3,r=>{var{typed:e}=r;return e(Kd,{number:uw,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Xd="isNaN",L3=["typed"],z3=P(Xd,L3,r=>{var{typed:e}=r;return e(Xd,{number:lw,BigNumber:function(n){return n.isNaN()},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":function(n){return Ve(n,Number.isNaN)}})}),Zd="typeOf",q3=["typed"],U3=P(Zd,q3,r=>{var{typed:e}=r;return e(Zd,{any:ot})});function Kr(r,e,t){if(t==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var i=r.constructor.max(r.abs(),e.abs());return n.lte(i.times(t))}return!1}function H3(r,e,t){return dr(r.re,e.re,t)&&dr(r.im,e.im,t)}var ea=P("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),qo="equalScalar",V3=["typed","config"],W3=P(qo,V3,r=>{var{typed:e,config:t}=r,n=ea({typed:e});return e(qo,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return dr(a,s,t.epsilon)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||Kr(a,s,t.epsilon)},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return H3(a,s,t.epsilon)}},n)});P(qo,["typed","config"],r=>{var{typed:e,config:t}=r;return e(qo,{"number, number":function(i,a){return dr(i,a,t.epsilon)}})});var G3="SparseMatrix",Y3=["typed","equalScalar","Matrix"],K3=P(G3,Y3,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(p,v){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(v&&!It(v))throw new Error("Invalid datatype: "+v);if(Oe(p))a(this,p,v);else if(p&&je(p.index)&&je(p.ptr)&&je(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=v||p.datatype;else if(je(p))s(this,p,v);else{if(p)throw new TypeError("Unsupported type of data ("+ot(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=v}}function a(p,v,g){v.type==="SparseMatrix"?(p._values=v._values?Be(v._values):void 0,p._index=Be(v._index),p._ptr=Be(v._ptr),p._size=Be(v._size),p._datatype=g||v._datatype):s(p,v.valueOf(),g||v._datatype)}function s(p,v,g){p._values=[],p._index=[],p._ptr=[],p._datatype=g;var A=v.length,y=0,w=t,x=0;if(It(g)&&(w=e.find(t,[g,g])||t,x=e.convert(0,g)),A>0){var b=0;do{p._ptr.push(p._index.length);for(var D=0;D<A;D++){var N=v[D];if(je(N)){if(b===0&&y<N.length&&(y=N.length),b<N.length){var C=N[b];w(C,x)||(p._values.push(C),p._index.push(D))}}else b===0&&y<1&&(y=1),w(N,x)||(p._values.push(N),p._index.push(D))}b++}while(b<y)}p._ptr.push(p._index.length),p._size=[A,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(p,v){return new i(p,v)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Va(this._values,ot)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,v){return new i(p,v)},i.prototype.density=function(){var p=this._size[0],v=this._size[1];return p!==0&&v!==0?this._index.length/(p*v):0},i.prototype.subset=function(p,v,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,p);case 2:case 3:return u(this,p,v,g);default:throw new SyntaxError("Wrong number of arguments")}};function o(p,v){if(!rs(v))throw new TypeError("Invalid index");var g=v.isScalar();if(g)return p.get(v.min());var A=v.size();if(A.length!==p._size.length)throw new Le(A.length,p._size.length);var y,w,x,b,D=v.min(),N=v.max();for(y=0,w=p._size.length;y<w;y++)at(D[y],p._size[y]),at(N[y],p._size[y]);var C=p._values,S=p._index,M=p._ptr,E=v.dimension(0),R=v.dimension(1),I=[],k=[];E.forEach(function(F,_){k[F]=_[0],I[F]=!0});var T=C?[]:void 0,O=[],U=[];return R.forEach(function(F){for(U.push(O.length),x=M[F],b=M[F+1];x<b;x++)y=S[x],I[y]===!0&&(O.push(k[y]),T&&T.push(C[x]))}),U.push(O.length),new i({values:T,index:O,ptr:U,size:A,datatype:p._datatype})}function u(p,v,g,A){if(!v||v.isIndex!==!0)throw new TypeError("Invalid index");var y=v.size(),w=v.isScalar(),x;if(Oe(g)?(x=g.size(),g=g.toArray()):x=Pe(g),w){if(x.length!==0)throw new TypeError("Scalar expected");p.set(v.min(),g,A)}else{if(y.length!==1&&y.length!==2)throw new Le(y.length,p._size.length,"<");if(x.length<y.length){for(var b=0,D=0;y[b]===1&&x[b]===1;)b++;for(;y[b]===1;)D++,b++;g=Gb(g,y.length,D,x)}if(!ri(y,x))throw new Le(y,x,">");if(y.length===1){var N=v.dimension(0);N.forEach(function(M,E){at(M),p.set([M,0],g[E[0]],A)})}else{var C=v.dimension(0),S=v.dimension(1);C.forEach(function(M,E){at(M),S.forEach(function(R,I){at(R),p.set([M,R],g[E[0]][I[0]],A)})})}}return p}i.prototype.get=function(p){if(!je(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new Le(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var v=p[0],g=p[1];at(v,this._size[0]),at(g,this._size[1]);var A=l(v,this._ptr[g],this._ptr[g+1],this._index);return A<this._ptr[g+1]&&this._index[A]===v?this._values[A]:0},i.prototype.set=function(p,v,g){if(!je(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new Le(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=p[0],y=p[1],w=this._size[0],x=this._size[1],b=t,D=0;It(this._datatype)&&(b=e.find(t,[this._datatype,this._datatype])||t,D=e.convert(0,this._datatype)),(A>w-1||y>x-1)&&(h(this,Math.max(A+1,w),Math.max(y+1,x),g),w=this._size[0],x=this._size[1]),at(A,w),at(y,x);var N=l(A,this._ptr[y],this._ptr[y+1],this._index);return N<this._ptr[y+1]&&this._index[N]===A?b(v,D)?c(N,y,this._values,this._index,this._ptr):this._values[N]=v:b(v,D)||f(N,A,y,v,this._values,this._index,this._ptr),this};function l(p,v,g,A){if(g-v===0)return g;for(var y=v;y<g;y++)if(A[y]===p)return y;return v}function c(p,v,g,A,y){g.splice(p,1),A.splice(p,1);for(var w=v+1;w<y.length;w++)y[w]--}function f(p,v,g,A,y,w,x){y.splice(p,0,A),w.splice(p,0,v);for(var b=g+1;b<x.length;b++)x[b]++}i.prototype.resize=function(p,v,g){if(!ln(p))throw new TypeError("Array or Matrix expected");var A=p.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(A.length!==2)throw new Error("Only two dimensions matrix are supported");A.forEach(function(w){if(!_e(w)||!Ee(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+qe(A)+")")});var y=g?this.clone():this;return h(y,A[0],A[1],v)};function h(p,v,g,A){var y=A||0,w=t,x=0;It(p._datatype)&&(w=e.find(t,[p._datatype,p._datatype])||t,x=e.convert(0,p._datatype),y=e.convert(y,p._datatype));var b=!w(y,x),D=p._size[0],N=p._size[1],C,S,M;if(g>N){for(S=N;S<g;S++)if(p._ptr[S]=p._values.length,b)for(C=0;C<D;C++)p._values.push(y),p._index.push(C);p._ptr[g]=p._values.length}else g<N&&(p._ptr.splice(g+1,N-g),p._values.splice(p._ptr[g],p._values.length),p._index.splice(p._ptr[g],p._index.length));if(N=g,v>D){if(b){var E=0;for(S=0;S<N;S++){p._ptr[S]=p._ptr[S]+E,M=p._ptr[S+1]+E;var R=0;for(C=D;C<v;C++,R++)p._values.splice(M+R,0,y),p._index.splice(M+R,0,C),E++}p._ptr[N]=p._values.length}}else if(v<D){var I=0;for(S=0;S<N;S++){p._ptr[S]=p._ptr[S]-I;var k=p._ptr[S],T=p._ptr[S+1]-I;for(M=k;M<T;M++)C=p._index[M],C>v-1&&(p._values.splice(M,1),p._index.splice(M,1),I++)}p._ptr[S]=p._values.length}return p._size[0]=v,p._size[1]=g,p}i.prototype.reshape=function(p,v){if(!je(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(F){if(!_e(F)||!Ee(F)||F<=-2||F===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+qe(p)+")")});var g=this._size[0]*this._size[1];p=df(p,g);var A=p[0]*p[1];if(g!==A)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=v?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return y;for(var w=[],x=0;x<y._ptr.length;x++)for(var b=0;b<y._ptr[x+1]-y._ptr[x];b++)w.push(x);for(var D=y._values.slice(),N=y._index.slice(),C=0;C<y._index.length;C++){var S=N[C],M=w[C],E=S*y._size[1]+M;w[C]=E%p[1],N[C]=Math.floor(E/p[1])}y._values.length=0,y._index.length=0,y._ptr.length=p[1]+1,y._size=p.slice();for(var R=0;R<y._ptr.length;R++)y._ptr[R]=0;for(var I=0;I<D.length;I++){var k=N[I],T=w[I],O=D[I],U=l(k,y._ptr[T],y._ptr[T+1],y._index);f(U,k,T,O,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var p=new i({values:this._values?Be(this._values):void 0,index:Be(this._index),ptr:Be(this._ptr),size:Be(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,v){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,A=this._size[0],y=this._size[1],w=mx(p),x=function(D,N,C){return w===1?p(D):w===2?p(D,[N,C]):p(D,[N,C],g)};return d(this,0,A-1,0,y-1,x,v)};function d(p,v,g,A,y,w,x){var b=[],D=[],N=[],C=t,S=0;It(p._datatype)&&(C=e.find(t,[p._datatype,p._datatype])||t,S=e.convert(0,p._datatype));for(var M=function(L,X,Q){L=w(L,X,Q),C(L,S)||(b.push(L),D.push(X))},E=A;E<=y;E++){N.push(b.length);var R=p._ptr[E],I=p._ptr[E+1];if(x)for(var k=R;k<I;k++){var T=p._index[k];T>=v&&T<=g&&M(p._values[k],T-v,E-A)}else{for(var O={},U=R;U<I;U++){var F=p._index[U];O[F]=p._values[U]}for(var _=v;_<=g;_++){var G=_ in O?O[_]:0;M(G,_-v,E-A)}}}return N.push(b.length),new i({values:b,index:D,ptr:N,size:[g-v+1,y-A+1]})}i.prototype.forEach=function(p,v){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,A=this._size[0],y=this._size[1],w=0;w<y;w++){var x=this._ptr[w],b=this._ptr[w+1];if(v)for(var D=x;D<b;D++){var N=this._index[D];p(this._values[D],[N,w],g)}else{for(var C={},S=x;S<b;S++){var M=this._index[S];C[M]=this._values[S]}for(var E=0;E<A;E++){var R=E in C?C[E]:0;p(R,[E,w],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],v=0;v<p;v++)for(var g=this._ptr[v],A=this._ptr[v+1],y=g;y<A;y++){var w=this._index[y];yield{value:this._values[y],index:[w,v]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(p,v,g,A,y){var w=A[0],x=A[1],b=[],D,N;for(D=0;D<w;D++)for(b[D]=[],N=0;N<x;N++)b[D][N]=0;for(N=0;N<x;N++)for(var C=g[N],S=g[N+1],M=C;M<S;M++)D=v[M],b[D][N]=p?y?Be(p[M]):p[M]:1;return b}return i.prototype.format=function(p){for(var v=this._size[0],g=this._size[1],A=this.density(),y="Sparse Matrix ["+qe(v,p)+" x "+qe(g,p)+"] density: "+qe(A,p)+`
`,w=0;w<g;w++)for(var x=this._ptr[w],b=this._ptr[w+1],D=x;D<b;D++){var N=this._index[D];y+=`
    (`+qe(N,p)+", "+qe(w,p)+") ==> "+(this._values?qe(this._values[D],p):"X")}return y},i.prototype.toString=function(){return qe(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(Ue(p)&&(p=p.toNumber()),!_e(p)||!Ee(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var v=p>0?p:0,g=p<0?-p:0,A=this._size[0],y=this._size[1],w=Math.min(A-g,y-v),x=[],b=[],D=[];D[0]=0;for(var N=v;N<y&&x.length<w;N++)for(var C=this._ptr[N],S=this._ptr[N+1],M=C;M<S;M++){var E=this._index[M];if(E===N-v+g){x.push(this._values[M]),b[x.length-1]=E-g;break}}return D.push(x.length),new i({values:x,index:b,ptr:D,size:[w,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,v,g,A,y){if(!je(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(F){if(Ue(F)&&(F=F.toNumber()),!_e(F)||!Ee(F)||F<1)throw new Error("Size values must be positive integers");return F}),g){if(Ue(g)&&(g=g.toNumber()),!_e(g)||!Ee(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var w=t,x=0;It(y)&&(w=e.find(t,[y,y])||t,x=e.convert(0,y));var b=g>0?g:0,D=g<0?-g:0,N=p[0],C=p[1],S=Math.min(N-D,C-b),M;if(je(v)){if(v.length!==S)throw new Error("Invalid value array length");M=function(_){return v[_]}}else if(Oe(v)){var E=v.size();if(E.length!==1||E[0]!==S)throw new Error("Invalid matrix length");M=function(_){return v.get([_])}}else M=function(){return v};for(var R=[],I=[],k=[],T=0;T<C;T++){k.push(R.length);var O=T-b;if(O>=0&&O<S){var U=M(O);w(U,x)||(I.push(O+D),R.push(U))}}return k.push(R.length),new i({values:R,index:I,ptr:k,size:[N,C]})},i.prototype.swapRows=function(p,v){if(!_e(p)||!Ee(p)||!_e(v)||!Ee(v))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return at(p,this._size[0]),at(v,this._size[0]),i._swapRows(p,v,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,v,g,A,y){for(var w=A[p],x=A[p+1],b=w;b<x;b++)y(g[b],v[b])},i._swapRows=function(p,v,g,A,y,w){for(var x=0;x<g;x++){var b=w[x],D=w[x+1],N=l(p,b,D,y),C=l(v,b,D,y);if(N<D&&C<D&&y[N]===p&&y[C]===v){if(A){var S=A[N];A[N]=A[C],A[C]=S}continue}if(N<D&&y[N]===p&&(C>=D||y[C]!==v)){var M=A?A[N]:void 0;y.splice(C,0,v),A&&A.splice(C,0,M),y.splice(C<=N?N+1:N,1),A&&A.splice(C<=N?N+1:N,1);continue}if(C<D&&y[C]===v&&(N>=D||y[N]!==p)){var E=A?A[C]:void 0;y.splice(N,0,p),A&&A.splice(N,0,E),y.splice(N<=C?C+1:C,1),A&&A.splice(N<=C?C+1:C,1)}}},i},{isClass:!0}),X3="number",Z3=["typed"];function J3(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function j3(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var a=e+t;if(isNaN(a))throw new SyntaxError('String "'+r.input+'" is no valid number');return a}var Q3=P(X3,Z3,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=J3(i);if(a)return j3(a);var s=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),i=o[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is no valid number');if(o){if(u>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>Ve(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),Jd="string",eO=["typed"],tO=P(Jd,eO,r=>{var{typed:e}=r;return e(Jd,{"":function(){return""},number:Jn,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t)),any:function(n){return String(n)}})}),jd="boolean",rO=["typed"],nO=P(jd,rO,r=>{var{typed:e}=r;return e(jd,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(n);if(n!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),iO="bignumber",aO=["typed","BigNumber"],sO=P(iO,aO,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],o=t(a[1]),u=new t(2).pow(Number(s));if(o.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new t(2).pow(Number(s)-1);return o.gte(l)?o.sub(u):o}return new t(i)},BigNumber:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>Ve(i,n))})}),oO="complex",uO=["typed","Complex"],lO=P(oO,uO,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,a){return new t(i,a)},"BigNumber, BigNumber":function(i,a){return new t(i.toNumber(),a.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>Ve(i,n))})}),cO="fraction",fO=["typed","Fraction"],hO=P(cO,fO,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,a){return new t(i,a)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>Ve(i,n))})}),Qd="matrix",dO=["typed","Matrix","DenseMatrix","SparseMatrix"],mO=P(Qd,dO,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(Qd,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,u){return a([],o,u)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,u){if(o==="dense"||o==="default"||o===void 0)return new n(s,u);if(o==="sparse")return new i(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),em="matrixFromFunction",pO=["typed","matrix","isZero"],gO=P(em,pO,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(em,{"Array | Matrix, function, string, string":function(s,o,u,l){return i(s,o,u,l)},"Array | Matrix, function, string":function(s,o,u){return i(s,o,u)},"Matrix, function":function(s,o){return i(s,o,"dense")},"Array, function":function(s,o){return i(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,u){return i(s,u,o)},"Array | Matrix, string, string, function":function(s,o,u,l){return i(s,l,o,u)}});function i(a,s,o,u){var l;return u!==void 0?l=t(o,u):l=t(o),l.resize(a),l.forEach(function(c,f){var h=s(f);n(h)||l.set(f,h)}),l}}),tm="matrixFromRows",vO=["typed","matrix","flatten","size"],yO=P(tm,vO,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(tm,{"...Array":function(u){return a(u)},"...Matrix":function(u){return t(a(u.map(l=>l.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=s(o[0]),l=[];for(var c of o){var f=s(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+" ≠ "+(f|0));l.push(n(c))}return l}function s(o){var u=i(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),rm="matrixFromColumns",bO=["typed","matrix","flatten","size"],xO=P(rm,bO,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(rm,{"...Array":function(u){return a(u)},"...Matrix":function(u){return t(a(u.map(l=>l.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=s(o[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of o){var h=s(f);if(h!==u)throw new TypeError("The vectors had different length: "+(u|0)+" ≠ "+(h|0));for(var d=n(f),m=0;m<u;m++)l[m].push(d[m])}return l}function s(o){var u=i(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),nm="splitUnit",wO=["typed"],AO=P(nm,wO,r=>{var{typed:e}=r;return e(nm,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),im="unaryMinus",DO=["typed"],SO=P(im,DO,r=>{var{typed:e}=r;return e(im,{number:bx,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),am="unaryPlus",NO=["typed","config","BigNumber"],CO=P(am,NO,r=>{var{typed:e,config:t,BigNumber:n}=r;return e(am,{number:xx,Complex:function(a){return a},BigNumber:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>Ve(a,i)),"boolean | string":function(a){return t.number==="BigNumber"?new n(+a):+a}})}),sm="abs",EO=["typed"],MO=P(sm,EO,r=>{var{typed:e}=r;return e(sm,{number:gx,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),om="apply",TO=["typed","isInteger"],bf=P(om,TO,r=>{var{typed:e,isInteger:t}=r;return e(om,{"Array | Matrix, number | BigNumber, function":function(i,a,s){if(!t(a))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?Pe(i):i.size();if(a<0||a>=o.length)throw new Ar(a,o.length);return Oe(i)?i.create(Uo(i.valueOf(),a,s)):Uo(i,a,s)}})});function Uo(r,e,t){var n,i,a;if(e<=0)if(Array.isArray(r[0])){for(a=OO(r),i=[],n=0;n<a.length;n++)i[n]=Uo(a[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=Uo(r[n],e-1,t);return i}}function OO(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var s=[];for(n=0;n<e;n++)s.push(r[n][i]);a.push(s)}return a}var um="addScalar",BO=["typed"],FO=P(um,BO,r=>{var{typed:e}=r;return e(um,{"number, number":vx,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),lm="cbrt",kO=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],RO=P(lm,kO,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:a,Complex:s,BigNumber:o,Fraction:u}=r;return t(lm,{number:xa,Complex:l,"Complex, boolean":l,BigNumber:function(h){return h.cbrt()},Unit:c});function l(f,h){var d=f.arg()/3,m=f.abs(),p=new s(xa(m),0).mul(new s(0,d).exp());if(h){var v=[p,new s(xa(m),0).mul(new s(0,d+Math.PI*2/3).exp()),new s(xa(m),0).mul(new s(0,d-Math.PI*2/3).exp())];return e.matrix==="Array"?v:a(v)}else return p}function c(f){if(f.value&&Er(f.value)){var h=f.clone();return h.value=1,h=h.pow(1/3),h.value=l(f.value),h}else{var d=n(f.value);d&&(f.value=i(f.value));var m;Ue(f.value)?m=new o(1).div(3):si(f.value)?m=new u(1,3):m=1/3;var p=f.pow(m);return d&&(p.value=i(p.value)),p}}}),IO="matAlgo11xS0s",PO=["typed","equalScalar"],$t=P(IO,PO,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s,o){var u=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],m=f[1],p,v=t,g=0,A=s;typeof h=="string"&&(p=h,v=e.find(t,[p,p]),g=e.convert(0,p),a=e.convert(a,p),A=e.find(s,[p,p]));for(var y=[],w=[],x=[],b=0;b<m;b++){x[b]=w.length;for(var D=c[b],N=c[b+1],C=D;C<N;C++){var S=l[C],M=o?A(a,u[C]):A(u[C],a);v(M,g)||(w.push(S),y.push(M))}}return x[m]=w.length,i.createSparseMatrix({values:y,index:w,ptr:x,size:[d,m],datatype:p})}}),$O="matAlgo12xSfs",_O=["typed","DenseMatrix"],Tt=P($O,_O,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,s,o){var u=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],m=f[1],p,v=s;typeof h=="string"&&(p=h,a=e.convert(a,p),v=e.find(s,[p,p]));for(var g=[],A=[],y=[],w=0;w<m;w++){for(var x=w+1,b=c[w],D=c[w+1],N=b;N<D;N++){var C=l[N];A[C]=u[N],y[C]=x}for(var S=0;S<d;S++)w===0&&(g[S]=[]),y[S]===x?g[S][w]=o?v(a,A[S]):v(A[S],a):g[S][w]=o?v(a,0):v(0,a)}return new t({data:g,size:[d,m],datatype:p})}}),LO="matAlgo14xDs",zO=["typed"],kr=P(LO,zO,r=>{var{typed:e}=r;return function(i,a,s,o){var u=i._data,l=i._size,c=i._datatype,f,h=s;typeof c=="string"&&(f=c,a=e.convert(a,f),h=e.find(s,[f,f]));var d=l.length>0?t(h,0,l,l[0],u,a,o):[];return i.createDenseMatrix({data:d,size:Be(l),datatype:f})};function t(n,i,a,s,o,u,l){var c=[];if(i===a.length-1)for(var f=0;f<s;f++)c[f]=l?n(u,o[f]):n(o[f],u);else for(var h=0;h<s;h++)c[h]=t(n,i+1,a,a[i+1],o[h],u,l);return c}}),gc="ceil",qO=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],UO=P(gc,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(gc,{number:function(a){return dr(a,n(a),t.epsilon)?n(a):Math.ceil(a)},"number, number":function(a,s){if(dr(a,n(a,s),t.epsilon))return n(a,s);var[o,u]="".concat(a,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),HO=P(gc,qO,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=r,u=$t({typed:e,equalScalar:a}),l=Tt({typed:e,DenseMatrix:o}),c=kr({typed:e}),f=UO({typed:e,config:t,round:n});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(d){return d.ceil()},"Complex, number":function(d,m){return d.ceil(m)},"Complex, BigNumber":function(d,m){return d.ceil(m.toNumber())},BigNumber:function(d){return Kr(d,n(d),t.epsilon)?n(d):d.ceil()},"BigNumber, BigNumber":function(d,m){return Kr(d,n(d,m),t.epsilon)?n(d,m):d.toDecimalPlaces(m.toNumber(),$n.ROUND_CEIL)},Fraction:function(d){return d.ceil()},"Fraction, number":function(d,m){return d.ceil(m)},"Fraction, BigNumber":function(d,m){return d.ceil(m.toNumber())},"Array | Matrix":e.referToSelf(h=>d=>Ve(d,h)),"Array, number | BigNumber":e.referToSelf(h=>(d,m)=>Ve(d,p=>h(p,m))),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(d,m)=>u(d,m,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(d,m)=>c(d,m,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(d,m)=>c(i(m),d,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(d,m)=>a(d,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,d,h,!0):l(m,d,h,!0))})}),cm="cube",VO=["typed"],WO=P(cm,VO,r=>{var{typed:e}=r;return e(cm,{number:wx,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),fm="exp",GO=["typed"],YO=P(fm,GO,r=>{var{typed:e}=r;return e(fm,{number:Ax,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),hm="expm1",KO=["typed","Complex"],XO=P(hm,KO,r=>{var{typed:e,Complex:t}=r;return e(hm,{number:Dx,Complex:function(i){var a=Math.exp(i.re);return new t(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),vc="fix",ZO=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],JO=P(vc,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(vc,{number:function(a){return a>0?n(a):t(a)},"number, number":function(a,s){return a>0?n(a,s):t(a,s)}})}),jO=P(vc,ZO,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:a,equalScalar:s,zeros:o,DenseMatrix:u}=r,l=Tt({typed:e,DenseMatrix:u}),c=kr({typed:e}),f=JO({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(d){return new t(d.re>0?Math.floor(d.re):Math.ceil(d.re),d.im>0?Math.floor(d.im):Math.ceil(d.im))},"Complex, number":function(d,m){return new t(d.re>0?a(d.re,m):i(d.re,m),d.im>0?a(d.im,m):i(d.im,m))},"Complex, BigNumber":function(d,m){var p=m.toNumber();return new t(d.re>0?a(d.re,p):i(d.re,p),d.im>0?a(d.im,p):i(d.im,p))},BigNumber:function(d){return d.isNegative()?i(d):a(d)},"BigNumber, number | BigNumber":function(d,m){return d.isNegative()?i(d,m):a(d,m)},Fraction:function(d){return d.s<0?d.ceil():d.floor()},"Fraction, number | BigNumber":function(d,m){return d.s<0?i(d,m):a(d,m)},"Array | Matrix":e.referToSelf(h=>d=>Ve(d,h)),"Array | Matrix, number | BigNumber":e.referToSelf(h=>(d,m)=>Ve(d,p=>h(p,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(d,m)=>c(n(m),d,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(d,m)=>s(d,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,d,h,!0):l(m,d,h,!0))})}),yc="floor",QO=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],eB=P(yc,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(yc,{number:function(a){return dr(a,n(a),t.epsilon)?n(a):Math.floor(a)},"number, number":function(a,s){if(dr(a,n(a,s),t.epsilon))return n(a,s);var[o,u]="".concat(a,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),cw=P(yc,QO,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=r,u=$t({typed:e,equalScalar:a}),l=Tt({typed:e,DenseMatrix:o}),c=kr({typed:e}),f=eB({typed:e,config:t,round:n});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(d){return d.floor()},"Complex, number":function(d,m){return d.floor(m)},"Complex, BigNumber":function(d,m){return d.floor(m.toNumber())},BigNumber:function(d){return Kr(d,n(d),t.epsilon)?n(d):d.floor()},"BigNumber, BigNumber":function(d,m){return Kr(d,n(d,m),t.epsilon)?n(d,m):d.toDecimalPlaces(m.toNumber(),$n.ROUND_FLOOR)},Fraction:function(d){return d.floor()},"Fraction, number":function(d,m){return d.floor(m)},"Fraction, BigNumber":function(d,m){return d.floor(m.toNumber())},"Array | Matrix":e.referToSelf(h=>d=>Ve(d,h)),"Array, number | BigNumber":e.referToSelf(h=>(d,m)=>Ve(d,p=>h(p,m))),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(d,m)=>u(d,m,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(d,m)=>c(d,m,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(d,m)=>c(i(m),d,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(d,m)=>a(d,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,d,h,!0):l(m,d,h,!0))})}),tB="matAlgo02xDS0",rB=["typed","equalScalar"],Rr=P(tB,rB,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s,o){var u=i._data,l=i._size,c=i._datatype,f=a._values,h=a._index,d=a._ptr,m=a._size,p=a._datatype;if(l.length!==m.length)throw new Le(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],g=l[1],A,y=t,w=0,x=s;typeof c=="string"&&c===p&&(A=c,y=e.find(t,[A,A]),w=e.convert(0,A),x=e.find(s,[A,A]));for(var b=[],D=[],N=[],C=0;C<g;C++){N[C]=D.length;for(var S=d[C],M=d[C+1],E=S;E<M;E++){var R=h[E],I=o?x(f[E],u[R][C]):x(u[R][C],f[E]);y(I,w)||(D.push(R),b.push(I))}}return N[g]=D.length,a.createSparseMatrix({values:b,index:D,ptr:N,size:[v,g],datatype:A})}}),nB="matAlgo03xDSf",iB=["typed"],Jt=P(nB,iB,r=>{var{typed:e}=r;return function(n,i,a,s){var o=n._data,u=n._size,l=n._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,m=i._datatype;if(u.length!==d.length)throw new Le(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=u[0],v=u[1],g,A=0,y=a;typeof l=="string"&&l===m&&(g=l,A=e.convert(0,g),y=e.find(a,[g,g]));for(var w=[],x=0;x<p;x++)w[x]=[];for(var b=[],D=[],N=0;N<v;N++){for(var C=N+1,S=h[N],M=h[N+1],E=S;E<M;E++){var R=f[E];b[R]=s?y(c[E],o[R][N]):y(o[R][N],c[E]),D[R]=C}for(var I=0;I<p;I++)D[I]===C?w[I][N]=b[I]:w[I][N]=s?y(A,o[I][N]):y(o[I][N],A)}return n.createDenseMatrix({data:w,size:[p,v],datatype:g})}}),aB="matAlgo05xSfSf",sB=["typed","equalScalar"],Su=P(aB,sB,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,m=a._ptr,p=a._size,v=a._datatype;if(c.length!==p.length)throw new Le(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var g=c[0],A=c[1],y,w=t,x=0,b=s;typeof f=="string"&&f===v&&(y=f,w=e.find(t,[y,y]),x=e.convert(0,y),b=e.find(s,[y,y]));var D=o&&h?[]:void 0,N=[],C=[],S=D?[]:void 0,M=D?[]:void 0,E=[],R=[],I,k,T,O;for(k=0;k<A;k++){C[k]=N.length;var U=k+1;for(T=l[k],O=l[k+1];T<O;T++)I=u[T],N.push(I),E[I]=U,S&&(S[I]=o[T]);for(T=m[k],O=m[k+1];T<O;T++)I=d[T],E[I]!==U&&N.push(I),R[I]=U,M&&(M[I]=h[T]);if(D)for(T=C[k];T<N.length;){I=N[T];var F=E[I],_=R[I];if(F===U||_===U){var G=F===U?S[I]:x,K=_===U?M[I]:x,L=b(G,K);w(L,x)?N.splice(T,1):(D.push(L),T++)}}}return C[A]=N.length,i.createSparseMatrix({values:D,index:N,ptr:C,size:[g,A],datatype:y})}}),oB="matAlgo13xDD",uB=["typed"],lB=P(oB,uB,r=>{var{typed:e}=r;return function(i,a,s){var o=i._data,u=i._size,l=i._datatype,c=a._data,f=a._size,h=a._datatype,d=[];if(u.length!==f.length)throw new Le(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");d[m]=u[m]}var p,v=s;typeof l=="string"&&l===h&&(p=l,v=e.find(s,[p,p]));var g=d.length>0?t(v,0,d,d[0],o,c):[];return i.createDenseMatrix({data:g,size:d,datatype:p})};function t(n,i,a,s,o,u){var l=[];if(i===a.length-1)for(var c=0;c<s;c++)l[c]=n(o[c],u[c]);else for(var f=0;f<s;f++)l[f]=t(n,i+1,a,a[i+1],o[f],u[f]);return l}}),cB="broadcast",fB=["concat"],hB=P(cB,fB,r=>{var{concat:e}=r;return function(i,a){var s=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((m,p)=>m===a._size[p]))return[i,a];for(var o=t(i._size,s,0),u=t(a._size,s,0),l=[],c=0;c<s;c++)l[c]=Math.max(o[c],u[c]);Ro(o,l),Ro(u,l);var f=i.clone(),h=a.clone();f._size.length<s?f.reshape(t(f._size,s,1)):h._size.length<s&&h.reshape(t(h._size,s,1));for(var d=0;d<s;d++)f._size[d]<l[d]&&(f=n(f,l[d],d)),h._size[d]<l[d]&&(h=n(h,l[d],d));return[f,h]};function t(i,a,s){return[...Array(a-i.length).fill(s),...i]}function n(i,a,s){return e(...Array(a).fill(i),s)}}),dB="matrixAlgorithmSuite",mB=["typed","matrix","concat"],ut=P(dB,mB,r=>{var{typed:e,matrix:t,concat:n}=r,i=lB({typed:e}),a=kr({typed:e}),s=hB({concat:n});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(p,v)=>i(...s(p,v),l),"Array, Array":(p,v)=>i(...s(t(p),t(v)),l).valueOf(),"Array, DenseMatrix":(p,v)=>i(...s(t(p),v),l),"DenseMatrix, Array":(p,v)=>i(...s(p,t(v)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(p,v)=>u.SS(...s(p,v),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(p,v)=>u.DS(...s(p,v),l,!1),f["Array, SparseMatrix"]=(p,v)=>u.DS(...s(t(p),v),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(p,v)=>c(...s(v,p),l,!0),f["SparseMatrix, Array"]=(p,v)=>c(...s(t(v),p),l,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(p=>(v,g)=>i(...s(v,g),p)),"Array, Array":e.referToSelf(p=>(v,g)=>i(...s(t(v),t(g)),p).valueOf()),"Array, DenseMatrix":e.referToSelf(p=>(v,g)=>i(...s(t(v),g),p)),"DenseMatrix, Array":e.referToSelf(p=>(v,g)=>i(...s(v,t(g)),p))},u.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(p=>(v,g)=>u.SS(...s(v,g),p,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(p=>(v,g)=>u.DS(...s(v,g),p,!1)),f["Array, SparseMatrix"]=e.referToSelf(p=>(v,g)=>u.DS(...s(t(v),g),p,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(p=>(v,g)=>c(...s(g,v),p,!0)),f["SparseMatrix, Array"]=e.referToSelf(p=>(v,g)=>c(...s(t(g),v),p,!0))));var h=u.scalar||"any",d=u.Ds||u.Ss;d&&(l?(f["DenseMatrix,"+h]=(p,v)=>a(p,v,l,!1),f[h+", DenseMatrix"]=(p,v)=>a(v,p,l,!0),f["Array,"+h]=(p,v)=>a(t(p),v,l,!1).valueOf(),f[h+", Array"]=(p,v)=>a(t(v),p,l,!0).valueOf()):(f["DenseMatrix,"+h]=e.referToSelf(p=>(v,g)=>a(v,g,p,!1)),f[h+", DenseMatrix"]=e.referToSelf(p=>(v,g)=>a(g,v,p,!0)),f["Array,"+h]=e.referToSelf(p=>(v,g)=>a(t(v),g,p,!1).valueOf()),f[h+", Array"]=e.referToSelf(p=>(v,g)=>a(t(g),v,p,!0).valueOf())));var m=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+h]=(p,v)=>u.Ss(p,v,l,!1)),m&&(f[h+", SparseMatrix"]=(p,v)=>m(v,p,l,!0))):(u.Ss&&(f["SparseMatrix,"+h]=e.referToSelf(p=>(v,g)=>u.Ss(v,g,p,!1))),m&&(f[h+", SparseMatrix"]=e.referToSelf(p=>(v,g)=>m(g,v,p,!0)))),l&&l.signatures&&Pb(f,l.signatures),f}}),dm="mod",pB=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],fw=P(dm,pB,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o,concat:u}=r,l=cw({typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}),c=Rr({typed:e,equalScalar:a}),f=Jt({typed:e}),h=Su({typed:e,equalScalar:a}),d=$t({typed:e,equalScalar:a}),m=Tt({typed:e,DenseMatrix:o}),p=ut({typed:e,matrix:i,concat:u});return e(dm,{"number, number":v,"BigNumber, BigNumber":function(A,y){if(y.isNeg())throw new Error("Cannot calculate mod for a negative divisor");return y.isZero()?A:A.mod(y)},"Fraction, Fraction":function(A,y){if(y.compare(0)<0)throw new Error("Cannot calculate mod for a negative divisor");return A.compare(0)>=0?A.mod(y):A.mod(y).add(y).mod(y)}},p({SS:h,DS:f,SD:c,Ss:d,sS:m}));function v(g,A){return A===0?g:g-A*l(g/A)}}),gB="matAlgo01xDSid",vB=["typed"],zn=P(gB,vB,r=>{var{typed:e}=r;return function(n,i,a,s){var o=n._data,u=n._size,l=n._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,m=i._datatype;if(u.length!==d.length)throw new Le(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=u[0],v=u[1],g=typeof l=="string"&&l===m?l:void 0,A=g?e.find(a,[g,g]):a,y,w,x=[];for(y=0;y<p;y++)x[y]=[];var b=[],D=[];for(w=0;w<v;w++){for(var N=w+1,C=h[w],S=h[w+1],M=C;M<S;M++)y=f[M],b[y]=s?A(c[M],o[y][w]):A(o[y][w],c[M]),D[y]=N;for(y=0;y<p;y++)D[y]===N?x[y][w]=b[y]:x[y][w]=o[y][w]}return n.createDenseMatrix({data:x,size:[p,v],datatype:g})}}),yB="matAlgo04xSidSid",bB=["typed","equalScalar"],xf=P(yB,bB,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,m=a._ptr,p=a._size,v=a._datatype;if(c.length!==p.length)throw new Le(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var g=c[0],A=c[1],y,w=t,x=0,b=s;typeof f=="string"&&f===v&&(y=f,w=e.find(t,[y,y]),x=e.convert(0,y),b=e.find(s,[y,y]));var D=o&&h?[]:void 0,N=[],C=[],S=o&&h?[]:void 0,M=o&&h?[]:void 0,E=[],R=[],I,k,T,O,U;for(k=0;k<A;k++){C[k]=N.length;var F=k+1;for(O=l[k],U=l[k+1],T=O;T<U;T++)I=u[T],N.push(I),E[I]=F,S&&(S[I]=o[T]);for(O=m[k],U=m[k+1],T=O;T<U;T++)if(I=d[T],E[I]===F){if(S){var _=b(S[I],h[T]);w(_,x)?E[I]=null:S[I]=_}}else N.push(I),R[I]=F,M&&(M[I]=h[T]);if(S&&M)for(T=C[k];T<N.length;)I=N[T],E[I]===F?(D[T]=S[I],T++):R[I]===F?(D[T]=M[I],T++):N.splice(T,1)}return C[A]=N.length,i.createSparseMatrix({values:D,index:N,ptr:C,size:[g,A],datatype:y})}}),xB="matAlgo10xSids",wB=["typed","DenseMatrix"],li=P(xB,wB,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,s,o){var u=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],m=f[1],p,v=s;typeof h=="string"&&(p=h,a=e.convert(a,p),v=e.find(s,[p,p]));for(var g=[],A=[],y=[],w=0;w<m;w++){for(var x=w+1,b=c[w],D=c[w+1],N=b;N<D;N++){var C=l[N];A[C]=u[N],y[C]=x}for(var S=0;S<d;S++)w===0&&(g[S]=[]),y[S]===x?g[S][w]=o?v(a,A[S]):v(A[S],a):g[S][w]=a}return new t({data:g,size:[d,m],datatype:p})}});function mn(r,e,t,n){if(!(this instanceof mn))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}mn.prototype=new Error;mn.prototype.constructor=Error;mn.prototype.name="ArgumentsError";mn.prototype.isArgumentsError=!0;var mm="gcd",AB=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],nl="number | BigNumber | Fraction | Matrix | Array",DB="".concat(nl,", ").concat(nl,", ...").concat(nl);function pm(r){return!r.some(e=>Array.isArray(e))}var SB=P(mm,AB,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:u,concat:l}=r,c=fw({typed:e,config:n,round:i,matrix:t,equalScalar:a,zeros:s,DenseMatrix:u,concat:l}),f=zn({typed:e}),h=xf({typed:e,equalScalar:a}),d=li({typed:e,DenseMatrix:u}),m=ut({typed:e,matrix:t,concat:l});return e(mm,{"number, number":p,"BigNumber, BigNumber":v,"Fraction, Fraction":(g,A)=>g.gcd(A)},m({SS:h,DS:f,Ss:d}),{[DB]:e.referToSelf(g=>(A,y,w)=>{for(var x=g(A,y),b=0;b<w.length;b++)x=g(x,w[b]);return x}),Array:e.referToSelf(g=>A=>{if(A.length===1&&Array.isArray(A[0])&&pm(A[0]))return g(...A[0]);if(pm(A))return g(...A);throw new mn("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(g=>A=>g(A.toArray()))});function p(g,A){if(!Ee(g)||!Ee(A))throw new Error("Parameters in function gcd must be integer numbers");for(var y;A!==0;)y=c(g,A),g=A,A=y;return g<0?-g:g}function v(g,A){if(!g.isInt()||!A.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var y=new o(0);!A.isZero();){var w=c(g,A);g=A,A=w}return g.lt(y)?g.neg():g}}),NB="matAlgo06xS0S0",CB=["typed","equalScalar"],Nu=P(NB,CB,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,u=i._size,l=i._datatype,c=a._values,f=a._size,h=a._datatype;if(u.length!==f.length)throw new Le(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var d=u[0],m=u[1],p,v=t,g=0,A=s;typeof l=="string"&&l===h&&(p=l,v=e.find(t,[p,p]),g=e.convert(0,p),A=e.find(s,[p,p]));for(var y=o&&c?[]:void 0,w=[],x=[],b=y?[]:void 0,D=[],N=[],C=0;C<m;C++){x[C]=w.length;var S=C+1;if(Ld(i,C,D,b,N,S,w,A),Ld(a,C,D,b,N,S,w,A),b)for(var M=x[C];M<w.length;){var E=w[M];if(N[E]===S){var R=b[E];v(R,g)?w.splice(M,1):(y.push(R),M++)}else w.splice(M,1)}else for(var I=x[C];I<w.length;){var k=w[I];N[k]!==S?w.splice(I,1):I++}}return x[m]=w.length,i.createSparseMatrix({values:y,index:w,ptr:x,size:[d,m],datatype:p})}}),gm="lcm",EB=["typed","matrix","equalScalar","concat"],MB=P(gm,EB,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=Rr({typed:e,equalScalar:n}),s=Nu({typed:e,equalScalar:n}),o=$t({typed:e,equalScalar:n}),u=ut({typed:e,matrix:t,concat:i}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(h=>(d,m,p)=>{for(var v=h(d,m),g=0;g<p.length;g++)v=h(v,p[g]);return v}),e(gm,{"number, number":Sx,"BigNumber, BigNumber":f,"Fraction, Fraction":(h,d)=>h.lcm(d)},u({SS:s,DS:a,Ss:o}),c);function f(h,d){if(!h.isInt()||!d.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(h.isZero())return h;if(d.isZero())return d;for(var m=h.times(d);!d.isZero();){var p=d;d=h.mod(p),h=p}return m.div(h).abs()}}),vm="log10",TB=["typed","config","Complex"],OB=P(vm,TB,r=>{var{typed:e,config:t,Complex:n}=r;return e(vm,{number:function(a){return a>=0||t.predictable?Nx(a):new n(a,0).log().div(Math.LN10)},Complex:function(a){return new n(a).log().div(Math.LN10)},BigNumber:function(a){return!a.isNegative()||t.predictable?a.log():new n(a.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>a=>Ve(a,i))})}),ym="log2",BB=["typed","config","Complex"],FB=P(ym,BB,r=>{var{typed:e,config:t,Complex:n}=r;return e(ym,{number:function(s){return s>=0||t.predictable?Cx(s):i(new n(s,0))},Complex:i,BigNumber:function(s){return!s.isNegative()||t.predictable?s.log(2):i(new n(s.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>s=>Ve(s,a))});function i(a){var s=Math.sqrt(a.re*a.re+a.im*a.im);return new n(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),kB="multiplyScalar",RB=["typed"],IB=P(kB,RB,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":yx,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),bm="multiply",PB=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],$B=P(bm,PB,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=r,o=$t({typed:e,equalScalar:a}),u=kr({typed:e});function l(x,b){switch(x.length){case 1:switch(b.length){case 1:if(x[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;case 2:switch(b.length){case 1:if(x[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+b[0]+")");break;case 2:if(x[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,b,D){if(D===0)throw new Error("Cannot multiply two empty vectors");return s(x,b)}function f(x,b){if(b.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(x,b)}function h(x,b){var D=x._data,N=x._size,C=x._datatype,S=b._data,M=b._size,E=b._datatype,R=N[0],I=M[1],k,T=n,O=i;C&&E&&C===E&&typeof C=="string"&&(k=C,T=e.find(n,[k,k]),O=e.find(i,[k,k]));for(var U=[],F=0;F<I;F++){for(var _=O(D[0],S[0][F]),G=1;G<R;G++)_=T(_,O(D[G],S[G][F]));U[F]=_}return x.createDenseMatrix({data:U,size:[I],datatype:k})}var d=e("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":A}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":v,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":w});function p(x,b){var D=x._data,N=x._size,C=x._datatype,S=b._data,M=b._datatype,E=N[0],R=N[1],I,k=n,T=i;C&&M&&C===M&&typeof C=="string"&&(I=C,k=e.find(n,[I,I]),T=e.find(i,[I,I]));for(var O=[],U=0;U<E;U++){for(var F=D[U],_=T(F[0],S[0]),G=1;G<R;G++)_=k(_,T(F[G],S[G]));O[U]=_}return x.createDenseMatrix({data:O,size:[E],datatype:I})}function v(x,b){var D=x._data,N=x._size,C=x._datatype,S=b._data,M=b._size,E=b._datatype,R=N[0],I=N[1],k=M[1],T,O=n,U=i;C&&E&&C===E&&typeof C=="string"&&(T=C,O=e.find(n,[T,T]),U=e.find(i,[T,T]));for(var F=[],_=0;_<R;_++){var G=D[_];F[_]=[];for(var K=0;K<k;K++){for(var L=U(G[0],S[0][K]),X=1;X<I;X++)L=O(L,U(G[X],S[X][K]));F[_][K]=L}}return x.createDenseMatrix({data:F,size:[R,k],datatype:T})}function g(x,b){var D=x._data,N=x._size,C=x._datatype,S=b._values,M=b._index,E=b._ptr,R=b._size,I=b._datatype;if(!S)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var k=N[0],T=R[1],O,U=n,F=i,_=a,G=0;C&&I&&C===I&&typeof C=="string"&&(O=C,U=e.find(n,[O,O]),F=e.find(i,[O,O]),_=e.find(a,[O,O]),G=e.convert(0,O));for(var K=[],L=[],X=[],Q=b.createSparseMatrix({values:K,index:L,ptr:X,size:[k,T],datatype:O}),J=0;J<T;J++){X[J]=L.length;var ae=E[J],le=E[J+1];if(le>ae)for(var ie=0,ee=0;ee<k;ee++){for(var fe=ee+1,we=void 0,ve=ae;ve<le;ve++){var xe=M[ve];ie!==fe?(we=F(D[ee][xe],S[ve]),ie=fe):we=U(we,F(D[ee][xe],S[ve]))}ie===fe&&!_(we,G)&&(L.push(ee),K.push(we))}}return X[T]=L.length,Q}function A(x,b){var D=x._values,N=x._index,C=x._ptr,S=x._datatype;if(!D)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=b._data,E=b._datatype,R=x._size[0],I=b._size[0],k=[],T=[],O=[],U,F=n,_=i,G=a,K=0;S&&E&&S===E&&typeof S=="string"&&(U=S,F=e.find(n,[U,U]),_=e.find(i,[U,U]),G=e.find(a,[U,U]),K=e.convert(0,U));var L=[],X=[];O[0]=0;for(var Q=0;Q<I;Q++){var J=M[Q];if(!G(J,K))for(var ae=C[Q],le=C[Q+1],ie=ae;ie<le;ie++){var ee=N[ie];X[ee]?L[ee]=F(L[ee],_(J,D[ie])):(X[ee]=!0,T.push(ee),L[ee]=_(J,D[ie]))}}for(var fe=T.length,we=0;we<fe;we++){var ve=T[we];k[we]=L[ve]}return O[1]=T.length,x.createSparseMatrix({values:k,index:T,ptr:O,size:[R,1],datatype:U})}function y(x,b){var D=x._values,N=x._index,C=x._ptr,S=x._datatype;if(!D)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=b._data,E=b._datatype,R=x._size[0],I=b._size[0],k=b._size[1],T,O=n,U=i,F=a,_=0;S&&E&&S===E&&typeof S=="string"&&(T=S,O=e.find(n,[T,T]),U=e.find(i,[T,T]),F=e.find(a,[T,T]),_=e.convert(0,T));for(var G=[],K=[],L=[],X=x.createSparseMatrix({values:G,index:K,ptr:L,size:[R,k],datatype:T}),Q=[],J=[],ae=0;ae<k;ae++){L[ae]=K.length;for(var le=ae+1,ie=0;ie<I;ie++){var ee=M[ie][ae];if(!F(ee,_))for(var fe=C[ie],we=C[ie+1],ve=fe;ve<we;ve++){var xe=N[ve];J[xe]!==le?(J[xe]=le,K.push(xe),Q[xe]=U(ee,D[ve])):Q[xe]=O(Q[xe],U(ee,D[ve]))}}for(var z=L[ae],V=K.length,te=z;te<V;te++){var H=K[te];G[te]=Q[H]}}return L[k]=K.length,X}function w(x,b){var D=x._values,N=x._index,C=x._ptr,S=x._datatype,M=b._values,E=b._index,R=b._ptr,I=b._datatype,k=x._size[0],T=b._size[1],O=D&&M,U,F=n,_=i;S&&I&&S===I&&typeof S=="string"&&(U=S,F=e.find(n,[U,U]),_=e.find(i,[U,U]));for(var G=O?[]:void 0,K=[],L=[],X=x.createSparseMatrix({values:G,index:K,ptr:L,size:[k,T],datatype:U}),Q=O?[]:void 0,J=[],ae,le,ie,ee,fe,we,ve,xe,z=0;z<T;z++){L[z]=K.length;var V=z+1;for(fe=R[z],we=R[z+1],ee=fe;ee<we;ee++)if(xe=E[ee],O)for(le=C[xe],ie=C[xe+1],ae=le;ae<ie;ae++)ve=N[ae],J[ve]!==V?(J[ve]=V,K.push(ve),Q[ve]=_(M[ee],D[ae])):Q[ve]=F(Q[ve],_(M[ee],D[ae]));else for(le=C[xe],ie=C[xe+1],ae=le;ae<ie;ae++)ve=N[ae],J[ve]!==V&&(J[ve]=V,K.push(ve));if(O)for(var te=L[z],H=K.length,Y=te;Y<H;Y++){var j=K[Y];G[Y]=Q[j]}}return L[T]=K.length,X}return e(bm,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(b,D)=>{l(Pe(b),Pe(D));var N=x(t(b),t(D));return Oe(N)?N.valueOf():N}),"Matrix, Matrix":function(b,D){var N=b.size(),C=D.size();return l(N,C),N.length===1?C.length===1?c(b,D,N[0]):f(b,D):C.length===1?d(b,D):m(b,D)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(b,D)=>x(b,t(D))),"Array, Matrix":e.referToSelf(x=>(b,D)=>x(t(b,D.storage()),D)),"SparseMatrix, any":function(b,D){return o(b,D,i,!1)},"DenseMatrix, any":function(b,D){return u(b,D,i,!1)},"any, SparseMatrix":function(b,D){return o(D,b,i,!0)},"any, DenseMatrix":function(b,D){return u(D,b,i,!0)},"Array, any":function(b,D){return u(t(b),D,i,!1).valueOf()},"any, Array":function(b,D){return u(t(D),b,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(b,D,N)=>{for(var C=x(b,D),S=0;S<N.length;S++)C=x(C,N[S]);return C})})}),xm="nthRoot",_B=["typed","matrix","equalScalar","BigNumber","concat"],LB=P(xm,_B,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:a}=r,s=zn({typed:e}),o=Rr({typed:e,equalScalar:n}),u=Nu({typed:e,equalScalar:n}),l=$t({typed:e,equalScalar:n}),c=ut({typed:e,matrix:t,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(xm,{number:qd,"number, number":qd,BigNumber:d=>h(d,new i(2)),"BigNumber, BigNumber":h,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",d=>m=>d(t(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",d=>m=>d(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",d=>m=>d(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(d=>(m,p)=>{if(p.density()===1)return u(m,p,d);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(d=>(m,p)=>{if(p.density()===1)return s(m,p,d,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",d=>(m,p)=>d(t(m),p)),"number | BigNumber, SparseMatrix":e.referToSelf(d=>(m,p)=>{if(p.density()===1)return l(p,m,d,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:l,sS:!1}));function h(d,m){var p=i.precision,v=i.clone({precision:p+2}),g=new i(0),A=new v(1),y=m.isNegative();if(y&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(d.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(d.isZero())return y?new v(1/0):0;if(!d.isFinite())return y?g:d;var w=d.abs().pow(A.div(m));return w=d.isNeg()?w.neg():w,new i((y?A.div(w):w).toPrecision(p))}}),wm="sign",zB=["typed","BigNumber","Fraction","complex"],qB=P(wm,zB,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(wm,{number:pc,Complex:function(s){return s.im===0?n(pc(s.re)):s.sign()},BigNumber:function(s){return new t(s.cmp(0))},Fraction:function(s){return new i(s.s,1)},"Array | Matrix":e.referToSelf(a=>s=>Ve(s,a)),Unit:e.referToSelf(a=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,s.valueType())(s.value)})})}),UB="sqrt",HB=["config","typed","Complex"],VB=P(UB,HB,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),Am="square",WB=["typed"],GB=P(Am,WB,r=>{var{typed:e}=r;return e(Am,{number:Ex,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),Dm="subtract",YB=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],KB=P(Dm,YB,r=>{var{typed:e,matrix:t,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=r,u=zn({typed:e}),l=Jt({typed:e}),c=Su({typed:e,equalScalar:n}),f=li({typed:e,DenseMatrix:s}),h=Tt({typed:e,DenseMatrix:s}),d=ut({typed:e,matrix:t,concat:o});return e(Dm,{"number, number":(m,p)=>m-p,"Complex, Complex":(m,p)=>m.sub(p),"BigNumber, BigNumber":(m,p)=>m.minus(p),"Fraction, Fraction":(m,p)=>m.sub(p),"Unit, Unit":e.referToSelf(m=>(p,v)=>{if(p.value===null)throw new Error("Parameter x contains a unit with undefined value");if(v.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!p.equalBase(v))throw new Error("Units do not match");var g=p.clone();return g.value=e.find(m,[g.valueType(),v.valueType()])(g.value,v.value),g.fixPrefix=!1,g})},d({SS:c,DS:u,SD:l,Ss:h,sS:f}))}),Sm="xgcd",XB=["typed","config","matrix","BigNumber"],ZB=P(Sm,XB,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(Sm,{"number, number":function(o,u){var l=Mx(o,u);return t.matrix==="Array"?l:n(l)},"BigNumber, BigNumber":a});function a(s,o){var u,l,c,f=new i(0),h=new i(1),d=f,m=h,p=h,v=f;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)l=s.div(o).floor(),c=s.mod(o),u=d,d=m.minus(l.times(d)),m=u,u=p,p=v.minus(l.times(p)),v=u,s=o,o=c;var g;return s.lt(f)?g=[s.neg(),m.neg(),v.neg()]:g=[s,s.isZero()?0:m,v],t.matrix==="Array"?g:n(g)}}),Nm="invmod",JB=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],jB=P(Nm,JB,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:a,smaller:s,mod:o,add:u,isInteger:l}=r;return e(Nm,{"number, number":c,"BigNumber, BigNumber":c});function c(f,h){if(!l(f)||!l(h))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,h),a(h,0))throw new Error("Divisor must be non zero");var d=i(f,h);d=d.valueOf();var[m,p]=d;return a(m,n(1))?(p=o(p,h),s(p,n(0))&&(p=u(p,h)),p):NaN}}),QB="matAlgo09xS0Sf",eF=["typed","equalScalar"],hw=P(QB,eF,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,m=a._ptr,p=a._size,v=a._datatype;if(c.length!==p.length)throw new Le(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var g=c[0],A=c[1],y,w=t,x=0,b=s;typeof f=="string"&&f===v&&(y=f,w=e.find(t,[y,y]),x=e.convert(0,y),b=e.find(s,[y,y]));var D=o&&h?[]:void 0,N=[],C=[],S=D?[]:void 0,M=[],E,R,I,k,T;for(R=0;R<A;R++){C[R]=N.length;var O=R+1;if(S)for(k=m[R],T=m[R+1],I=k;I<T;I++)E=d[I],M[E]=O,S[E]=h[I];for(k=l[R],T=l[R+1],I=k;I<T;I++)if(E=u[I],S){var U=M[E]===O?S[E]:x,F=b(o[I],U);w(F,x)||(N.push(E),D.push(F))}else N.push(E)}return C[A]=N.length,i.createSparseMatrix({values:D,index:N,ptr:C,size:[g,A],datatype:y})}}),Cm="dotMultiply",tF=["typed","matrix","equalScalar","multiplyScalar","concat"],rF=P(Cm,tF,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:a}=r,s=Rr({typed:e,equalScalar:n}),o=hw({typed:e,equalScalar:n}),u=$t({typed:e,equalScalar:n}),l=ut({typed:e,matrix:t,concat:a});return e(Cm,l({elop:i,SS:o,DS:s,Ss:u}))});function nF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return wf(r,e,function(n,i){return n&i})}function Ga(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function iF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:wf(r,e,function(i,a){return i|a})}function wf(r,e,t){var n=r.constructor,i,a,s=+(r.s<0),o=+(e.s<0);if(s){i=Fs(Ga(r));for(var u=0;u<i.length;++u)i[u]^=1}else i=Fs(r);if(o){a=Fs(Ga(e));for(var l=0;l<a.length;++l)a[l]^=1}else a=Fs(e);var c,f,h;i.length<=a.length?(c=i,f=a,h=s):(c=a,f=i,h=o);var d=c.length,m=f.length,p=t(s,o)^1,v=new n(p^1),g=new n(1),A=new n(2),y=n.precision;for(n.config({precision:1e9});d>0;)t(c[--d],f[--m])===p&&(v=v.plus(g)),g=g.times(A);for(;m>0;)t(h,f[--m])===p&&(v=v.plus(g)),g=g.times(A);return n.config({precision:y}),p===0&&(v.s=-v.s),v}function Fs(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;t+=i}for(var s=t.length;t.charAt(s)==="0";)s--;var o=r.e,u=t.slice(0,s+1||1),l=u.length;if(o>0)if(++o>l)for(o-=l;o--;)u+="0";else o<l&&(u=u.slice(0,o)+"."+u.slice(o));for(var c=[0],f=0;f<u.length;){for(var h=c.length;h--;)c[h]*=10;c[0]+=parseInt(u.charAt(f++));for(var d=0;d<c.length;++d)c[d]>1&&((c[d+1]===null||c[d+1]===void 0)&&(c[d+1]=0),c[d+1]+=c[d]>>1,c[d]&=1)}return c.reverse()}function aF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?Ga(e):e.eq(n)?Ga(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):wf(r,e,function(i,a){return i^a})}function sF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function oF(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var Em="bitAnd",uF=["typed","matrix","equalScalar","concat"],lF=P(Em,uF,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=Rr({typed:e,equalScalar:n}),s=Nu({typed:e,equalScalar:n}),o=$t({typed:e,equalScalar:n}),u=ut({typed:e,matrix:t,concat:i});return e(Em,{"number, number":Ox,"BigNumber, BigNumber":nF},u({SS:s,DS:a,Ss:o}))}),Mm="bitNot",cF=["typed"],fF=P(Mm,cF,r=>{var{typed:e}=r;return e(Mm,{number:Bx,BigNumber:Ga,"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Tm="bitOr",hF=["typed","matrix","equalScalar","DenseMatrix","concat"],dF=P(Tm,hF,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=zn({typed:e}),o=xf({typed:e,equalScalar:n}),u=li({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:t,concat:a});return e(Tm,{"number, number":Fx,"BigNumber, BigNumber":iF},l({SS:o,DS:s,Ss:u}))}),mF="matAlgo07xSSf",pF=["typed","DenseMatrix"],Zr=P(mF,pF,r=>{var{typed:e,DenseMatrix:t}=r;return function(a,s,o){var u=a._size,l=a._datatype,c=s._size,f=s._datatype;if(u.length!==c.length)throw new Le(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var h=u[0],d=u[1],m,p=0,v=o;typeof l=="string"&&l===f&&(m=l,p=e.convert(0,m),v=e.find(o,[m,m]));var g,A,y=[];for(g=0;g<h;g++)y[g]=[];var w=[],x=[],b=[],D=[];for(A=0;A<d;A++){var N=A+1;for(n(a,A,b,w,N),n(s,A,D,x,N),g=0;g<h;g++){var C=b[g]===N?w[g]:p,S=D[g]===N?x[g]:p;y[g][A]=v(C,S)}}return new t({data:y,size:[h,d],datatype:m})};function n(i,a,s,o,u){for(var l=i._values,c=i._index,f=i._ptr,h=f[a],d=f[a+1];h<d;h++){var m=c[h];s[m]=u,o[m]=l[h]}}}),Om="bitXor",gF=["typed","matrix","DenseMatrix","concat"],vF=P(Om,gF,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,a=Jt({typed:e}),s=Zr({typed:e,DenseMatrix:n}),o=Tt({typed:e,DenseMatrix:n}),u=ut({typed:e,matrix:t,concat:i});return e(Om,{"number, number":kx,"BigNumber, BigNumber":aF},u({SS:s,DS:a,Ss:o}))}),Bm="arg",yF=["typed"],bF=P(Bm,yF,r=>{var{typed:e}=r;return e(Bm,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Fm="conj",xF=["typed"],wF=P(Fm,xF,r=>{var{typed:e}=r;return e(Fm,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),km="im",AF=["typed"],DF=P(km,AF,r=>{var{typed:e}=r;return e(km,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Rm="re",SF=["typed"],NF=P(Rm,SF,r=>{var{typed:e}=r;return e(Rm,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Im="not",CF=["typed"],EF=P(Im,CF,r=>{var{typed:e}=r;return e(Im,{"null | undefined":()=>!0,number:_x,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),Pm="or",MF=["typed","matrix","equalScalar","DenseMatrix","concat"],TF=P(Pm,MF,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=Jt({typed:e}),o=Su({typed:e,equalScalar:n}),u=Tt({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:t,concat:a});return e(Pm,{"number, number":Lx,"Complex, Complex":function(f,h){return f.re!==0||f.im!==0||h.re!==0||h.im!==0},"BigNumber, BigNumber":function(f,h){return!f.isZero()&&!f.isNaN()||!h.isZero()&&!h.isNaN()},"Unit, Unit":e.referToSelf(c=>(f,h)=>c(f.value||0,h.value||0))},l({SS:o,DS:s,Ss:u}))}),$m="xor",OF=["typed","matrix","DenseMatrix","concat"],BF=P($m,OF,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,a=Jt({typed:e}),s=Zr({typed:e,DenseMatrix:n}),o=Tt({typed:e,DenseMatrix:n}),u=ut({typed:e,matrix:t,concat:i});return e($m,{"number, number":zx,"Complex, Complex":function(c,f){return(c.re!==0||c.im!==0)!=(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(c,f){return(!c.isZero()&&!c.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":e.referToSelf(l=>(c,f)=>l(c.value||0,f.value||0))},u({SS:s,DS:a,Ss:o}))}),_m="concat",FF=["typed","matrix","isInteger"],dw=P(_m,FF,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(_m,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,u=-1,l,c=!1,f=[];for(s=0;s<o;s++){var h=a[s];if(Oe(h)&&(c=!0),_e(h)||Ue(h)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=h.valueOf(),!n(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>l)throw new Ar(u,l+1)}else{var d=Be(h).valueOf(),m=Pe(d);if(f[s]=d,l=u,u=m.length-1,s>0&&u!==l)throw new Le(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var p=f.shift();f.length;)p=Zb(p,f.shift(),u);return c?t(p):p},"...string":function(a){return a.join("")}})}),Lm="column",kF=["typed","Index","matrix","range"],mw=P(Lm,kF,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(Lm,{"Matrix, number":a,"Array, number":function(o,u){return a(n(Be(o)),u).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");at(o,s.size()[1]);var u=i(0,s.size()[0]),l=new t(u,o),c=s.subset(l);return Oe(c)?c:n([[c]])}}),zm="count",RF=["typed","size","prod"],IF=P(zm,RF,r=>{var{typed:e,size:t,prod:n}=r;return e(zm,{string:function(a){return a.length},"Matrix | Array":function(a){return n(t(a))}})}),qm="cross",PF=["typed","matrix","subtract","multiply"],$F=P(qm,PF,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(qm,{"Matrix, Matrix":function(o,u){return t(a(o.toArray(),u.toArray()))},"Matrix, Array":function(o,u){return t(a(o.toArray(),u))},"Array, Matrix":function(o,u){return t(a(o,u.toArray()))},"Array, Array":a});function a(s,o){var u=Math.max(Pe(s).length,Pe(o).length);s=Bo(s),o=Bo(o);var l=Pe(s),c=Pe(o);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(i(s[1],o[2]),i(s[2],o[1])),n(i(s[2],o[0]),i(s[0],o[2])),n(i(s[0],o[1]),i(s[1],o[0]))];return u>1?[f]:f}}),Um="diag",_F=["typed","matrix","DenseMatrix","SparseMatrix"],LF=P(Um,_F,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(Um,{Array:function(l){return a(l,0,Pe(l),null)},"Array, number":function(l,c){return a(l,c,Pe(l),null)},"Array, BigNumber":function(l,c){return a(l,c.toNumber(),Pe(l),null)},"Array, string":function(l,c){return a(l,0,Pe(l),c)},"Array, number, string":function(l,c,f){return a(l,c,Pe(l),f)},"Array, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),Pe(l),f)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return a(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return a(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return a(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return a(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),l.size(),f)}});function a(u,l,c,f){if(!Ee(l))throw new TypeError("Second parameter in function diag must be an integer");var h=l>0?l:0,d=l<0?-l:0;switch(c.length){case 1:return s(u,l,f,c[0],d,h);case 2:return o(u,l,f,c,d,h)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(u,l,c,f,h,d){var m=[f+h,f+d];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var p=c==="sparse"?i.diagonal(m,u,l):n.diagonal(m,u,l);return c!==null?p:p.valueOf()}function o(u,l,c,f,h,d){if(Oe(u)){var m=u.diagonal(l);return c!==null?c!==m.storage()?t(m,c):m:m.valueOf()}for(var p=Math.min(f[0]-h,f[1]-d),v=[],g=0;g<p;g++)v[g]=u[g+h][g+d];return c!==null?t(v):v}});function ta(r,e,t,n,i){if(Kn.isTypedFunction(r)){var a=[e,t,n],s=Kn.resolve(r,a);if(s)return f(s.implementation,a);var o=[e,t],u=Kn.resolve(r,o);if(u)return f(u.implementation,o);var l=[e],c=Kn.resolve(r,l);return c?f(c.implementation,l):f(r,a)}else return r(e,t,n);function f(h,d){try{return h.apply(h,d)}catch(v){var m;if(v instanceof TypeError&&((m=v.data)===null||m===void 0?void 0:m.category)==="wrongType"){var p=[];throw p.push("value: ".concat(ot(e))),d.length>=2&&p.push("index: ".concat(ot(t))),d.length>=3&&p.push("array: ".concat(ot(n))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(r.name,"(").concat(p.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(r.name,": ").concat(v.message))}}}var zF="filter",qF=["typed"],UF=P(zF,qF,r=>{var{typed:e}=r;return e("filter",{"Array, function":Hm,"Matrix, function":function(n,i){return n.create(Hm(n.toArray(),i))},"Array, RegExp":Fo,"Matrix, RegExp":function(n,i){return n.create(Fo(n.toArray(),i))}})});function Hm(r,e){return Kb(r,function(t,n,i){return ta(e,t,[n],i,"filter")})}var Vm="flatten",HF=["typed","matrix"],VF=P(Vm,HF,r=>{var{typed:e,matrix:t}=r;return e(Vm,{Array:function(i){return Je(i)},Matrix:function(i){var a=Je(i.toArray());return t(a)}})}),Wm="forEach",WF=["typed"],GF=P(Wm,WF,r=>{var{typed:e}=r;return e(Wm,{"Array, function":YF,"Matrix, function":function(n,i){n.forEach(i)}})});function YF(r,e){var t=function n(i,a){if(Array.isArray(i))yu(i,function(s,o){n(s,a.concat(o))});else return ta(e,i,a,r,"forEach")};t(r,[])}var Gm="getMatrixDataType",KF=["typed"],XF=P(Gm,KF,r=>{var{typed:e}=r;return e(Gm,{Array:function(n){return Va(n,ot)},Matrix:function(n){return n.getDataType()}})}),Ym="identity",ZF=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],JF=P(Ym,ZF,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=r;return e(Ym,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return u(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,h){return u(c,f,h)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(l,c){switch(l.length){case 0:return c?n(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var h=Ue(l)||Ue(c)?i:null;if(Ue(l)&&(l=l.toNumber()),Ue(c)&&(c=c.toNumber()),!Ee(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Ee(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var d=h?new i(1):1,m=h?new h(0):0,p=[l,c];if(f){if(f==="sparse")return s.diagonal(p,d,0,m);if(f==="dense")return a.diagonal(p,d,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var v=Li([],p,m),g=l<c?l:c,A=0;A<g;A++)v[A][A]=d;return v}}),Km="kron",jF=["typed","matrix","multiplyScalar"],QF=P(Km,jF,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(Km,{"Matrix, Matrix":function(s,o){return t(i(s.toArray(),o.toArray()))},"Matrix, Array":function(s,o){return t(i(s.toArray(),o))},"Array, Matrix":function(s,o){return t(i(s,o.toArray()))},"Array, Array":i});function i(a,s){if(Pe(a).length===1&&(a=[a]),Pe(s).length===1&&(s=[s]),Pe(a).length>2||Pe(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(s.length)+")");var o=[],u=[];return a.map(function(l){return s.map(function(c){return u=[],o.push(u),l.map(function(f){return c.map(function(h){return u.push(n(f,h))})})})})&&o}}),Xm="map",e4=["typed"],t4=P(Xm,e4,r=>{var{typed:e}=r;return e(Xm,{"Array, function":r4,"Matrix, function":function(n,i){return n.map(i)}})});function r4(r,e){var t=function n(i,a){return Array.isArray(i)?i.map(function(s,o){return n(s,a.concat(o))}):ta(e,i,a,r,"map")};return t(r,[])}var Zm="diff",n4=["typed","matrix","subtract","number"],pw=P(Zm,n4,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(Zm,{"Array | Matrix":function(c){return Oe(c)?t(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!Ee(f))throw new RangeError("Dimension must be a whole number");return Oe(c)?t(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,i(f)))});function a(l,c){if(Oe(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(h=>{f.push(a(h,c-1))}),f}else{if(c===0)return s(l);throw RangeError("Cannot have negative dimension")}}function s(l){for(var c=[],f=l.length,h=1;h<f;h++)c.push(o(l[h-1],l[h]));return c}function o(l,c){Oe(l)&&(l=l.toArray()),Oe(c)&&(c=c.toArray());var f=Array.isArray(l),h=Array.isArray(c);if(f&&h)return u(l,c);if(!f&&!h)return n(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],h=l.length,d=0;d<h;d++)f.push(o(l[d],c[d]));return f}}),i4="ones",a4=["typed","config","matrix","BigNumber"],s4=P(i4,a4,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return t.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=s(u),f=c?new i(1):1;if(o(u),l){var h=n(l);return u.length>0?h.resize(u,f):h}else{var d=[];return u.length>0?Li(d,u,f):d}}function s(u){var l=!1;return u.forEach(function(c,f,h){Ue(c)&&(l=!0,h[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!Ee(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function Af(){throw new Error('No "bignumber" implementation available')}function gw(){throw new Error('No "fraction" implementation available')}function vw(){throw new Error('No "matrix" implementation available')}var Jm="range",o4=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],yw=P(Jm,o4,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=r;return e(Jm,{string:h,"string, boolean":h,"number, number":function(v,g){return f(d(v,g,1,!1))},"number, number, number":function(v,g,A){return f(d(v,g,A,!1))},"number, number, boolean":function(v,g,A){return f(d(v,g,1,A))},"number, number, number, boolean":function(v,g,A,y){return f(d(v,g,A,y))},"BigNumber, BigNumber":function(v,g){var A=v.constructor;return f(d(v,g,new A(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,g,A){return f(d(v,g,A,!1))},"BigNumber, BigNumber, boolean":function(v,g,A){var y=v.constructor;return f(d(v,g,new y(1),A))},"BigNumber, BigNumber, BigNumber, boolean":function(v,g,A,y){return f(d(v,g,A,y))},"Unit, Unit, Unit":function(v,g,A){return f(d(v,g,A,!1))},"Unit, Unit, Unit, boolean":function(v,g,A,y){return f(d(v,g,A,y))}});function f(p){return t.matrix==="Matrix"?n?n(p):vw():p}function h(p,v){var g=m(p);if(!g)throw new SyntaxError('String "'+p+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&Af(),f(d(i(g.start),i(g.end),i(g.step)))):f(d(g.start,g.end,g.step,v))}function d(p,v,g,A){for(var y=[],w=c(g)?A?s:a:A?u:o,x=p;w(x,v);)y.push(x),x=l(x,g);return y}function m(p){var v=p.split(":"),g=v.map(function(y){return Number(y)}),A=g.some(function(y){return isNaN(y)});if(A)return null;switch(g.length){case 2:return{start:g[0],end:g[1],step:1};case 3:return{start:g[0],end:g[2],step:g[1]};default:return null}}}),jm="reshape",u4=["typed","isInteger","matrix"],l4=P(jm,u4,r=>{var{typed:e,isInteger:t}=r;return e(jm,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!t(s))throw new TypeError("Invalid size for dimension: "+s)}),hf(i,a)}})}),c4="resize",f4=["config","matrix"],h4=P(c4,f4,r=>{var{config:e,matrix:t}=r;return function(a,s,o){if(arguments.length!==2&&arguments.length!==3)throw new mn("resize",arguments.length,2,3);if(Oe(s)&&(s=s.valueOf()),Ue(s[0])&&(s=s.map(function(c){return Ue(c)?c.toNumber():c})),Oe(a))return a.resize(s,o,!0);if(typeof a=="string")return n(a,s,o);var u=Array.isArray(a)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(a);)a=a[0];return Be(a)}else{Array.isArray(a)||(a=[a]),a=Be(a);var l=Li(a,s,o);return u?t(l):l}};function n(i,a,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(a.length!==1)throw new Le(a.length,1);var o=a[0];if(typeof o!="number"||!Ee(o))throw new TypeError("Invalid size, must contain positive integers (size: "+qe(a)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var u=i,l=0,c=o-i.length;l<c;l++)u+=s;return u}else return i}}),Qm="rotate",d4=["typed","multiply","rotationMatrix"],m4=P(Qm,d4,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(Qm,{"Array , number | BigNumber | Complex | Unit":function(s,o){i(s,2);var u=t(n(o),s);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return i(s,2),t(n(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){i(s,3);var l=t(n(o,u),s);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){return i(s,3),t(n(o,u),s)}});function i(a,s){var o=Array.isArray(a)?Pe(a):a.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),ep="rotationMatrix",p4=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],g4=P(ep,p4,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:s,BigNumber:o,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:h}=r;return e(ep,{"":function(){return t.matrix==="Matrix"?u([]):[]},string:function(y){return u(y)},"number | BigNumber | Complex | Unit":function(y){return d(y,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(y,w){return d(y,w)},"number | BigNumber | Complex | Unit, Array":function(y,w){var x=u(w);return m(x),g(y,x,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(y,w){m(w);var x=w.storage()||(t.matrix==="Matrix"?"dense":void 0);return g(y,w,x)},"number | BigNumber | Complex | Unit, Array, string":function(y,w,x){var b=u(w);return m(b),g(y,b,x)},"number | BigNumber | Complex | Unit, Matrix, string":function(y,w,x){return m(w),g(y,w,x)}});function d(A,y){var w=Ue(A),x=w?new o(-1):-1,b=f(A),D=h(A),N=[[b,n(x,D)],[D,b]];return v(N,y)}function m(A){var y=A.size();if(y.length<1||y[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function p(A){return A.reduce((y,w)=>n(y,w))}function v(A,y){if(y){if(y==="sparse")return new c(A);if(y==="dense")return new l(A);throw new TypeError('Unknown matrix type "'.concat(y,'"'))}return A}function g(A,y,w){var x=s(y);if(x===0)throw new RangeError("Rotation around zero vector");var b=Ue(A)?o:null,D=b?new b(1):1,N=b?new b(-1):-1,C=b?new b(y.get([0])/x):y.get([0])/x,S=b?new b(y.get([1])/x):y.get([1])/x,M=b?new b(y.get([2])/x):y.get([2])/x,E=f(A),R=i(D,a(E)),I=h(A),k=i(E,p([C,C,R])),T=i(p([C,S,R]),p([N,M,I])),O=i(p([C,M,R]),p([S,I])),U=i(p([C,S,R]),p([M,I])),F=i(E,p([S,S,R])),_=i(p([S,M,R]),p([N,C,I])),G=i(p([C,M,R]),p([N,S,I])),K=i(p([S,M,R]),p([C,I])),L=i(E,p([M,M,R])),X=[[k,T,O],[U,F,_],[G,K,L]];return v(X,w)}}),tp="row",v4=["typed","Index","matrix","range"],bw=P(tp,v4,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(tp,{"Matrix, number":a,"Array, number":function(o,u){return a(n(Be(o)),u).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");at(o,s.size()[0]);var u=i(0,s.size()[1]),l=new t(o,u),c=s.subset(l);return Oe(c)?c:n([[c]])}}),rp="size",y4=["typed","config","?matrix"],b4=P(rp,y4,r=>{var{typed:e,config:t,matrix:n}=r;return e(rp,{Matrix:function(a){return a.create(a.size())},Array:Pe,string:function(a){return t.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return t.matrix==="Array"?[]:n?n([]):vw()}})}),np="squeeze",x4=["typed","matrix"],w4=P(np,x4,r=>{var{typed:e,matrix:t}=r;return e(np,{Array:function(i){return Bo(Be(i))},Matrix:function(i){var a=Bo(i.toArray());return Array.isArray(a)?t(a):a},any:function(i){return Be(i)}})}),ip="subset",A4=["typed","matrix","zeros","add"],xw=P(ip,A4,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(ip,{"Matrix, Index":function(o,u){return _i(u)?t():(Oo(o,u),o.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,u){var l=s(t(o),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":S4,"string, Index":D4,"Matrix, Index, any, any":function(o,u,l,c){return _i(u)?o:(Oo(o,u),o.clone().subset(u,a(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l,c){var f=s(t(o),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(t(o),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(o,u,l,void 0)}}),"string, Index, string":ap,"string, Index, string, string":ap,"Object, Index, any":N4});function a(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o._isScalar)return s;var u=o.size();if(u.every(l=>l>0))try{return i(s,n(u))}catch{return s}else return s}});function D4(r,e){if(!rs(e))throw new TypeError("Index expected");if(_i(e))return"";if(Oo(Array.from(r),e),e.size().length!==1)throw new Le(e.size().length,1);var t=r.length;at(e.min()[0],t),at(e.max()[0],t);var n=e.dimension(0),i="";return n.forEach(function(a){i+=r.charAt(a)}),i}function ap(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(_i(e))return r;if(Oo(Array.from(r),e),e.size().length!==1)throw new Le(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=i.size()[0];if(a!==t.length)throw new Le(i.size()[0],t.length);var s=r.length;at(e.min()[0]),at(e.max()[0]);for(var o=[],u=0;u<s;u++)o[u]=r.charAt(u);if(i.forEach(function(f,h){o[f]=t.charAt(h[0])}),o.length>s)for(var l=s-1,c=o.length;l<c;l++)o[l]||(o[l]=n);return o.join("")}function S4(r,e){if(!_i(e)){if(e.size().length!==1)throw new Le(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return Kt(r,t)}}function N4(r,e,t){if(_i(e))return r;if(e.size().length!==1)throw new Le(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Be(r);return qi(i,n,t),i}var sp="transpose",C4=["typed","matrix"],E4=P(sp,C4,r=>{var{typed:e,matrix:t}=r;return e(sp,{Array:s=>n(t(s)).valueOf(),Matrix:n,any:Be});function n(s){var o=s.size(),u;switch(o.length){case 1:u=s.clone();break;case 2:{var l=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+qe(o)+")");switch(s.storage()){case"dense":u=i(s,l,c);break;case"sparse":u=a(s,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+qe(o)+")")}return u}function i(s,o,u){for(var l=s._data,c=[],f,h=0;h<u;h++){f=c[h]=[];for(var d=0;d<o;d++)f[d]=Be(l[d][h])}return s.createDenseMatrix({data:c,size:[u,o],datatype:s._datatype})}function a(s,o,u){for(var l=s._values,c=s._index,f=s._ptr,h=l?[]:void 0,d=[],m=[],p=[],v=0;v<o;v++)p[v]=0;var g,A,y;for(g=0,A=c.length;g<A;g++)p[c[g]]++;for(var w=0,x=0;x<o;x++)m.push(w),w+=p[x],p[x]=m[x];for(m.push(w),y=0;y<u;y++)for(var b=f[y],D=f[y+1],N=b;N<D;N++){var C=p[c[N]]++;d[C]=y,l&&(h[C]=Be(l[N]))}return s.createSparseMatrix({values:h,index:d,ptr:m,size:[u,o],datatype:s._datatype})}}),op="ctranspose",M4=["typed","transpose","conj"],T4=P(op,M4,r=>{var{typed:e,transpose:t,conj:n}=r;return e(op,{any:function(a){return n(t(a))}})}),up="zeros",O4=["typed","config","matrix","BigNumber"],B4=P(up,O4,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(up,{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return t.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=s(u),f=c?new i(0):0;if(o(u),l){var h=n(l);return u.length>0?h.resize(u,f):h}else{var d=[];return u.length>0?Li(d,u,f):d}}function s(u){var l=!1;return u.forEach(function(c,f,h){Ue(c)&&(l=!0,h[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!Ee(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),lp="fft",F4=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],k4=P(lp,F4,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:a,exp:s,tau:o,i:u,dotDivide:l,conj:c,pow:f,ceil:h,log2:d}=r;return e(lp,{Array:m,Matrix:function(y){return y.create(m(y.toArray()))}});function m(A){var y=Pe(A);return y.length===1?g(A,y[0]):p(A.map(w=>m(w,y.slice(1))),0)}function p(A,y){var w=Pe(A);if(y!==0)return new Array(w[0]).fill(0).map((b,D)=>p(A[D],y-1));if(w.length===1)return g(A);function x(b){var D=Pe(b);return new Array(D[1]).fill(0).map((N,C)=>new Array(D[0]).fill(0).map((S,M)=>b[M][C]))}return x(p(x(A),1))}function v(A){for(var y=A.length,w=s(a(i(-1,i(u,o)),y)),x=[],b=1-y;b<y;b++)x.push(f(w,a(f(b,2),2)));for(var D=f(2,h(d(y+y-1))),N=[...new Array(y).fill(0).map((T,O)=>i(A[O],x[y-1+O])),...new Array(D-y).fill(0)],C=[...new Array(y+y-1).fill(0).map((T,O)=>a(1,x[O])),...new Array(D-(y+y-1)).fill(0)],S=g(N),M=g(C),E=new Array(D).fill(0).map((T,O)=>i(S[O],M[O])),R=l(c(m(c(E))),D),I=[],k=y-1;k<y+y-1;k++)I.push(i(R[k],x[k]));return I}function g(A){var y=A.length;if(y===1)return[A[0]];if(y%2===0){for(var w=[...g(A.filter((N,C)=>C%2===0)),...g(A.filter((N,C)=>C%2===1))],x=0;x<y/2;x++){var b=w[x],D=i(w[x+y/2],s(i(i(o,u),a(-x,y))));w[x]=n(b,D),w[x+y/2]=n(b,i(-1,D))}return w}else return v(A)}}),cp="ifft",R4=["typed","fft","dotDivide","conj"],I4=P(cp,R4,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(cp,{"Array | Matrix":function(s){var o=Oe(s)?s.size():Pe(s);return n(i(t(i(s))),o.reduce((u,l)=>u*l,1))}})});function Ya(r){"@babel/helpers - typeof";return Ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(r)}function P4(r,e){if(Ya(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Ya(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $4(r){var e=P4(r,"string");return Ya(e)==="symbol"?e:String(e)}function Et(r,e,t){return e=$4(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function _4(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fp(Object(t),!0).forEach(function(n){Et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fp(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var L4="solveODE",z4=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],q4=P(L4,z4,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,max:s,map:o,abs:u,isPositive:l,isNegative:c,larger:f,smaller:h,matrix:d,bignumber:m,unaryMinus:p}=r;function v(N){return function(C,S,M,E){var R=!(S.length===2&&(S.every(b)||S.every(tr)));if(R)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var I=S[0],k=S[1],T=f(k,I),O=E.firstStep;if(O!==void 0&&!l(O))throw new Error('"firstStep" must be positive');var U=E.maxStep;if(U!==void 0&&!l(U))throw new Error('"maxStep" must be positive');var F=E.minStep;if(F&&c(F))throw new Error('"minStep" must be positive or zero');var _=[I,k,O,F,U].filter($=>$!==void 0);if(!(_.every(b)||_.every(tr)))throw new Error('Inconsistent type of "t" dependant variables');for(var G=1,K=E.tol?E.tol:1e-4,L=E.minDelta?E.minDelta:.2,X=E.maxDelta?E.maxDelta:5,Q=E.maxIter?E.maxIter:1e4,J=[I,k,...M,U,F].some(Ue),[ae,le,ie,ee]=J?[m(N.a),m(N.c),m(N.b),m(N.bp)]:[N.a,N.c,N.b,N.bp],fe=O?T?O:p(O):a(n(k,I),G),we=[I],ve=[M],xe=n(ie,ee),z=0,V=0,te=w(T),H=x(T);te(we[z],k);){var Y=[];fe=H(we[z],k,fe),Y.push(C(we[z],ve[z]));for(var j=1;j<le.length;++j)Y.push(C(t(we[z],i(le[j],fe)),t(ve[z],i(fe,ae[j],Y))));var ce=s(u(o(i(xe,Y),$=>tr($)?$.value:$)));ce<K&&K/ce>1/4&&(we.push(t(we[z],fe)),ve.push(t(ve[z],i(fe,ie,Y))),z++);var oe=.84*(K/ce)**(1/5);if(h(oe,L)?oe=L:f(oe,X)&&(oe=X),oe=J?m(oe):oe,fe=i(fe,oe),U&&f(u(fe),U)?fe=T?U:p(U):F&&h(u(fe),F)&&(fe=T?F:p(F)),V++,V>Q)throw new Error("Maximum number of iterations reached, try changing options")}return{t:we,y:ve}}}function g(N,C,S,M){var E=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],R=[null,1/2,3/4,1],I=[2/9,1/3,4/9,0],k=[7/24,1/4,1/3,1/8],T={a:E,c:R,b:I,bp:k};return v(T)(N,C,S,M)}function A(N,C,S,M){var E=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],R=[null,1/5,3/10,4/5,8/9,1,1],I=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],k=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],T={a:E,c:R,b:I,bp:k};return v(T)(N,C,S,M)}function y(N,C,S,M){var E=M.method?M.method:"RK45",R={RK23:g,RK45:A};if(E.toUpperCase()in R){var I=_4({},M);return delete I.method,R[E.toUpperCase()](N,C,S,I)}else{var k=Object.keys(R).map(O=>'"'.concat(O,'"')),T="".concat(k.slice(0,-1).join(", ")," and ").concat(k.slice(-1));throw new Error('Unavailable method "'.concat(E,'". Available methods are ').concat(T))}}function w(N){return N?h:f}function x(N){var C=N?f:h;return function(S,M,E){var R=t(S,E);return C(R,M)?n(M,S):E}}function b(N){return Ue(N)||_e(N)}function D(N,C,S,M){var E=y(N,C.toArray(),S.toArray(),M);return{t:d(E.t),y:d(E.y)}}return e("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":D,"function, Array, Array":(N,C,S)=>y(N,C,S,{}),"function, Matrix, Matrix":(N,C,S)=>D(N,C,S,{}),"function, Array, number | BigNumber | Unit":(N,C,S)=>{var M=y(N,C,[S],{});return{t:M.t,y:M.y.map(E=>E[0])}},"function, Matrix, number | BigNumber | Unit":(N,C,S)=>{var M=y(N,C.toArray(),[S],{});return{t:d(M.t),y:d(M.y.map(E=>E[0]))}},"function, Array, number | BigNumber | Unit, Object":(N,C,S,M)=>{var E=y(N,C,[S],M);return{t:E.t,y:E.y.map(R=>R[0])}},"function, Matrix, number | BigNumber | Unit, Object":(N,C,S,M)=>{var E=y(N,C.toArray(),[S],M);return{t:d(E.t),y:d(E.y.map(R=>R[0]))}}})}),U4="erf",H4=["typed"],V4=P(U4,H4,r=>{var{typed:e}=r;return e("name",{number:function(s){var o=Math.abs(s);return o>=Y4?Cn(s):o<=W4?Cn(s)*t(o):o<=4?Cn(s)*(1-n(o)):Cn(s)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>s=>Ve(s,a))});function t(a){var s=a*a,o=Qr[0][4]*s,u=s,l;for(l=0;l<3;l+=1)o=(o+Qr[0][l])*s,u=(u+pi[0][l])*s;return a*(o+Qr[0][3])/(u+pi[0][3])}function n(a){var s=Qr[1][8]*a,o=a,u;for(u=0;u<7;u+=1)s=(s+Qr[1][u])*a,o=(o+pi[1][u])*a;var l=(s+Qr[1][7])/(o+pi[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*l}function i(a){var s=1/(a*a),o=Qr[2][5]*s,u=s,l;for(l=0;l<4;l+=1)o=(o+Qr[2][l])*s,u=(u+pi[2][l])*s;var c=s*(o+Qr[2][4])/(u+pi[2][4]);c=(G4-c)/a,s=parseInt(a*16)/16;var f=(a-s)*(a+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),W4=.46875,G4=.5641895835477563,Qr=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],pi=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Y4=Math.pow(2,53),hp="zeta",K4=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],X4=P(hp,K4,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:a,factorial:s,equal:o,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:h,add:d,Complex:m,BigNumber:p,pi:v}=r;return e(hp,{number:b=>g(b,D=>D,()=>20),BigNumber:b=>g(b,D=>new p(D),()=>Math.abs(Math.log10(t.epsilon))),Complex:A});function g(b,D,N){return o(b,0)?D(-.5):o(b,1)?D(NaN):isFinite(b)?y(b,D,N,C=>C):l(b)?D(NaN):D(1)}function A(b){return b.re===0&&b.im===0?new m(-.5):b.re===1?new m(NaN,NaN):b.re===1/0&&b.im===0?new m(1):b.im===1/0||b.re===-1/0?new m(NaN,NaN):y(b,D=>D,D=>Math.round(1.3*15+.9*Math.abs(D.im)),D=>D.re)}function y(b,D,N,C){var S=N(b);if(C(b)>-(S-1)/2)return x(b,D(S),D);var M=n(i(2,b),i(D(v),h(b,1)));return M=n(M,f(n(a(D(v),2),b))),M=n(M,c(h(1,b))),n(M,y(h(1,b),D,N,C))}function w(b,D){for(var N=b,C=b;u(C,D);C=d(C,1)){var S=a(n(s(d(D,h(C,1))),i(4,C)),n(s(h(D,C)),s(n(2,C))));N=d(N,S)}return n(D,N)}function x(b,D,N){for(var C=a(1,n(w(N(0),D),h(1,i(2,h(1,b))))),S=N(0),M=N(1);u(M,D);M=d(M,1))S=d(S,a(n((-1)**(M-1),w(M,D)),i(M,b)));return n(C,S)}}),dp="mode",Z4=["typed","isNaN","isNumeric"],J4=P(dp,Z4,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(dp,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(a){a=Je(a.valueOf());var s=a.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},u=[],l=0,c=0;c<a.length;c++){var f=a[c];if(n(f)&&t(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===l?u.push(f):o[f]>l&&(l=o[f],u=[f])}return u}});function Zt(r,e,t){var n;return String(r).indexOf("Unexpected type")!==-1?(n=arguments.length>2?" (type: "+ot(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).indexOf("complex numbers")!==-1?(n=arguments.length>2?" (type: "+ot(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var mp="prod",j4=["typed","config","multiplyScalar","numeric"],Q4=P(mp,j4,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(mp,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(s){var o;if(fn(s,function(u){try{o=o===void 0?u:n(o,u)}catch(l){throw Zt(l,"prod",u)}}),typeof o=="string"&&(o=i(o,t.number)),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),pp="format",e8=["typed"],t8=P(pp,e8,r=>{var{typed:e}=r;return e(pp,{any:qe,"any, Object | function | number":qe})}),gp="bin",r8=["typed","format"],n8=P(gp,r8,r=>{var{typed:e,format:t}=r;return e(gp,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number":function(i,a){return t(i,{notation:"bin",wordSize:a})}})}),vp="oct",i8=["typed","format"],a8=P(vp,i8,r=>{var{typed:e,format:t}=r;return e(vp,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number":function(i,a){return t(i,{notation:"oct",wordSize:a})}})}),yp="hex",s8=["typed","format"],o8=P(yp,s8,r=>{var{typed:e,format:t}=r;return e(yp,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number":function(i,a){return t(i,{notation:"hex",wordSize:a})}})}),ww=/\$([\w.]+)/g,bp="print",u8=["typed"],Aw=P(bp,u8,r=>{var{typed:e}=r;return e(bp,{"string, Object | Array":xp,"string, Object | Array, number | Object":xp})});function xp(r,e,t){return r.replace(ww,function(n,i){var a=i.split("."),s=e[a.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());a.length&&s!==void 0;){var o=a.shift();s=o?s[o]:s+"."}return s!==void 0?It(s)?s:qe(s,t):n})}var wp="to",l8=["typed","matrix","concat"],c8=P(wp,l8,r=>{var{typed:e,matrix:t,concat:n}=r,i=ut({typed:e,matrix:t,concat:n});return e(wp,{"Unit, Unit | string":(a,s)=>a.to(s)},i({Ds:!0}))}),Ap="isPrime",f8=["typed"],h8=P(Ap,f8,r=>{var{typed:e}=r;return e(Ap,{number:function(n){if(n*0!==0)return!1;if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},BigNumber:function(n){if(n.toNumber()*0!==0)return!1;if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function s(A,y,w){for(var x=1;!y.eq(0);)y.mod(2).eq(0)?(y=y.div(2),A=A.mul(A).mod(w)):(y=y.sub(1),x=A.mul(x).mod(w));return x}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var u=0,l=n.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(A=>A<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var h=2;h<=f;h+=1)c.push(f)}for(var d=0;d<c.length;d+=1){var m=c[d],p=s(n.sub(n).add(m),l,n);if(!p.eq(1)){for(var v=0,g=p;!g.eq(n.sub(1));v+=1,g=g.mul(g).mod(n))if(v===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>Ve(n,t))})}),d8="numeric",m8=["number","?bignumber","?fraction"],p8=P(d8,m8,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:t?s=>t(s):Af,Fraction:n?s=>n(s):gw};return function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=ot(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in a))throw new TypeError("Cannot convert "+o+' to type "'+u+'"; valid output types are '+Object.keys(a).join(", "));return u===c?o:a[u](o)}}),Dp="divideScalar",g8=["typed","numeric"],v8=P(Dp,g8,r=>{var{typed:e,numeric:t}=r;return e(Dp,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),Sp="pow",y8=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],b8=P(Sp,y8,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:a,inv:s,number:o,fraction:u,Complex:l}=r;return e(Sp,{"number, number":c,"Complex, Complex":function(m,p){return m.pow(p)},"BigNumber, BigNumber":function(m,p){return p.isInteger()||m>=0||t.predictable?m.pow(p):new l(m.toNumber(),0).pow(p.toNumber(),0)},"Fraction, Fraction":function(m,p){var v=m.pow(p);if(v!=null)return v;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),p.valueOf())},"Array, number":f,"Array, BigNumber":function(m,p){return f(m,p.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(m,p){return h(m,p.toNumber())},"Unit, number | BigNumber":function(m,p){return m.pow(p)}});function c(d,m){if(t.predictable&&!Ee(m)&&d<0)try{var p=u(m),v=o(p);if((m===v||Math.abs((m-v)/m)<1e-14)&&p.d%2===1)return(p.n%2===0?1:-1)*Math.pow(-d,m)}catch{}return t.predictable&&(d<-1&&m===1/0||d>-1&&d<0&&m===-1/0)?NaN:Ee(m)||d>=0||t.predictable?Tx(d,m):d*d<1&&m===1/0||d*d>1&&m===-1/0?0:new l(d,0).pow(m,0)}function f(d,m){if(!Ee(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var p=Pe(d);if(p.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+p.length+" dimensions)");if(p[0]!==p[1])throw new Error("For A^b, A must be square (size is "+p[0]+"x"+p[1]+")");if(m<0)try{return f(s(d),-m)}catch(A){throw A.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):A}for(var v=n(p[0]).valueOf(),g=d;m>=1;)(m&1)===1&&(v=i(g,v)),m>>=1,g=i(g,g);return v}function h(d,m){return a(f(d.valueOf(),m))}}),gi="Number of decimals in function round must be an integer",Np="round",x8=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],w8=P(Np,x8,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,BigNumber:a,DenseMatrix:s}=r,o=$t({typed:e,equalScalar:n}),u=Tt({typed:e,DenseMatrix:s}),l=kr({typed:e});return e(Np,{number:Ud,"number, number":Ud,"number, BigNumber":function(f,h){if(!h.isInteger())throw new TypeError(gi);return new a(f).toDecimalPlaces(h.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,h){if(h%1)throw new TypeError(gi);return f.round(h)},"Complex, BigNumber":function(f,h){if(!h.isInteger())throw new TypeError(gi);var d=h.toNumber();return f.round(d)},BigNumber:function(f){return f.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,h){if(!h.isInteger())throw new TypeError(gi);return f.toDecimalPlaces(h.toNumber())},Fraction:function(f){return f.round()},"Fraction, number":function(f,h){if(h%1)throw new TypeError(gi);return f.round(h)},"Fraction, BigNumber":function(f,h){if(!h.isInteger())throw new TypeError(gi);return f.round(h.toNumber())},"Array | Matrix":e.referToSelf(c=>f=>Ve(f,c)),"SparseMatrix, number | BigNumber":e.referToSelf(c=>(f,h)=>o(f,h,c,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(c=>(f,h)=>l(f,h,c,!1)),"Array, number | BigNumber":e.referToSelf(c=>(f,h)=>l(t(f),h,c,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(c=>(f,h)=>n(f,0)?i(h.size(),h.storage()):u(h,f,c,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(c=>(f,h)=>n(f,0)?i(h.size(),h.storage()):l(h,f,c,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(c=>(f,h)=>l(t(h),f,c,!0).valueOf())})}),Cp="log",A8=["config","typed","divideScalar","Complex"],D8=P(Cp,A8,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r;return e(Cp,{number:function(s){return s>=0||t.predictable?x3(s):new i(s,0).log()},Complex:function(s){return s.log()},BigNumber:function(s){return!s.isNegative()||t.predictable?s.ln():new i(s.toNumber(),0).log()},"any, any":e.referToSelf(a=>(s,o)=>n(a(s),a(o)))})}),Ep="log1p",S8=["typed","config","divideScalar","log","Complex"],N8=P(Ep,S8,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:a}=r;return e(Ep,{number:function(u){return u>=-1||t.predictable?yM(u):s(new a(u,0))},Complex:s,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||t.predictable?l.ln():s(new a(u.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>u=>Ve(u,o)),"any, any":e.referToSelf(o=>(u,l)=>n(o(u),i(l)))});function s(o){var u=o.re+1;return new a(Math.log(Math.sqrt(u*u+o.im*o.im)),Math.atan2(o.im,u))}}),Mp="nthRoots",C8=["config","typed","divideScalar","Complex"],E8=P(Mp,C8,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,a=[function(u){return new i(u,0)},function(u){return new i(0,u)},function(u){return new i(-u,0)},function(u){return new i(0,-u)}];function s(o,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var l=typeof o=="number",c;(l||o.re===0||o.im===0)&&(l?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),h=o.abs(),d=[],m=Math.pow(h,1/u),p=0;p<u;p++){var v=(c+4*p)/u;if(v===Math.round(v)){d.push(a[v%4](m));continue}d.push(new i({r:m,phi:(f+2*Math.PI*p)/u}))}return d}return e(Mp,{Complex:function(u){return s(u,2)},"Complex, number":s})}),Tp="dotPow",M8=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],T8=P(Tp,M8,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:a,concat:s}=r,o=Jt({typed:e}),u=Zr({typed:e,DenseMatrix:a}),l=$t({typed:e,equalScalar:t}),c=Tt({typed:e,DenseMatrix:a}),f=ut({typed:e,matrix:n,concat:s}),h={};for(var d in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,d)&&!d.includes("Matrix")&&!d.includes("Array")&&(h[d]=i.signatures[d]);var m=e(h);return e(Tp,f({elop:m,SS:u,DS:o,Ss:l,sS:c}))}),Op="dotDivide",O8=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],B8=P(Op,O8,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:s}=r,o=Rr({typed:e,equalScalar:n}),u=Jt({typed:e}),l=Zr({typed:e,DenseMatrix:a}),c=$t({typed:e,equalScalar:n}),f=Tt({typed:e,DenseMatrix:a}),h=ut({typed:e,matrix:t,concat:s});return e(Op,h({elop:i,SS:l,DS:u,SD:o,Ss:c,sS:f}))});function ss(r){var{DenseMatrix:e}=r;return function(n,i,a){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+qe(s)+")");var o=s[0],u=s[1];if(o!==u)throw new RangeError("Matrix must be square (size: "+qe(s)+")");var l=[];if(Oe(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<o;h++)l[h]=[f[h]];return new e({data:l,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Ha(i)){if(a){l=[];for(var d=0;d<o;d++)l[d]=[f[d][0]];return new e({data:l,size:[o,1],datatype:i._datatype})}return i}if(Nn(i)){for(var m=0;m<o;m++)l[m]=[0];for(var p=i._values,v=i._index,g=i._ptr,A=g[1],y=g[0];y<A;y++){var w=v[y];l[w][0]=p[y]}return new e({data:l,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(je(i)){var x=Pe(i);if(x.length===1){if(x[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<o;b++)l[b]=[i[b]];return new e({data:l,size:[o,1]})}if(x.length===2){if(x[0]!==o||x[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var D=0;D<o;D++)l[D]=[i[D][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Bp="lsolve",F8=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],k8=P(Bp,F8,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:a,equalScalar:s,DenseMatrix:o}=r,u=ss({DenseMatrix:o});return e(Bp,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return l(h,d)},"Array, Array | Matrix":function(h,d){var m=t(h),p=l(m,d);return p.valueOf()}});function l(f,h){h=u(f,h,!0);for(var d=h._data,m=f._size[0],p=f._size[1],v=[],g=f._data,A=0;A<p;A++){var y=d[A][0]||0,w=void 0;if(s(y,0))w=0;else{var x=g[A][A];if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(y,x);for(var b=A+1;b<m;b++)d[b]=[a(d[b][0]||0,i(w,g[b][A]))]}v[A]=[w]}return new o({data:v,size:[m,1]})}function c(f,h){h=u(f,h,!0);for(var d=h._data,m=f._size[0],p=f._size[1],v=f._values,g=f._index,A=f._ptr,y=[],w=0;w<p;w++){var x=d[w][0]||0;if(s(x,0))y[w]=[0];else{for(var b=0,D=[],N=[],C=A[w],S=A[w+1],M=C;M<S;M++){var E=g[M];E===w?b=v[M]:E>w&&(D.push(v[M]),N.push(E))}if(s(b,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var R=n(x,b),I=0,k=N.length;I<k;I++){var T=N[I];d[T]=[a(d[T][0]||0,i(R,D[I]))]}y[w]=[R]}}return new o({data:y,size:[m,1]})}}),Fp="usolve",R8=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],I8=P(Fp,R8,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:a,equalScalar:s,DenseMatrix:o}=r,u=ss({DenseMatrix:o});return e(Fp,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return l(h,d)},"Array, Array | Matrix":function(h,d){var m=t(h),p=l(m,d);return p.valueOf()}});function l(f,h){h=u(f,h,!0);for(var d=h._data,m=f._size[0],p=f._size[1],v=[],g=f._data,A=p-1;A>=0;A--){var y=d[A][0]||0,w=void 0;if(s(y,0))w=0;else{var x=g[A][A];if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(y,x);for(var b=A-1;b>=0;b--)d[b]=[a(d[b][0]||0,i(w,g[b][A]))]}v[A]=[w]}return new o({data:v,size:[m,1]})}function c(f,h){h=u(f,h,!0);for(var d=h._data,m=f._size[0],p=f._size[1],v=f._values,g=f._index,A=f._ptr,y=[],w=p-1;w>=0;w--){var x=d[w][0]||0;if(s(x,0))y[w]=[0];else{for(var b=0,D=[],N=[],C=A[w],S=A[w+1],M=S-1;M>=C;M--){var E=g[M];E===w?b=v[M]:E<w&&(D.push(v[M]),N.push(E))}if(s(b,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var R=n(x,b),I=0,k=N.length;I<k;I++){var T=N[I];d[T]=[a(d[T][0],i(R,D[I]))]}y[w]=[R]}}return new o({data:y,size:[m,1]})}}),kp="lsolveAll",P8=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],$8=P(kp,P8,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:a,equalScalar:s,DenseMatrix:o}=r,u=ss({DenseMatrix:o});return e(kp,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return l(h,d)},"Array, Array | Matrix":function(h,d){var m=t(h),p=l(m,d);return p.map(v=>v.valueOf())}});function l(f,h){for(var d=[u(f,h,!0)._data.map(N=>N[0])],m=f._data,p=f._size[0],v=f._size[1],g=0;g<v;g++)for(var A=d.length,y=0;y<A;y++){var w=d[y];if(s(m[g][g],0))if(s(w[g],0)){if(y===0){var b=[...w];b[g]=1;for(var D=g+1;D<v;D++)b[D]=a(b[D],m[D][g]);d.push(b)}}else{if(y===0)return[];d.splice(y,1),y-=1,A-=1}else{w[g]=n(w[g],m[g][g]);for(var x=g+1;x<v;x++)w[x]=a(w[x],i(w[g],m[x][g]))}}return d.map(N=>new o({data:N.map(C=>[C]),size:[p,1]}))}function c(f,h){for(var d=[u(f,h,!0)._data.map(G=>G[0])],m=f._size[0],p=f._size[1],v=f._values,g=f._index,A=f._ptr,y=0;y<p;y++)for(var w=d.length,x=0;x<w;x++){for(var b=d[x],D=[],N=[],C=A[y],S=A[y+1],M=0,E=C;E<S;E++){var R=g[E];R===y?M=v[E]:R>y&&(D.push(v[E]),N.push(R))}if(s(M,0))if(s(b[y],0)){if(x===0){var O=[...b];O[y]=1;for(var U=0,F=N.length;U<F;U++){var _=N[U];O[_]=a(O[_],D[U])}d.push(O)}}else{if(x===0)return[];d.splice(x,1),x-=1,w-=1}else{b[y]=n(b[y],M);for(var I=0,k=N.length;I<k;I++){var T=N[I];b[T]=a(b[T],i(b[y],D[I]))}}}return d.map(G=>new o({data:G.map(K=>[K]),size:[m,1]}))}}),Rp="usolveAll",_8=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],L8=P(Rp,_8,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:a,equalScalar:s,DenseMatrix:o}=r,u=ss({DenseMatrix:o});return e(Rp,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return l(h,d)},"Array, Array | Matrix":function(h,d){var m=t(h),p=l(m,d);return p.map(v=>v.valueOf())}});function l(f,h){for(var d=[u(f,h,!0)._data.map(N=>N[0])],m=f._data,p=f._size[0],v=f._size[1],g=v-1;g>=0;g--)for(var A=d.length,y=0;y<A;y++){var w=d[y];if(s(m[g][g],0))if(s(w[g],0)){if(y===0){var b=[...w];b[g]=1;for(var D=g-1;D>=0;D--)b[D]=a(b[D],m[D][g]);d.push(b)}}else{if(y===0)return[];d.splice(y,1),y-=1,A-=1}else{w[g]=n(w[g],m[g][g]);for(var x=g-1;x>=0;x--)w[x]=a(w[x],i(w[g],m[x][g]))}}return d.map(N=>new o({data:N.map(C=>[C]),size:[p,1]}))}function c(f,h){for(var d=[u(f,h,!0)._data.map(G=>G[0])],m=f._size[0],p=f._size[1],v=f._values,g=f._index,A=f._ptr,y=p-1;y>=0;y--)for(var w=d.length,x=0;x<w;x++){for(var b=d[x],D=[],N=[],C=A[y],S=A[y+1],M=0,E=S-1;E>=C;E--){var R=g[E];R===y?M=v[E]:R<y&&(D.push(v[E]),N.push(R))}if(s(M,0))if(s(b[y],0)){if(x===0){var O=[...b];O[y]=1;for(var U=0,F=N.length;U<F;U++){var _=N[U];O[_]=a(O[_],D[U])}d.push(O)}}else{if(x===0)return[];d.splice(x,1),x-=1,w-=1}else{b[y]=n(b[y],M);for(var I=0,k=N.length;I<k;I++){var T=N[I];b[T]=a(b[T],i(b[y],D[I]))}}}return d.map(G=>new o({data:G.map(K=>[K]),size:[m,1]}))}}),z8="matAlgo08xS0Sid",q8=["typed","equalScalar"],Df=P(z8,q8,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,m=a._ptr,p=a._size,v=a._datatype;if(c.length!==p.length)throw new Le(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");if(!o||!h)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var g=c[0],A=c[1],y,w=t,x=0,b=s;typeof f=="string"&&f===v&&(y=f,w=e.find(t,[y,y]),x=e.convert(0,y),b=e.find(s,[y,y]));for(var D=[],N=[],C=[],S=[],M=[],E,R,I,k,T=0;T<A;T++){C[T]=N.length;var O=T+1;for(R=l[T],I=l[T+1],E=R;E<I;E++)k=u[E],M[k]=O,S[k]=o[E],N.push(k);for(R=m[T],I=m[T+1],E=R;E<I;E++)k=d[E],M[k]===O&&(S[k]=b(S[k],h[E]));for(E=C[T];E<N.length;){k=N[E];var U=S[k];w(U,x)?N.splice(E,1):(D.push(U),E++)}}return C[A]=N.length,i.createSparseMatrix({values:D,index:N,ptr:C,size:[g,A],datatype:y})}}),Sf=P("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(t(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(t(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf())}}),Ip="leftShift",U8=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],H8=P(Ip,U8,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=zn({typed:e}),u=Rr({typed:e,equalScalar:n}),l=Df({typed:e,equalScalar:n}),c=li({typed:e,DenseMatrix:a}),f=$t({typed:e,equalScalar:n}),h=kr({typed:e}),d=ut({typed:e,matrix:t,concat:s}),m=Sf({typed:e,matrix:t});return e(Ip,{"number, number":Rx,"BigNumber, BigNumber":sF,"SparseMatrix, number | BigNumber":e.referToSelf(p=>(v,g)=>n(g,0)?v.clone():f(v,g,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(v,g)=>n(g,0)?v.clone():h(v,g,p,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(v,g)=>n(v,0)?i(g.size(),g.storage()):c(g,v,p,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(p=>(v,g)=>n(v,0)?i(g.size(),g.storage()):h(g,v,p,!0))},m,d({SS:l,DS:o,SD:u}))}),Pp="rightArithShift",V8=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],W8=P(Pp,V8,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=zn({typed:e}),u=Rr({typed:e,equalScalar:n}),l=Df({typed:e,equalScalar:n}),c=li({typed:e,DenseMatrix:a}),f=$t({typed:e,equalScalar:n}),h=kr({typed:e}),d=ut({typed:e,matrix:t,concat:s}),m=Sf({typed:e,matrix:t});return e(Pp,{"number, number":Ix,"BigNumber, BigNumber":oF,"SparseMatrix, number | BigNumber":e.referToSelf(p=>(v,g)=>n(g,0)?v.clone():f(v,g,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(v,g)=>n(g,0)?v.clone():h(v,g,p,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(v,g)=>n(v,0)?i(g.size(),g.storage()):c(g,v,p,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(p=>(v,g)=>n(v,0)?i(g.size(),g.storage()):h(g,v,p,!0))},m,d({SS:l,DS:o,SD:u}))}),$p="rightLogShift",G8=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Y8=P($p,G8,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=zn({typed:e}),u=Rr({typed:e,equalScalar:n}),l=Df({typed:e,equalScalar:n}),c=li({typed:e,DenseMatrix:a}),f=$t({typed:e,equalScalar:n}),h=kr({typed:e}),d=ut({typed:e,matrix:t,concat:s}),m=Sf({typed:e,matrix:t});return e($p,{"number, number":Px,"SparseMatrix, number | BigNumber":e.referToSelf(p=>(v,g)=>n(g,0)?v.clone():f(v,g,p,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(p=>(v,g)=>n(g,0)?v.clone():h(v,g,p,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(v,g)=>n(v,0)?i(g.size(),g.storage()):c(g,v,p,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(p=>(v,g)=>n(v,0)?i(g.size(),g.storage()):h(g,v,p,!0))},m,d({SS:l,DS:o,SD:u}))}),_p="and",K8=["typed","matrix","equalScalar","zeros","not","concat"],X8=P(_p,K8,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=Rr({typed:e,equalScalar:n}),u=Nu({typed:e,equalScalar:n}),l=$t({typed:e,equalScalar:n}),c=kr({typed:e}),f=ut({typed:e,matrix:t,concat:s});return e(_p,{"number, number":qx,"Complex, Complex":function(d,m){return(d.re!==0||d.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(d,m){return!d.isZero()&&!m.isZero()&&!d.isNaN()&&!m.isNaN()},"Unit, Unit":e.referToSelf(h=>(d,m)=>h(d.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(h=>(d,m)=>a(m)?i(d.size(),d.storage()):l(d,m,h,!1)),"DenseMatrix, any":e.referToSelf(h=>(d,m)=>a(m)?i(d.size(),d.storage()):c(d,m,h,!1)),"any, SparseMatrix":e.referToSelf(h=>(d,m)=>a(d)?i(d.size(),d.storage()):l(m,d,h,!0)),"any, DenseMatrix":e.referToSelf(h=>(d,m)=>a(d)?i(d.size(),d.storage()):c(m,d,h,!0)),"Array, any":e.referToSelf(h=>(d,m)=>h(t(d),m).valueOf()),"any, Array":e.referToSelf(h=>(d,m)=>h(d,t(m)).valueOf())},f({SS:u,DS:o}))}),Ho="compare",Z8=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],J8=P(Ho,Z8,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:a,Fraction:s,DenseMatrix:o,concat:u}=r,l=Jt({typed:e}),c=Su({typed:e,equalScalar:n}),f=Tt({typed:e,DenseMatrix:o}),h=ut({typed:e,matrix:i,concat:u}),d=ea({typed:e});return e(Ho,j8({typed:e,config:t}),{"boolean, boolean":function(p,v){return p===v?0:p>v?1:-1},"BigNumber, BigNumber":function(p,v){return Kr(p,v,t.epsilon)?new a(0):new a(p.cmp(v))},"Fraction, Fraction":function(p,v){return new s(p.compare(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:c,DS:l,Ss:f}))}),j8=P(Ho,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Ho,{"number, number":function(i,a){return dr(i,a,t.epsilon)?0:i>a?1:-1}})}),Q8=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,u=function(y){return r.insensitive&&(""+y).toLowerCase()||""+y},l=u(e).replace(i,"")||"",c=u(t).replace(i,"")||"",f=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=parseInt(l.match(s),16)||f.length!==1&&l.match(a)&&Date.parse(l),m=parseInt(c.match(s),16)||d&&c.match(a)&&Date.parse(c)||null,p,v;if(m){if(d<m)return-1;if(d>m)return 1}for(var g=0,A=Math.max(f.length,h.length);g<A;g++){if(p=!(f[g]||"").match(o)&&parseFloat(f[g])||f[g]||0,v=!(h[g]||"").match(o)&&parseFloat(h[g])||h[g]||0,isNaN(p)!==isNaN(v))return isNaN(p)?1:-1;if(typeof p!=typeof v&&(p+="",v+=""),p<v)return-1;if(p>v)return 1}return 0};const vi=Ji(Q8);var Lp="compareNatural",ek=["typed","compare"],tk=P(Lp,ek,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(Lp,{"any, any":i});function i(u,l){var c=ot(u),f=ot(l),h;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return h=t(u,l),h.toString()!=="0"?h>0?1:-1:vi(c,f);var d=["Array","DenseMatrix","SparseMatrix"];if(d.includes(c)||d.includes(f))return h=a(i,u,l),h!==0?h:vi(c,f);if(c!==f)return vi(c,f);if(c==="Complex")return rk(u,l);if(c==="Unit")return u.equalBase(l)?i(u.value,l.value):s(i,u.formatUnits(),l.formatUnits());if(c==="boolean")return n(u,l);if(c==="string")return vi(u,l);if(c==="Object")return o(i,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(u,l,c){return Nn(l)&&Nn(c)?s(u,l.toJSON().values,c.toJSON().values):Nn(l)?a(u,l.toArray(),c):Nn(c)?a(u,l,c.toArray()):Ha(l)?a(u,l.toJSON().data,c):Ha(c)?a(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?s(u,l,c):a(u,l,[c]):a(u,[l],c)}function s(u,l,c){for(var f=0,h=Math.min(l.length,c.length);f<h;f++){var d=u(l[f],c[f]);if(d!==0)return d}return l.length>c.length?1:l.length<c.length?-1:0}function o(u,l,c){var f=Object.keys(l),h=Object.keys(c);f.sort(vi),h.sort(vi);var d=s(u,f,h);if(d!==0)return d;for(var m=0;m<f.length;m++){var p=u(l[f[m]],c[h[m]]);if(p!==0)return p}return 0}});function rk(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var zp="compareText",nk=["typed","matrix","concat"];uc.signature="any, any";var ik=P(zp,nk,r=>{var{typed:e,matrix:t,concat:n}=r,i=ut({typed:e,matrix:t,concat:n});return e(zp,uc,i({elop:uc,Ds:!0}))}),Vo="equal",ak=["typed","matrix","equalScalar","DenseMatrix","concat"],sk=P(Vo,ak,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=Jt({typed:e}),o=Zr({typed:e,DenseMatrix:i}),u=Tt({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:t,concat:a});return e(Vo,ok({typed:e,equalScalar:n}),l({elop:n,SS:o,DS:s,Ss:u}))}),ok=P(Vo,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Vo,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:t(i,a)}})}),qp="equalText",uk=["typed","compareText","isZero"],lk=P(qp,uk,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(qp,{"any, any":function(a,s){return n(t(a,s))}})}),Wo="smaller",ck=["typed","config","matrix","DenseMatrix","concat"],fk=P(Wo,ck,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Jt({typed:e}),o=Zr({typed:e,DenseMatrix:i}),u=Tt({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:n,concat:a}),c=ea({typed:e});return e(Wo,hk({typed:e,config:t}),{"boolean, boolean":(f,h)=>f<h,"BigNumber, BigNumber":function(h,d){return h.lt(d)&&!Kr(h,d,t.epsilon)},"Fraction, Fraction":(f,h)=>f.compare(h)===-1,"Complex, Complex":function(h,d){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),hk=P(Wo,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Wo,{"number, number":function(i,a){return i<a&&!dr(i,a,t.epsilon)}})}),Go="smallerEq",dk=["typed","config","matrix","DenseMatrix","concat"],mk=P(Go,dk,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Jt({typed:e}),o=Zr({typed:e,DenseMatrix:i}),u=Tt({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:n,concat:a}),c=ea({typed:e});return e(Go,pk({typed:e,config:t}),{"boolean, boolean":(f,h)=>f<=h,"BigNumber, BigNumber":function(h,d){return h.lte(d)||Kr(h,d,t.epsilon)},"Fraction, Fraction":(f,h)=>f.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),pk=P(Go,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Go,{"number, number":function(i,a){return i<=a||dr(i,a,t.epsilon)}})}),Yo="larger",gk=["typed","config","matrix","DenseMatrix","concat"],vk=P(Yo,gk,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Jt({typed:e}),o=Zr({typed:e,DenseMatrix:i}),u=Tt({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:n,concat:a}),c=ea({typed:e});return e(Yo,yk({typed:e,config:t}),{"boolean, boolean":(f,h)=>f>h,"BigNumber, BigNumber":function(h,d){return h.gt(d)&&!Kr(h,d,t.epsilon)},"Fraction, Fraction":(f,h)=>f.compare(h)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),yk=P(Yo,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Yo,{"number, number":function(i,a){return i>a&&!dr(i,a,t.epsilon)}})}),Ko="largerEq",bk=["typed","config","matrix","DenseMatrix","concat"],xk=P(Ko,bk,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a}=r,s=Jt({typed:e}),o=Zr({typed:e,DenseMatrix:i}),u=Tt({typed:e,DenseMatrix:i}),l=ut({typed:e,matrix:n,concat:a}),c=ea({typed:e});return e(Ko,wk({typed:e,config:t}),{"boolean, boolean":(f,h)=>f>=h,"BigNumber, BigNumber":function(h,d){return h.gte(d)||Kr(h,d,t.epsilon)},"Fraction, Fraction":(f,h)=>f.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),wk=P(Ko,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Ko,{"number, number":function(i,a){return i>=a||dr(i,a,t.epsilon)}})}),Up="deepEqual",Ak=["typed","equal"],Dk=P(Up,Ak,r=>{var{typed:e,equal:t}=r;return e(Up,{"any, any":function(a,s){return n(a.valueOf(),s.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var s=i.length;if(s!==a.length)return!1;for(var o=0;o<s;o++)if(!n(i[o],a[o]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:t(i,a)}}),Xo="unequal",Sk=["typed","config","equalScalar","matrix","DenseMatrix","concat"],Nk=P(Xo,Sk,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:a,concat:s}=r,o=Jt({typed:e}),u=Zr({typed:e,DenseMatrix:a}),l=Tt({typed:e,DenseMatrix:a}),c=ut({typed:e,matrix:i,concat:s});return e(Xo,Ck({typed:e,equalScalar:n}),c({elop:f,SS:u,DS:o,Ss:l}));function f(h,d){return!n(h,d)}}),Ck=P(Xo,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Xo,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!t(i,a)}})}),Hp="partitionSelect",Ek=["typed","isNumeric","isNaN","compare"],Mk=P(Hp,Ek,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,a=i,s=(l,c)=>-i(l,c);return e(Hp,{"Array | Matrix, number":function(c,f){return o(c,f,a)},"Array | Matrix, number, string":function(c,f,h){if(h==="asc")return o(c,f,a);if(h==="desc")return o(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(l,c,f){if(!Ee(c)||c<0)throw new Error("k must be a non-negative integer");if(Oe(l)){var h=l.size();if(h.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var h=0;h<l.length;h++)if(t(l[h])&&n(l[h]))return l[h];for(var d=0,m=l.length-1;d<m;){for(var p=d,v=m,g=l[Math.floor(Math.random()*(m-d+1))+d];p<v;)if(f(l[p],g)>=0){var A=l[v];l[v]=l[p],l[p]=A,--v}else++p;f(l[p],g)>0&&--p,c<=p?m=p:d=p+1}return l[c]}}),Vp="sort",Tk=["typed","matrix","compare","compareNatural"],Ok=P(Vp,Tk,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,a=n,s=(c,f)=>-n(c,f);return e(Vp,{Array:function(f){return u(f),f.sort(a)},Matrix:function(f){return l(f),t(f.toArray().sort(a),f.storage())},"Array, function":function(f,h){return u(f),f.sort(h)},"Matrix, function":function(f,h){return l(f),t(f.toArray().sort(h),f.storage())},"Array, string":function(f,h){return u(f),f.sort(o(h))},"Matrix, string":function(f,h){return l(f),t(f.toArray().sort(o(h)),f.storage())}});function o(c){if(c==="asc")return a;if(c==="desc")return s;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(Pe(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),Wp="max",Bk=["typed","config","numeric","larger"],Dw=P(Wp,Bk,r=>{var{typed:e,config:t,numeric:n,larger:i}=r;return e(Wp,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Au(u,l.valueOf(),a)},"...":function(u){if(ji(u))throw new TypeError("Scalar values expected in function max");return s(u)}});function a(o,u){try{return i(o,u)?o:u}catch(l){throw Zt(l,"max",u)}}function s(o){var u;if(fn(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||i(l,u))&&(u=l)}catch(c){throw Zt(c,"max",l)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,t.number)),u}}),Gp="min",Fk=["typed","config","numeric","smaller"],Sw=P(Gp,Fk,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r;return e(Gp,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Au(u,l.valueOf(),a)},"...":function(u){if(ji(u))throw new TypeError("Scalar values expected in function min");return s(u)}});function a(o,u){try{return i(o,u)?o:u}catch(l){throw Zt(l,"min",u)}}function s(o){var u;if(fn(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||i(l,u))&&(u=l)}catch(c){throw Zt(c,"min",l)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,t.number)),u}}),kk="ImmutableDenseMatrix",Rk=["smaller","DenseMatrix"],Ik=P(kk,Rk,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!It(a))throw new Error("Invalid datatype: "+a);if(Oe(i)||je(i)){var s=new t(i,a);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&je(i.data)&&je(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+ot(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=t.prototype.subset.call(this,i);return Oe(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Be(this._data),size:Be(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),Pk="Index",$k=["ImmutableDenseMatrix","getMatrixDataType"],_k=P(Pk,$k,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,o=arguments.length;s<o;s++){var u=arguments[s],l=je(u),c=Oe(u),f=null;if(mu(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var h=void 0;t(u)==="boolean"?(l&&(h=i(Yp(u).valueOf())),c&&(h=i(Yp(u._data).valueOf())),f=u.valueOf().length):h=i(u.valueOf()),this._dimensions.push(h);var d=h.size();(d.length!==1||d[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof u=="number")this._dimensions.push(i([u]));else if(typeof u=="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var s=0,o=a.length;s<o;s++)if(typeof a[s]!="number"||!Ee(a[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return n.prototype.clone=function(){var a=new n;return a._dimensions=Be(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var s=new n;return n.apply(s,a),s},n.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?1:u.size()[0]}return a},n.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?u:u.max()}return a},n.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?u:u.min()}return a},n.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},n.prototype.dimension=function(a){return this._dimensions[a]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a.push(typeof u=="string"?u:u.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];typeof u=="string"?a.push(JSON.stringify(u)):a.push(u.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function Yp(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var Lk="FibonacciHeap",zk=["smaller","larger"],qk=P(Lk,zk,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var h={key:c,value:f,degree:0};if(this._minimum){var d=this._minimum;h.left=d,h.right=d.right,d.right=h,h.right.left=h,e(c,d.key)&&(this._minimum=h)}else h.left=h,h.right=h,this._minimum=h;return this._size++,h},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,h=c.degree,d=c.child;h>0;){var m=d.right;d.left.right=d.right,d.right.left=d.left,d.left=f,d.right=f.right,f.right=d,d.right.left=d,d.parent=null,d=m,h--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,h){f.key=h;var d=f.parent;return d&&e(f.key,d.key)&&(s(c,f,d),o(c,d)),e(f.key,c.key)&&(c=f),c}function s(c,f,h){f.left.right=f.right,f.right.left=f.left,h.degree--,h.child===f&&(h.child=f.right),h.degree===0&&(h.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var h=f.parent;h&&(f.mark?(s(c,f,h),o(h)):f.mark=!0)}var u=function(f,h){f.left.right=f.right,f.right.left=f.left,f.parent=h,h.child?(f.left=h.child,f.right=h.child.right,h.child.right=f,f.right.left=f):(h.child=f,f.right=f,f.left=f),h.degree++,f.mark=!1};function l(c,f){var h=Math.floor(Math.log(f)*n)+1,d=new Array(h),m=0,p=c;if(p)for(m++,p=p.right;p!==c;)m++,p=p.right;for(var v;m>0;){for(var g=p.degree,A=p.right;v=d[g],!!v;){if(t(p.key,v.key)){var y=v;v=p,p=y}u(v,p),d[g]=null,g++}d[g]=p,p=A,m--}c=null;for(var w=0;w<h;w++)v=d[w],v&&(c?(v.left.right=v.right,v.right.left=v.left,v.left=c,v.right=c.right,c.right=v,v.right.left=v,e(v.key,c.key)&&(c=v)):c=v);return c}return i},{isClass:!0}),Uk="Spa",Hk=["addScalar","equalScalar","FibonacciHeap"],Vk=P(Uk,Hk,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var o=this._heap.insert(a,s);this._values[a]=o}},i.prototype.get=function(a){var s=this._values[a];return s?s.value:0},i.prototype.accumulate=function(a,s){var o=this._values[a];o?o.value=e(o.value,s):(o=this._heap.insert(a,s),this._values[a]=o)},i.prototype.forEach=function(a,s,o){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=a&&(t(f.value,0)||o(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var h=0;h<c.length;h++){var d=c[h];f=u.insert(d.key,d.value),l[f.key]=f}},i.prototype.swap=function(a,s){var o=this._values[a],u=this._values[s];if(!o&&u)o=this._heap.insert(a,u.value),this._heap.remove(u),this._values[a]=o,this._values[s]=void 0;else if(o&&!u)u=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=u,this._values[a]=void 0;else if(o&&u){var l=o.value;o.value=u.value,u.value=l}},i},{isClass:!0}),Wk=is(function(r){return new r(1).exp()},{hasher:Cu}),Gk=is(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:Cu}),Nf=is(function(r){return r.acos(-1)},{hasher:Cu}),Yk=is(function(r){return Nf(r).times(2)},{hasher:Cu});function Cu(r){return r[0].precision}function Kp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function il(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kp(Object(t),!0).forEach(function(n){Et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kp(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Kk="Unit",Xk=["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],Zk=P(Kk,Xk,r=>{var{on:e,config:t,addScalar:n,subtract:i,multiplyScalar:a,divideScalar:s,pow:o,abs:u,fix:l,round:c,equal:f,isNumeric:h,format:d,number:m,Complex:p,BigNumber:v,Fraction:g}=r,A=m;function y(z,V){if(!(this instanceof y))throw new Error("Constructor must be called with the new operator");if(!(z==null||h(z)||Er(z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,V===void 0)this.units=[],this.dimensions=U.map(H=>0);else if(typeof V=="string"){var te=y.parse(V);this.units=te.units,this.dimensions=te.dimensions}else if(tr(V)&&V.value===null)this.fixPrefix=V.fixPrefix,this.skipAutomaticSimplification=V.skipAutomaticSimplification,this.dimensions=V.dimensions.slice(0),this.units=V.units.map(H=>Vt({},H));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(z)}Object.defineProperty(y,"name",{value:"Unit"}),y.prototype.constructor=y,y.prototype.type="Unit",y.prototype.isUnit=!0;var w,x,b;function D(){for(;b===" "||b==="	";)S()}function N(z){return z>="0"&&z<="9"||z==="."}function C(z){return z>="0"&&z<="9"}function S(){x++,b=w.charAt(x)}function M(z){x=z,b=w.charAt(x)}function E(){var z="",V=x;if(b==="+"?S():b==="-"&&(z+=b,S()),!N(b))return M(V),null;if(b==="."){if(z+=b,S(),!C(b))return M(V),null}else{for(;C(b);)z+=b,S();b==="."&&(z+=b,S())}for(;C(b);)z+=b,S();if(b==="E"||b==="e"){var te="",H=x;if(te+=b,S(),(b==="+"||b==="-")&&(te+=b,S()),!C(b))return M(H),z;for(z=z+te;C(b);)z+=b,S()}return z}function R(){for(var z="";C(b)||y.isValidAlpha(b);)z+=b,S();var V=z.charAt(0);return y.isValidAlpha(V)?z:null}function I(z){return b===z?(S(),z):null}y.parse=function(z,V){if(V=V||{},w=z,x=-1,b="",typeof w!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var te=new y;te.units=[];var H=1,Y=!1;S(),D();var j=E(),ce=null;if(j){if(t.number==="BigNumber")ce=new v(j);else if(t.number==="Fraction")try{ce=new g(j)}catch{ce=parseFloat(j)}else ce=parseFloat(j);D(),I("*")?(H=1,Y=!0):I("/")&&(H=-1,Y=!0)}for(var oe=[],$=1;;){for(D();b==="(";)oe.push(H),$*=H,H=1,S(),D();var q=void 0;if(b){var Z=b;if(q=R(),q===null)throw new SyntaxError('Unexpected "'+Z+'" in "'+w+'" at index '+x.toString())}else break;var re=k(q);if(re===null)throw new SyntaxError('Unit "'+q+'" not found.');var ue=H*$;if(D(),I("^")){D();var se=E();if(se===null)throw new SyntaxError('In "'+z+'", "^" must be followed by a floating-point number');ue*=se}te.units.push({unit:re.unit,prefix:re.prefix,power:ue});for(var ge=0;ge<U.length;ge++)te.dimensions[ge]+=(re.unit.dimensions[ge]||0)*ue;for(D();b===")";){if(oe.length===0)throw new SyntaxError('Unmatched ")" in "'+w+'" at index '+x.toString());$/=oe.pop(),S(),D()}if(Y=!1,I("*")?(H=1,Y=!0):I("/")?(H=-1,Y=!0):H=1,re.unit.base){var me=re.unit.base.key;J.auto[me]={unit:re.unit,prefix:re.prefix}}}if(D(),b)throw new SyntaxError('Could not parse: "'+z+'"');if(Y)throw new SyntaxError('Trailing characters: "'+z+'"');if(oe.length!==0)throw new SyntaxError('Unmatched "(" in "'+w+'"');if(te.units.length===0&&!V.allowNoUnits)throw new SyntaxError('"'+z+'" contains no units');return te.value=ce!==void 0?te._normalize(ce):null,te},y.prototype.clone=function(){var z=new y;z.fixPrefix=this.fixPrefix,z.skipAutomaticSimplification=this.skipAutomaticSimplification,z.value=Be(this.value),z.dimensions=this.dimensions.slice(0),z.units=[];for(var V=0;V<this.units.length;V++){z.units[V]={};for(var te in this.units[V])De(this.units[V],te)&&(z.units[V][te]=this.units[V][te])}return z},y.prototype.valueType=function(){return ot(this.value)},y.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},y.prototype._normalize=function(z){if(z==null||this.units.length===0)return z;for(var V=z,te=y._getNumberConverter(ot(z)),H=0;H<this.units.length;H++){var Y=te(this.units[H].unit.value),j=te(this.units[H].prefix.value),ce=te(this.units[H].power);V=a(V,o(a(Y,j),ce))}return V},y.prototype._denormalize=function(z,V){if(z==null||this.units.length===0)return z;for(var te=z,H=y._getNumberConverter(ot(z)),Y=0;Y<this.units.length;Y++){var j=H(this.units[Y].unit.value),ce=H(this.units[Y].prefix.value),oe=H(this.units[Y].power);te=s(te,o(a(j,ce),oe))}return te};var k=is(z=>{if(De(L,z)){var V=L[z],te=V.prefixes[""];return{unit:V,prefix:te}}for(var H in L)if(De(L,H)&&IM(z,H)){var Y=L[H],j=z.length-H.length,ce=z.substring(0,j),oe=De(Y.prefixes,ce)?Y.prefixes[ce]:void 0;if(oe!==void 0)return{unit:Y,prefix:oe}}return null},{hasher:z=>z[0],limit:100});y.isValuelessUnit=function(z){return k(z)!==null},y.prototype.hasBase=function(z){if(typeof z=="string"&&(z=F[z]),!z)return!1;for(var V=0;V<U.length;V++)if(Math.abs((this.dimensions[V]||0)-(z.dimensions[V]||0))>1e-12)return!1;return!0},y.prototype.equalBase=function(z){for(var V=0;V<U.length;V++)if(Math.abs((this.dimensions[V]||0)-(z.dimensions[V]||0))>1e-12)return!1;return!0},y.prototype.equals=function(z){return this.equalBase(z)&&f(this.value,z.value)},y.prototype.multiply=function(z){for(var V=this.clone(),te=tr(z)?z:new y(z),H=0;H<U.length;H++)V.dimensions[H]=(this.dimensions[H]||0)+(te.dimensions[H]||0);for(var Y=0;Y<te.units.length;Y++){var j=il({},te.units[Y]);V.units.push(j)}if(this.value!==null||te.value!==null){var ce=this.value===null?this._normalize(1):this.value,oe=te.value===null?te._normalize(1):te.value;V.value=a(ce,oe)}else V.value=null;return tr(z)&&(V.skipAutomaticSimplification=!1),T(V)},y.prototype.divideInto=function(z){return new y(z).divide(this)},y.prototype.divide=function(z){for(var V=this.clone(),te=tr(z)?z:new y(z),H=0;H<U.length;H++)V.dimensions[H]=(this.dimensions[H]||0)-(te.dimensions[H]||0);for(var Y=0;Y<te.units.length;Y++){var j=il(il({},te.units[Y]),{},{power:-te.units[Y].power});V.units.push(j)}if(this.value!==null||te.value!==null){var ce=this.value===null?this._normalize(1):this.value,oe=te.value===null?te._normalize(1):te.value;V.value=s(ce,oe)}else V.value=null;return tr(z)&&(V.skipAutomaticSimplification=!1),T(V)},y.prototype.pow=function(z){for(var V=this.clone(),te=0;te<U.length;te++)V.dimensions[te]=(this.dimensions[te]||0)*z;for(var H=0;H<V.units.length;H++)V.units[H].power*=z;return V.value!==null?V.value=o(V.value,z):V.value=null,V.skipAutomaticSimplification=!1,T(V)};function T(z){return z.equalBase(F.NONE)&&z.value!==null&&!t.predictable?z.value:z}y.prototype.abs=function(){var z=this.clone();if(z.value!==null)if(z._isDerived()||z.units[0].unit.offset===0)z.value=u(z.value);else{var V=z._numberConverter(),te=V(z.units[0].unit.value),H=V(z.units[0].unit.offset),Y=a(te,H);z.value=i(u(n(z.value,Y)),Y)}for(var j in z.units)(z.units[j].unit.name==="VA"||z.units[j].unit.name==="VAR")&&(z.units[j].unit=L.W);return z},y.prototype.to=function(z){var V=this.value===null?this._normalize(1):this.value,te;if(typeof z=="string")te=y.parse(z);else if(tr(z))te=z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(te))throw new Error("Units do not match ('".concat(te.toString(),"' != '").concat(this.toString(),"')"));if(te.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units[0].unit.offset===te.units[0].unit.offset)te.value=Be(V);else{var H=y._getNumberConverter(ot(V)),Y=this.units[0].unit.value,j=this.units[0].unit.offset,ce=a(Y,j),oe=te.units[0].unit.value,$=te.units[0].unit.offset,q=a(oe,$);te.value=n(V,H(i(ce,q)))}return te.fixPrefix=!0,te.skipAutomaticSimplification=!0,te},y.prototype.toNumber=function(z){return A(this.toNumeric(z))},y.prototype.toNumeric=function(z){var V;return z?V=this.to(z):V=this.clone(),V._isDerived()||V.units.length===0?V._denormalize(V.value):V._denormalize(V.value,V.units[0].prefix.value)},y.prototype.toString=function(){return this.format()},y.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},y.fromJSON=function(z){var V=new y(z.value,z.unit);return V.fixPrefix=z.fixPrefix||!1,V},y.prototype.valueOf=y.prototype.toString,y.prototype.simplify=function(){var z=this.clone(),V=[],te;for(var H in ae)if(De(ae,H)&&z.hasBase(F[H])){te=H;break}if(te==="NONE")z.units=[];else{var Y;if(te&&De(ae,te)&&(Y=ae[te]),Y)z.units=[{unit:Y.unit,prefix:Y.prefix,power:1}];else{for(var j=!1,ce=0;ce<U.length;ce++){var oe=U[ce];Math.abs(z.dimensions[ce]||0)>1e-12&&(De(ae,oe)?V.push({unit:ae[oe].unit,prefix:ae[oe].prefix,power:z.dimensions[ce]||0}):j=!0)}V.length<z.units.length&&!j&&(z.units=V)}}return z},y.prototype.toSI=function(){for(var z=this.clone(),V=[],te=0;te<U.length;te++){var H=U[te];if(Math.abs(z.dimensions[te]||0)>1e-12)if(De(J.si,H))V.push({unit:J.si[H].unit,prefix:J.si[H].prefix,power:z.dimensions[te]||0});else throw new Error("Cannot express custom unit "+H+" in SI units")}return z.units=V,z.fixPrefix=!0,z.skipAutomaticSimplification=!0,z},y.prototype.formatUnits=function(){for(var z="",V="",te=0,H=0,Y=0;Y<this.units.length;Y++)this.units[Y].power>0?(te++,z+=" "+this.units[Y].prefix.name+this.units[Y].unit.name,Math.abs(this.units[Y].power-1)>1e-15&&(z+="^"+this.units[Y].power)):this.units[Y].power<0&&H++;if(H>0)for(var j=0;j<this.units.length;j++)this.units[j].power<0&&(te>0?(V+=" "+this.units[j].prefix.name+this.units[j].unit.name,Math.abs(this.units[j].power+1)>1e-15&&(V+="^"+-this.units[j].power)):(V+=" "+this.units[j].prefix.name+this.units[j].unit.name,V+="^"+this.units[j].power));z=z.substr(1),V=V.substr(1),te>1&&H>0&&(z="("+z+")"),H>1&&te>0&&(V="("+V+")");var ce=z;return te>0&&H>0&&(ce+=" / "),ce+=V,ce},y.prototype.format=function(z){var V=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),te=!1;typeof V.value<"u"&&V.value!==null&&Er(V.value)&&(te=Math.abs(V.value.re)<1e-14);for(var H in V.units)De(V.units,H)&&V.units[H].unit&&(V.units[H].unit.name==="VA"&&te?V.units[H].unit=L.VAR:V.units[H].unit.name==="VAR"&&!te&&(V.units[H].unit=L.VA));V.units.length===1&&!V.fixPrefix&&Math.abs(V.units[0].power-Math.round(V.units[0].power))<1e-14&&(V.units[0].prefix=V._bestPrefix());var Y=V._denormalize(V.value),j=V.value!==null?d(Y,z||{}):"",ce=V.formatUnits();return V.value&&Er(V.value)&&(j="("+j+")"),ce.length>0&&j.length>0&&(j+=" "),j+=ce,j},y.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var z=this.value!==null?u(this.value):0,V=u(this.units[0].unit.value),te=this.units[0].prefix;if(z===0)return te;var H=this.units[0].power,Y=Math.log(z/Math.pow(te.value*V,H))/Math.LN10-1.2;if(Y>-2.200001&&Y<1.800001)return te;Y=Math.abs(Y);var j=this.units[0].unit.prefixes;for(var ce in j)if(De(j,ce)){var oe=j[ce];if(oe.scientific){var $=Math.abs(Math.log(z/Math.pow(oe.value*V,H))/Math.LN10-1.2);($<Y||$===Y&&oe.name.length<te.name.length)&&(te=oe,Y=$)}}return te},y.prototype.splitUnit=function(z){for(var V=this.clone(),te=[],H=0;H<z.length&&(V=V.to(z[H]),H!==z.length-1);H++){var Y=V.toNumeric(),j=c(Y),ce=void 0,oe=f(j,Y);oe?ce=j:ce=l(V.toNumeric());var $=new y(ce,z[H].toString());te.push($),V=i(V,$)}for(var q=0,Z=0;Z<te.length;Z++)q=n(q,te[Z].value);return f(q,this.value)&&(V.value=0),te.push(V),te};var O={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};O.SHORTLONG=Vt({},O.SHORT,O.LONG),O.BINARY_SHORT=Vt({},O.BINARY_SHORT_SI,O.BINARY_SHORT_IEC),O.BINARY_LONG=Vt({},O.BINARY_LONG_SI,O.BINARY_LONG_IEC);var U=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],F={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var _ in F)De(F,_)&&(F[_].key=_);var G={},K={name:"",base:G,value:1,offset:0,dimensions:U.map(z=>0)},L={meter:{name:"meter",base:F.LENGTH,prefixes:O.LONG,value:1,offset:0},inch:{name:"inch",base:F.LENGTH,prefixes:O.NONE,value:.0254,offset:0},foot:{name:"foot",base:F.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yard:{name:"yard",base:F.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mile:{name:"mile",base:F.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},link:{name:"link",base:F.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rod:{name:"rod",base:F.LENGTH,prefixes:O.NONE,value:5.0292,offset:0},chain:{name:"chain",base:F.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:F.LENGTH,prefixes:O.NONE,value:1e-10,offset:0},m:{name:"m",base:F.LENGTH,prefixes:O.SHORT,value:1,offset:0},in:{name:"in",base:F.LENGTH,prefixes:O.NONE,value:.0254,offset:0},ft:{name:"ft",base:F.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yd:{name:"yd",base:F.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mi:{name:"mi",base:F.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},li:{name:"li",base:F.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rd:{name:"rd",base:F.LENGTH,prefixes:O.NONE,value:5.02921,offset:0},ch:{name:"ch",base:F.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},mil:{name:"mil",base:F.LENGTH,prefixes:O.NONE,value:254e-7,offset:0},m2:{name:"m2",base:F.SURFACE,prefixes:O.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:F.SURFACE,prefixes:O.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:F.SURFACE,prefixes:O.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:F.SURFACE,prefixes:O.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:F.SURFACE,prefixes:O.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:F.SURFACE,prefixes:O.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:F.SURFACE,prefixes:O.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:F.SURFACE,prefixes:O.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:F.SURFACE,prefixes:O.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:F.SURFACE,prefixes:O.NONE,value:1e4,offset:0},m3:{name:"m3",base:F.VOLUME,prefixes:O.CUBIC,value:1,offset:0},L:{name:"L",base:F.VOLUME,prefixes:O.SHORT,value:.001,offset:0},l:{name:"l",base:F.VOLUME,prefixes:O.SHORT,value:.001,offset:0},litre:{name:"litre",base:F.VOLUME,prefixes:O.LONG,value:.001,offset:0},cuin:{name:"cuin",base:F.VOLUME,prefixes:O.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:F.VOLUME,prefixes:O.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:F.VOLUME,prefixes:O.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:F.VOLUME,prefixes:O.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:F.VOLUME,prefixes:O.NONE,value:15e-6,offset:0},drop:{name:"drop",base:F.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:F.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},minim:{name:"minim",base:F.VOLUME,prefixes:O.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:F.VOLUME,prefixes:O.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:F.VOLUME,prefixes:O.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:F.VOLUME,prefixes:O.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:F.VOLUME,prefixes:O.NONE,value:1e-6,offset:0},cup:{name:"cup",base:F.VOLUME,prefixes:O.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:F.VOLUME,prefixes:O.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:F.VOLUME,prefixes:O.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:F.VOLUME,prefixes:O.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:F.VOLUME,prefixes:O.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:F.VOLUME,prefixes:O.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:F.VOLUME,prefixes:O.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:F.VOLUME,prefixes:O.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:F.VOLUME,prefixes:O.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:F.VOLUME,prefixes:O.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:F.VOLUME,prefixes:O.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:F.VOLUME,prefixes:O.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:F.VOLUME,prefixes:O.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:F.VOLUME,prefixes:O.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:F.VOLUME,prefixes:O.NONE,value:.1173478,offset:0},obl:{name:"obl",base:F.VOLUME,prefixes:O.NONE,value:.1589873,offset:0},g:{name:"g",base:F.MASS,prefixes:O.SHORT,value:.001,offset:0},gram:{name:"gram",base:F.MASS,prefixes:O.LONG,value:.001,offset:0},ton:{name:"ton",base:F.MASS,prefixes:O.SHORT,value:907.18474,offset:0},t:{name:"t",base:F.MASS,prefixes:O.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:F.MASS,prefixes:O.LONG,value:1e3,offset:0},grain:{name:"grain",base:F.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:F.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:F.MASS,prefixes:O.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:F.MASS,prefixes:O.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:F.MASS,prefixes:O.NONE,value:45.359237,offset:0},stick:{name:"stick",base:F.MASS,prefixes:O.NONE,value:.115,offset:0},stone:{name:"stone",base:F.MASS,prefixes:O.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:F.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:F.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:F.MASS,prefixes:O.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:F.MASS,prefixes:O.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:F.MASS,prefixes:O.NONE,value:45.359237,offset:0},s:{name:"s",base:F.TIME,prefixes:O.SHORT,value:1,offset:0},min:{name:"min",base:F.TIME,prefixes:O.NONE,value:60,offset:0},h:{name:"h",base:F.TIME,prefixes:O.NONE,value:3600,offset:0},second:{name:"second",base:F.TIME,prefixes:O.LONG,value:1,offset:0},sec:{name:"sec",base:F.TIME,prefixes:O.LONG,value:1,offset:0},minute:{name:"minute",base:F.TIME,prefixes:O.NONE,value:60,offset:0},hour:{name:"hour",base:F.TIME,prefixes:O.NONE,value:3600,offset:0},day:{name:"day",base:F.TIME,prefixes:O.NONE,value:86400,offset:0},week:{name:"week",base:F.TIME,prefixes:O.NONE,value:7*86400,offset:0},month:{name:"month",base:F.TIME,prefixes:O.NONE,value:2629800,offset:0},year:{name:"year",base:F.TIME,prefixes:O.NONE,value:31557600,offset:0},decade:{name:"decade",base:F.TIME,prefixes:O.NONE,value:315576e3,offset:0},century:{name:"century",base:F.TIME,prefixes:O.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:F.TIME,prefixes:O.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:F.FREQUENCY,prefixes:O.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:F.FREQUENCY,prefixes:O.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:F.ANGLE,prefixes:O.SHORT,value:1,offset:0},radian:{name:"radian",base:F.ANGLE,prefixes:O.LONG,value:1,offset:0},deg:{name:"deg",base:F.ANGLE,prefixes:O.SHORT,value:null,offset:0},degree:{name:"degree",base:F.ANGLE,prefixes:O.LONG,value:null,offset:0},grad:{name:"grad",base:F.ANGLE,prefixes:O.SHORT,value:null,offset:0},gradian:{name:"gradian",base:F.ANGLE,prefixes:O.LONG,value:null,offset:0},cycle:{name:"cycle",base:F.ANGLE,prefixes:O.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:F.ANGLE,prefixes:O.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:F.ANGLE,prefixes:O.NONE,value:null,offset:0},A:{name:"A",base:F.CURRENT,prefixes:O.SHORT,value:1,offset:0},ampere:{name:"ampere",base:F.CURRENT,prefixes:O.LONG,value:1,offset:0},K:{name:"K",base:F.TEMPERATURE,prefixes:O.SHORT,value:1,offset:0},degC:{name:"degC",base:F.TEMPERATURE,prefixes:O.SHORT,value:1,offset:273.15},degF:{name:"degF",base:F.TEMPERATURE,prefixes:O.SHORT,value:new g(5,9),offset:459.67},degR:{name:"degR",base:F.TEMPERATURE,prefixes:O.SHORT,value:new g(5,9),offset:0},kelvin:{name:"kelvin",base:F.TEMPERATURE,prefixes:O.LONG,value:1,offset:0},celsius:{name:"celsius",base:F.TEMPERATURE,prefixes:O.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:F.TEMPERATURE,prefixes:O.LONG,value:new g(5,9),offset:459.67},rankine:{name:"rankine",base:F.TEMPERATURE,prefixes:O.LONG,value:new g(5,9),offset:0},mol:{name:"mol",base:F.AMOUNT_OF_SUBSTANCE,prefixes:O.SHORT,value:1,offset:0},mole:{name:"mole",base:F.AMOUNT_OF_SUBSTANCE,prefixes:O.LONG,value:1,offset:0},cd:{name:"cd",base:F.LUMINOUS_INTENSITY,prefixes:O.SHORT,value:1,offset:0},candela:{name:"candela",base:F.LUMINOUS_INTENSITY,prefixes:O.LONG,value:1,offset:0},N:{name:"N",base:F.FORCE,prefixes:O.SHORT,value:1,offset:0},newton:{name:"newton",base:F.FORCE,prefixes:O.LONG,value:1,offset:0},dyn:{name:"dyn",base:F.FORCE,prefixes:O.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:F.FORCE,prefixes:O.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:F.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:F.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:F.FORCE,prefixes:O.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:F.FORCE,prefixes:O.NONE,value:9.80665,offset:0},J:{name:"J",base:F.ENERGY,prefixes:O.SHORT,value:1,offset:0},joule:{name:"joule",base:F.ENERGY,prefixes:O.LONG,value:1,offset:0},erg:{name:"erg",base:F.ENERGY,prefixes:O.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:F.ENERGY,prefixes:O.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:F.ENERGY,prefixes:O.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:F.ENERGY,prefixes:O.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:F.ENERGY,prefixes:O.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:F.POWER,prefixes:O.SHORT,value:1,offset:0},watt:{name:"watt",base:F.POWER,prefixes:O.LONG,value:1,offset:0},hp:{name:"hp",base:F.POWER,prefixes:O.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:F.POWER,prefixes:O.SHORT,value:p.I,offset:0},VA:{name:"VA",base:F.POWER,prefixes:O.SHORT,value:1,offset:0},Pa:{name:"Pa",base:F.PRESSURE,prefixes:O.SHORT,value:1,offset:0},psi:{name:"psi",base:F.PRESSURE,prefixes:O.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:F.PRESSURE,prefixes:O.NONE,value:101325,offset:0},bar:{name:"bar",base:F.PRESSURE,prefixes:O.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:F.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:F.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:F.PRESSURE,prefixes:O.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:F.PRESSURE,prefixes:O.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:F.ELECTRIC_CHARGE,prefixes:O.LONG,value:1,offset:0},C:{name:"C",base:F.ELECTRIC_CHARGE,prefixes:O.SHORT,value:1,offset:0},farad:{name:"farad",base:F.ELECTRIC_CAPACITANCE,prefixes:O.LONG,value:1,offset:0},F:{name:"F",base:F.ELECTRIC_CAPACITANCE,prefixes:O.SHORT,value:1,offset:0},volt:{name:"volt",base:F.ELECTRIC_POTENTIAL,prefixes:O.LONG,value:1,offset:0},V:{name:"V",base:F.ELECTRIC_POTENTIAL,prefixes:O.SHORT,value:1,offset:0},ohm:{name:"ohm",base:F.ELECTRIC_RESISTANCE,prefixes:O.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:F.ELECTRIC_INDUCTANCE,prefixes:O.LONG,value:1,offset:0},H:{name:"H",base:F.ELECTRIC_INDUCTANCE,prefixes:O.SHORT,value:1,offset:0},siemens:{name:"siemens",base:F.ELECTRIC_CONDUCTANCE,prefixes:O.LONG,value:1,offset:0},S:{name:"S",base:F.ELECTRIC_CONDUCTANCE,prefixes:O.SHORT,value:1,offset:0},weber:{name:"weber",base:F.MAGNETIC_FLUX,prefixes:O.LONG,value:1,offset:0},Wb:{name:"Wb",base:F.MAGNETIC_FLUX,prefixes:O.SHORT,value:1,offset:0},tesla:{name:"tesla",base:F.MAGNETIC_FLUX_DENSITY,prefixes:O.LONG,value:1,offset:0},T:{name:"T",base:F.MAGNETIC_FLUX_DENSITY,prefixes:O.SHORT,value:1,offset:0},b:{name:"b",base:F.BIT,prefixes:O.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:F.BIT,prefixes:O.BINARY_LONG,value:1,offset:0},B:{name:"B",base:F.BIT,prefixes:O.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:F.BIT,prefixes:O.BINARY_LONG,value:8,offset:0}},X={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function Q(z){if(z.number==="BigNumber"){var V=Nf(v);L.rad.value=new v(1),L.deg.value=V.div(180),L.grad.value=V.div(200),L.cycle.value=V.times(2),L.arcsec.value=V.div(648e3),L.arcmin.value=V.div(10800)}else L.rad.value=1,L.deg.value=Math.PI/180,L.grad.value=Math.PI/200,L.cycle.value=Math.PI*2,L.arcsec.value=Math.PI/648e3,L.arcmin.value=Math.PI/10800;L.radian.value=L.rad.value,L.degree.value=L.deg.value,L.gradian.value=L.grad.value}Q(t),e&&e("config",function(z,V){z.number!==V.number&&Q(z)});var J={si:{NONE:{unit:K,prefix:O.NONE[""]},LENGTH:{unit:L.m,prefix:O.SHORT[""]},MASS:{unit:L.g,prefix:O.SHORT.k},TIME:{unit:L.s,prefix:O.SHORT[""]},CURRENT:{unit:L.A,prefix:O.SHORT[""]},TEMPERATURE:{unit:L.K,prefix:O.SHORT[""]},LUMINOUS_INTENSITY:{unit:L.cd,prefix:O.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:L.mol,prefix:O.SHORT[""]},ANGLE:{unit:L.rad,prefix:O.SHORT[""]},BIT:{unit:L.bits,prefix:O.SHORT[""]},FORCE:{unit:L.N,prefix:O.SHORT[""]},ENERGY:{unit:L.J,prefix:O.SHORT[""]},POWER:{unit:L.W,prefix:O.SHORT[""]},PRESSURE:{unit:L.Pa,prefix:O.SHORT[""]},ELECTRIC_CHARGE:{unit:L.C,prefix:O.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:L.F,prefix:O.SHORT[""]},ELECTRIC_POTENTIAL:{unit:L.V,prefix:O.SHORT[""]},ELECTRIC_RESISTANCE:{unit:L.ohm,prefix:O.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:L.H,prefix:O.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:L.S,prefix:O.SHORT[""]},MAGNETIC_FLUX:{unit:L.Wb,prefix:O.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:L.T,prefix:O.SHORT[""]},FREQUENCY:{unit:L.Hz,prefix:O.SHORT[""]}}};J.cgs=JSON.parse(JSON.stringify(J.si)),J.cgs.LENGTH={unit:L.m,prefix:O.SHORT.c},J.cgs.MASS={unit:L.g,prefix:O.SHORT[""]},J.cgs.FORCE={unit:L.dyn,prefix:O.SHORT[""]},J.cgs.ENERGY={unit:L.erg,prefix:O.NONE[""]},J.us=JSON.parse(JSON.stringify(J.si)),J.us.LENGTH={unit:L.ft,prefix:O.NONE[""]},J.us.MASS={unit:L.lbm,prefix:O.NONE[""]},J.us.TEMPERATURE={unit:L.degF,prefix:O.NONE[""]},J.us.FORCE={unit:L.lbf,prefix:O.NONE[""]},J.us.ENERGY={unit:L.BTU,prefix:O.BTU[""]},J.us.POWER={unit:L.hp,prefix:O.NONE[""]},J.us.PRESSURE={unit:L.psi,prefix:O.NONE[""]},J.auto=JSON.parse(JSON.stringify(J.si));var ae=J.auto;y.setUnitSystem=function(z){if(De(J,z))ae=J[z];else throw new Error("Unit system "+z+" does not exist. Choices are: "+Object.keys(J).join(", "))},y.getUnitSystem=function(){for(var z in J)if(De(J,z)&&J[z]===ae)return z},y.typeConverters={BigNumber:function(V){return V!=null&&V.isFraction?new v(V.n).div(V.d).times(V.s):new v(V+"")},Fraction:function(V){return new g(V)},Complex:function(V){return V},number:function(V){return V!=null&&V.isFraction?m(V):V}},y.prototype._numberConverter=function(){var z=y.typeConverters[this.valueType()];if(z)return z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},y._getNumberConverter=function(z){if(!y.typeConverters[z])throw new TypeError('Unsupported type "'+z+'"');return y.typeConverters[z]};for(var le in L)if(De(L,le)){var ie=L[le];ie.dimensions=ie.base.dimensions}for(var ee in X)if(De(X,ee)){var fe=L[X[ee]],we={};for(var ve in fe)De(fe,ve)&&(we[ve]=fe[ve]);we.name=ee,L[ee]=we}y.isValidAlpha=function(V){return/^[a-zA-Z]$/.test(V)};function xe(z){for(var V=0;V<z.length;V++){if(b=z.charAt(V),V===0&&!y.isValidAlpha(b))throw new Error('Invalid unit name (must begin with alpha character): "'+z+'"');if(V>0&&!(y.isValidAlpha(b)||C(b)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+z+'"')}}return y.createUnit=function(z,V){if(typeof z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(V&&V.override){for(var te in z)if(De(z,te)&&y.deleteUnit(te),z[te].aliases)for(var H=0;H<z[te].aliases.length;H++)y.deleteUnit(z[te].aliases[H])}var Y;for(var j in z)De(z,j)&&(Y=y.createUnitSingle(j,z[j]));return Y},y.createUnitSingle=function(z,V){if((typeof V>"u"||V===null)&&(V={}),typeof z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(De(L,z))throw new Error('Cannot create unit "'+z+'": a unit with that name already exists');xe(z);var te=null,H=[],Y=0,j,ce,oe;if(V&&V.type==="Unit")te=V.clone();else if(typeof V=="string")V!==""&&(j=V);else if(typeof V=="object")j=V.definition,ce=V.prefixes,Y=V.offset,oe=V.baseName,V.aliases&&(H=V.aliases.valueOf());else throw new TypeError('Cannot create unit "'+z+'" from "'+V.toString()+'": expecting "string" or "Unit" or "Object"');if(H){for(var $=0;$<H.length;$++)if(De(L,H[$]))throw new Error('Cannot create alias "'+H[$]+'": a unit with that name already exists')}if(j&&typeof j=="string"&&!te)try{te=y.parse(j,{allowNoUnits:!0})}catch(lt){throw lt.message='Could not create unit "'+z+'" from "'+j+'": '+lt.message,lt}else j&&j.type==="Unit"&&(te=j.clone());H=H||[],Y=Y||0,ce&&ce.toUpperCase?ce=O[ce.toUpperCase()]||O.NONE:ce=O.NONE;var q={};if(te){q={name:z,value:te.value,dimensions:te.dimensions.slice(0),prefixes:ce,offset:Y};var se=!1;for(var ge in F)if(De(F,ge)){for(var me=!0,be=0;be<U.length;be++)if(Math.abs((q.dimensions[be]||0)-(F[ge].dimensions[be]||0))>1e-12){me=!1;break}if(me){se=!0,q.base=F[ge];break}}if(!se){oe=oe||z+"_STUFF";var pe={dimensions:te.dimensions.slice(0)};pe.key=oe,F[oe]=pe,ae[oe]={unit:q,prefix:O.NONE[""]},q.base=F[oe]}}else{if(oe=oe||z+"_STUFF",U.indexOf(oe)>=0)throw new Error('Cannot create new base unit "'+z+'": a base unit with that name already exists (and cannot be overridden)');U.push(oe);for(var Z in F)De(F,Z)&&(F[Z].dimensions[U.length-1]=0);for(var re={dimensions:[]},ue=0;ue<U.length;ue++)re.dimensions[ue]=0;re.dimensions[U.length-1]=1,re.key=oe,F[oe]=re,q={name:z,value:1,dimensions:F[oe].dimensions.slice(0),prefixes:ce,offset:Y,base:F[oe]},ae[oe]={unit:q,prefix:O.NONE[""]}}y.UNITS[z]=q;for(var We=0;We<H.length;We++){var Ge=H[We],Ye={};for(var ze in q)De(q,ze)&&(Ye[ze]=q[ze]);Ye.name=Ge,y.UNITS[Ge]=Ye}return delete k.cache,new y(null,z)},y.deleteUnit=function(z){delete y.UNITS[z]},y.PREFIXES=O,y.BASE_DIMENSIONS=U,y.BASE_UNITS=F,y.UNIT_SYSTEMS=J,y.UNITS=L,y},{isClass:!0}),Xp="unit",Jk=["typed","Unit"],jk=P(Xp,Jk,r=>{var{typed:e,Unit:t}=r;return e(Xp,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new t(i,a)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>Ve(i,n))})}),Zp="sparse",Qk=["typed","SparseMatrix"],e5=P(Zp,Qk,r=>{var{typed:e,SparseMatrix:t}=r;return e(Zp,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,a){return new t(i,a)}})}),Jp="createUnit",t5=["typed","Unit"],r5=P(Jp,t5,r=>{var{typed:e,Unit:t}=r;return e(Jp,{"Object, Object":function(i,a){return t.createUnit(i,a)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,s){var o={};return o[i]=a,t.createUnit(o,s)},"string, Unit | string | Object":function(i,a){var s={};return s[i]=a,t.createUnit(s,{})},string:function(i){var a={};return a[i]={},t.createUnit(a,{})}})}),jp="acos",n5=["typed","config","Complex"],i5=P(jp,n5,r=>{var{typed:e,config:t,Complex:n}=r;return e(jp,{number:function(a){return a>=-1&&a<=1||t.predictable?Math.acos(a):new n(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),Qp="acosh",a5=["typed","config","Complex"],s5=P(Qp,a5,r=>{var{typed:e,config:t,Complex:n}=r;return e(Qp,{number:function(a){return a>=1||t.predictable?Vx(a):a<=-1?new n(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new n(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),eg="acot",o5=["typed","BigNumber"],u5=P(eg,o5,r=>{var{typed:e,BigNumber:t}=r;return e(eg,{number:Wx,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),tg="acoth",l5=["typed","config","Complex","BigNumber"],c5=P(tg,l5,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(tg,{number:function(s){return s>=1||s<=-1||t.predictable?Gx(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),rg="acsc",f5=["typed","config","Complex","BigNumber"],h5=P(rg,f5,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(rg,{number:function(s){return s<=-1||s>=1||t.predictable?Yx(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),ng="acsch",d5=["typed","BigNumber"],m5=P(ng,d5,r=>{var{typed:e,BigNumber:t}=r;return e(ng,{number:Kx,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),ig="asec",p5=["typed","config","Complex","BigNumber"],g5=P(ig,p5,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(ig,{number:function(s){return s<=-1||s>=1||t.predictable?Xx(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),ag="asech",v5=["typed","config","Complex","BigNumber"],y5=P(ag,v5,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(ag,{number:function(s){if(s<=1&&s>=-1||t.predictable){var o=1/s;if(o>0||t.predictable)return Zx(s);var u=Math.sqrt(o*o-1);return new n(Math.log(u-o),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),sg="asin",b5=["typed","config","Complex"],x5=P(sg,b5,r=>{var{typed:e,config:t,Complex:n}=r;return e(sg,{number:function(a){return a>=-1&&a<=1||t.predictable?Math.asin(a):new n(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),w5="asinh",A5=["typed"],D5=P(w5,A5,r=>{var{typed:e}=r;return e("asinh",{number:Jx,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),S5="atan",N5=["typed"],C5=P(S5,N5,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),og="atan2",E5=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],M5=P(og,E5,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:s}=r,o=Rr({typed:e,equalScalar:n}),u=Jt({typed:e}),l=hw({typed:e,equalScalar:n}),c=$t({typed:e,equalScalar:n}),f=Tt({typed:e,DenseMatrix:a}),h=ut({typed:e,matrix:t,concat:s});return e(og,{"number, number":Math.atan2,"BigNumber, BigNumber":(d,m)=>i.atan2(d,m)},h({scalar:"number | BigNumber",SS:l,DS:u,SD:o,Ss:c,sS:f}))}),ug="atanh",T5=["typed","config","Complex"],O5=P(ug,T5,r=>{var{typed:e,config:t,Complex:n}=r;return e(ug,{number:function(a){return a<=1&&a>=-1||t.predictable?jx(a):new n(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),ra=P("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),lg="cos",B5=["typed"],F5=P(lg,B5,r=>{var{typed:e}=r,t=ra({typed:e});return e(lg,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),cg="cosh",k5=["typed"],R5=P(cg,k5,r=>{var{typed:e}=r;return e(cg,{number:MM,"Complex | BigNumber":t=>t.cosh()})}),fg="cot",I5=["typed","BigNumber"],P5=P(fg,I5,r=>{var{typed:e,BigNumber:t}=r,n=ra({typed:e});return e(fg,{number:Qx,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),hg="coth",$5=["typed","BigNumber"],_5=P(hg,$5,r=>{var{typed:e,BigNumber:t}=r;return e(hg,{number:ew,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),dg="csc",L5=["typed","BigNumber"],z5=P(dg,L5,r=>{var{typed:e,BigNumber:t}=r,n=ra({typed:e});return e(dg,{number:tw,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),mg="csch",q5=["typed","BigNumber"],U5=P(mg,q5,r=>{var{typed:e,BigNumber:t}=r;return e(mg,{number:rw,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),pg="sec",H5=["typed","BigNumber"],V5=P(pg,H5,r=>{var{typed:e,BigNumber:t}=r,n=ra({typed:e});return e(pg,{number:nw,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),gg="sech",W5=["typed","BigNumber"],G5=P(gg,W5,r=>{var{typed:e,BigNumber:t}=r;return e(gg,{number:iw,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),vg="sin",Y5=["typed"],K5=P(vg,Y5,r=>{var{typed:e}=r,t=ra({typed:e});return e(vg,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),yg="sinh",X5=["typed"],Z5=P(yg,X5,r=>{var{typed:e}=r;return e(yg,{number:aw,"Complex | BigNumber":t=>t.sinh()})}),bg="tan",J5=["typed"],j5=P(bg,J5,r=>{var{typed:e}=r,t=ra({typed:e});return e(bg,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),Q5="tanh",eR=["typed"],tR=P(Q5,eR,r=>{var{typed:e}=r;return e("tanh",{number:OM,"Complex | BigNumber":t=>t.tanh()})}),xg="setCartesian",rR=["typed","size","subset","compareNatural","Index","DenseMatrix"],nR=P(xg,rR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(xg,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(n(t(u),new a(0))!==0&&n(t(l),new a(0))!==0){var f=Je(Array.isArray(u)?u:u.toArray()).sort(i),h=Je(Array.isArray(l)?l:l.toArray()).sort(i);c=[];for(var d=0;d<f.length;d++)for(var m=0;m<h.length;m++)c.push([f[d],h[m]])}return Array.isArray(u)&&Array.isArray(l)?c:new s(c)}})}),wg="setDifference",iR=["typed","size","subset","compareNatural","Index","DenseMatrix"],aR=P(wg,iR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(wg,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(n(t(u),new a(0))===0)c=[];else{if(n(t(l),new a(0))===0)return Je(u.toArray());var f=zi(Je(Array.isArray(u)?u:u.toArray()).sort(i)),h=zi(Je(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var d,m=0;m<f.length;m++){d=!1;for(var p=0;p<h.length;p++)if(i(f[m].value,h[p].value)===0&&f[m].identifier===h[p].identifier){d=!0;break}d||c.push(f[m])}}return Array.isArray(u)&&Array.isArray(l)?ko(c):new s(ko(c))}})}),Ag="setDistinct",sR=["typed","size","subset","compareNatural","Index","DenseMatrix"],oR=P(Ag,sR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(Ag,{"Array | Matrix":function(u){var l;if(n(t(u),new a(0))===0)l=[];else{var c=Je(Array.isArray(u)?u:u.toArray()).sort(i);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new s(l)}})}),Dg="setIntersect",uR=["typed","size","subset","compareNatural","Index","DenseMatrix"],lR=P(Dg,uR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(Dg,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(n(t(u),new a(0))===0||n(t(l),new a(0))===0)c=[];else{var f=zi(Je(Array.isArray(u)?u:u.toArray()).sort(i)),h=zi(Je(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var d=0;d<f.length;d++)for(var m=0;m<h.length;m++)if(i(f[d].value,h[m].value)===0&&f[d].identifier===h[m].identifier){c.push(f[d]);break}}return Array.isArray(u)&&Array.isArray(l)?ko(c):new s(ko(c))}})}),Sg="setIsSubset",cR=["typed","size","subset","compareNatural","Index"],fR=P(Sg,cR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(Sg,{"Array | Matrix, Array | Matrix":function(o,u){if(n(t(o),new a(0))===0)return!0;if(n(t(u),new a(0))===0)return!1;for(var l=zi(Je(Array.isArray(o)?o:o.toArray()).sort(i)),c=zi(Je(Array.isArray(u)?u:u.toArray()).sort(i)),f,h=0;h<l.length;h++){f=!1;for(var d=0;d<c.length;d++)if(i(l[h].value,c[d].value)===0&&l[h].identifier===c[d].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),Ng="setMultiplicity",hR=["typed","size","subset","compareNatural","Index"],dR=P(Ng,hR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(Ng,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,u){if(n(t(u),new a(0))===0)return 0;for(var l=Je(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)i(l[f],o)===0&&c++;return c}})}),Cg="setPowerset",mR=["typed","size","subset","compareNatural","Index"],pR=P(Cg,mR,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(Cg,{"Array | Matrix":function(l){if(n(t(l),new a(0))===0)return[];for(var c=Je(Array.isArray(l)?l:l.toArray()).sort(i),f=[],h=0;h.toString(2).length<=c.length;)f.push(s(c,h.toString(2).split("").reverse())),h++;return o(f)}});function s(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function o(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),Eg="setSize",gR=["typed","compareNatural"],vR=P(Eg,gR,r=>{var{typed:e,compareNatural:t}=r;return e(Eg,{"Array | Matrix":function(i){return Array.isArray(i)?Je(i).length:Je(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?Je(i).length:Je(i.toArray()).length;for(var s=Je(Array.isArray(i)?i:i.toArray()).sort(t),o=1,u=1;u<s.length;u++)t(s[u],s[u-1])!==0&&o++;return o}})}),Mg="setSymDifference",yR=["typed","size","concat","subset","setDifference","Index"],bR=P(Mg,yR,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:a,Index:s}=r;return e(Mg,{"Array | Matrix, Array | Matrix":function(u,l){if(i(t(u),new s(0))===0)return Je(l);if(i(t(l),new s(0))===0)return Je(u);var c=Je(u),f=Je(l);return n(a(c,f),a(f,c))}})}),Tg="setUnion",xR=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],wR=P(Tg,xR,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:a,setSymDifference:s,Index:o}=r;return e(Tg,{"Array | Matrix, Array | Matrix":function(l,c){if(i(t(l),new o(0))===0)return Je(c);if(i(t(c),new o(0))===0)return Je(l);var f=Je(l),h=Je(c);return n(s(f,h),a(f,h))}})}),Og="add",AR=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],DR=P(Og,AR,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=r,u=zn({typed:e}),l=xf({typed:e,equalScalar:i}),c=li({typed:e,DenseMatrix:a}),f=ut({typed:e,matrix:t,concat:o});return e(Og,{"any, any":n,"any, any, ...any":e.referToSelf(h=>(d,m,p)=>{for(var v=h(d,m),g=0;g<p.length;g++)v=h(v,p[g]);return v})},f({elop:n,DS:u,SS:l,Ss:c}))}),Bg="hypot",SR=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],NR=P(Bg,SR,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:s,smaller:o,isPositive:u}=r;return e(Bg,{"... number | BigNumber":l,Array:l,Matrix:c=>l(Je(c.toArray()))});function l(c){for(var f=0,h=0,d=0;d<c.length;d++){if(Er(c[d]))throw new TypeError("Unexpected type of argument to hypot");var m=t(c[d]);o(h,m)?(f=a(f,a(i(h,m),i(h,m))),f=n(f,1),h=m):f=n(f,u(m)?a(i(m,h),i(m,h)):m)}return a(h,s(f))}}),Fg="norm",CR=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],ER=P(Fg,CR,r=>{var{typed:e,abs:t,add:n,pow:i,conj:a,sqrt:s,multiply:o,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:h,eigs:d}=r;return e(Fg,{number:Math.abs,Complex:function(N){return N.abs()},BigNumber:function(N){return N.abs()},boolean:function(N){return Math.abs(N)},Array:function(N){return b(f(N),2)},Matrix:function(N){return b(N,2)},"Array, number | BigNumber | string":function(N,C){return b(f(N),C)},"Matrix, number | BigNumber | string":function(N,C){return b(N,C)}});function m(D){var N=0;return D.forEach(function(C){var S=t(C);l(S,N)&&(N=S)},!0),N}function p(D){var N;return D.forEach(function(C){var S=t(C);(!N||c(S,N))&&(N=S)},!0),N||0}function v(D,N){if(N===Number.POSITIVE_INFINITY||N==="inf")return m(D);if(N===Number.NEGATIVE_INFINITY||N==="-inf")return p(D);if(N==="fro")return b(D,2);if(typeof N=="number"&&!isNaN(N)){if(!u(N,0)){var C=0;return D.forEach(function(S){C=n(i(t(S),N),C)},!0),i(C,1/N)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function g(D){var N=0;return D.forEach(function(C,S){N=n(N,o(C,a(C)))}),t(s(N))}function A(D){var N=[],C=0;return D.forEach(function(S,M){var E=M[1],R=n(N[E]||0,t(S));l(R,C)&&(C=R),N[E]=R},!0),C}function y(D){var N=D.size();if(N[0]!==N[1])throw new RangeError("Invalid matrix dimensions");var C=h(D),S=o(C,D),M=d(S).values.toArray(),E=M[M.length-1];return t(s(E))}function w(D){var N=[],C=0;return D.forEach(function(S,M){var E=M[0],R=n(N[E]||0,t(S));l(R,C)&&(C=R),N[E]=R},!0),C}function x(D,N){if(N===1)return A(D);if(N===Number.POSITIVE_INFINITY||N==="inf")return w(D);if(N==="fro")return g(D);if(N===2)return y(D);throw new Error("Unsupported parameter value "+N)}function b(D,N){var C=D.size();if(C.length===1)return v(D,N);if(C.length===2){if(C[0]&&C[1])return x(D,N);throw new RangeError("Invalid matrix dimensions")}}}),kg="dot",MR=["typed","addScalar","multiplyScalar","conj","size"],TR=P(kg,MR,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:a}=r;return e(kg,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":u});function s(c,f){var h=l(c),d=l(f),m,p;if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m!==p)throw new RangeError("Vectors must have equal length ("+m+" != "+p+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function o(c,f){var h=s(c,f),d=Oe(c)?c._data:c,m=Oe(c)?c._datatype:void 0,p=Oe(f)?f._data:f,v=Oe(f)?f._datatype:void 0,g=l(c).length===2,A=l(f).length===2,y=t,w=n;if(m&&v&&m===v&&typeof m=="string"){var x=m;y=e.find(t,[x,x]),w=e.find(n,[x,x])}if(!g&&!A){for(var b=w(i(d[0]),p[0]),D=1;D<h;D++)b=y(b,w(i(d[D]),p[D]));return b}if(!g&&A){for(var N=w(i(d[0]),p[0][0]),C=1;C<h;C++)N=y(N,w(i(d[C]),p[C][0]));return N}if(g&&!A){for(var S=w(i(d[0][0]),p[0]),M=1;M<h;M++)S=y(S,w(i(d[M][0]),p[M]));return S}if(g&&A){for(var E=w(i(d[0][0]),p[0][0]),R=1;R<h;R++)E=y(E,w(i(d[R][0]),p[R][0]));return E}}function u(c,f){s(c,f);for(var h=c._index,d=c._values,m=f._index,p=f._values,v=0,g=t,A=n,y=0,w=0;y<h.length&&w<m.length;){var x=h[y],b=m[w];if(x<b){y++;continue}if(x>b){w++;continue}x===b&&(v=g(v,A(d[y],p[w])),y++,w++)}return v}function l(c){return Oe(c)?c.size():a(c)}}),OR="trace",BR=["typed","matrix","add"],FR=P(OR,BR,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:a,DenseMatrix:i,any:Be});function i(s){var o=s._size,u=s._data;switch(o.length){case 1:if(o[0]===1)return Be(u[0]);throw new RangeError("Matrix must be square (size: "+qe(o)+")");case 2:{var l=o[0],c=o[1];if(l===c){for(var f=0,h=0;h<l;h++)f=n(f,u[h][h]);return f}else throw new RangeError("Matrix must be square (size: "+qe(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+qe(o)+")")}}function a(s){var o=s._values,u=s._index,l=s._ptr,c=s._size,f=c[0],h=c[1];if(f===h){var d=0;if(o.length>0)for(var m=0;m<h;m++)for(var p=l[m],v=l[m+1],g=p;g<v;g++){var A=u[g];if(A===m){d=n(d,o[g]);break}if(A>m)break}return d}throw new RangeError("Matrix must be square (size: "+qe(c)+")")}}),Rg="index",kR=["typed","Index"],RR=P(Rg,kR,r=>{var{typed:e,Index:t}=r;return e(Rg,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(o){return Ue(o)?o.toNumber():je(o)||Oe(o)?o.map(function(u){return Ue(u)?u.toNumber():u}):o}),s=new t;return t.apply(s,a),s}})}),Nw=new Set(["end"]),IR="Node",PR=["mathWithTransform"],$R=P(IR,PR,r=>{var{mathWithTransform:e}=r;function t(i){for(var a of[...Nw])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),s={},o=null;function u(l){var c=Oi(l);return t(c),a(c,s,o)}return{evaluate:u}}_compile(a,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!tt(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function s(o,u){o.forEach(function(l,c,f){u(l,c,f),s(l,u)})}s(this,a)}transform(a){function s(o,u,l){var c=a(o,u,l);return c!==o?c:o.map(s)}return s(this,null,null)}filter(a){var s=[];return this.traverse(function(o,u,l){a(o,u,l)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&ri(this,a):!1}toString(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toString(a)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var s=this._getCustomString(a);return typeof s<"u"?s:this.toHTML(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toTex(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function jt(r){return r&&r.isIndexError?new Ar(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function Cw(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Kt(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw jt(a)}}}var ks="AccessorNode",_R=["subset","Node"],LR=P(ks,_R,r=>{var{subset:e,Node:t}=r,n=Cw({subset:e});function i(s){return!(In(s)||lr(s)||Xe(s)||cn(s)||ns(s)||Gr(s)||Ct(s))}class a extends t{constructor(o,u){if(super(),!tt(o))throw new TypeError('Node expected for parameter "object"');if(!oi(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return ks}get isAccessorNode(){return!0}_compile(o,u){var l=this.object._compile(o,u),c=this.index._compile(o,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(d,m,p){return Kt(l(d,m,p),f)}}else return function(d,m,p){var v=l(d,m,p),g=c(d,m,v);return n(v,g)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(o){var u=this.object.toString(o);return i(this.object)&&(u="("+u+")"),u+this.index.toString(o)}toHTML(o){var u=this.object.toHTML(o);return i(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(o)}_toTex(o){var u=this.object.toTex(o);return i(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(o)}toJSON(){return{mathjs:ks,object:this.object,index:this.index}}static fromJSON(o){return new a(o.object,o.index)}}return Et(a,"name",ks),a},{isClass:!0,isNode:!0}),Rs="ArrayNode",zR=["Node"],qR=P(Rs,zR,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(tt))throw new TypeError("Array containing Nodes expected")}get type(){return Rs}get isArrayNode(){return!0}_compile(i,a){var s=an(this.items,function(l){return l._compile(i,a)}),o=i.config.matrix!=="Array";if(o){var u=i.matrix;return function(c,f,h){return u(an(s,function(d){return d(c,f,h)}))}}else return function(c,f,h){return an(s,function(d){return d(c,f,h)})}}forEach(i){for(var a=0;a<this.items.length;a++){var s=this.items[a];i(s,"items["+a+"]",this)}}map(i){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new t(a)}clone(){return new t(this.items.slice(0))}_toString(i){var a=this.items.map(function(s){return s.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:Rs,items:this.items}}static fromJSON(i){return new t(i.items)}toHTML(i){var a=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(s,o){var u=s.some(lr)&&!s.every(lr),l=o||u,c=l?"&":"\\\\",f=s.map(function(h){return h.items?a(h.items,!o):h.toTex(i)}).join(c);return u||!l||l&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return Et(t,"name",Rs),t},{isClass:!0,isNode:!0});function UR(r){var{subset:e,matrix:t}=r;return function(i,a,s){try{if(Array.isArray(i)){var o=t(i).subset(a,s).valueOf();return o.forEach((u,l)=>{i[l]=u}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,s);if(typeof i=="string")return e(i,a,s);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return qi(i,a.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw jt(u)}}}var Dr=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function Is(r,e){if(!e||e!=="auto")return r;for(var t=r;Gr(t);)t=t.content;return t}function st(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var a=i.getIdentifier(),s=null,o=0;o<Dr.length;o++)if(a in Dr[o]){s=o;break}if(a==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var u=Is(i.args[0],e);!(Xe(u)&&n&&n.getIdentifier()==="OperatorNode:divide"&&oc(Is(n.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&oc(Is(u.args[0],e))&&Xe(Is(u.args[1])))&&(s+=1)}return s}function ha(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=st(t,e);if(i===null)return null;var a=Dr[i][n];if(De(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function al(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,a=n.getIdentifier(),s=i.getIdentifier(),o=st(n,t);if(o===null)return null;var u=Dr[o][a];if(De(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===s)return!0;return!1}return null}function HR(r){var e="OperatorNode:"+r;for(var t of Dr)if(e in t)return t[e].op;return null}var Ps="AssignmentNode",VR=["subset","?matrix","Node"],WR=P(Ps,VR,r=>{var{subset:e,matrix:t,Node:n}=r,i=Cw({subset:e}),a=UR({subset:e,matrix:t});function s(u,l,c){l||(l="keep");var f=st(u,l,c),h=st(u.value,l,c);return l==="all"||h!==null&&h<=f}class o extends n{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!Ct(l)&&!In(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Ct(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!oi(this.index))throw new TypeError('IndexNode expected as "index"');if(!tt(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Ps}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),h=this.index?this.index._compile(l,c):null,d=this.value._compile(l,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var p=this.index.getObjectProperty();return function(w,x,b){var D=f(w,x,b),N=d(w,x,b);return qi(D,p,N),N}}else{if(Ct(this.object))return function(w,x,b){var D=f(w,x,b),N=d(w,x,b),C=h(w,x,D);return w.set(m,a(D,C,N)),N};var v=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var g=this.object.index.getObjectProperty();return function(w,x,b){var D=v(w,x,b),N=Kt(D,g),C=h(w,x,N),S=d(w,x,b);return qi(D,g,a(N,C,S)),S}}else{var A=this.object.index._compile(l,c);return function(w,x,b){var D=v(w,x,b),N=A(w,x,D),C=i(D,N),S=h(w,x,C),M=d(w,x,b);return a(D,N,a(C,S,M)),M}}}else{if(!Ct(this.object))throw new TypeError("SymbolNode expected as object");return function(w,x,b){var D=d(w,x,b);return w.set(m,D),D}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,h=this._ifNode(l(this.value,"value",this));return new o(c,f,h)}clone(){return new o(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",h=this.value.toString(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(h="("+h+")"),c+f+" = "+h}toJSON(){return{mathjs:Ps,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new o(l.object,l.index,l.value)}toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",h=this.value.toHTML(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(h='<span class="math-paranthesis math-round-parenthesis">(</span>'+h+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+h}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",h=this.value.toTex(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(h="\\left(".concat(h,"\\right)")),c+f+":="+h}}return Et(o,"name",Ps),o},{isClass:!0,isNode:!0}),$s="BlockNode",GR=["ResultSet","Node"],YR=P($s,GR,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,u=s&&s.visible!==void 0?s.visible:!0;if(!tt(o))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:u}})}get type(){return $s}get isBlockNode(){return!0}_compile(a,s){var o=an(this.blocks,function(u){return{evaluate:u.node._compile(a,s),visible:u.visible}});return function(l,c,f){var h=[];return yu(o,function(m){var p=m.evaluate(l,c,f);m.visible&&h.push(p)}),new e(h)}}forEach(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)}map(a){for(var s=[],o=0;o<this.blocks.length;o++){var u=this.blocks[o],l=this._ifNode(a(u.node,"blocks["+o+"].node",this));s[o]={node:l,visible:u.visible}}return new n(s)}clone(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(a)}_toString(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:$s,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}toHTML(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Et(n,"name",$s),n},{isClass:!0,isNode:!0}),_s="ConditionalNode",KR=["Node"],XR=P(_s,KR,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Ue(i))return!i.isZero();if(Er(i))return!!(i.re||i.im);if(tr(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+ot(i)+'"')}class n extends e{constructor(a,s,o){if(super(),!tt(a))throw new TypeError("Parameter condition must be a Node");if(!tt(s))throw new TypeError("Parameter trueExpr must be a Node");if(!tt(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}get type(){return _s}get isConditionalNode(){return!0}_compile(a,s){var o=this.condition._compile(a,s),u=this.trueExpr._compile(a,s),l=this.falseExpr._compile(a,s);return function(f,h,d){return t(o(f,h,d))?u(f,h,d):l(f,h,d)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=st(this,s,a&&a.implicit),u=this.condition.toString(a),l=st(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u="("+u+")");var c=this.trueExpr.toString(a),f=st(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var h=this.falseExpr.toString(a),d=st(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h="("+h+")"),u+" ? "+c+" : "+h}toJSON(){return{mathjs:_s,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=st(this,s,a&&a.implicit),u=this.condition.toHTML(a),l=st(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=st(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var h=this.falseExpr.toHTML(a),d=st(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+h}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Et(n,"name",_s),n},{isClass:!0,isNode:!0}),bc=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ZR={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},JR={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},jR=function(e,t){return bc({},e,t)},QR=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,a=i===void 0?jR:i,s=String(r),o="",u=a(bc({},ZR),n?bc({},JR):{}),l=Object.keys(u),c=function(){var h=!1;l.forEach(function(d,m){h||s.length>=d.length&&s.slice(0,d.length)===d&&(o+=u[l[m]],s=s.slice(d.length,s.length),h=!0)}),h||(o+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return o};const eI=Ji(QR);var xc={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Ze={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},Ig={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Ze.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Ze.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Ze.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Ze.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Ze.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Ze.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Ze.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Ze.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Ze.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Ze.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Ze.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Ze.bitAnd,"${args[1]}\\right)")},bitNot:{1:Ze.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Ze.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Ze.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Ze.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Ze.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Ze.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Ze.and,"${args[1]}\\right)")},not:{1:Ze.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Ze.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Ze.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Ze.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Ze.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Ze.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Ze.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Ze.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Ze.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Ze.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Ze.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Ze.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Ze.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Ze.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(xc.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},tI="\\mathrm{${name}}\\left(${args}\\right)",Pg={deg:"^\\circ"};function wc(r){return eI(r,{preserveFormatting:!0})}function Ew(r,e){return e=typeof e>"u"?!1:e,e?De(Pg,r)?Pg[r]:"\\mathrm{"+wc(r)+"}":De(xc,r)?xc[r]:wc(r)}var Ls="ConstantNode",rI=["Node"],nI=P(Ls,rI,r=>{var{Node:e}=r;class t extends e{constructor(i){super(),this.value=i}get type(){return Ls}get isConstantNode(){return!0}_compile(i,a){var s=this.value;return function(){return s}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return qe(this.value,i)}toHTML(i){var a=this._toString(i);switch(ot(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:Ls,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var a=this._toString(i);switch(ot(this.value)){case"string":return"\\mathtt{"+wc(a)+"}";case"number":case"BigNumber":{if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var s=a.toLowerCase().indexOf("e");if(s!==-1)return a.substring(0,s)+"\\cdot10^{"+a.substring(s+1)+"}"}return a;case"Fraction":return this.value.toLatex();default:return a}}}return Et(t,"name",Ls),t},{isClass:!0,isNode:!0}),zs="FunctionAssignmentNode",iI=["typed","Node"],aI=P(zs,iI,r=>{var{typed:e,Node:t}=r;function n(a,s,o){var u=st(a,s,o),l=st(a.expr,s,o);return s==="all"||l!==null&&l<=u}class i extends t{constructor(s,o,u){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!tt(u))throw new TypeError('Node expected for parameter "expr"');if(Nw.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var l=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=s,this.params=o.map(function(h){return h&&h.name||h}),this.types=o.map(function(h){return h&&h.type||"any"}),this.expr=u}get type(){return zs}get isFunctionAssignmentNode(){return!0}_compile(s,o){var u=Object.create(o);yu(this.params,function(m){u[m]=!0});var l=this.expr._compile(s,u),c=this.name,f=this.params,h=Bd(this.types,","),d=c+"("+Bd(this.params,", ")+")";return function(p,v,g){var A={};A[h]=function(){for(var w=Object.create(v),x=0;x<f.length;x++)w[f[x]]=arguments[x];return l(p,w,g)};var y=e(c,A);return y.syntax=d,p.set(c,y),y}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toString(s);return n(this,o,s&&s.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var s=this.types;return{mathjs:zs,name:this.name,params:this.params.map(function(o,u){return{name:o,type:s[u]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+vr(this.params[l])+"</span>");var c=this.expr.toHTML(s);return n(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+vr(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toTex(s);return n(this,o,s&&s.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(Ew).join(",")+"\\right):="+u}}return Et(i,"name",zs),i},{isClass:!0,isNode:!0}),qs="IndexNode",sI=["Node","size"],oI=P(qs,sI,r=>{var{Node:e,size:t}=r;class n extends e{constructor(a,s){if(super(),this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(tt))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return qs}get isIndexNode(){return!0}_compile(a,s){var o=an(this.dimensions,function(l,c){var f=l.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var h=Object.create(s);h.end=!0;var d=l._compile(a,h);return function(p,v,g){if(!Oe(g)&&!je(g)&&!It(g))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+ot(g));var A=t(g).valueOf(),y=Object.create(v);return y.end=A[c],d(p,y,g)}}else return l._compile(a,s)}),u=Kt(a,"index");return function(c,f,h){var d=an(o,function(m){return m(c,f,h)});return u(...d)}}forEach(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)}map(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(a(this.dimensions[o],"dimensions["+o+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Xe(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:qs,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}toHTML(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+vr(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var s=this.dimensions.map(function(o){return o.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Et(n,"name",qs),n},{isClass:!0,isNode:!0}),Us="ObjectNode",uI=["Node"],lI=P(Us,uI,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return tt(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return Us}get isObjectNode(){return!0}_compile(i,a){var s={};for(var o in this.properties)if(De(this.properties,o)){var u=Os(o),l=JSON.parse(u),c=Kt(this.properties,o);s[l]=c._compile(i,a)}return function(h,d,m){var p={};for(var v in s)De(s,v)&&(p[v]=s[v](h,d,m));return p}}forEach(i){for(var a in this.properties)De(this.properties,a)&&i(this.properties[a],"properties["+Os(a)+"]",this)}map(i){var a={};for(var s in this.properties)De(this.properties,s)&&(a[s]=this._ifNode(i(this.properties[s],"properties["+Os(s)+"]",this)));return new t(a)}clone(){var i={};for(var a in this.properties)De(this.properties,a)&&(i[a]=this.properties[a]);return new t(i)}_toString(i){var a=[];for(var s in this.properties)De(this.properties,s)&&a.push(Os(s)+": "+this.properties[s].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:Us,properties:this.properties}}static fromJSON(i){return new t(i.properties)}toHTML(i){var a=[];for(var s in this.properties)De(this.properties,s)&&a.push('<span class="math-symbol math-property">'+vr(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var s in this.properties)De(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return o}}return Et(t,"name",Us),t},{isClass:!0,isNode:!0}),Hs="OperatorNode",cI=["Node"],fI=P(Hs,cI,r=>{var{Node:e}=r;function t(a,s){var o=a;if(s==="auto")for(;Gr(o);)o=o.content;return Xe(o)?!0:xt(o)?t(o.args[0],s):!1}function n(a,s,o,u,l){var c=st(a,s,o),f=ha(a,s);if(s==="all"||u.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return u.map(function(S){switch(S.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var h;switch(u.length){case 0:h=[];break;case 1:{var d=st(u[0],s,o,a);if(l&&d!==null){var m,p;if(s==="keep"?(m=u[0].getIdentifier(),p=a.getIdentifier()):(m=u[0].getContent().getIdentifier(),p=a.getContent().getIdentifier()),Dr[c][p].latexLeftParens===!1){h=[!1];break}if(Dr[d][m].latexParens===!1){h=[!1];break}}if(d===null){h=[!1];break}if(d<=c){h=[!0];break}h=[!1]}break;case 2:{var v,g=st(u[0],s,o,a),A=al(a,u[0],s);g===null?v=!1:g===c&&f==="right"&&!A||g<c?v=!0:v=!1;var y,w=st(u[1],s,o,a),x=al(a,u[1],s);if(w===null?y=!1:w===c&&f==="left"&&!x||w<c?y=!0:y=!1,l){var b,D,N;s==="keep"?(b=a.getIdentifier(),D=a.args[0].getIdentifier(),N=a.args[1].getIdentifier()):(b=a.getContent().getIdentifier(),D=a.args[0].getContent().getIdentifier(),N=a.args[1].getContent().getIdentifier()),g!==null&&(Dr[c][b].latexLeftParens===!1&&(v=!1),Dr[g][D].latexParens===!1&&(v=!1)),w!==null&&(Dr[c][b].latexRightParens===!1&&(y=!1),Dr[w][N].latexParens===!1&&(y=!1))}h=[v,y]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(h=u.map(function(S){var M=st(S,s,o,a),E=al(a,S,s),R=ha(S,s);return M===null?!1:c===M&&f===R&&!E?!0:M<c}));break}if(u.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s!=="all"&&o==="hide")for(var C=1;C<h.length;++C)t(u[C],s)&&!h[C-1]&&(s!=="keep"||!Gr(u[C-1]))&&(h[C]=!0);return h}class i extends e{constructor(s,o,u,l,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(tt))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=u||[]}get type(){return Hs}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!mf(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=Kt(s,this.fn),l=an(this.args,function(d){return d._compile(s,o)});if(l.length===1){var c=l[0];return function(m,p,v){return u(c(m,p,v))}}else if(l.length===2){var f=l[0],h=l[1];return function(m,p,v){return u(f(m,p,v),h(m,p,v))}}else return function(m,p,v){return u.apply(null,an(l,function(g){return g(m,p,v)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],u=0;u<this.args.length;u++)o[u]=this._ifNode(s(this.args[u],"args["+u+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=n(this,o,u,l,!1);if(l.length===1){var f=ha(this,o),h=l[0].toString(s);c[0]&&(h="("+h+")");var d=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(d?" ":"")+h:f==="left"?h+(d?" ":"")+this.op:h+this.op}else if(l.length===2){var m=l[0].toString(s),p=l[1].toString(s);return c[0]&&(m="("+m+")"),c[1]&&(p="("+p+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+" "+p:m+" "+this.op+" "+p}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var v=l.map(function(g,A){return g=g.toString(s),c[A]&&(g="("+g+")"),g});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?v.join(" "):v.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Hs,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=n(this,o,u,l,!1);if(l.length===1){var f=ha(this,o),h=l[0].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+vr(this.op)+"</span>"+h:h+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+vr(this.op)+"</span>"}else if(l.length===2){var d=l[0].toHTML(s),m=l[1].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?d+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:d+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+vr(this.op)+"</span>"+m}else{var p=l.map(function(v,g){return v=v.toHTML(s),c[g]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),v});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?p.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):p.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+vr(this.op)+"</span>"):'<span class="math-function">'+vr(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+p.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=n(this,o,u,l,!0),f=Ze[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var h=ha(this,o),d=l[0].toTex(s);return c[0]&&(d="\\left(".concat(d,"\\right)")),h==="right"?f+d:d+f}else if(l.length===2){var m=l[0],p=m.toTex(s);c[0]&&(p="\\left(".concat(p,"\\right)"));var v=l[1],g=v.toTex(s);c[1]&&(g="\\left(".concat(g,"\\right)"));var A;switch(o==="keep"?A=m.getIdentifier():A=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+p+"}{"+g+"}";case"OperatorNode:pow":switch(p="{"+p+"}",g="{"+g+"}",A){case"ConditionalNode":case"OperatorNode:divide":p="\\left(".concat(p,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return p+"~"+g}return p+f+g}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(w,x){return w=w.toTex(s),c[x]&&(w="\\left(".concat(w,"\\right)")),w});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?y.join("~"):y.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(w){return w.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Et(i,"name",Hs),i},{isClass:!0,isNode:!0}),Vs="ParenthesisNode",hI=["Node"],dI=P(Vs,hI,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!tt(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return Vs}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new t(a)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:Vs,content:this.content}}static fromJSON(i){return new t(i.content)}toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return Et(t,"name",Vs),t},{isClass:!0,isNode:!0}),Ws="RangeNode",mI=["Node"],pI=P(Ws,mI,r=>{var{Node:e}=r;function t(i,a,s){var o=st(i,a,s),u={},l=st(i.start,a,s);if(u.start=l!==null&&l<=o||a==="all",i.step){var c=st(i.step,a,s);u.step=c!==null&&c<=o||a==="all"}var f=st(i.end,a,s);return u.end=f!==null&&f<=o||a==="all",u}class n extends e{constructor(a,s,o){if(super(),!tt(a))throw new TypeError("Node expected");if(!tt(s))throw new TypeError("Node expected");if(o&&!tt(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}get type(){return Ws}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(s){return Ct(s)&&s.name==="end"});return a.length>0}_compile(a,s){var o=a.range,u=this.start._compile(a,s),l=this.end._compile(a,s);if(this.step){var c=this.step._compile(a,s);return function(h,d,m){return o(u(h,d,m),l(h,d,m),c(h,d,m))}}else return function(h,d,m){return o(u(h,d,m),l(h,d,m))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),u,l=this.start.toString(a);if(o.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(a);o.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(a);return o.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:Ws,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),u,l=this.start.toHTML(a);if(o.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(a);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),u=this.start.toTex(a);if(o.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(a);o.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(a);return o.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Et(n,"name",Ws),n},{isClass:!0,isNode:!0}),Gs="RelationalNode",gI=["Node"],vI=P(Gs,gI,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,s){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(a.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=s}get type(){return Gs}get isRelationalNode(){return!0}_compile(a,s){var o=this,u=this.params.map(l=>l._compile(a,s));return function(c,f,h){for(var d,m=u[0](c,f,h),p=0;p<o.conditionals.length;p++){d=m,m=u[p+1](c,f,h);var v=Kt(a,o.conditionals[p]);if(!v(d,m))return!1}return!0}}forEach(a){this.params.forEach((s,o)=>a(s,"params["+o+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(a(s,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=st(this,s,a&&a.implicit),u=this.params.map(function(f,h){var d=st(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?"("+f.toString(a)+")":f.toString(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+t[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:Gs,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=st(this,s,a&&a.implicit),u=this.params.map(function(f,h){var d=st(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+vr(t[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=st(this,s,a&&a.implicit),u=this.params.map(function(f,h){var d=st(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=Ze[this.conditionals[c]]+u[c+1];return l}}return Et(n,"name",Gs),n},{isClass:!0,isNode:!0}),yI="SymbolNode",bI=["math","?Unit","Node"],xI=P(yI,bI,r=>{var{math:e,Unit:t,Node:n}=r;function i(s){return t?t.isValuelessUnit(s):!1}class a extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,u){var l=this.name;if(u[l]===!0)return function(f,h,d){return Kt(h,l)};if(l in o)return function(f,h,d){return f.has(l)?f.get(l):Kt(o,l)};var c=i(l);return function(f,h,d){return f.has(l)?f.get(l):c?new t(null,l):a.onUndefinedSymbol(l)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new a(this.name)}_toString(o){return this.name}toHTML(o){var u=vr(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new a(o.name)}_toTex(o){var u=!1;typeof e[this.name]>"u"&&i(this.name)&&(u=!0);var l=Ew(this.name,u);return l[0]==="\\"?l:" "+l}}return a},{isClass:!0,isNode:!0});function wa(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return typeof r.createSubScope=="function"?Rd(r.createSubScope(),...t):Rd(Ui(),r,...t)}var Ys="FunctionNode",wI=["math","Node","SymbolNode"],AI=P(Ys,wI,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,a=u=>qe(u,{truncate:78});function s(u,l,c){for(var f="",h=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,d=0,m;(m=h.exec(u))!==null;)if(f+=u.substring(d,m.index),d=m.index,m[0]==="$$")f+="$",d++;else{d+=m[0].length;var p=l[m[1]];if(!p)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof p){case"string":f+=p;break;case"object":if(tt(p))f+=p.toTex(c);else if(Array.isArray(p))f+=p.map(function(v,g){if(tt(v))return v.toTex(c);throw new TypeError("Template: "+m[1]+"["+g+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(tt(p[m[2]]&&p[m[2]]))f+=p[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=u.slice(d),f}class o extends n{constructor(l,c){if(super(),typeof l=="string"&&(l=new i(l)),!tt(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(tt))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return Ys}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(N=>N._compile(l,c));if(Ct(this.fn)){var h=this.fn.name;if(c[h]){var g=this.args;return function(C,S,M){var E=Kt(S,h);if(typeof E!="function")throw new TypeError("Argument '".concat(h,"' was not a function; received: ").concat(a(E)));if(E.rawArgs)return E(g,l,wa(C,S),C);var R=f.map(I=>I(C,S,M));return E.apply(E,R)}}else{var d=h in l?Kt(l,h):void 0,m=typeof d=="function"&&d.rawArgs===!0,p=N=>{var C;if(N.has(h))C=N.get(h);else if(h in l)C=Kt(l,h);else return o.onUndefinedFunction(h);if(typeof C=="function")return C;throw new TypeError("'".concat(h,`' is not a function; its value is:
  `).concat(a(C)))};if(m){var v=this.args;return function(C,S,M){var E=p(C);return E(v,l,wa(C,S),C)}}else switch(f.length){case 0:return function(C,S,M){var E=p(C);return E()};case 1:return function(C,S,M){var E=p(C),R=f[0];return E(R(C,S,M))};case 2:return function(C,S,M){var E=p(C),R=f[0],I=f[1];return E(R(C,S,M),I(C,S,M))};default:return function(C,S,M){var E=p(C),R=f.map(I=>I(C,S,M));return E(...R)}}}}else if(In(this.fn)&&oi(this.fn.index)&&this.fn.index.isObjectProperty()){var A=this.fn.object._compile(l,c),y=this.fn.index.getObjectProperty(),w=this.args;return function(C,S,M){var E=A(C,S,M),R=WM(E,y);if(R!=null&&R.rawArgs)return R(w,l,wa(C,S),C);var I=f.map(k=>k(C,S,M));return R.apply(E,I)}}else{var x=this.fn.toString(),b=this.fn._compile(l,c),D=this.args;return function(C,S,M){var E=b(C,S,M);if(typeof E!="function")throw new TypeError("Expression '".concat(x,"' did not evaluate to a function; value is:")+`
  `.concat(a(E)));if(E.rawArgs)return E(D,l,wa(C,S),C);var R=f.map(I=>I(C,S,M));return E.apply(E,R)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],h=0;h<this.args.length;h++)f[h]=this._ifNode(l(this.args[h],"args["+h+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&De(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(h){return h.toString(l)}),f=Zi(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:Ys,fn:this.fn,args:this.args}}toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+vr(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&De(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(d){return d.toTex(l)}),f;Ig[this.name]&&(f=Ig[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(f=t[this.name].toTex);var h;switch(typeof f){case"function":h=f(this,l);break;case"string":h=s(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":h=f[c.length](this,l);break;case"string":h=s(f[c.length],this,l);break}}return typeof h<"u"?h:s(tI,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=o,Et(o,"name",Ys),Et(o,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Et(o,"fromJSON",function(u){return new e(u.fn,u.args)}),o},{isClass:!0,isNode:!0}),$g="parse",DI=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],SI=P($g,DI,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:s,BlockNode:o,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:h,ObjectNode:d,OperatorNode:m,ParenthesisNode:p,RangeNode:v,RelationalNode:g,SymbolNode:A}=r,y=e($g,{string:function(W){return _(W,{})},"Array | Matrix":function(W){return w(W,{})},"string, Object":function(W,ne){var ye=ne.nodes!==void 0?ne.nodes:{};return _(W,ye)},"Array | Matrix, Object":w});function w(B){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=W.nodes!==void 0?W.nodes:{};return Ve(B,function(ye){if(typeof ye!="string")throw new TypeError("String expected");return _(ye,ne)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},b={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},D={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},N={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"];function S(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function M(B,W){return B.expression.substr(B.index,W)}function E(B){return M(B,1)}function R(B){B.index++}function I(B){return B.expression.charAt(B.index-1)}function k(B){return B.expression.charAt(B.index+1)}function T(B){for(B.tokenType=x.NULL,B.token="",B.comment="";;){if(E(B)==="#")for(;E(B)!==`
`&&E(B)!=="";)B.comment+=E(B),R(B);if(y.isWhitespace(E(B),B.nestingLevel))R(B);else break}if(E(B)===""){B.tokenType=x.DELIMITER;return}if(E(B)===`
`&&!B.nestingLevel){B.tokenType=x.DELIMITER,B.token=E(B),R(B);return}var W=E(B),ne=M(B,2),ye=M(B,3);if(ye.length===3&&b[ye]){B.tokenType=x.DELIMITER,B.token=ye,R(B),R(B),R(B);return}if(ne.length===2&&b[ne]){B.tokenType=x.DELIMITER,B.token=ne,R(B),R(B);return}if(b[W]){B.tokenType=x.DELIMITER,B.token=W,R(B);return}if(y.isDigitDot(W)){B.tokenType=x.NUMBER;var $e=M(B,2);if($e==="0b"||$e==="0o"||$e==="0x"){for(B.token+=E(B),R(B),B.token+=E(B),R(B);y.isHexDigit(E(B));)B.token+=E(B),R(B);if(E(B)===".")for(B.token+=".",R(B);y.isHexDigit(E(B));)B.token+=E(B),R(B);else if(E(B)==="i")for(B.token+="i",R(B);y.isDigit(E(B));)B.token+=E(B),R(B);return}if(E(B)==="."){if(B.token+=E(B),R(B),!y.isDigit(E(B))){B.tokenType=x.DELIMITER;return}}else{for(;y.isDigit(E(B));)B.token+=E(B),R(B);y.isDecimalMark(E(B),k(B))&&(B.token+=E(B),R(B))}for(;y.isDigit(E(B));)B.token+=E(B),R(B);if(E(B)==="E"||E(B)==="e"){if(y.isDigit(k(B))||k(B)==="-"||k(B)==="+"){if(B.token+=E(B),R(B),(E(B)==="+"||E(B)==="-")&&(B.token+=E(B),R(B)),!y.isDigit(E(B)))throw ze(B,'Digit expected, got "'+E(B)+'"');for(;y.isDigit(E(B));)B.token+=E(B),R(B);if(y.isDecimalMark(E(B),k(B)))throw ze(B,'Digit expected, got "'+E(B)+'"')}else if(k(B)===".")throw R(B),ze(B,'Digit expected, got "'+E(B)+'"')}return}if(y.isAlpha(E(B),I(B),k(B))){for(;y.isAlpha(E(B),I(B),k(B))||y.isDigit(E(B));)B.token+=E(B),R(B);De(D,B.token)?B.tokenType=x.DELIMITER:B.tokenType=x.SYMBOL;return}for(B.tokenType=x.UNKNOWN;E(B)!=="";)B.token+=E(B),R(B);throw ze(B,'Syntax error in part "'+B.token+'"')}function O(B){do T(B);while(B.token===`
`)}function U(B){B.nestingLevel++}function F(B){B.nestingLevel--}y.isAlpha=function(W,ne,ye){return y.isValidLatinOrGreek(W)||y.isValidMathSymbol(W,ye)||y.isValidMathSymbol(ne,W)},y.isValidLatinOrGreek=function(W){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(W)},y.isValidMathSymbol=function(W,ne){return/^[\uD835]$/.test(W)&&/^[\uDC00-\uDFFF]$/.test(ne)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(ne)},y.isWhitespace=function(W,ne){return W===" "||W==="	"||W===`
`&&ne>0},y.isDecimalMark=function(W,ne){return W==="."&&ne!=="/"&&ne!=="*"&&ne!=="^"},y.isDigitDot=function(W){return W>="0"&&W<="9"||W==="."},y.isDigit=function(W){return W>="0"&&W<="9"},y.isHexDigit=function(W){return W>="0"&&W<="9"||W>="a"&&W<="f"||W>="A"&&W<="F"};function _(B,W){var ne=S();Vt(ne,{expression:B,extraNodes:W}),T(ne);var ye=G(ne);if(ne.token!=="")throw ne.tokenType===x.DELIMITER?lt(ne,"Unexpected operator "+ne.token):ze(ne,'Unexpected part "'+ne.token+'"');return ye}function G(B){var W,ne=[],ye;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(W=K(B),B.comment&&(W.comment=B.comment));B.token===`
`||B.token===";";)ne.length===0&&W&&(ye=B.token!==";",ne.push({node:W,visible:ye})),T(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(W=K(B),B.comment&&(W.comment=B.comment),ye=B.token!==";",ne.push({node:W,visible:ye}));return ne.length>0?new o(ne):(W||(W=new l(void 0),B.comment&&(W.comment=B.comment)),W)}function K(B){var W,ne,ye,$e,Ke=L(B);if(B.token==="="){if(Ct(Ke))return W=Ke.name,O(B),ye=K(B),new s(new A(W),ye);if(In(Ke))return O(B),ye=K(B),new s(Ke.object,Ke.index,ye);if(cn(Ke)&&Ct(Ke.fn)&&($e=!0,ne=[],W=Ke.name,Ke.args.forEach(function(sr,Ou){Ct(sr)?ne[Ou]=sr.name:$e=!1}),$e))return O(B),ye=K(B),new c(W,ne,ye);throw ze(B,"Invalid left hand side of assignment operator =")}return Ke}function L(B){for(var W=X(B);B.token==="?";){var ne=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,O(B);var ye=W,$e=K(B);if(B.token!==":")throw ze(B,"False part of conditional expression expected");B.conditionalLevel=null,O(B);var Ke=K(B);W=new u(ye,$e,Ke),B.conditionalLevel=ne}return W}function X(B){for(var W=Q(B);B.token==="or";)O(B),W=new m("or","or",[W,Q(B)]);return W}function Q(B){for(var W=J(B);B.token==="xor";)O(B),W=new m("xor","xor",[W,J(B)]);return W}function J(B){for(var W=ae(B);B.token==="and";)O(B),W=new m("and","and",[W,ae(B)]);return W}function ae(B){for(var W=le(B);B.token==="|";)O(B),W=new m("|","bitOr",[W,le(B)]);return W}function le(B){for(var W=ie(B);B.token==="^|";)O(B),W=new m("^|","bitXor",[W,ie(B)]);return W}function ie(B){for(var W=ee(B);B.token==="&";)O(B),W=new m("&","bitAnd",[W,ee(B)]);return W}function ee(B){for(var W=[fe(B)],ne=[],ye={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};De(ye,B.token);){var $e={name:B.token,fn:ye[B.token]};ne.push($e),O(B),W.push(fe(B))}return W.length===1?W[0]:W.length===2?new m(ne[0].name,ne[0].fn,W):new g(ne.map(Ke=>Ke.fn),W)}function fe(B){var W,ne,ye,$e;W=we(B);for(var Ke={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};De(Ke,B.token);)ne=B.token,ye=Ke[ne],O(B),$e=[W,we(B)],W=new m(ne,ye,$e);return W}function we(B){var W,ne,ye,$e;W=ve(B);for(var Ke={to:"to",in:"to"};De(Ke,B.token);)ne=B.token,ye=Ke[ne],O(B),ne==="in"&&B.token===""?W=new m("*","multiply",[W,new A("in")],!0):($e=[W,ve(B)],W=new m(ne,ye,$e));return W}function ve(B){var W,ne=[];if(B.token===":"?W=new l(1):W=xe(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(ne.push(W);B.token===":"&&ne.length<3;)O(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?ne.push(new A("end")):ne.push(xe(B));ne.length===3?W=new v(ne[0],ne[2],ne[1]):W=new v(ne[0],ne[1])}return W}function xe(B){var W,ne,ye,$e;W=z(B);for(var Ke={"+":"add","-":"subtract"};De(Ke,B.token);){ne=B.token,ye=Ke[ne],O(B);var sr=z(B);sr.isPercentage?$e=[W,new m("*","multiply",[W,sr])]:$e=[W,sr],W=new m(ne,ye,$e)}return W}function z(B){var W,ne,ye,$e;W=V(B),ne=W;for(var Ke={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};De(Ke,B.token);)ye=B.token,$e=Ke[ye],O(B),ne=V(B),W=new m(ye,$e,[W,ne]);return W}function V(B){var W,ne;for(W=te(B),ne=W;B.tokenType===x.SYMBOL||B.token==="in"&&Xe(W)||B.tokenType===x.NUMBER&&!Xe(ne)&&(!xt(ne)||ne.op==="!")||B.token==="(";)ne=te(B),W=new m("*","multiply",[W,ne],!0);return W}function te(B){for(var W=H(B),ne=W,ye=[];B.token==="/"&&oc(ne);)if(ye.push(Vt({},B)),O(B),B.tokenType===x.NUMBER)if(ye.push(Vt({},B)),O(B),B.tokenType===x.SYMBOL||B.token==="(")Vt(B,ye.pop()),ye.pop(),ne=H(B),W=new m("/","divide",[W,ne]);else{ye.pop(),Vt(B,ye.pop());break}else{Vt(B,ye.pop());break}return W}function H(B){var W,ne,ye,$e;W=Y(B);for(var Ke={"%":"mod",mod:"mod"};De(Ke,B.token);)ne=B.token,ye=Ke[ne],O(B),ne==="%"&&B.tokenType===x.DELIMITER&&B.token!=="("?W=new m("/","divide",[W,new l(100)],!1,!0):($e=[W,Y(B)],W=new m(ne,ye,$e));return W}function Y(B){var W,ne,ye,$e={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return De($e,B.token)?(ye=$e[B.token],W=B.token,O(B),ne=[Y(B)],new m(W,ye,ne)):j(B)}function j(B){var W,ne,ye,$e;return W=ce(B),(B.token==="^"||B.token===".^")&&(ne=B.token,ye=ne==="^"?"pow":"dotPow",O(B),$e=[W,Y(B)],W=new m(ne,ye,$e)),W}function ce(B){var W,ne,ye,$e;W=oe(B);for(var Ke={"!":"factorial","'":"ctranspose"};De(Ke,B.token);)ne=B.token,ye=Ke[ne],T(B),$e=[W],W=new m(ne,ye,$e),W=q(B,W);return W}function oe(B){var W=[];if(B.tokenType===x.SYMBOL&&De(B.extraNodes,B.token)){var ne=B.extraNodes[B.token];if(T(B),B.token==="("){if(W=[],U(B),T(B),B.token!==")")for(W.push(K(B));B.token===",";)T(B),W.push(K(B));if(B.token!==")")throw ze(B,"Parenthesis ) expected");F(B),T(B)}return new ne(W)}return $(B)}function $(B){var W,ne;return B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in D?(ne=B.token,T(B),De(N,ne)?W=new l(N[ne]):C.indexOf(ne)!==-1?W=new l(t(ne,"number")):W=new A(ne),W=q(B,W),W):Z(B)}function q(B,W,ne){for(var ye;(B.token==="("||B.token==="["||B.token===".")&&(!ne||ne.indexOf(B.token)!==-1);)if(ye=[],B.token==="(")if(Ct(W)||In(W)){if(U(B),T(B),B.token!==")")for(ye.push(K(B));B.token===",";)T(B),ye.push(K(B));if(B.token!==")")throw ze(B,"Parenthesis ) expected");F(B),T(B),W=new f(W,ye)}else return W;else if(B.token==="["){if(U(B),T(B),B.token!=="]")for(ye.push(K(B));B.token===",";)T(B),ye.push(K(B));if(B.token!=="]")throw ze(B,"Parenthesis ] expected");F(B),T(B),W=new i(W,new h(ye))}else{if(T(B),B.tokenType!==x.SYMBOL)throw ze(B,"Property name expected after dot");ye.push(new l(B.token)),T(B);var $e=!0;W=new i(W,new h(ye,$e))}return W}function Z(B){var W,ne;return B.token==='"'?(ne=re(B),W=new l(ne),W=q(B,W),W):ue(B)}function re(B){for(var W="";E(B)!==""&&E(B)!=='"';)E(B)==="\\"&&(W+=E(B),R(B)),W+=E(B),R(B);if(T(B),B.token!=='"')throw ze(B,'End of string " expected');return T(B),JSON.parse('"'+W+'"')}function ue(B){var W,ne;return B.token==="'"?(ne=se(B),W=new l(ne),W=q(B,W),W):ge(B)}function se(B){for(var W="";E(B)!==""&&E(B)!=="'";)E(B)==="\\"&&(W+=E(B),R(B)),W+=E(B),R(B);if(T(B),B.token!=="'")throw ze(B,"End of string ' expected");return T(B),JSON.parse('"'+W+'"')}function ge(B){var W,ne,ye,$e;if(B.token==="["){if(U(B),T(B),B.token!=="]"){var Ke=me(B);if(B.token===";"){for(ye=1,ne=[Ke];B.token===";";)T(B),ne[ye]=me(B),ye++;if(B.token!=="]")throw ze(B,"End of matrix ] expected");F(B),T(B),$e=ne[0].items.length;for(var sr=1;sr<ye;sr++)if(ne[sr].items.length!==$e)throw lt(B,"Column dimensions mismatch ("+ne[sr].items.length+" !== "+$e+")");W=new a(ne)}else{if(B.token!=="]")throw ze(B,"End of matrix ] expected");F(B),T(B),W=Ke}}else F(B),T(B),W=new a([]);return q(B,W)}return be(B)}function me(B){for(var W=[K(B)],ne=1;B.token===",";)T(B),W[ne]=K(B),ne++;return new a(W)}function be(B){if(B.token==="{"){U(B);var W,ne={};do if(T(B),B.token!=="}"){if(B.token==='"')W=re(B);else if(B.token==="'")W=se(B);else if(B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in D)W=B.token,T(B);else throw ze(B,"Symbol or string expected as object key");if(B.token!==":")throw ze(B,"Colon : expected after object key");T(B),ne[W]=K(B)}while(B.token===",");if(B.token!=="}")throw ze(B,"Comma , or bracket } expected after object value");F(B),T(B);var ye=new d(ne);return ye=q(B,ye),ye}return pe(B)}function pe(B){var W;return B.tokenType===x.NUMBER?(W=B.token,T(B),new l(t(W,n.number))):We(B)}function We(B){var W;if(B.token==="("){if(U(B),T(B),W=K(B),B.token!==")")throw ze(B,"Parenthesis ) expected");return F(B),T(B),W=new p(W),W=q(B,W),W}return Ge(B)}function Ge(B){throw B.token===""?ze(B,"Unexpected end of expression"):ze(B,"Value expected")}function Ye(B){return B.index-B.token.length+1}function ze(B,W){var ne=Ye(B),ye=new SyntaxError(W+" (char "+ne+")");return ye.char=ne,ye}function lt(B,W){var ne=Ye(B),ye=new SyntaxError(W+" (char "+ne+")");return ye.char=ne,ye}return e.addConversion({from:"string",to:"Node",convert:y}),y}),_g="compile",NI=["typed","parse"],CI=P(_g,NI,r=>{var{typed:e,parse:t}=r;return e(_g,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return Ve(i,function(a){return t(a).compile()})}})}),Lg="evaluate",EI=["typed","parse"],MI=P(Lg,EI,r=>{var{typed:e,parse:t}=r;return e(Lg,{string:function(i){var a=Ui();return t(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return t(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=Ui();return Ve(i,function(s){return t(s).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return Ve(i,function(s){return t(s).compile().evaluate(a)})}})}),TI="Parser",OI=["evaluate"],BI=P(TI,OI,r=>{var{evaluate:e}=r;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Ui(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(n){return e(n,this.scope)},t.prototype.get=function(n){if(this.scope.has(n))return this.scope.get(n)},t.prototype.getAll=function(){return KM(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(n,i){return this.scope.set(n,i),i},t.prototype.remove=function(n){this.scope.delete(n)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),zg="parser",FI=["typed","Parser"],kI=P(zg,FI,r=>{var{typed:e,Parser:t}=r;return e(zg,{"":function(){return new t}})}),qg="lup",RI=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],II=P(qg,RI,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:a,multiplyScalar:s,subtract:o,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:h,Spa:d}=r;return e(qg,{DenseMatrix:function(g){return m(g)},SparseMatrix:function(g){return p(g)},Array:function(g){var A=t(g),y=m(A);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function m(v){var g=v._size[0],A=v._size[1],y=Math.min(g,A),w=Be(v._data),x=[],b=[g,y],D=[],N=[y,A],C,S,M,E=[];for(C=0;C<g;C++)E[C]=C;for(S=0;S<A;S++){if(S>0)for(C=0;C<g;C++){var R=Math.min(C,S),I=0;for(M=0;M<R;M++)I=i(I,s(w[C][M],w[M][S]));w[C][S]=o(w[C][S],I)}var k=S,T=0,O=0;for(C=S;C<g;C++){var U=w[C][S],F=n(U);u(F,T)&&(k=C,T=F,O=U)}if(S!==k&&(E[S]=[E[k],E[k]=E[S]][0],f._swapRows(S,k,w)),S<g)for(C=S+1;C<g;C++){var _=w[C][S];l(_,0)||(w[C][S]=a(w[C][S],O))}}for(S=0;S<A;S++)for(C=0;C<g;C++){if(S===0&&(C<A&&(D[C]=[]),x[C]=[]),C<S){C<A&&(D[C][S]=w[C][S]),S<g&&(x[C][S]=0);continue}if(C===S){C<A&&(D[C][S]=w[C][S]),S<g&&(x[C][S]=1);continue}C<A&&(D[C][S]=0),S<g&&(x[C][S]=w[C][S])}var G=new f({data:x,size:b}),K=new f({data:D,size:N}),L=[];for(C=0,y=E.length;C<y;C++)L[E[C]]=C;return{L:G,U:K,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(v){var g=v._size[0],A=v._size[1],y=Math.min(g,A),w=v._values,x=v._index,b=v._ptr,D=[],N=[],C=[],S=[g,y],M=[],E=[],R=[],I=[y,A],k,T,O,U=[],F=[];for(k=0;k<g;k++)U[k]=k,F[k]=k;var _=function(L,X){var Q=F[L],J=F[X];U[Q]=X,U[J]=L,F[L]=J,F[X]=Q},G=function(){var L=new d;T<g&&(C.push(D.length),D.push(1),N.push(T)),R.push(M.length);var X=b[T],Q=b[T+1];for(O=X;O<Q;O++)k=x[O],L.set(U[k],w[O]);T>0&&L.forEach(0,T-1,function(ie,ee){h._forEachRow(ie,D,N,C,function(fe,we){fe>ie&&L.accumulate(fe,c(s(we,ee)))})});var J=T,ae=L.get(T),le=n(ae);L.forEach(T+1,g-1,function(ie,ee){var fe=n(ee);u(fe,le)&&(J=ie,le=fe,ae=ee)}),T!==J&&(h._swapRows(T,J,S[1],D,N,C),h._swapRows(T,J,I[1],M,E,R),L.swap(T,J),_(T,J)),L.forEach(0,g-1,function(ie,ee){ie<=T?(M.push(ee),E.push(ie)):(ee=a(ee,ae),l(ee,0)||(D.push(ee),N.push(ie)))})};for(T=0;T<A;T++)G();return R.push(M.length),C.push(D.length),{L:new h({values:D,index:N,ptr:C,size:S}),U:new h({values:M,index:E,ptr:R,size:I}),p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),Ug="qr",PI=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],$I=P(Ug,PI,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:a,equal:s,sign:o,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:h,multiplyScalar:d,subtract:m,complex:p}=r;return Vt(e(Ug,{DenseMatrix:function(w){return g(w)},SparseMatrix:function(w){return A()},Array:function(w){var x=t(w),b=g(x);return{Q:b.Q.valueOf(),R:b.R.valueOf()}}}),{_denseQRimpl:v});function v(y){var w=y._size[0],x=y._size[1],b=i([w],"dense"),D=b._data,N=y.clone(),C=N._data,S,M,E,R=n([w],"");for(E=0;E<Math.min(x,w);++E){var I=C[E][E],k=c(s(I,0)?1:o(I)),T=l(k),O=0;for(S=E;S<w;S++)O=f(O,d(C[S][E],l(C[S][E])));var U=d(k,u(O));if(!a(U)){var F=m(I,U);for(R[E]=1,S=E+1;S<w;S++)R[S]=h(C[S][E],F);var _=c(l(h(F,U))),G=void 0;for(M=E;M<x;M++){for(G=0,S=E;S<w;S++)G=f(G,d(l(R[S]),C[S][M]));for(G=d(G,_),S=E;S<w;S++)C[S][M]=d(m(C[S][M],d(R[S],G)),T)}for(S=0;S<w;S++){for(G=0,M=E;M<w;M++)G=f(G,d(D[S][M],R[M]));for(G=d(G,_),M=E;M<w;++M)D[S][M]=h(m(D[S][M],d(G,l(R[M]))),T)}}}return{Q:b,R:N,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function g(y){var w=v(y),x=w.R._data;if(y._data.length>0)for(var b=x[0][0].type==="Complex"?p(0):0,D=0;D<x.length;++D)for(var N=0;N<D&&N<(x[0]||[]).length;++N)x[D][N]=b;return w}function A(y){throw new Error("qr not implemented for sparse matrices yet")}});function _I(r,e,t,n){for(var i=r._values,a=r._index,s=r._ptr,o=r._size,u=r._datatype,l=o[0],c=o[1],f=n&&r._values?[]:null,h=[],d=[],m=0,p=0;p<c;p++){d[p]=m;for(var v=t?t[p]:p,g=s[v],A=s[v+1],y=g;y<A;y++){var w=e?e[a[y]]:a[y];h[m]=w,f&&(f[m]=i[y]),m++}}return d[c]=m,r.createSparseMatrix({values:f,index:h,ptr:d,size:[l,c],datatype:u})}function Mw(r,e,t,n,i,a,s){var o=0;for(t[s]=r;o>=0;){var u=t[s+o],l=t[n+u];l===-1?(o--,a[e++]=u):(t[n+u]=t[i+l],++o,t[s+o]=l)}return e}function LI(r,e){if(!r)return null;var t=0,n,i=[],a=[],s=0,o=e,u=2*e;for(n=0;n<e;n++)a[s+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(a[o+n]=a[s+r[n]],a[s+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=Mw(n,t,a,s,o,i,u));return i}function zI(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,a=i[0],s=i[1],o=[],u=[],l=0,c=s,f,h;if(e)for(f=0;f<a;f++)u[c+f]=-1;for(var d=0;d<s;d++){o[d]=-1,u[l+d]=-1;for(var m=n[d],p=n[d+1],v=m;v<p;v++){var g=t[v];for(f=e?u[c+g]:g;f!==-1&&f<d;f=h)h=u[l+f],u[l+f]=d,h===-1&&(o[f]=d);e&&(u[c+g]=d)}}return o}function qI(r,e,t){for(var n=r._values,i=r._index,a=r._ptr,s=r._size,o=s[1],u=0,l=0;l<o;l++){var c=a[l];for(a[l]=u;c<a[l+1];c++)e(i[c],l,n?n[c]:1,t)&&(i[u]=i[c],n&&(n[u]=n[c]),u++)}return a[o]=u,i.splice(u,i.length-u),n&&n.splice(u,n.length-u),u}function bn(r){return-r-2}var UI="csAmd",HI=["add","multiply","transpose"],VI=P(UI,HI,r=>{var{add:e,multiply:t,transpose:n}=r;return function(c,f){if(!f||c<=0||c>3)return null;var h=f._size,d=h[0],m=h[1],p=0,v=Math.max(16,10*Math.sqrt(m));v=Math.min(m-2,v);var g=i(c,f,d,m,v);qI(g,u,null);for(var A=g._index,y=g._ptr,w=y[m],x=[],b=[],D=0,N=m+1,C=2*(m+1),S=3*(m+1),M=4*(m+1),E=5*(m+1),R=6*(m+1),I=7*(m+1),k=x,T=a(m,y,b,D,S,k,C,I,N,R,M,E),O=s(m,y,b,E,M,R,v,N,S,k,C),U=0,F,_,G,K,L,X,Q,J,ae,le,ie,ee,fe,we,ve,xe;O<m;){for(G=-1;U<m&&(G=b[S+U])===-1;U++);b[C+G]!==-1&&(k[b[C+G]]=-1),b[S+U]=b[C+G];var z=b[M+G],V=b[N+G];O+=V;var te=0;b[N+G]=-V;var H=y[G],Y=z===0?H:w,j=Y;for(K=1;K<=z+1;K++){for(K>z?(X=G,Q=H,J=b[D+G]-z):(X=A[H++],Q=y[X],J=b[D+X]),L=1;L<=J;L++)F=A[Q++],!((ae=b[N+F])<=0)&&(te+=ae,b[N+F]=-ae,A[j++]=F,b[C+F]!==-1&&(k[b[C+F]]=k[F]),k[F]!==-1?b[C+k[F]]=b[C+F]:b[S+b[E+F]]=b[C+F]);X!==G&&(y[X]=bn(G),b[R+X]=0)}for(z!==0&&(w=j),b[E+G]=te,y[G]=Y,b[D+G]=j-Y,b[M+G]=-2,T=o(T,p,b,R,m),le=Y;le<j;le++)if(F=A[le],!((ie=b[M+F])<=0)){ae=-b[N+F];var ce=T-ae;for(H=y[F],ee=y[F]+ie-1;H<=ee;H++)X=A[H],b[R+X]>=T?b[R+X]-=ae:b[R+X]!==0&&(b[R+X]=b[E+X]+ce)}for(le=Y;le<j;le++){for(F=A[le],ee=y[F],fe=ee+b[M+F]-1,we=ee,ve=0,xe=0,H=ee;H<=fe;H++)if(X=A[H],b[R+X]!==0){var oe=b[R+X]-T;oe>0?(xe+=oe,A[we++]=X,ve+=X):(y[X]=bn(G),b[R+X]=0)}b[M+F]=we-ee+1;var $=we,q=ee+b[D+F];for(H=fe+1;H<q;H++){_=A[H];var Z=b[N+_];Z<=0||(xe+=Z,A[we++]=_,ve+=_)}xe===0?(y[F]=bn(G),ae=-b[N+F],te-=ae,V+=ae,O+=ae,b[N+F]=0,b[M+F]=-1):(b[E+F]=Math.min(b[E+F],xe),A[we]=A[$],A[$]=A[ee],A[ee]=G,b[D+F]=we-ee+1,ve=(ve<0?-ve:ve)%m,b[C+F]=b[I+ve],b[I+ve]=F,k[F]=ve)}for(b[E+G]=te,p=Math.max(p,te),T=o(T+p,p,b,R,m),le=Y;le<j;le++)if(F=A[le],!(b[N+F]>=0))for(ve=k[F],F=b[I+ve],b[I+ve]=-1;F!==-1&&b[C+F]!==-1;F=b[C+F],T++){for(J=b[D+F],ie=b[M+F],H=y[F]+1;H<=y[F]+J-1;H++)b[R+A[H]]=T;var re=F;for(_=b[C+F];_!==-1;){var ue=b[D+_]===J&&b[M+_]===ie;for(H=y[_]+1;ue&&H<=y[_]+J-1;H++)b[R+A[H]]!==T&&(ue=0);ue?(y[_]=bn(F),b[N+F]+=b[N+_],b[N+_]=0,b[M+_]=-1,_=b[C+_],b[C+re]=_):(re=_,_=b[C+_])}}for(H=Y,le=Y;le<j;le++)F=A[le],!((ae=-b[N+F])<=0)&&(b[N+F]=ae,xe=b[E+F]+te-ae,xe=Math.min(xe,m-O-ae),b[S+xe]!==-1&&(k[b[S+xe]]=F),b[C+F]=b[S+xe],k[F]=-1,b[S+xe]=F,U=Math.min(U,xe),b[E+F]=xe,A[H++]=F);b[N+G]=V,(b[D+G]=H-Y)===0&&(y[G]=-1,b[R+G]=0),z!==0&&(w=H)}for(F=0;F<m;F++)y[F]=bn(y[F]);for(_=0;_<=m;_++)b[S+_]=-1;for(_=m;_>=0;_--)b[N+_]>0||(b[C+_]=b[S+y[_]],b[S+y[_]]=_);for(X=m;X>=0;X--)b[N+X]<=0||y[X]!==-1&&(b[C+X]=b[S+y[X]],b[S+y[X]]=X);for(G=0,F=0;F<=m;F++)y[F]===-1&&(G=Mw(F,G,b,S,C,x,R));return x.splice(x.length-1,1),x};function i(l,c,f,h,d){var m=n(c);if(l===1&&h===f)return e(c,m);if(l===2){for(var p=m._index,v=m._ptr,g=0,A=0;A<f;A++){var y=v[A];if(v[A]=g,!(v[A+1]-y>d))for(var w=v[A+1];y<w;y++)p[g++]=p[y]}return v[f]=g,c=n(m),t(m,c)}return t(m,c)}function a(l,c,f,h,d,m,p,v,g,A,y,w){for(var x=0;x<l;x++)f[h+x]=c[x+1]-c[x];f[h+l]=0;for(var b=0;b<=l;b++)f[d+b]=-1,m[b]=-1,f[p+b]=-1,f[v+b]=-1,f[g+b]=1,f[A+b]=1,f[y+b]=0,f[w+b]=f[h+b];var D=o(0,0,f,A,l);return f[y+l]=-2,c[l]=-1,f[A+l]=0,D}function s(l,c,f,h,d,m,p,v,g,A,y){for(var w=0,x=0;x<l;x++){var b=f[h+x];if(b===0)f[d+x]=-2,w++,c[x]=-1,f[m+x]=0;else if(b>p)f[v+x]=0,f[d+x]=-1,w++,c[x]=bn(l),f[v+l]++;else{var D=f[g+b];D!==-1&&(A[D]=x),f[y+x]=f[g+b],f[g+b]=x}}return w}function o(l,c,f,h,d){if(l<2||l+c<0){for(var m=0;m<d;m++)f[h+m]!==0&&(f[h+m]=1);l=2}return l}function u(l,c){return l!==c}});function WI(r,e,t,n,i,a,s){var o,u,l=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var f=t[a+r];if(t[a+r]=e,f===-1)l=1,c=r;else{for(l=2,c=f;c!==t[s+c];c=t[s+c]);for(o=f;o!==c;o=u)u=t[s+o],t[s+o]=c}return{jleaf:l,q:c}}var GI="csCounts",YI=["transpose"],KI=P(GI,YI,r=>{var{transpose:e}=r;return function(t,n,i,a){if(!t||!n||!i)return null;var s=t._size,o=s[0],u=s[1],l,c,f,h,d,m,p,v=4*u+(a?u+o+1:0),g=[],A=0,y=u,w=2*u,x=3*u,b=4*u,D=5*u+1;for(f=0;f<v;f++)g[f]=-1;var N=[],C=e(t),S=C._index,M=C._ptr;for(f=0;f<u;f++)for(c=i[f],N[c]=g[x+c]===-1?1:0;c!==-1&&g[x+c]===-1;c=n[c])g[x+c]=f;if(a){for(f=0;f<u;f++)g[i[f]]=f;for(l=0;l<o;l++){for(f=u,m=M[l],p=M[l+1],d=m;d<p;d++)f=Math.min(f,g[S[d]]);g[D+l]=g[b+f],g[b+f]=l}}for(l=0;l<u;l++)g[A+l]=l;for(f=0;f<u;f++){for(c=i[f],n[c]!==-1&&N[n[c]]--,h=a?g[b+f]:c;h!==-1;h=a?g[D+h]:-1)for(d=M[h];d<M[h+1];d++){l=S[d];var E=WI(l,c,g,x,y,w,A);E.jleaf>=1&&N[c]++,E.jleaf===2&&N[E.q]--}n[c]!==-1&&(g[A+c]=n[c])}for(c=0;c<u;c++)n[c]!==-1&&(N[n[c]]+=N[c]);return N}}),XI="csSqr",ZI=["add","multiply","transpose"],JI=P(XI,ZI,r=>{var{add:e,multiply:t,transpose:n}=r,i=VI({add:e,multiply:t,transpose:n}),a=KI({transpose:n});return function(u,l,c){var f=l._ptr,h=l._size,d=h[1],m,p={};if(p.q=i(u,l),u&&!p.q)return null;if(c){var v=u?_I(l,null,p.q,0):l;p.parent=zI(v,1);var g=LI(p.parent,d);if(p.cp=a(v,p.parent,g,1),v&&p.parent&&p.cp&&s(v,p))for(p.unz=0,m=0;m<d;m++)p.unz+=p.cp[m]}else p.unz=4*f[d]+d,p.lnz=p.unz;return p};function s(o,u){var l=o._ptr,c=o._index,f=o._size,h=f[0],d=f[1];u.pinv=[],u.leftmost=[];var m=u.parent,p=u.pinv,v=u.leftmost,g=[],A=0,y=h,w=h+d,x=h+2*d,b,D,N,C,S;for(D=0;D<d;D++)g[y+D]=-1,g[w+D]=-1,g[x+D]=0;for(b=0;b<h;b++)v[b]=-1;for(D=d-1;D>=0;D--)for(C=l[D],S=l[D+1],N=C;N<S;N++)v[c[N]]=D;for(b=h-1;b>=0;b--)p[b]=-1,D=v[b],D!==-1&&(g[x+D]++===0&&(g[w+D]=b),g[A+b]=g[y+D],g[y+D]=b);for(u.lnz=0,u.m2=h,D=0;D<d;D++)if(b=g[y+D],u.lnz++,b<0&&(b=u.m2++),p[b]=D,!(--x[D]<=0)){u.lnz+=g[x+D];var M=m[D];M!==-1&&(g[x+M]===0&&(g[w+M]=g[w+D]),g[A+g[w+D]]=g[y+M],g[y+M]=g[A+b],g[x+M]+=g[x+D])}for(b=0;b<h;b++)p[b]<0&&(p[b]=D++);return!0}});function Ac(r,e){return r[e]<0}function Tw(r,e){r[e]=bn(r[e])}function Hg(r){return r<0?bn(r):r}function jI(r,e,t,n,i){var a=e._index,s=e._ptr,o=e._size,u=o[1],l,c,f,h=0;for(n[0]=r;h>=0;){r=n[h];var d=i?i[r]:r;Ac(s,r)||(Tw(s,r),n[u+h]=d<0?0:Hg(s[d]));var m=1;for(c=n[u+h],f=d<0?0:Hg(s[d+1]);c<f;c++)if(l=a[c],!Ac(s,l)){n[u+h]=c,n[++h]=l,m=0;break}m&&(h--,n[--t]=r)}return t}function QI(r,e,t,n,i){var a=r._ptr,s=r._size,o=e._index,u=e._ptr,l=s[1],c,f,h,d=l;for(f=u[t],h=u[t+1],c=f;c<h;c++){var m=o[c];Ac(a,m)||(d=jI(m,r,d,n,i))}for(c=d;c<l;c++)Tw(a,n[c]);return d}var eP="csSpsolve",tP=["divideScalar","multiply","subtract"],rP=P(eP,tP,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(a,s,o,u,l,c,f){var h=a._values,d=a._index,m=a._ptr,p=a._size,v=p[1],g=s._values,A=s._index,y=s._ptr,w,x,b,D,N=QI(a,s,o,u,c);for(w=N;w<v;w++)l[u[w]]=0;for(x=y[o],b=y[o+1],w=x;w<b;w++)l[A[w]]=g[w];for(var C=N;C<v;C++){var S=u[C],M=c?c[S]:S;if(!(M<0))for(x=m[M],b=m[M+1],l[S]=e(l[S],h[f?x:b-1]),w=f?x+1:x,D=f?b:b-1;w<D;w++){var E=d[w];l[E]=n(l[E],t(h[w],l[S]))}}return N}}),nP="csLu",iP=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],aP=P(nP,iP,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:a,largerEq:s,SparseMatrix:o}=r,u=rP({divideScalar:t,multiply:n,subtract:i});return function(c,f,h){if(!c)return null;var d=c._size,m=d[1],p,v=100,g=100;f&&(p=f.q,v=f.lnz||v,g=f.unz||g);var A=[],y=[],w=[],x=new o({values:A,index:y,ptr:w,size:[m,m]}),b=[],D=[],N=[],C=new o({values:b,index:D,ptr:N,size:[m,m]}),S=[],M,E,R=[],I=[];for(M=0;M<m;M++)R[M]=0,S[M]=-1,w[M+1]=0;v=0,g=0;for(var k=0;k<m;k++){w[k]=v,N[k]=g;var T=p?p[k]:k,O=u(x,c,T,I,R,S,1),U=-1,F=-1;for(E=O;E<m;E++)if(M=I[E],S[M]<0){var _=e(R[M]);a(_,F)&&(F=_,U=M)}else D[g]=S[M],b[g++]=R[M];if(U===-1||F<=0)return null;S[T]<0&&s(e(R[T]),n(F,h))&&(U=T);var G=R[U];for(D[g]=k,b[g++]=G,S[U]=k,y[v]=U,A[v++]=1,E=O;E<m;E++)M=I[E],S[M]<0&&(y[v]=M,A[v++]=t(R[M],G)),R[M]=0}for(w[m]=v,N[m]=g,E=0;E<v;E++)y[E]=S[y[E]];return A.splice(v,A.length-v),y.splice(v,y.length-v),b.splice(g,b.length-g),D.splice(g,D.length-g),{L:x,U:C,pinv:S}}}),Vg="slu",sP=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],oP=P(Vg,sP,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:a,divideScalar:s,subtract:o,larger:u,largerEq:l,SparseMatrix:c}=r,f=JI({add:n,multiply:i,transpose:a}),h=aP({abs:t,divideScalar:s,multiply:i,subtract:o,larger:u,largerEq:l,SparseMatrix:c});return e(Vg,{"SparseMatrix, number, number":function(m,p,v){if(!Ee(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(v<0||v>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var g=f(p,m,!1),A=h(m,g,v);return{L:A.L,U:A.U,p:A.pinv,q:g.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function Wg(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var Gg="lusolve",uP=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],lP=P(Gg,uP,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:a,lsolve:s,DenseMatrix:o}=r,u=ss({DenseMatrix:o});return e(Gg,{"Array, Array | Matrix":function(h,d){h=t(h);var m=n(h),p=c(m.L,m.U,m.p,null,d);return p.valueOf()},"DenseMatrix, Array | Matrix":function(h,d){var m=n(h);return c(m.L,m.U,m.p,null,d)},"SparseMatrix, Array | Matrix":function(h,d){var m=n(h);return c(m.L,m.U,m.p,null,d)},"SparseMatrix, Array | Matrix, number, number":function(h,d,m,p){var v=i(h,m,p);return c(v.L,v.U,v.p,v.q,d)},"Object, Array | Matrix":function(h,d){return c(h.L,h.U,h.p,h.q,d)}});function l(f){if(Oe(f))return f;if(je(f))return t(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,h,d,m,p){f=l(f),h=l(h),d&&(p=u(f,p,!0),p._data=Wg(d,p._data));var v=s(f,p),g=a(h,v);return m&&(g._data=Wg(m,g._data)),g}}),Yg="polynomialRoot",cP=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],fP=P(Yg,cP,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:a,multiply:s,divide:o,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:h,re:d}=r;return e(Yg,{"number|Complex, ...number|Complex":(m,p)=>{for(var v=[m,...p];v.length>0&&t(v[v.length-1]);)v.pop();if(v.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(p,"] must have a non-zero non-constant coefficient"));switch(v.length){case 2:return[l(o(v[0],v[1]))];case 3:{var[g,A,y]=v,w=s(2,y),x=s(A,A),b=s(4,y,g);if(n(x,b))return[o(l(A),w)];var D=u(a(x,b));return[o(a(D,A),w),o(a(l(D),A),w)]}case 4:{var[N,C,S,M]=v,E=l(s(3,M)),R=s(S,S),I=s(3,M,C),k=i(s(2,S,S,S),s(27,M,M,N)),T=s(9,M,S,C);if(n(R,I)&&n(k,T))return[o(S,E)];var O=a(R,I),U=a(k,T),F=i(s(18,M,S,C,N),s(S,S,C,C)),_=i(s(4,S,S,S,N),s(4,M,C,C,C),s(27,M,M,N,N));if(n(F,_))return[o(a(s(4,M,S,C),i(s(9,M,M,N),s(S,S,S))),s(M,O)),o(a(s(9,M,N),s(S,C)),s(2,O))];var G;n(R,I)?G=U:G=o(i(U,u(a(s(U,U),s(4,O,O,O)))),2);var K=!0,L=c(G,K).toArray().map(X=>o(i(S,X,o(O,X)),E));return L.map(X=>f(X)==="Complex"&&n(d(X),d(X)+h(X))?d(X):X)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(v))}}})}),hP="Help",dP=["parse"],mP=P(hP,dP,r=>{var{parse:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a={},s=0;s<n.examples.length;s++){var o=n.examples[s];i+="    "+o+`
`;var u=void 0;try{u=e(o).compile().evaluate(a)}catch(l){u=l}u!==void 0&&!cf(u)&&(i+="        "+qe(u,{precision:14})+`
`)}i+=`
`}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=Be(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),pP="Chain",gP=["?on","math","typed"],vP=P(pP,gP,r=>{var{on:e,math:t,typed:n}=r;function i(l){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");ff(l)?this.value=l.value:this.value=l}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return qe(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(l){return new i(l.value)};function a(l,c){typeof c=="function"&&(i.prototype[l]=o(c))}function s(l,c){so(i.prototype,l,function(){var h=c();if(typeof h=="function")return o(h)})}function o(l){return function(){if(arguments.length===0)return new i(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(l)){var h=n.resolve(l,c);if(h.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new i(h.implementation.apply(l,c))}return new i(l.apply(l,c))}}i.createProxy=function(l,c){if(typeof l=="string")a(l,c);else{var f=function(m){De(l,m)&&u[m]===void 0&&s(m,()=>l[m])};for(var h in l)f(h)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(l,c,f){f||s(l,c)}),i},{isClass:!0}),Kg={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},yP={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},bP={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},xP={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},wP={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},AP={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},DP={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},SP={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},NP={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},CP={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},EP={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},Xg={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},MP={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},TP={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},OP={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},BP={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},FP={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},kP={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},RP={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},IP={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},PP={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},$P={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},_P={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},LP={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},zP={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},qP={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},UP={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},HP={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},VP={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},WP={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},GP={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},YP={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},KP={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},XP={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},ZP={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},JP={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},jP={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},QP={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},e6={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},t6={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},r6={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},n6={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},i6={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},a6={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},s6={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},o6={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},u6={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},l6={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},c6={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},f6={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},h6={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},d6={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},m6={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},p6={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},g6={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},v6={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},y6={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},b6={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},x6={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},w6={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},A6={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},D6={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},S6={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},N6={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},C6={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},E6={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},M6={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},T6={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},O6={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},B6={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},F6={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},k6={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},R6={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},I6={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},P6={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},$6={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},_6={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},L6={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},z6={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},q6={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},U6={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},H6={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},V6={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},W6={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},G6={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},Y6={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},K6={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},X6={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},Z6={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},J6={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},j6={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Q6={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},e9={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},t9={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},r9={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},n9={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},i9={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},a9={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},s9={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},o9={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},u9={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},l9={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},c9={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},f9={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},h9={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},d9={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},m9={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},p9={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},g9={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},v9={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},y9={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},b9={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},x9={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},w9={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},A9={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},D9={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},S9={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},N9={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},C9={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},E9={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},M9={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},T9={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},O9={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},B9={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},F9={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},k9={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},R9={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},I9={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},P9={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},$9={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},_9={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},L9={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},z9={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},q9={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},U9={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},H9={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},V9={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},W9={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},G9={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Y9={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},K9={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},X9={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Z9={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},J9={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},j9={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Q9={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},e7={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},t7={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},r7={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},n7={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},i7={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},a7={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},s7={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},o7={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},u7={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},l7={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},c7={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},f7={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},h7={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},d7={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},m7={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},p7={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},g7={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},v7={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},y7={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},b7={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},x7={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},w7={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},A7={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},D7={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},S7={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},N7={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},C7={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},E7={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},M7={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},T7={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},O7={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},B7={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},F7={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},k7={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},R7={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},I7={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},P7={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},$7={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},_7={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},L7={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},z7={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},q7={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},U7={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},H7={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},V7={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},W7={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},G7={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},Y7={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},K7={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},X7={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},Z7={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},J7={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},j7={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Q7={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},e$={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},t$={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},r$={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},n$={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},i$={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},a$={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},s$={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},o$={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},u$={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},l$={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},c$={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},f$={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},h$={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},d$={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},m$={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},p$={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},g$={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},v$={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},y$={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},b$={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},x$={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},w$={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},A$={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},D$={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},S$={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},N$={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},C$={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},E$={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},M$={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},T$={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},O$={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},B$={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},F$={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},k$={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},R$={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},I$={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},P$={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},$$={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},_$={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},L$={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},z$={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},q$={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},U$={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},H$={bignumber:kP,boolean:RP,complex:IP,createUnit:PP,fraction:$P,index:_P,matrix:LP,number:zP,sparse:qP,splitUnit:UP,string:HP,unit:VP,e:Kg,E:Kg,false:yP,i:bP,Infinity:xP,LN2:AP,LN10:wP,LOG2E:SP,LOG10E:DP,NaN:NP,null:CP,pi:Xg,PI:Xg,phi:EP,SQRT1_2:MP,SQRT2:TP,tau:OP,true:BP,version:FP,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:KP,lsolve:ZP,lsolveAll:JP,lup:jP,lusolve:QP,leafCount:XP,polynomialRoot:e6,resolve:n6,simplify:i6,simplifyConstant:a6,simplifyCore:s6,symbolicEqual:u6,rationalize:r6,slu:o6,usolve:l6,usolveAll:c6,qr:t6,abs:f6,add:h6,cbrt:d6,ceil:m6,cube:p6,divide:g6,dotDivide:v6,dotMultiply:y6,dotPow:b6,exp:x6,expm:w6,expm1:A6,fix:D6,floor:S6,gcd:N6,hypot:C6,lcm:M6,log:T6,log2:F6,log1p:B6,log10:O6,mod:k6,multiply:R6,norm:I6,nthRoot:P6,nthRoots:$6,pow:_6,round:L6,sign:z6,sqrt:q6,sqrtm:U6,square:G6,subtract:Y6,unaryMinus:K6,unaryPlus:X6,xgcd:Z6,invmod:E6,bitAnd:J6,bitNot:j6,bitOr:Q6,bitXor:e9,leftShift:t9,rightArithShift:r9,rightLogShift:n9,bellNumbers:i9,catalan:a9,composition:s9,stirlingS2:o9,config:WP,import:GP,typed:YP,arg:u9,conj:l9,re:f9,im:c9,evaluate:h9,help:d9,distance:m9,intersect:p9,and:g9,not:v9,or:y9,xor:b9,concat:w9,count:A9,cross:D9,column:x9,ctranspose:S9,det:N9,diag:C9,diff:E9,dot:M9,getMatrixDataType:k9,identity:R9,filter:O9,flatten:B9,forEach:F9,inv:I9,pinv:P9,eigs:T9,kron:$9,matrixFromFunction:z9,matrixFromRows:q9,matrixFromColumns:L9,map:_9,ones:U9,partitionSelect:H9,range:V9,resize:G9,reshape:W9,rotate:Y9,rotationMatrix:K9,row:X9,size:Z9,sort:J9,squeeze:j9,subset:Q9,trace:e7,transpose:t7,zeros:r7,fft:n7,ifft:i7,sylvester:H6,schur:V6,lyap:W6,solveODE:U$,combinations:a7,combinationsWithRep:s7,factorial:o7,gamma:u7,kldivergence:c7,lgamma:l7,multinomial:f7,permutations:h7,pickRandom:d7,random:m7,randomInt:p7,compare:g7,compareNatural:v7,compareText:y7,deepEqual:b7,equal:x7,equalText:w7,larger:A7,largerEq:D7,smaller:S7,smallerEq:N7,unequal:C7,setCartesian:E7,setDifference:M7,setDistinct:T7,setIntersect:O7,setIsSubset:B7,setMultiplicity:F7,setPowerset:k7,setSize:R7,setSymDifference:I7,setUnion:P7,zpk2tf:$7,freqz:_7,erf:L7,zeta:z7,cumsum:Z7,mad:q7,max:U7,mean:H7,median:V7,min:W7,mode:G7,prod:Y7,quantileSeq:K7,std:X7,sum:J7,variance:j7,corr:Q7,acos:e$,acosh:t$,acot:r$,acoth:n$,acsc:i$,acsch:a$,asec:s$,asech:o$,asin:u$,asinh:l$,atan:c$,atanh:h$,atan2:f$,cos:d$,cosh:m$,cot:p$,coth:g$,csc:v$,csch:y$,sec:b$,sech:x$,sin:w$,sinh:A$,tan:D$,tanh:S$,to:N$,clone:E$,format:M$,bin:C$,oct:L$,hex:O$,isNaN:F$,isInteger:B$,isNegative:k$,isNumeric:R$,hasNumericValue:T$,isPositive:I$,isPrime:P$,isZero:$$,print:z$,typeOf:q$,numeric:_$},Zg="help",V$=["typed","mathWithTransform","Help"],W$=P(Zg,V$,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(Zg,{any:function(a){var s,o=a;if(typeof a!="string"){for(s in t)if(De(t,s)&&a===t[s]){o=s;break}}var u=Kt(H$,o);if(!u){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new n(u)}})}),Jg="chain",G$=["typed","Chain"],Y$=P(Jg,G$,r=>{var{typed:e,Chain:t}=r;return e(Jg,{"":function(){return new t},any:function(i){return new t(i)}})}),jg="det",K$=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],X$=P(jg,K$,r=>{var{typed:e,matrix:t,subtract:n,multiply:i,divideScalar:a,isZero:s,unaryMinus:o}=r;return e(jg,{any:function(c){return Be(c)},"Array | Matrix":function(c){var f;switch(Oe(c)?f=c.size():Array.isArray(c)?(c=t(c),f=c.size()):f=[],f.length){case 0:return Be(c);case 1:if(f[0]===1)return Be(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+qe(f)+")");case 2:{var h=f[0],d=f[1];if(h===d)return u(c.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+qe(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+qe(f)+")")}}});function u(l,c,f){if(c===1)return Be(l[0][0]);if(c===2)return n(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var h=!1,d=new Array(c).fill(0).map((D,N)=>N),m=0;m<c;m++){var p=d[m];if(s(l[p][m])){var v=void 0;for(v=m+1;v<c;v++)if(!s(l[d[v]][m])){p=d[v],d[v]=d[m],d[m]=p,h=!h;break}if(v===c)return l[p][m]}for(var g=l[p][m],A=m===0?1:l[d[m-1]][m-1],y=m+1;y<c;y++)for(var w=d[y],x=m+1;x<c;x++)l[w][x]=a(n(i(l[w][x],g),i(l[w][m],l[p][x])),A)}var b=l[d[c-1]][c-1];return h?o(b):b}}),Qg="inv",Z$=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],J$=P(Qg,Z$,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:a,unaryMinus:s,det:o,identity:u,abs:l}=r;return e(Qg,{"Array | Matrix":function(h){var d=Oe(h)?h.size():Pe(h);switch(d.length){case 1:if(d[0]===1)return Oe(h)?t([n(1,h.valueOf()[0])]):[n(1,h[0])];throw new RangeError("Matrix must be square (size: "+qe(d)+")");case 2:{var m=d[0],p=d[1];if(m===p)return Oe(h)?t(c(h.valueOf(),m,p),h.storage()):c(h,m,p);throw new RangeError("Matrix must be square (size: "+qe(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+qe(d)+")")}},any:function(h){return n(1,h)}});function c(f,h,d){var m,p,v,g,A;if(h===1){if(g=f[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,g)]]}else if(h===2){var y=o(f);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],y),n(s(f[0][1]),y)],[n(s(f[1][0]),y),n(f[0][0],y)]]}else{var w=f.concat();for(m=0;m<h;m++)w[m]=w[m].concat();for(var x=u(h).valueOf(),b=0;b<d;b++){var D=l(w[b][b]),N=b;for(m=b+1;m<h;)l(w[m][b])>D&&(D=l(w[m][b]),N=m),m++;if(D===0)throw Error("Cannot calculate inverse, determinant is zero");m=N,m!==b&&(A=w[b],w[b]=w[m],w[m]=A,A=x[b],x[b]=x[m],x[m]=A);var C=w[b],S=x[b];for(m=0;m<h;m++){var M=w[m],E=x[m];if(m!==b){if(M[b]!==0){for(v=n(s(M[b]),C[b]),p=b;p<d;p++)M[p]=i(M[p],a(v,C[p]));for(p=0;p<d;p++)E[p]=i(E[p],a(v,S[p]))}}else{for(v=C[b],p=b;p<d;p++)M[p]=n(M[p],v);for(p=0;p<d;p++)E[p]=n(E[p],v)}}}return x}}}),ev="pinv",j$=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Q$=P(ev,j$,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:a,dotDivide:s,dot:o,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:h}=r;return e(ev,{"Array | Matrix":function(y){var w=Oe(y)?y.size():Pe(y);switch(w.length){case 1:return g(y)?u(y):w[0]===1?n(y):s(u(y),o(y,y));case 2:{if(g(y))return u(y);var x=w[0],b=w[1];if(x===b)try{return n(y)}catch(D){if(!(D instanceof Error&&D.message.match(/Cannot calculate inverse, determinant is zero/)))throw D}return Oe(y)?t(d(y.valueOf(),x,b),y.storage()):d(y,x,b)}default:throw new RangeError("Matrix must be two dimensional (size: "+qe(w)+")")}},any:function(y){return a(y,0)?Be(y):l(1,y)}});function d(A,y,w){var{C:x,F:b}=p(A,y,w),D=c(n(c(u(x),x)),u(x)),N=c(u(b),n(c(b,u(b))));return c(N,D)}function m(A,y,w){for(var x=Be(A),b=0,D=0;D<y;D++){if(w<=b)return x;for(var N=D;v(x[N][b]);)if(N++,y===N&&(N=D,b++,w===b))return x;[x[N],x[D]]=[x[D],x[N]];for(var C=x[D][b],S=0;S<w;S++)x[D][S]=s(x[D][S],C);for(var M=0;M<y;M++)if(M!==D){C=x[M][b];for(var E=0;E<w;E++)x[M][E]=f(x[M][E],c(-1,c(C,x[D][E])))}b++}return x}function p(A,y,w){var x=m(A,y,w),b=A.map((N,C)=>N.filter((S,M)=>M<y&&!v(o(x[M],x[M])))),D=x.filter((N,C)=>!v(o(x[C],x[C])));return{C:b,F:D}}function v(A){return a(f(A,h(1,1)),f(0,h(1,1)))}function g(A){return i(f(A,h(1,1)),f(c(A,0),h(1,1)))}});function e_(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:a,divideScalar:s,sqrt:o,abs:u,bignumber:l,diag:c,inv:f,qr:h,usolve:d,usolveAll:m,equal:p,complex:v,larger:g,smaller:A,matrixFromColumns:y,dot:w}=r;function x(_,G,K,L,X){X===void 0&&(X=!0);var Q=b(_,G,K,L,X);D(_,G,K,L,X,Q);var{values:J,C:ae}=N(_,G,K,L,X),le;return X&&(le=C(_,G,ae,Q,J,K,L),le=y(...le)),{values:J,vectors:le}}function b(_,G,K,L,X){var Q=L==="BigNumber",J=L==="Complex",ae=Q?l(0):0,le=Q?l(1):J?v(1):1,ie=Q?l(1):1,ee=Q?l(10):2,fe=a(ee,ee),we;X&&(we=Array(G).fill(le));for(var ve=!1;!ve;){ve=!0;for(var xe=0;xe<G;xe++){for(var z=ae,V=ae,te=0;te<G;te++)if(xe!==te){var H=u(_[xe][te]);z=e(z,H),V=e(V,H)}if(!p(z,0)&&!p(V,0)){for(var Y=ie,j=z,ce=s(V,ee),oe=a(V,ee);A(j,ce);)j=a(j,fe),Y=a(Y,ee);for(;g(j,oe);)j=s(j,fe),Y=s(Y,ee);var $=A(s(e(j,V),Y),a(e(z,V),.95));if($){ve=!1;for(var q=s(1,Y),Z=0;Z<G;Z++)xe!==Z&&(_[xe][Z]=a(_[xe][Z],Y),_[Z][xe]=a(_[Z][xe],q));X&&(we[xe]=a(we[xe],Y))}}}}return c(we)}function D(_,G,K,L,X,Q){var J=L==="BigNumber",ae=L==="Complex",le=J?l(0):ae?v(0):0;J&&(K=l(K));for(var ie=0;ie<G-2;ie++){for(var ee=0,fe=le,we=ie+1;we<G;we++){var ve=_[we][ie];A(u(fe),u(ve))&&(fe=ve,ee=we)}if(!A(u(fe),K)){if(ee!==ie+1){var xe=_[ee];_[ee]=_[ie+1],_[ie+1]=xe;for(var z=0;z<G;z++){var V=_[z][ee];_[z][ee]=_[z][ie+1],_[z][ie+1]=V}if(X){var te=Q[ee];Q[ee]=Q[ie+1],Q[ie+1]=te}}for(var H=ie+2;H<G;H++){var Y=s(_[H][ie],fe);if(Y!==0){for(var j=0;j<G;j++)_[H][j]=t(_[H][j],a(Y,_[ie+1][j]));for(var ce=0;ce<G;ce++)_[ce][ie+1]=e(_[ce][ie+1],a(Y,_[ce][H]));if(X)for(var oe=0;oe<G;oe++)Q[H][oe]=t(Q[H][oe],a(Y,Q[ie+1][oe]))}}}}return Q}function N(_,G,K,L,X){var Q=L==="BigNumber",J=L==="Complex",ae=Q?l(1):J?v(1):1;Q&&(K=l(K));for(var le=Be(_),ie=[],ee=G,fe=[],we=X?c(Array(G).fill(ae)):void 0,ve=X?c(Array(ee).fill(ae)):void 0,xe=0;xe<=100;){xe+=1;for(var z=0,V=0;V<ee;V++)le[V][V]=t(le[V][V],z);var{Q:te,R:H}=h(le);le=i(H,te);for(var Y=0;Y<ee;Y++)le[Y][Y]=e(le[Y][Y],z);if(X&&(ve=i(ve,te)),ee===1||A(u(le[ee-1][ee-2]),K)){xe=0,ie.push(le[ee-1][ee-1]),X&&(fe.unshift([[1]]),E(ve,G),we=i(we,ve),ee>1&&(ve=c(Array(ee-1).fill(ae)))),ee-=1,le.pop();for(var j=0;j<ee;j++)le[j].pop()}else if(ee===2||A(u(le[ee-2][ee-3]),K)){xe=0;var ce=S(le[ee-2][ee-2],le[ee-2][ee-1],le[ee-1][ee-2],le[ee-1][ee-1]);ie.push(...ce),X&&(fe.unshift(M(le[ee-2][ee-2],le[ee-2][ee-1],le[ee-1][ee-2],le[ee-1][ee-1],ce[0],ce[1],K,L)),E(ve,G),we=i(we,ve),ee>2&&(ve=c(Array(ee-2).fill(ae)))),ee-=2,le.pop(),le.pop();for(var oe=0;oe<ee;oe++)le[oe].pop(),le[oe].pop()}if(ee===0)break}if(ie.sort((Z,re)=>+t(u(Z),u(re))),xe>100){var $=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ie.join(", "));throw $.values=ie,$.vectors=[],$}var q=X?i(we,R(fe,G)):void 0;return{values:ie,C:q}}function C(_,G,K,L,X,Q,J){var ae=f(K),le=i(ae,_,K),ie=J==="BigNumber",ee=J==="Complex",fe=ie?l(0):ee?v(0):0,we=ie?l(1):ee?v(1):1,ve=[],xe=[];for(var z of X){var V=I(ve,z,p);V===-1?(ve.push(z),xe.push(1)):xe[V]+=1}for(var te=[],H=ve.length,Y=Array(G).fill(fe),j=c(Array(G).fill(we)),ce=[],oe=function(){var re=ve[$],ue=t(le,i(re,j)),se=m(ue,Y);for(se.shift();se.length<xe[$];){var ge=k(ue,G,se,Q,J);if(ge==null){ce.push(re);break}se.push(ge)}var me=i(f(L),K);se=se.map(be=>i(me,be)),te.push(...se.map(be=>n(be)))},$=0;$<H;$++)oe();if(ce.length!==0){var q=new Error("Failed to find eigenvectors for the following eigenvalues: "+ce.join(", "));throw q.values=X,q.vectors=te,q}return te}function S(_,G,K,L){var X=e(_,L),Q=t(a(_,L),a(G,K)),J=a(X,.5),ae=a(o(t(a(X,X),a(4,Q))),.5);return[e(J,ae),t(J,ae)]}function M(_,G,K,L,X,Q,J,ae){var le=ae==="BigNumber",ie=ae==="Complex",ee=le?l(0):ie?v(0):0,fe=le?l(1):ie?v(1):1;if(A(u(K),J))return[[fe,ee],[ee,fe]];if(g(u(t(X,Q)),J))return[[t(X,L),t(Q,L)],[K,K]];var we=t(_,X),ve=t(G,X),xe=t(K,X),z=t(L,X);return A(u(ve),J)?[[we,fe],[xe,ee]]:[[ve,ee],[z,fe]]}function E(_,G){for(var K=0;K<_.length;K++)_[K].push(...Array(G-_[K].length).fill(0));for(var L=_.length;L<G;L++)_.push(Array(G).fill(0)),_[L][L]=1;return _}function R(_,G){for(var K=[],L=0;L<G;L++)K[L]=Array(G).fill(0);var X=0;for(var Q of _){for(var J=Q.length,ae=0;ae<J;ae++)for(var le=0;le<J;le++)K[X+ae][X+le]=Q[ae][le];X+=J}return K}function I(_,G,K){for(var L=0;L<_.length;L++)if(K(_[L],G))return L;return-1}function k(_,G,K,L,X){for(var Q=X==="BigNumber"?l(1e3):1e3,J,ae=0;J=T(G,K,X),J=d(_,J),!g(U(J),Q);)if(++ae>=5)return null;for(ae=0;;){var le=d(_,J);if(A(U(O(J,[le])),L))break;if(++ae>=10)return null;J=F(le)}return J}function T(_,G,K){var L=K==="BigNumber",X=K==="Complex",Q=Array(_).fill(0).map(J=>2*Math.random()-1);return L&&(Q=Q.map(J=>l(J))),X&&(Q=Q.map(J=>v(J))),Q=O(Q,G),F(Q,K)}function O(_,G){for(var K of G)_=t(_,i(s(w(K,_),w(K,K)),K));return _}function U(_){return u(o(w(_,_)))}function F(_,G){var K=G==="BigNumber",L=G==="Complex",X=K?l(1):L?v(1):1;return i(s(X,U(_)),_)}return x}function t_(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:a,cos:s,sin:o,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:h}=r;function d(S,M){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,R=arguments.length>3?arguments[3]:void 0;if(R==="number")return m(S,E);if(R==="BigNumber")return p(S,E);throw TypeError("Unsupported data type: "+R)}function m(S,M){for(var E=S.length,R=Math.abs(M/E),I,k=new Array(E),T=0;T<E;T++)k[T]=C(E,0),k[T][T]=1;for(var O=b(S);Math.abs(O[1])>=Math.abs(R);){var U=O[0][0],F=O[0][1];I=v(S[U][U],S[F][F],S[U][F]),S=x(S,I,U,F),k=A(k,I,U,F),O=b(S)}for(var _=C(E,0),G=0;G<E;G++)_[G]=S[G][G];return N(Be(_),Be(k))}function p(S,M){for(var E=S.length,R=i(M/E),I,k=new Array(E),T=0;T<E;T++)k[T]=C(E,0),k[T][T]=1;for(var O=D(S);i(O[1])>=i(R);){var U=O[0][0],F=O[0][1];I=g(S[U][U],S[F][F],S[U][F]),S=w(S,I,U,F),k=y(k,I,U,F),O=D(S)}for(var _=C(E,0),G=0;G<E;G++)_[G]=S[G][G];return N(Be(_),Be(k))}function v(S,M,E){var R=M-S;return Math.abs(R)<=e.epsilon?Math.PI/4:.5*Math.atan(2*E/(M-S))}function g(S,M,E){var R=n(M,S);return i(R)<=e.epsilon?c(-1).acos().div(4):u(.5,a(f(2,E,l(R))))}function A(S,M,E,R){for(var I=S.length,k=Math.cos(M),T=Math.sin(M),O=C(I,0),U=C(I,0),F=0;F<I;F++)O[F]=k*S[F][E]-T*S[F][R],U[F]=T*S[F][E]+k*S[F][R];for(var _=0;_<I;_++)S[_][E]=O[_],S[_][R]=U[_];return S}function y(S,M,E,R){for(var I=S.length,k=s(M),T=o(M),O=C(I,c(0)),U=C(I,c(0)),F=0;F<I;F++)O[F]=n(u(k,S[F][E]),u(T,S[F][R])),U[F]=t(u(T,S[F][E]),u(k,S[F][R]));for(var _=0;_<I;_++)S[_][E]=O[_],S[_][R]=U[_];return S}function w(S,M,E,R){for(var I=S.length,k=c(s(M)),T=c(o(M)),O=u(k,k),U=u(T,T),F=C(I,c(0)),_=C(I,c(0)),G=f(c(2),k,T,S[E][R]),K=t(n(u(O,S[E][E]),G),u(U,S[R][R])),L=h(u(U,S[E][E]),G,u(O,S[R][R])),X=0;X<I;X++)F[X]=n(u(k,S[E][X]),u(T,S[R][X])),_[X]=t(u(T,S[E][X]),u(k,S[R][X]));S[E][E]=K,S[R][R]=L,S[E][R]=c(0),S[R][E]=c(0);for(var Q=0;Q<I;Q++)Q!==E&&Q!==R&&(S[E][Q]=F[Q],S[Q][E]=F[Q],S[R][Q]=_[Q],S[Q][R]=_[Q]);return S}function x(S,M,E,R){for(var I=S.length,k=Math.cos(M),T=Math.sin(M),O=k*k,U=T*T,F=C(I,0),_=C(I,0),G=O*S[E][E]-2*k*T*S[E][R]+U*S[R][R],K=U*S[E][E]+2*k*T*S[E][R]+O*S[R][R],L=0;L<I;L++)F[L]=k*S[E][L]-T*S[R][L],_[L]=T*S[E][L]+k*S[R][L];S[E][E]=G,S[R][R]=K,S[E][R]=0,S[R][E]=0;for(var X=0;X<I;X++)X!==E&&X!==R&&(S[E][X]=F[X],S[X][E]=F[X],S[R][X]=_[X],S[X][R]=_[X]);return S}function b(S){for(var M=S.length,E=0,R=[0,1],I=0;I<M;I++)for(var k=I+1;k<M;k++)Math.abs(E)<Math.abs(S[I][k])&&(E=Math.abs(S[I][k]),R=[I,k]);return[R,E]}function D(S){for(var M=S.length,E=0,R=[0,1],I=0;I<M;I++)for(var k=I+1;k<M;k++)i(E)<i(S[I][k])&&(E=i(S[I][k]),R=[I,k]);return[R,E]}function N(S,M){for(var E=S.length,R=Array(E),I=Array(E),k=0;k<E;k++)I[k]=Array(E);for(var T=0;T<E;T++){for(var O=0,U=S[0],F=0;F<S.length;F++)i(S[F])<i(U)&&(O=F,U=S[O]);R[T]=S.splice(O,1)[0];for(var _=0;_<E;_++)I[_][T]=M[_][O],M[_].splice(O,1)}return{values:R,vectors:I}}function C(S,M){for(var E=new Array(S),R=0;R<S;R++)E[R]=M;return E}return d}var r_="eigs",n_=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],i_=P(r_,n_,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:a,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:h,inv:d,bignumber:m,multiply:p,add:v,larger:g,column:A,flatten:y,number:w,complex:x,sqrt:b,diag:D,qr:N,usolve:C,usolveAll:S,im:M,re:E,smaller:R,matrixFromColumns:I,dot:k}=r,T=t_({config:e,addScalar:i,subtract:a,column:A,flatten:y,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,inv:d,bignumber:m,complex:x,multiply:p,add:v}),O=e_({config:e,addScalar:i,subtract:a,multiply:p,multiplyScalar:f,flatten:y,divideScalar:h,sqrt:b,abs:o,bignumber:m,diag:D,qr:N,inv:d,usolve:C,usolveAll:S,equal:s,complex:x,larger:g,smaller:R,matrixFromColumns:I,dot:k});return t("eigs",{Array:function(X){var Q=n(X);return U(Q)},"Array, number|BigNumber":function(X,Q){var J=n(X);return U(J,Q)},Matrix:function(X){var{values:Q,vectors:J}=U(X);return{values:n(Q),vectors:n(J)}},"Matrix, number|BigNumber":function(X,Q){var{values:J,vectors:ae}=U(X,Q);return{values:n(J),vectors:n(ae)}}});function U(L,X){X===void 0&&(X=e.epsilon);var Q=L.size();if(Q.length!==2||Q[0]!==Q[1])throw new RangeError("Matrix must be square (size: "+qe(Q)+")");var J=L.toArray(),ae=Q[0];if(_(J,ae,X)&&(G(J,ae),F(J,ae,X))){var le=K(L,J,ae);return T(J,ae,X,le)}var ie=K(L,J,ae);return O(J,ae,X,ie)}function F(L,X,Q){for(var J=0;J<X;J++)for(var ae=J;ae<X;ae++)if(g(m(o(a(L[J][ae],L[ae][J]))),Q))return!1;return!0}function _(L,X,Q){for(var J=0;J<X;J++)for(var ae=0;ae<X;ae++)if(g(m(o(M(L[J][ae]))),Q))return!1;return!0}function G(L,X){for(var Q=0;Q<X;Q++)for(var J=0;J<X;J++)L[Q][J]=E(L[Q][J])}function K(L,X,Q){var J=L.datatype();if(J==="number"||J==="BigNumber"||J==="Complex")return J;for(var ae=!1,le=!1,ie=!1,ee=0;ee<Q;ee++)for(var fe=0;fe<Q;fe++){var we=X[ee][fe];if(_e(we)||si(we))ae=!0;else if(Ue(we))le=!0;else if(Er(we))ie=!0;else throw TypeError("Unsupported type in Matrix: "+ot(we))}if(le&&ie&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ie){for(var ve=0;ve<Q;ve++)for(var xe=0;xe<Q;xe++)X[ve][xe]=x(X[ve][xe]);return"Complex"}if(le){for(var z=0;z<Q;z++)for(var V=0;V<Q;V++)X[z][V]=m(X[z][V]);return"BigNumber"}if(ae){for(var te=0;te<Q;te++)for(var H=0;H<Q;H++)X[te][H]=w(X[te][H]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),tv="expm",a_=["typed","abs","add","identity","inv","multiply"],s_=P(tv,a_,r=>{var{typed:e,abs:t,add:n,identity:i,inv:a,multiply:s}=r;return e(tv,{Matrix:function(f){var h=f.size();if(h.length!==2||h[0]!==h[1])throw new RangeError("Matrix must be square (size: "+qe(h)+")");for(var d=h[0],m=1e-15,p=o(f),v=u(p,m),g=v.q,A=v.j,y=s(f,Math.pow(2,-A)),w=i(d),x=i(d),b=1,D=y,N=-1,C=1;C<=g;C++)C>1&&(D=s(D,y),N=-N),b=b*(g-C+1)/((2*g-C+1)*C),w=n(w,s(b,D)),x=n(x,s(b*N,D));for(var S=s(a(x),w),M=0;M<A;M++)S=s(S,S);return Nn(f)?f.createSparseMatrix(S):S}});function o(c){for(var f=c.size()[0],h=0,d=0;d<f;d++){for(var m=0,p=0;p<f;p++)m+=t(c.get([d,p]));h=Math.max(m,h)}return h}function u(c,f){for(var h=30,d=0;d<h;d++)for(var m=0;m<=d;m++){var p=d-m;if(l(c,m,p)<f)return{q:m,j:p}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,h){for(var d=1,m=2;m<=f;m++)d*=m;for(var p=d,v=f+1;v<=2*f;v++)p*=v;var g=p*(2*f+1);return 8*Math.pow(c/Math.pow(2,h),2*f)*d*d/(p*g)}}),rv="sqrtm",o_=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],u_=P(rv,o_,r=>{var{typed:e,abs:t,add:n,multiply:i,map:a,sqrt:s,subtract:o,inv:u,size:l,max:c,identity:f}=r,h=1e3,d=1e-6;function m(p){var v,g=0,A=p,y=f(l(p));do{var w=A;if(A=i(.5,n(w,u(y))),y=i(.5,n(y,u(w))),v=c(t(o(A,w))),v>d&&++g>h)throw new Error("computing square root of matrix: iterative method could not converge")}while(v>d);return A}return e(rv,{"Array | Matrix":function(v){var g=Oe(v)?v.size():Pe(v);switch(g.length){case 1:if(g[0]===1)return a(v,s);throw new RangeError("Matrix must be square (size: "+qe(g)+")");case 2:{var A=g[0],y=g[1];if(A===y)return m(v);throw new RangeError("Matrix must be square (size: "+qe(g)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+qe(g)+")")}}})}),nv="sylvester",l_=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],c_=P(nv,l_,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:a,range:s,concat:o,transpose:u,index:l,subset:c,add:f,subtract:h,identity:d,lusolve:m,abs:p}=r;return e(nv,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(A,y,w){return v(i(A),y,w)},"Array, Array, Matrix":function(A,y,w){return v(i(A),i(y),w)},"Array, Matrix, Array":function(A,y,w){return v(i(A),y,i(w))},"Matrix, Array, Matrix":function(A,y,w){return v(A,i(y),w)},"Matrix, Array, Array":function(A,y,w){return v(A,i(y),i(w))},"Matrix, Matrix, Array":function(A,y,w){return v(A,y,i(w))},"Array, Array, Array":function(A,y,w){return v(i(A),i(y),i(w)).toArray()}});function v(g,A,y){for(var w=A.size()[0],x=g.size()[0],b=t(g),D=b.T,N=b.U,C=t(a(-1,A)),S=C.T,M=C.U,E=a(a(u(N),y),M),R=s(0,x),I=[],k=(we,ve)=>o(we,ve,1),T=(we,ve)=>o(we,ve,0),O=0;O<w;O++)if(O<w-1&&p(c(S,l(O+1,O)))>1e-5){for(var U=T(c(E,l(R,O)),c(E,l(R,O+1))),F=0;F<O;F++)U=f(U,T(a(I[F],c(S,l(F,O))),a(I[F],c(S,l(F,O+1)))));var _=a(d(x),a(-1,c(S,l(O,O)))),G=a(d(x),a(-1,c(S,l(O+1,O)))),K=a(d(x),a(-1,c(S,l(O,O+1)))),L=a(d(x),a(-1,c(S,l(O+1,O+1)))),X=T(k(f(D,_),G),k(K,f(D,L))),Q=m(X,U);I[O]=Q.subset(l(s(0,x),0)),I[O+1]=Q.subset(l(s(x,2*x),0)),O++}else{for(var J=c(E,l(R,O)),ae=0;ae<O;ae++)J=f(J,a(I[ae],c(S,l(ae,O))));var le=c(S,l(O,O)),ie=h(D,a(le,d(x)));I[O]=m(ie,J)}var ee=i(n(...I)),fe=a(N,a(ee,u(M)));return fe}}),iv="schur",f_=["typed","matrix","identity","multiply","qr","norm","subtract"],h_=P(iv,f_,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:a,norm:s,subtract:o}=r;return e(iv,{Array:function(c){var f=u(t(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,h=n(c),d=0,m;do{m=f;var p=a(f),v=p.Q,g=p.R;if(f=i(g,v),h=i(h,v),d++>100)break}while(s(o(f,m))>1e-4);return{U:h,T:f}}}),av="lyap",d_=["typed","matrix","sylvester","multiply","transpose"],m_=P(av,d_,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:a}=r;return e(av,{"Matrix, Matrix":function(o,u){return n(o,a(o),i(-1,u))},"Array, Matrix":function(o,u){return n(t(o),a(t(o)),i(-1,u))},"Matrix, Array":function(o,u){return n(o,a(t(o)),t(i(-1,u)))},"Array, Array":function(o,u){return n(t(o),a(t(o)),t(i(-1,u))).toArray()}})}),p_="divide",g_=["typed","matrix","multiply","equalScalar","divideScalar","inv"],v_=P(p_,g_,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:a,inv:s}=r,o=$t({typed:e,equalScalar:i}),u=kr({typed:e});return e("divide",Pb({"Array | Matrix, Array | Matrix":function(c,f){return n(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,a,!1)},"SparseMatrix, any":function(c,f){return o(c,f,a,!1)},"Array, any":function(c,f){return u(t(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,s(f))}},a.signatures))}),sv="distance",y_=["typed","addScalar","subtract","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],b_=P(sv,y_,r=>{var{typed:e,addScalar:t,subtract:n,multiplyScalar:i,divideScalar:a,deepEqual:s,sqrt:o,abs:u}=r;return e(sv,{"Array, Array, Array":function(x,b,D){if(x.length===2&&b.length===2&&D.length===2){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(b))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(b,D))throw new TypeError("LinePoint1 should not be same with LinePoint2");var N=n(D[1],b[1]),C=n(b[0],D[0]),S=n(i(D[0],b[1]),i(b[0],D[1]));return v(x[0],x[1],N,C,S)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,b,D){if(Object.keys(x).length===2&&Object.keys(b).length===2&&Object.keys(D).length===2){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(b))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(D))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(m(b),m(D)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in b&&"lineOnePtY"in b&&"lineTwoPtX"in D&&"lineTwoPtY"in D){var N=n(D.lineTwoPtY,b.lineOnePtY),C=n(b.lineOnePtX,D.lineTwoPtX),S=n(i(D.lineTwoPtX,b.lineOnePtY),i(b.lineOnePtX,D.lineTwoPtY));return v(x.pointX,x.pointY,N,C,S)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,b){if(x.length===2&&b.length===3){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(b))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return v(x[0],x[1],b[0],b[1],b[2])}else if(x.length===3&&b.length===6){if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!d(b))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(x[0],x[1],x[2],b[0],b[1],b[2],b[3],b[4],b[5])}else if(x.length===b.length&&x.length>0){if(!h(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!h(b))throw new TypeError("All values of an array should be numbers or BigNumbers");return A(x,b)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,b){if(Object.keys(x).length===2&&Object.keys(b).length===3){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(b))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in b&&"yCoeffLine"in b&&"constant"in b)return v(x.pointX,x.pointY,b.xCoeffLine,b.yCoeffLine,b.constant);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(b).length===6){if(!f(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!d(b))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in b&&"y0"in b&&"z0"in b&&"a"in b&&"b"in b&&"c"in b)return g(x.pointX,x.pointY,x.pointZ,b.x0,b.y0,b.z0,b.a,b.b,b.c);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===2&&Object.keys(b).length===2){if(!c(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(b))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in b&&"pointTwoY"in b)return A([x.pointOneX,x.pointOneY],[b.pointTwoX,b.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(b).length===3){if(!f(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(b))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in b&&"pointTwoY"in b&&"pointTwoZ"in b)return A([x.pointOneX,x.pointOneY,x.pointOneZ],[b.pointTwoX,b.pointTwoY,b.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(x){if(!p(x))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return y(x)}});function l(w){return typeof w=="number"||Ue(w)}function c(w){return w.constructor!==Array&&(w=m(w)),l(w[0])&&l(w[1])}function f(w){return w.constructor!==Array&&(w=m(w)),l(w[0])&&l(w[1])&&l(w[2])}function h(w){return Array.isArray(w)||(w=m(w)),w.every(l)}function d(w){return w.constructor!==Array&&(w=m(w)),l(w[0])&&l(w[1])&&l(w[2])&&l(w[3])&&l(w[4])&&l(w[5])}function m(w){for(var x=Object.keys(w),b=[],D=0;D<x.length;D++)b.push(w[x[D]]);return b}function p(w){if(w[0].length===2&&l(w[0][0])&&l(w[0][1])){if(w.some(x=>x.length!==2||!l(x[0])||!l(x[1])))return!1}else if(w[0].length===3&&l(w[0][0])&&l(w[0][1])&&l(w[0][2])){if(w.some(x=>x.length!==3||!l(x[0])||!l(x[1])||!l(x[2])))return!1}else return!1;return!0}function v(w,x,b,D,N){var C=u(t(t(i(b,w),i(D,x)),N)),S=o(t(i(b,b),i(D,D)));return a(C,S)}function g(w,x,b,D,N,C,S,M,E){var R=[n(i(n(N,x),E),i(n(C,b),M)),n(i(n(C,b),S),i(n(D,w),E)),n(i(n(D,w),M),i(n(N,x),S))];R=o(t(t(i(R[0],R[0]),i(R[1],R[1])),i(R[2],R[2])));var I=o(t(t(i(S,S),i(M,M)),i(E,E)));return a(R,I)}function A(w,x){for(var b=w.length,D=0,N=0,C=0;C<b;C++)N=n(w[C],x[C]),D=t(i(N,N),D);return o(D)}function y(w){for(var x=[],b=[],D=[],N=0;N<w.length-1;N++)for(var C=N+1;C<w.length;C++)w[0].length===2?(b=[w[N][0],w[N][1]],D=[w[C][0],w[C][1]]):w[0].length===3&&(b=[w[N][0],w[N][1],w[N][2]],D=[w[C][0],w[C][1],w[C][2]]),x.push(A(b,D));return x}}),x_="intersect",w_=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],A_=P(x_,w_,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:a,matrix:s,multiply:o,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:h,flatten:d,isZero:m,isNumeric:p}=r;return e("intersect",{"Array, Array, Array":v,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(M,E,R){var I=v(M.valueOf(),E.valueOf(),R.valueOf());return I===null?null:s(I)},"Matrix, Matrix, Matrix, Matrix":function(M,E,R,I){var k=g(M.valueOf(),E.valueOf(),R.valueOf(),I.valueOf());return k===null?null:s(k)}});function v(S,M,E){if(S=A(S),M=A(M),E=A(E),!w(S))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(E))throw new TypeError("Array with 4 numbers expected as third argument");return C(S[0],S[1],S[2],M[0],M[1],M[2],E[0],E[1],E[2],E[3])}function g(S,M,E,R){if(S=A(S),M=A(M),E=A(E),R=A(R),S.length===2){if(!y(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return b(S,M,E,R)}else if(S.length===3){if(!w(S))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!w(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return N(S[0],S[1],S[2],M[0],M[1],M[2],E[0],E[1],E[2],R[0],R[1],R[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function A(S){return S.length===1?S[0]:S.length>1&&Array.isArray(S[0])&&S.every(M=>Array.isArray(M)&&M.length===1)?d(S):S}function y(S){return S.length===2&&p(S[0])&&p(S[1])}function w(S){return S.length===3&&p(S[0])&&p(S[1])&&p(S[2])}function x(S){return S.length===4&&p(S[0])&&p(S[1])&&p(S[2])&&p(S[3])}function b(S,M,E,R){var I=S,k=E,T=c(I,M),O=c(k,R),U=c(u(T[0],O[1]),u(O[0],T[1]));if(m(U)||f(n(U),t.epsilon))return null;var F=u(O[0],I[1]),_=u(O[1],I[0]),G=u(O[0],k[1]),K=u(O[1],k[0]),L=l(a(c(c(F,_),G),K),U);return i(o(T,L),I)}function D(S,M,E,R,I,k,T,O,U,F,_,G){var K=u(c(S,M),c(E,R)),L=u(c(I,k),c(T,O)),X=u(c(U,F),c(_,G));return a(a(K,L),X)}function N(S,M,E,R,I,k,T,O,U,F,_,G){var K=D(S,T,F,T,M,O,_,O,E,U,G,U),L=D(F,T,R,S,_,O,I,M,G,U,k,E),X=D(S,T,R,S,M,O,I,M,E,U,k,E),Q=D(F,T,F,T,_,O,_,O,G,U,G,U),J=D(R,S,R,S,I,M,I,M,k,E,k,E),ae=c(u(K,L),u(X,Q)),le=c(u(J,Q),u(L,L));if(m(le))return null;var ie=l(ae,le),ee=l(a(K,u(ie,L)),Q),fe=a(S,u(ie,c(R,S))),we=a(M,u(ie,c(I,M))),ve=a(E,u(ie,c(k,E))),xe=a(T,u(ee,c(F,T))),z=a(O,u(ee,c(_,O))),V=a(U,u(ee,c(G,U)));return h(fe,xe)&&h(we,z)&&h(ve,V)?[fe,we,ve]:null}function C(S,M,E,R,I,k,T,O,U,F){var _=u(S,T),G=u(R,T),K=u(M,O),L=u(I,O),X=u(E,U),Q=u(k,U),J=c(c(c(F,_),K),X),ae=c(c(c(a(a(G,L),Q),_),K),X),le=l(J,ae),ie=a(S,u(le,c(R,S))),ee=a(M,u(le,c(I,M))),fe=a(E,u(le,c(k,E)));return[ie,ee,fe]}}),ov="sum",D_=["typed","config","add","numeric"],Ow=P(ov,D_,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(ov,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":s,"...":function(u){if(ji(u))throw new TypeError("Scalar values expected in function sum");return a(u)}});function a(o){var u;return fn(o,function(l){try{u=u===void 0?l:n(u,l)}catch(c){throw Zt(c,"sum",l)}}),u===void 0&&(u=i(0,t.number)),typeof u=="string"&&(u=i(u,t.number)),u}function s(o,u){try{var l=Au(o,u,n);return l}catch(c){throw Zt(c,"sum")}}}),Ks="cumsum",S_=["typed","add","unaryPlus"],Bw=P(Ks,S_,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(Ks,{Array:i,Matrix:function(l){return l.create(i(l.valueOf()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(l,c){return l.create(s(l.valueOf(),c))},"...":function(l){if(ji(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(u){try{return a(u)}catch(l){throw Zt(l,Ks)}}function a(u){if(u.length===0)return[];for(var l=[n(u[0])],c=1;c<u.length;++c)l.push(t(l[c-1],u[c]));return l}function s(u,l){var c=Pe(u);if(l<0||l>=c.length)throw new Ar(l,c.length);try{return o(u,l)}catch(f){throw Zt(f,Ks)}}function o(u,l){var c,f,h;if(l<=0){var d=u[0][0];if(Array.isArray(d)){for(h=px(u),f=[],c=0;c<h.length;c++)f[c]=o(h[c],l-1);return f}else return a(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=o(u[c],l-1);return f}}}),uv="mean",N_=["typed","add","divide"],Fw=P(uv,N_,r=>{var{typed:e,add:t,divide:n}=r;return e(uv,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(ji(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(s,o){try{var u=Au(s,o,t),l=Array.isArray(s)?Pe(s):s.size();return n(u,l[o])}catch(c){throw Zt(c,"mean")}}function a(s){var o,u=0;if(fn(s,function(l){try{o=o===void 0?l:t(o,l),u++}catch(c){throw Zt(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,u)}}),lv="median",C_=["typed","add","divide","compare","partitionSelect"],E_=P(lv,C_,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:a}=r;function s(l){try{l=Je(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,h=a(l,f+1),d=l[f],m=0;m<f;++m)i(l[m],d)>0&&(d=l[m]);return u(d,h)}else{var p=a(l,(c-1)/2);return o(p)}}catch(v){throw Zt(v,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(t(c,f),2)}});return e(lv,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(ji(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),cv="mad",M_=["typed","abs","map","median","subtract"],T_=P(cv,M_,r=>{var{typed:e,abs:t,map:n,median:i,subtract:a}=r;return e(cv,{"Array | Matrix":s,"...":function(u){return s(u)}});function s(o){if(o=Je(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=i(o);return i(n(o,function(l){return t(a(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.indexOf("median")!==-1?new TypeError(l.message.replace("median","mad")):Zt(l,"mad")}}}),sl="unbiased",fv="variance",O_=["typed","add","subtract","multiply","divide","apply","isNaN"],kw=P(fv,O_,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,apply:s,isNaN:o}=r;return e(fv,{"Array | Matrix":function(f){return u(f,sl)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,h){return l(f,h,sl)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,sl)}});function u(c,f){var h,d=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(fn(c,function(v){try{h=h===void 0?v:t(h,v),d++}catch(g){throw Zt(g,"variance",v)}}),d===0)throw new Error("Cannot calculate variance of an empty array");var m=a(h,d);if(h=void 0,fn(c,function(v){var g=n(v,m);h=h===void 0?i(g,g):t(h,i(g,g))}),o(h))return h;switch(f){case"uncorrected":return a(h,d);case"biased":return a(h,d+1);case"unbiased":{var p=Ue(h)?h.mul(0):0;return d===1?p:a(h,d-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,h){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,d=>u(d,h))}catch(d){throw Zt(d,"variance")}}}),hv="quantileSeq",B_=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],Rw=P(hv,B_,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:h}=r,d=bf({typed:e,isInteger:l});return e(hv,{"Array | Matrix, number | BigNumber":(A,y)=>p(A,y,!1),"Array | Matrix, number | BigNumber, number":(A,y,w)=>m(A,y,!1,w,p),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(A,y,w,x)=>m(A,y,w,x,p),"Array | Matrix, Array | Matrix":(A,y)=>v(A,y,!1),"Array | Matrix, Array | Matrix, number":(A,y,w)=>m(A,y,!1,w,v),"Array | Matrix, Array | Matrix, boolean":v,"Array | Matrix, Array | Matrix, boolean, number":(A,y,w,x)=>m(A,y,w,x,v)});function m(A,y,w,x,b){return d(A,x,D=>b(D,y,w))}function p(A,y,w){var x,b=A.valueOf();if(c(y,0))throw new Error("N/prob must be non-negative");if(f(y,1))return _e(y)?g(b,y,w):t(g(b,y,w));if(h(y,1)){if(!l(y))throw new Error("N must be a positive integer");if(h(y,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var D=n(y,1);x=[];for(var N=0;c(N,y);N++){var C=a(N+1,D);x.push(g(b,C,w))}return _e(y)?x:t(x)}}function v(A,y,w){for(var x=A.valueOf(),b=y.valueOf(),D=[],N=0;N<b.length;++N)D.push(g(x,b[N],w));return D}function g(A,y,w){var x=Je(A),b=x.length;if(b===0)throw new Error("Cannot calculate quantile of an empty sequence");var D=_e(y)?y*(b-1):y.times(b-1),N=_e(y)?Math.floor(D):D.floor().toNumber(),C=_e(y)?D%1:D.minus(N);if(l(D))return w?x[D]:o(x,_e(y)?D:D.valueOf());var S,M;if(w)S=x[N],M=x[N+1];else{M=o(x,N+1),S=x[N];for(var E=0;E<N;++E)u(x[E],S)>0&&(S=x[E])}return n(s(S,i(1,C)),s(M,C))}}),dv="std",F_=["typed","map","sqrt","variance"],Iw=P(dv,F_,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(dv,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return ln(u)?t(u,n):n(u)}catch(l){throw l instanceof TypeError&&l.message.indexOf(" variance")!==-1?new TypeError(l.message.replace(" variance"," std")):l}}}),mv="corr",k_=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],R_=P(mv,k_,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:a,subtract:s,multiply:o,pow:u,divide:l}=r;return e(mv,{"Array, Array":function(d,m){return c(d,m)},"Matrix, Matrix":function(d,m){return t(c(d.toArray(),m.toArray()))}});function c(h,d){if(Array.isArray(h[0])&&Array.isArray(d[0])){for(var m=[],p=0;p<h.length;p++)m.push(f(h[p],d[p]));return m}else return f(h,d)}function f(h,d){var m=h.length,p=i(h),v=i(d),g=h.reduce((b,D,N)=>a(b,o(D,d[N])),0),A=i(h.map(b=>u(b,2))),y=i(d.map(b=>u(b,2))),w=s(o(m,g),o(p,v)),x=n(o(s(o(m,A),u(p,2)),s(o(m,y),u(v,2))));return l(w,x)}}),pv="combinations",I_=["typed"],P_=P(pv,I_,r=>{var{typed:e}=r;return e(pv,{"number, number":$x,"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,u=n.minus(i),l=new a(1);if(!gv(n)||!gv(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function gv(r){return r.isInteger()&&r.gte(0)}var vv="combinationsWithRep",$_=["typed"],__=P(vv,$_,r=>{var{typed:e}=r;return e(vv,{"number, number":function(n,i){if(!Ee(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Ee(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var a=tn(n,n+i-1);return a/tn(1,i)}var s=tn(i+1,n+i-1);return s/tn(1,n-1)},"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,u=new a(1),l=n.minus(u);if(!yv(n)||!yv(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function yv(r){return r.isInteger()&&r.gte(0)}var bv="gamma",L_=["typed","config","multiplyScalar","pow","BigNumber","Complex"],z_=P(bv,L_,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:a,Complex:s}=r;function o(l){if(l.im===0)return Lo(l.re);if(l.re<.5){var c=new s(1-l.re,-l.im),f=new s(Math.PI*l.re,Math.PI*l.im);return new s(Math.PI).div(f.sin()).div(o(c))}l=new s(l.re-1,l.im);for(var h=new s(Bi[0],0),d=1;d<Bi.length;++d){var m=new s(Bi[d],0);h=h.add(m.div(l.add(d)))}var p=new s(l.re+Ux+.5,l.im),v=Math.sqrt(2*Math.PI),g=p.pow(l.add(.5)),A=p.neg().exp();return h.mul(v).mul(g).mul(A)}return e(bv,{number:Lo,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):u(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new a([1,1,2,6,24,120,720,5040][l]);var c=t.precision+(Math.log(l.toNumber())|0),f=a.clone({precision:c});if(l%2===1)return l.times(u(new a(l-1)));for(var h=l,d=new f(l),m=l.toNumber();h>2;)h-=2,m+=h,d=d.times(m);return new a(d.toPrecision(a.precision))}}),xv="lgamma",q_=["Complex","typed"],U_=P(xv,q_,r=>{var{Complex:e,typed:t}=r,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(xv,{number:zo,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(l){var c=6.283185307179586,f=1.1447298858494002,h=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(zo(l.re),0);if(l.re>=n||Math.abs(l.im)>=i)return o(l);if(l.re<=h){var d=BM(c,l.im)*Math.floor(.5*l.re+.25),m=l.mul(Math.PI).sin().log(),p=s(new e(1-l.re,-l.im));return new e(f,d).sub(m).sub(p)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function o(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(Hx),f=new e(1,0).div(l),h=f.div(l),d=a[0],m=a[1],p=2*h.re,v=h.re*h.re+h.im*h.im,g=2;g<8;g++){var A=m;m=-v*d+a[g],d=p*d+A}var y=f.mul(h.mul(d).add(m));return c.add(y)}function u(l){var c=0,f=0,h=l;for(l=l.add(1);l.re<=n;){h=h.mul(l);var d=h.im<0?1:0;d!==0&&f===0&&c++,f=d,l=l.add(1)}return o(l).sub(h.log()).sub(new e(0,c*2*Math.PI*1))}}),wv="factorial",H_=["typed","gamma"],V_=P(wv,H_,r=>{var{typed:e,gamma:t}=r;return e(wv,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>Ve(i,n))})}),Av="kldivergence",W_=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],G_=P(Av,W_,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:a,map:s,dotDivide:o,log:u,isNumeric:l}=r;return e(Av,{"Array, Array":function(h,d){return c(t(h),t(d))},"Matrix, Array":function(h,d){return c(h,t(d))},"Array, Matrix":function(h,d){return c(t(h),d)},"Matrix, Matrix":function(h,d){return c(h,d)}});function c(f,h){var d=h.size().length,m=f.size().length;if(d>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(d!==m)throw new Error("Length of two vectors must be equal");var p=i(f);if(p===0)throw new Error("Sum of elements in first object must be non zero");var v=i(h);if(v===0)throw new Error("Sum of elements in second object must be non zero");var g=n(f,i(f)),A=n(h,i(h)),y=i(a(g,s(o(g,A),w=>u(w))));return l(y)?y:Number.NaN}}),Dv="multinomial",Y_=["typed","add","divide","multiply","factorial","isInteger","isPositive"],K_=P(Dv,Y_,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:a,isInteger:s,isPositive:o}=r;return e(Dv,{"Array | Matrix":function(l){var c=0,f=1;return fn(l,function(h){if(!s(h)||!o(h))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,h),f=i(f,a(h))}),n(a(c),f)}})}),Sv="permutations",X_=["typed","factorial"],Z_=P(Sv,X_,r=>{var{typed:e,factorial:t}=r;return e(Sv,{"number | BigNumber":t,"number, number":function(i,a){if(!Ee(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!Ee(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return tn(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var s,o;if(!Nv(i)||!Nv(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var u=i.mul(0).add(1);for(s=u,o=i.minus(a).plus(1);o.lte(i);o=o.plus(1))s=s.times(o);return s}})});function Nv(r){return r.isInteger()&&r.gte(0)}var Cf={exports:{}};Cf.exports;(function(r){(function(e,t,n){function i(u){var l=this,c=o();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function s(u,l){var c=new i(u),f=l&&l.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function o(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var h=.02519603282416938*u;u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296}return(u>>>0)*23283064365386963e-26};return l}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(ui,r,!1)})(Cf);var J_=Cf.exports,Ef={exports:{}};Ef.exports;(function(r){(function(e,t,n){function i(o){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u}function s(o,u){var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(ui,r,!1)})(Ef);var j_=Ef.exports,Mf={exports:{}};Mf.exports;(function(r){(function(e,t,n){function i(o){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u.v=o.v,u.d=o.d,u}function s(o,u){var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(ui,r,!1)})(Mf);var Q_=Mf.exports,Tf={exports:{}};Tf.exports;(function(r){(function(e,t,n){function i(o){var u=this;u.next=function(){var c=u.x,f=u.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,u.i=f+1&7,d};function l(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}l(u,o)}function a(o,u){return u.x=o.x.slice(),u.i=o.i,u}function s(o,u){o==null&&(o=+new Date);var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(ui,r,!1)})(Tf);var eL=Tf.exports,Of={exports:{}};Of.exports;(function(r){(function(e,t,n){function i(o){var u=this;u.next=function(){var c=u.w,f=u.X,h=u.i,d,m;return u.w=c=c+1640531527|0,m=f[h+34&127],d=f[h=h+1&127],m^=m<<13,d^=d<<17,m^=m>>>15,d^=d>>>12,m=f[h]=m^d,u.i=h,m+(c^c>>>16)|0};function l(c,f){var h,d,m,p,v,g=[],A=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,A=Math.max(A,f.length)),m=0,p=-32;p<A;++p)f&&(d^=f.charCodeAt((p+32)%f.length)),p===0&&(v=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,p>=0&&(v=v+1640531527|0,h=g[p&127]^=d+v,m=h==0?m+1:0);for(m>=128&&(g[(f&&f.length||0)&127]=-1),m=127,p=4*128;p>0;--p)d=g[m+34&127],h=g[m=m+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,g[m]=d^h;c.w=v,c.X=g,c.i=m}l(u,o)}function a(o,u){return u.i=o.i,u.w=o.w,u.X=o.X.slice(),u}function s(o,u){o==null&&(o=+new Date);var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})(ui,r,!1)})(Of);var tL=Of.exports,Bf={exports:{}};Bf.exports;(function(r){(function(e,t,n){function i(o){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,m=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,o===Math.floor(o)?(u.a=o/4294967296|0,u.b=o|0):l+=o;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(o,u){return u.a=o.a,u.b=o.b,u.c=o.c,u.d=o.d,u}function s(o,u){var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(ui,r,!1)})(Bf);var rL=Bf.exports,Pw={exports:{}};const nL={},iL=Object.freeze(Object.defineProperty({__proto__:null,default:nL},Symbol.toStringTag,{value:"Module"})),aL=JT(iL);(function(r){(function(e,t,n){var i=256,a=6,s=52,o="random",u=n.pow(i,a),l=n.pow(2,s),c=l*2,f=i-1,h;function d(w,x,b){var D=[];x=x==!0?{entropy:!0}:x||{};var N=g(v(x.entropy?[w,y(t)]:w??A(),3),D),C=new m(D),S=function(){for(var M=C.g(a),E=u,R=0;M<l;)M=(M+R)*i,E*=i,R=C.g(1);for(;M>=c;)M/=2,E/=2,R>>>=1;return(M+R)/E};return S.int32=function(){return C.g(4)|0},S.quick=function(){return C.g(4)/4294967296},S.double=S,g(y(C.S),t),(x.pass||b||function(M,E,R,I){return I&&(I.S&&p(I,C),M.state=function(){return p(C,{})}),R?(n[o]=M,E):M})(S,N,"global"in x?x.global:this==n,x.state)}function m(w){var x,b=w.length,D=this,N=0,C=D.i=D.j=0,S=D.S=[];for(b||(w=[b++]);N<i;)S[N]=N++;for(N=0;N<i;N++)S[N]=S[C=f&C+w[N%b]+(x=S[N])],S[C]=x;(D.g=function(M){for(var E,R=0,I=D.i,k=D.j,T=D.S;M--;)E=T[I=f&I+1],R=R*i+T[f&(T[I]=T[k=f&k+E])+(T[k]=E)];return D.i=I,D.j=k,R})(i)}function p(w,x){return x.i=w.i,x.j=w.j,x.S=w.S.slice(),x}function v(w,x){var b=[],D=typeof w,N;if(x&&D=="object")for(N in w)try{b.push(v(w[N],x-1))}catch{}return b.length?b:D=="string"?w:w+"\0"}function g(w,x){for(var b=w+"",D,N=0;N<b.length;)x[f&N]=f&(D^=x[f&N]*19)+b.charCodeAt(N++);return y(x)}function A(){try{var w;return h&&(w=h.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),y(w)}catch{var x=e.navigator,b=x&&x.plugins;return[+new Date,e,b,e.screen,y(t)]}}function y(w){return String.fromCharCode.apply(0,w)}if(g(n.random(),t),r.exports){r.exports=d;try{h=aL}catch{}}else n["seed"+o]=d})(typeof self<"u"?self:ui,[],Math)})(Pw);var sL=Pw.exports,oL=J_,uL=j_,lL=Q_,cL=eL,fL=tL,hL=rL,ci=sL;ci.alea=oL;ci.xor128=uL;ci.xorwow=lL;ci.xorshift7=cL;ci.xor4096=fL;ci.tychei=hL;var dL=ci;const $w=Ji(dL);var mL=$w(Date.now());function Vi(r){var e;function t(i){e=i===null?mL:$w(String(i))}t(r);function n(){return e()}return n}var Cv="pickRandom",pL=["typed","config","?on"],gL=P(Cv,pL,r=>{var{typed:e,config:t,on:n}=r,i=Vi(t.randomSeed);return n&&n("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=Vi(s.randomSeed))}),e(Cv,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,u){return a(o,u)},"Array | Matrix, number":function(o,u){return a(o,{number:u})},"Array | Matrix, Array | Matrix":function(o,u){return a(o,{weights:u})},"Array | Matrix, Array | Matrix, number":function(o,u,l){return a(o,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(o,u,l){return a(o,{number:u,weights:l})}});function a(s,o){var{number:u,weights:l,elementWise:c=!0}=o,f=typeof u>"u";f&&(u=1);var h=Oe(s)?s.create:Oe(l)?l.create:null;s=s.valueOf(),l&&(l=l.valueOf()),c===!0&&(s=Je(s),l=Je(l));var d=0;if(typeof l<"u"){if(l.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var m=0,p=l.length;m<p;m++){if(!_e(l[m])||l[m]<0)throw new Error("Weights must be an array of positive numbers");d+=l[m]}}for(var v=s.length,g=[],A;g.length<u;){if(typeof l>"u")A=s[Math.floor(i()*v)];else for(var y=i()*d,w=0,x=s.length;w<x;w++)if(y-=l[w],y<0){A=s[w];break}g.push(A)}return f?g[0]:h?h(g):g}});function Ff(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(Ff(r,e));else for(var a=0,s=r.shift();a<s;a++)t.push(e());return t}var Ev="random",vL=["typed","config","?on"],yL=P(Ev,vL,r=>{var{typed:e,config:t,on:n}=r,i=Vi(t.randomSeed);return n&&n("config",function(o,u){o.randomSeed!==u.randomSeed&&(i=Vi(o.randomSeed))}),e(Ev,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,u)=>a(o,0,u),"Array | Matrix, number, number":(o,u,l)=>a(o,u,l)});function a(o,u,l){var c=Ff(o.valueOf(),()=>s(u,l));return Oe(o)?o.create(c):c}function s(o,u){return o+i()*(u-o)}}),Mv="randomInt",bL=["typed","config","?on"],xL=P(Mv,bL,r=>{var{typed:e,config:t,on:n}=r,i=Vi(t.randomSeed);return n&&n("config",function(o,u){o.randomSeed!==u.randomSeed&&(i=Vi(o.randomSeed))}),e(Mv,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,u)=>a(o,0,u),"Array | Matrix, number, number":(o,u,l)=>a(o,u,l)});function a(o,u,l){var c=Ff(o.valueOf(),()=>s(u,l));return Oe(o)?o.create(c):c}function s(o,u){return Math.floor(o+i()*(u-o))}}),Tv="stirlingS2",wL=["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],AL=P(Tv,wL,r=>{var{typed:e,addScalar:t,subtract:n,multiplyScalar:i,divideScalar:a,pow:s,factorial:o,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:h,larger:d}=r,m=[],p=[];return e(Tv,{"number | BigNumber, number | BigNumber":function(g,A){if(!c(g)||l(g)||!c(A)||l(A))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(d(A,g))throw new TypeError("k must be less than or equal to n in function stirlingS2");var y=!(_e(g)&&_e(A)),w=y?p:m,x=y?h:f,b=f(g),D=f(A);if(w[b]&&w[b].length>D)return w[b][D];for(var N=0;N<=b;++N)if(w[N]||(w[N]=[x(N===0?1:0)]),N!==0)for(var C=w[N],S=w[N-1],M=C.length;M<=N&&M<=D;++M)M===N?C[M]=1:C[M]=t(i(x(M),S[M]),S[M-1]);return w[b][D]}})}),Ov="bellNumbers",DL=["typed","addScalar","isNegative","isInteger","stirlingS2"],SL=P(Ov,DL,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:a}=r;return e(Ov,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=o;l++)u=t(u,a(o,l));return u}})}),Bv="catalan",NL=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],CL=P(Bv,NL,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:s,isInteger:o}=r;return e(Bv,{"number | BigNumber":function(l){if(!o(l)||s(l))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(l,2),l),t(l,1))}})}),Fv="composition",EL=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],ML=P(Fv,EL,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:a,isInteger:s,larger:o}=r;return e(Fv,{"number | BigNumber, number | BigNumber":function(l,c){if(!s(l)||!i(l)||!s(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,l))throw new TypeError("k must be less than or equal to n in function composition");return n(t(l,-1),t(c,-1))}})}),kv="leafCount",TL=["parse","typed"],OL=P(kv,TL,r=>{var{parse:e,typed:t}=r;function n(i){var a=0;return i.forEach(s=>{a+=n(s)}),a||1}return t(kv,{Node:function(a){return n(a)}})});function Rv(r){return Xe(r)||xt(r)&&r.isUnary()&&Xe(r.args[0])}function Zo(r){return!!(Xe(r)||(cn(r)||xt(r))&&r.args.every(Zo)||Gr(r)&&Zo(r.content))}function Iv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ol(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Iv(Object(t),!0).forEach(function(n){Et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Iv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var BL="simplifyUtil",FL=["FunctionNode","OperatorNode","SymbolNode"],kf=P(BL,FL,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,a=!1,s="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},u={divide:{total:a},log:{total:a}},l={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(y,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,b=s;if(typeof y=="string"?b=y:xt(y)?b=y.fn.toString():cn(y)?b=y.name:Gr(y)&&(b="paren"),De(x,b)){var D=x[b];if(De(D,w))return D[w];if(De(o,b))return o[b][w]}if(De(x,s)){var N=x[s];return De(N,w)?N[w]:o[s][w]}if(De(o,b)){var C=o[b];if(De(C,w))return C[w]}return o[s][w]}function f(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"commutative",w)}function h(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"associative",w)}function d(y,w){var x=ol({},y);for(var b in w)De(y,b)?x[b]=ol(ol({},w[b]),y[b]):x[b]=w[b];return x}function m(y,w){if(!y.args||y.args.length===0)return y;y.args=p(y,w);for(var x=0;x<y.args.length;x++)m(y.args[x],w)}function p(y,w){var x,b=[],D=function N(C){for(var S=0;S<C.args.length;S++){var M=C.args[S];xt(M)&&x===M.op?N(M):b.push(M)}};return h(y,w)?(x=y.op,D(y),b):y.args}function v(y,w){if(!(!y.args||y.args.length===0)){for(var x=A(y),b=y.args.length,D=0;D<b;D++)v(y.args[D],w);if(b>2&&h(y,w)){for(var N=y.args.pop();y.args.length>0;)N=x([y.args.pop(),N]);y.args=N.args}}}function g(y,w){if(!(!y.args||y.args.length===0)){for(var x=A(y),b=y.args.length,D=0;D<b;D++)g(y.args[D],w);if(b>2&&h(y,w)){for(var N=y.args.shift();y.args.length>0;)N=x([N,y.args.shift()]);y.args=N.args}}}function A(y){return xt(y)?function(w){try{return new t(y.op,y.fn,w,y.implicit)}catch(x){return console.error(x),[]}}:function(w){return new e(new n(y.name),w)}}return{createMakeNodeFunction:A,hasProperty:c,isCommutative:f,isAssociative:h,mergeContext:d,flatten:m,allChildren:p,unflattenr:v,unflattenl:g,defaultContext:o,realContext:u,positiveContext:l}}),kL="simplify",RL=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],IL=P(kL,RL,r=>{var{config:e,typed:t,parse:n,add:i,subtract:a,multiply:s,divide:o,pow:u,isZero:l,equal:c,resolve:f,simplifyConstant:h,simplifyCore:d,fraction:m,bignumber:p,mathWithTransform:v,matrix:g,AccessorNode:A,ArrayNode:y,ConstantNode:w,FunctionNode:x,IndexNode:b,ObjectNode:D,OperatorNode:N,ParenthesisNode:C,SymbolNode:S}=r,{hasProperty:M,isCommutative:E,isAssociative:R,mergeContext:I,flatten:k,unflattenr:T,unflattenl:O,createMakeNodeFunction:U,defaultContext:F,realContext:_,positiveContext:G}=kf({FunctionNode:x,OperatorNode:N,SymbolNode:S});t.addConversion({from:"Object",to:"Map",convert:Oi});var K=t("simplify",{Node:ie,"Node, Map":(H,Y)=>ie(H,!1,Y),"Node, Map, Object":(H,Y,j)=>ie(H,!1,Y,j),"Node, Array":ie,"Node, Array, Map":ie,"Node, Array, Map, Object":ie});t.removeConversion({from:"Object",to:"Map",convert:Oi}),K.defaultContext=F,K.realContext=_,K.positiveContext=G;function L(H){return H.transform(function(Y,j,ce){return Gr(Y)?L(Y.content):Y})}var X={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};K.rules=[d,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},h,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},h,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function Q(H,Y){var j={};if(H.s){var ce=H.s.split("->");if(ce.length===2)j.l=ce[0],j.r=ce[1];else throw SyntaxError("Could not parse rule: "+H.s)}else j.l=H.l,j.r=H.r;j.l=L(n(j.l)),j.r=L(n(j.r));for(var oe of["imposeContext","repeat","assuming"])oe in H&&(j[oe]=H[oe]);if(H.evaluate&&(j.evaluate=n(H.evaluate)),R(j.l,Y)){var $=!E(j.l,Y),q;$&&(q=le());var Z=U(j.l),re=le();j.expanded={},j.expanded.l=Z([j.l,re]),k(j.expanded.l,Y),T(j.expanded.l,Y),j.expanded.r=Z([j.r,re]),$&&(j.expandedNC1={},j.expandedNC1.l=Z([q,j.l]),j.expandedNC1.r=Z([q,j.r]),j.expandedNC2={},j.expandedNC2.l=Z([q,j.expanded.l]),j.expandedNC2.r=Z([q,j.expanded.r]))}return j}function J(H,Y){for(var j=[],ce=0;ce<H.length;ce++){var oe=H[ce],$=void 0,q=typeof oe;switch(q){case"string":oe={s:oe};case"object":$=Q(oe,Y);break;case"function":$=oe;break;default:throw TypeError("Unsupported type of rule: "+q)}j.push($)}return j}var ae=0;function le(){return new S("_p"+ae++)}function ie(H,Y){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ui(),ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},oe=ce.consoleDebug;Y=J(Y||K.rules,ce.context);var $=f(H,j);$=L($);for(var q={},Z=$.toString({parenthesis:"all"});!q[Z];){q[Z]=!0,ae=0;var re=Z;oe&&console.log("Working on: ",Z);for(var ue=0;ue<Y.length;ue++){var se="";if(typeof Y[ue]=="function"?($=Y[ue]($,ce),oe&&(se=Y[ue].name)):(k($,ce.context),$=fe($,Y[ue],ce.context),oe&&(se="".concat(Y[ue].l.toString()," -> ").concat(Y[ue].r.toString()))),oe){var ge=$.toString({parenthesis:"all"});ge!==re&&(console.log("Applying",se,"produced",ge),re=ge)}O($,ce.context)}Z=$.toString({parenthesis:"all"})}return $}function ee(H,Y,j){var ce=H;if(H)for(var oe=0;oe<H.length;++oe){var $=fe(H[oe],Y,j);$!==H[oe]&&(ce===H&&(ce=H.slice()),ce[oe]=$)}return ce}function fe(H,Y,j){if(Y.assuming){for(var ce in Y.assuming)for(var oe in Y.assuming[ce])if(M(ce,oe,j)!==Y.assuming[ce][oe])return H}var $=I(Y.imposeContext,j),q=H;if(q instanceof N||q instanceof x){var Z=ee(q.args,Y,j);Z!==q.args&&(q=q.clone(),q.args=Z)}else if(q instanceof C){if(q.content){var re=fe(q.content,Y,j);re!==q.content&&(q=new C(re))}}else if(q instanceof y){var ue=ee(q.items,Y,j);ue!==q.items&&(q=new y(ue))}else if(q instanceof A){var se=q.object;q.object&&(se=fe(q.object,Y,j));var ge=q.index;q.index&&(ge=fe(q.index,Y,j)),(se!==q.object||ge!==q.index)&&(q=new A(se,ge))}else if(q instanceof b){var me=ee(q.dimensions,Y,j);me!==q.dimensions&&(q=new b(me))}else if(q instanceof D){var be=!1,pe={};for(var We in q.properties)pe[We]=fe(q.properties[We],Y,j),pe[We]!==q.properties[We]&&(be=!0);be&&(q=new D(pe))}var Ge=Y.r,Ye=V(Y.l,q,$)[0];if(!Ye&&Y.expanded&&(Ge=Y.expanded.r,Ye=V(Y.expanded.l,q,$)[0]),!Ye&&Y.expandedNC1&&(Ge=Y.expandedNC1.r,Ye=V(Y.expandedNC1.l,q,$)[0],Ye||(Ge=Y.expandedNC2.r,Ye=V(Y.expandedNC2.l,q,$)[0])),Ye){var ze=q.implicit;q=Ge.clone(),ze&&"implicit"in Ge&&(q.implicit=!0),q=q.transform(function(lt){return lt.isSymbolNode&&De(Ye.placeholders,lt.name)?Ye.placeholders[lt.name].clone():lt})}return Y.repeat&&q!==H&&(q=fe(q,Y,j)),q}function we(H,Y){var j=[],ce,oe,$=U(H);if(E(H,Y))for(var q=0;q<H.args.length;q++)oe=H.args.slice(0),oe.splice(q,1),ce=oe.length===1?oe[0]:$(oe),j.push($([H.args[q],ce]));else for(var Z=1;Z<H.args.length;Z++){var re=H.args[0];Z>1&&(re=$(H.args.slice(0,Z))),oe=H.args.slice(Z),ce=oe.length===1?oe[0]:$(oe),j.push($([re,ce]))}return j}function ve(H,Y){var j={placeholders:{}};if(!H.placeholders&&!Y.placeholders)return j;if(H.placeholders){if(!Y.placeholders)return H}else return Y;for(var ce in H.placeholders)if(De(H.placeholders,ce)&&(j.placeholders[ce]=H.placeholders[ce],De(Y.placeholders,ce)&&!te(H.placeholders[ce],Y.placeholders[ce])))return null;for(var oe in Y.placeholders)De(Y.placeholders,oe)&&(j.placeholders[oe]=Y.placeholders[oe]);return j}function xe(H,Y){var j=[];if(H.length===0||Y.length===0)return j;for(var ce,oe=0;oe<H.length;oe++)for(var $=0;$<Y.length;$++)ce=ve(H[oe],Y[$]),ce&&j.push(ce);return j}function z(H){if(H.length===0)return H;for(var Y=H.reduce(xe),j=[],ce={},oe=0;oe<Y.length;oe++){var $=JSON.stringify(Y[oe]);ce[$]||(ce[$]=!0,j.push(Y[oe]))}return j}function V(H,Y,j,ce){var oe=[{placeholders:{}}];if(H instanceof N&&Y instanceof N||H instanceof x&&Y instanceof x){if(H instanceof N){if(H.op!==Y.op||H.fn!==Y.fn)return[]}else if(H instanceof x&&H.name!==Y.name)return[];if(Y.args.length===1&&H.args.length===1||!R(Y,j)&&Y.args.length===H.args.length||ce){for(var $=[],q=0;q<H.args.length;q++){var Z=V(H.args[q],Y.args[q],j);if(Z.length===0)break;$.push(Z)}if($.length!==H.args.length){if(!E(Y,j)||H.args.length===1)return[];if(H.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var re=V(H.args[0],Y.args[1],j);if(re.length===0)return[];var ue=V(H.args[1],Y.args[0],j);if(ue.length===0)return[];$=[re,ue]}oe=z($)}else if(Y.args.length>=2&&H.args.length===2){for(var se=we(Y,j),ge=[],me=0;me<se.length;me++){var be=V(H,se[me],j,!0);ge=ge.concat(be)}return ge}else{if(H.args.length>2)throw Error("Unexpected non-binary associative function: "+H.toString());return[]}}else if(H instanceof S){if(H.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(X[H.name]){if(H.name!==Y.name)return[]}else switch(H.name[1]>="a"&&H.name[1]<="z"?H.name.substring(0,2):H.name[0]){case"n":case"_p":oe[0].placeholders[H.name]=Y;break;case"c":case"cl":if(Xe(Y))oe[0].placeholders[H.name]=Y;else return[];break;case"v":if(!Xe(Y))oe[0].placeholders[H.name]=Y;else return[];break;case"vl":if(Ct(Y))oe[0].placeholders[H.name]=Y;else return[];break;case"cd":if(Rv(Y))oe[0].placeholders[H.name]=Y;else return[];break;case"vd":if(!Rv(Y))oe[0].placeholders[H.name]=Y;else return[];break;case"ce":if(Zo(Y))oe[0].placeholders[H.name]=Y;else return[];break;case"ve":if(!Zo(Y))oe[0].placeholders[H.name]=Y;else return[];break;default:throw new Error("Invalid symbol in rule: "+H.name)}}else if(H instanceof w){if(!c(H.value,Y.value))return[]}else return[];return oe}function te(H,Y){if(H instanceof w&&Y instanceof w){if(!c(H.value,Y.value))return!1}else if(H instanceof S&&Y instanceof S){if(H.name!==Y.name)return!1}else if(H instanceof N&&Y instanceof N||H instanceof x&&Y instanceof x){if(H instanceof N){if(H.op!==Y.op||H.fn!==Y.fn)return!1}else if(H instanceof x&&H.name!==Y.name)return!1;if(H.args.length!==Y.args.length)return!1;for(var j=0;j<H.args.length;j++)if(!te(H.args[j],Y.args[j]))return!1}else return!1;return!0}return K}),PL="simplifyConstant",$L=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],_L=P(PL,$L,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,fraction:a,bignumber:s,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:h,OperatorNode:d,SymbolNode:m}=r,{isCommutative:p,isAssociative:v,allChildren:g,createMakeNodeFunction:A}=kf({FunctionNode:c,OperatorNode:d,SymbolNode:m}),y=e("simplifyConstant",{Node:k=>D(I(k,{})),"Node, Object":function(T,O){return D(I(T,O))}});function w(k){return si(k)?k.valueOf():k instanceof Array?k.map(w):Oe(k)?i(w(k.valueOf())):k}function x(k,T,O){try{return n[k].apply(null,T)}catch{return T=T.map(w),C(n[k].apply(null,T),O)}}var b=e({Fraction:M,number:function(T){return T<0?S(new l(-T)):new l(T)},BigNumber:function(T){return T<0?S(new l(-T)):new l(T)},Complex:function(T){throw new Error("Cannot convert Complex number to Node")},string:function(T){return new l(T)},Matrix:function(T){return new u(T.valueOf().map(O=>b(O)))}});function D(k){return tt(k)?k:b(k)}function N(k,T){var O=T&&T.exactFractions!==!1;if(O&&isFinite(k)&&a){var U=a(k),F=T&&typeof T.fractionsLimit=="number"?T.fractionsLimit:1/0;if(U.valueOf()===k&&U.n<F&&U.d<F)return U}return k}var C=e({"string, Object":function(T,O){if(t.number==="BigNumber")return s===void 0&&Af(),s(T);if(t.number==="Fraction")return a===void 0&&gw(),a(T);var U=parseFloat(T);return N(U,O)},"Fraction, Object":function(T,O){return T},"BigNumber, Object":function(T,O){return T},"number, Object":function(T,O){return N(T,O)},"Complex, Object":function(T,O){return T.im!==0?T:N(T.re,O)},"Matrix, Object":function(T,O){return i(N(T.valueOf()))},"Array, Object":function(T,O){return T.map(N)}});function S(k){return new d("-","unaryMinus",[k])}function M(k){var T,O=k.s*k.n;return O<0?T=new d("-","unaryMinus",[new l(-O)]):T=new l(O),k.d===1?T:new d("/","divide",[T,new l(k.d)])}function E(k,T,O){if(!oi(T))return new o(D(k),D(T));if(lr(k)||Oe(k)){for(var U=Array.from(T.dimensions);U.length>0;)if(Xe(U[0])&&typeof U[0].value!="string"){var F=C(U.shift().value,O);lr(k)?k=k.items[F-1]:(k=k.valueOf()[F-1],k instanceof Array&&(k=i(k)))}else if(U.length>1&&Xe(U[1])&&typeof U[1].value!="string"){var _=C(U[1].value,O),G=[],K=lr(k)?k.items:k.valueOf();for(var L of K)if(lr(L))G.push(L.items[_-1]);else if(Oe(k))G.push(L[_-1]);else break;if(G.length===K.length)lr(k)?k=new u(G):k=i(G),U.splice(1,1);else break}else break;return U.length===T.dimensions.length?new o(D(k),T):U.length>0?(T=new f(U),new o(D(k),T)):k}if(ns(k)&&T.dimensions.length===1&&Xe(T.dimensions[0])){var X=T.dimensions[0].value;return X in k.properties?k.properties[X]:new l}return new o(D(k),T)}function R(k,T,O,U){var F=T.shift(),_=T.reduce((G,K)=>{if(!tt(K)){var L=G.pop();if(tt(L))return[L,K];try{return G.push(x(k,[L,K],U)),G}catch{G.push(L)}}G.push(D(G.pop()));var X=G.length===1?G[0]:O(G);return[O([X,D(K)])]},[F]);return _.length===1?_[0]:O([_[0],b(_[1])])}function I(k,T){switch(k.type){case"SymbolNode":return k;case"ConstantNode":switch(typeof k.value){case"number":return C(k.value,T);case"string":return k.value;default:if(!isNaN(k.value))return C(k.value,T)}return k;case"FunctionNode":if(n[k.name]&&n[k.name].rawArgs)return k;{var O=["add","multiply"];if(O.indexOf(k.name)===-1){var U=k.args.map(fe=>I(fe,T));if(!U.some(tt))try{return x(k.name,U,T)}catch{}if(k.name==="size"&&U.length===1&&lr(U[0])){for(var F=[],_=U[0];lr(_);)F.push(_.items.length),_=_.items[0];return i(F)}return new c(k.name,U.map(D))}}case"OperatorNode":{var G=k.fn.toString(),K,L,X=A(k);if(xt(k)&&k.isUnary())K=[I(k.args[0],T)],tt(K[0])?L=X(K):L=x(G,K,T);else if(v(k,T.context))if(K=g(k,T.context),K=K.map(fe=>I(fe,T)),p(G,T.context)){for(var Q=[],J=[],ae=0;ae<K.length;ae++)tt(K[ae])?J.push(K[ae]):Q.push(K[ae]);Q.length>1?(L=R(G,Q,X,T),J.unshift(L),L=R(G,J,X,T)):L=R(G,K,X,T)}else L=R(G,K,X,T);else K=k.args.map(fe=>I(fe,T)),L=R(G,K,X,T);return L}case"ParenthesisNode":return I(k.content,T);case"AccessorNode":return E(I(k.object,T),I(k.index,T),T);case"ArrayNode":{var le=k.items.map(fe=>I(fe,T));return le.some(tt)?new u(le.map(D)):i(le)}case"IndexNode":return new f(k.dimensions.map(fe=>y(fe,T)));case"ObjectNode":{var ie={};for(var ee in k.properties)ie[ee]=y(k.properties[ee],T);return new h(ie)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(k.type))}}return y}),Pv="simplifyCore",LL=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],zL=P(Pv,LL,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:h,FunctionNode:d,IndexNode:m,ObjectNode:p,OperatorNode:v,ParenthesisNode:g,SymbolNode:A}=r,y=new h(0),w=new h(1),x=new h(!0),b=new h(!1);function D(M){return xt(M)&&["and","not","or"].includes(M.op)}var{hasProperty:N,isCommutative:C}=kf({FunctionNode:d,OperatorNode:v,SymbolNode:A});function S(M){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=E?E.context:void 0;if(N(M,"trivial",R)){if(cn(M)&&M.args.length===1)return S(M.args[0],E);var I=!1,k=0;if(M.forEach(J=>{++k,k===1&&(I=S(J,E))}),k===1)return I}var T=M;if(cn(T)){var O=HR(T.name);if(O){if(T.args.length>2&&N(T,"associative",R))for(;T.args.length>2;){var U=T.args.pop(),F=T.args.pop();T.args.push(new v(O,T.name,[U,F]))}T=new v(O,T.name,T.args)}else return new d(S(T.fn),T.args.map(J=>S(J,E)))}if(xt(T)&&T.isUnary()){var _=S(T.args[0],E);if(T.op==="~"&&xt(_)&&_.isUnary()&&_.op==="~"||T.op==="not"&&xt(_)&&_.isUnary()&&_.op==="not"&&D(_.args[0]))return _.args[0];var G=!0;if(T.op==="-"&&xt(_)&&(_.isBinary()&&_.fn==="subtract"&&(T=new v("-","subtract",[_.args[1],_.args[0]]),G=!1),_.isUnary()&&_.op==="-"))return _.args[0];if(G)return new v(T.op,T.fn,[_])}if(xt(T)&&T.isBinary()){var K=S(T.args[0],E),L=S(T.args[1],E);if(T.op==="+"){if(Xe(K)&&i(K.value))return L;if(Xe(L)&&i(L.value))return K;xt(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],T=new v("-","subtract",[K,L]))}if(T.op==="-")return xt(L)&&L.isUnary()&&L.op==="-"?S(new v("+","add",[K,L.args[0]]),E):Xe(K)&&i(K.value)?S(new v("-","unaryMinus",[L])):Xe(L)&&i(L.value)?K:new v(T.op,T.fn,[K,L]);if(T.op==="*"){if(Xe(K)){if(i(K.value))return y;if(n(K.value,1))return L}if(Xe(L)){if(i(L.value))return y;if(n(L.value,1))return K;if(C(T,R))return new v(T.op,T.fn,[L,K],T.implicit)}return new v(T.op,T.fn,[K,L],T.implicit)}if(T.op==="/")return Xe(K)&&i(K.value)?y:Xe(L)&&n(L.value,1)?K:new v(T.op,T.fn,[K,L]);if(T.op==="^"&&Xe(L)){if(i(L.value))return w;if(n(L.value,1))return K}if(T.op==="and"){if(Xe(K))if(K.value){if(D(L))return L}else return b;if(Xe(L))if(L.value){if(D(K))return K}else return b}if(T.op==="or"){if(Xe(K)){if(K.value)return x;if(D(L))return L}if(Xe(L)){if(L.value)return x;if(D(K))return K}}return new v(T.op,T.fn,[K,L])}if(xt(T))return new v(T.op,T.fn,T.args.map(J=>S(J,E)));if(lr(T))return new f(T.items.map(J=>S(J,E)));if(In(T))return new c(S(T.object,E),S(T.index,E));if(oi(T))return new m(T.dimensions.map(J=>S(J,E)));if(ns(T)){var X={};for(var Q in T.properties)X[Q]=S(T.properties[Q],E);return new p(X)}return T}return e(Pv,{Node:S,"Node,Object":S})}),qL="resolve",UL=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],HL=P(qL,UL,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:s}=r;function o(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(Ct(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var h=l.get(u.name);if(tt(h)){var d=new Set(c);return d.add(u.name),o(h,l,d)}else return typeof h=="number"?t(String(h)):h!==void 0?new n(h):u}else if(xt(u)){var m=u.args.map(function(v){return o(v,l,c)});return new a(u.op,u.fn,m,u.implicit)}else{if(Gr(u))return new s(o(u.content,l,c));if(cn(u)){var p=u.args.map(function(v){return o(v,l,c)});return new i(u.name,p)}}return u.map(v=>o(v,l,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(u,l)=>o(u,Oi(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,Oi(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,Oi(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),$v="symbolicEqual",VL=["parse","simplify","typed","OperatorNode"],WL=P($v,VL,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function a(s,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new i("-","subtract",[s,o]),c=t(l,{},u);return Xe(c)&&!c.value}return n($v,{"Node, Node":a,"Node, Node, Object":a})}),_v="derivative",GL=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],YL=P(_v,GL,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:a,isZero:s,numeric:o,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:h}=r;function d(w,x){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},D={};v(D,w,x.name);var N=g(w,D);return b.simplify?i(N):N}e.addConversion({from:"identifier",to:"SymbolNode",convert:n});var m=e(_v,{"Node, SymbolNode":d,"Node, SymbolNode, Object":d});e.removeConversion({from:"identifier",to:"SymbolNode",convert:n}),m._simplify=!0,m.toTex=function(w){return p.apply(null,w.args)};var p=e("_derivTex",{"Node, SymbolNode":function(x,b){return Xe(x)&&ot(x.value)==="string"?p(n(x.value).toString(),b.toString(),1):p(x.toTex(),b.toString(),1)},"Node, ConstantNode":function(x,b){if(ot(b.value)==="string")return p(x,n(b.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(x,b,D){return p(x.toString(),b.name,D.value)},"string, string, number":function(x,b,D){var N;return D===1?N="{d\\over d"+b+"}":N="{d^{"+D+"}\\over d"+b+"^{"+D+"}}",N+"\\left[".concat(x,"\\right]")}}),v=e("constTag",{"Object, ConstantNode, string":function(x,b){return x[b]=!0,!0},"Object, SymbolNode, string":function(x,b,D){return b.name!==D?(x[b]=!0,!0):!1},"Object, ParenthesisNode, string":function(x,b,D){return v(x,b.content,D)},"Object, FunctionAssignmentNode, string":function(x,b,D){return b.params.indexOf(D)===-1?(x[b]=!0,!0):v(x,b.expr,D)},"Object, FunctionNode | OperatorNode, string":function(x,b,D){if(b.args.length>0){for(var N=v(x,b.args[0],D),C=1;C<b.args.length;++C)N=v(x,b.args[C],D)&&N;if(N)return x[b]=!0,!0}return!1}}),g=e("_derivative",{"ConstantNode, Object":function(x){return y(0)},"SymbolNode, Object":function(x,b){return b[x]!==void 0?y(0):y(1)},"ParenthesisNode, Object":function(x,b){return new f(g(x.content,b))},"FunctionAssignmentNode, Object":function(x,b){return b[x]!==void 0?y(0):g(x.expr,b)},"FunctionNode, Object":function(x,b){if(x.args.length!==1&&A(x),b[x]!==void 0)return y(0);var D=x.args[0],N,C=!1,S=!1,M;switch(x.name){case"cbrt":C=!0,M=new c("*","multiply",[y(3),new c("^","pow",[D,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(x.args.length===1)C=!0,M=new c("*","multiply",[y(2),new l("sqrt",[D])]);else if(x.args.length===2)return N=new c("/","divide",[y(1),x.args[1]]),b[N]=b[x.args[1]],g(new c("^","pow",[D,N]),b);break;case"log10":N=y(10);case"log":if(!N&&x.args.length===1)M=D.clone(),C=!0;else if(x.args.length===1&&N||x.args.length===2&&b[x.args[1]]!==void 0)M=new c("*","multiply",[D.clone(),new l("log",[N||x.args[1]])]),C=!0;else if(x.args.length===2)return g(new c("/","divide",[new l("log",[D]),new l("log",[x.args[1]])]),b);break;case"pow":return b[N]=b[x.args[1]],g(new c("^","pow",[D,x.args[1]]),b);case"exp":M=new l("exp",[D.clone()]);break;case"sin":M=new l("cos",[D.clone()]);break;case"cos":M=new c("-","unaryMinus",[new l("sin",[D.clone()])]);break;case"tan":M=new c("^","pow",[new l("sec",[D.clone()]),y(2)]);break;case"sec":M=new c("*","multiply",[x,new l("tan",[D.clone()])]);break;case"csc":S=!0,M=new c("*","multiply",[x,new l("cot",[D.clone()])]);break;case"cot":S=!0,M=new c("^","pow",[new l("csc",[D.clone()]),y(2)]);break;case"asin":C=!0,M=new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[D.clone(),y(2)])])]);break;case"acos":C=!0,S=!0,M=new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[D.clone(),y(2)])])]);break;case"atan":C=!0,M=new c("+","add",[new c("^","pow",[D.clone(),y(2)]),y(1)]);break;case"asec":C=!0,M=new c("*","multiply",[new l("abs",[D.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[D.clone(),y(2)]),y(1)])])]);break;case"acsc":C=!0,S=!0,M=new c("*","multiply",[new l("abs",[D.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[D.clone(),y(2)]),y(1)])])]);break;case"acot":C=!0,S=!0,M=new c("+","add",[new c("^","pow",[D.clone(),y(2)]),y(1)]);break;case"sinh":M=new l("cosh",[D.clone()]);break;case"cosh":M=new l("sinh",[D.clone()]);break;case"tanh":M=new c("^","pow",[new l("sech",[D.clone()]),y(2)]);break;case"sech":S=!0,M=new c("*","multiply",[x,new l("tanh",[D.clone()])]);break;case"csch":S=!0,M=new c("*","multiply",[x,new l("coth",[D.clone()])]);break;case"coth":S=!0,M=new c("^","pow",[new l("csch",[D.clone()]),y(2)]);break;case"asinh":C=!0,M=new l("sqrt",[new c("+","add",[new c("^","pow",[D.clone(),y(2)]),y(1)])]);break;case"acosh":C=!0,M=new l("sqrt",[new c("-","subtract",[new c("^","pow",[D.clone(),y(2)]),y(1)])]);break;case"atanh":C=!0,M=new c("-","subtract",[y(1),new c("^","pow",[D.clone(),y(2)])]);break;case"asech":C=!0,S=!0,M=new c("*","multiply",[D.clone(),new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[D.clone(),y(2)])])])]);break;case"acsch":C=!0,S=!0,M=new c("*","multiply",[new l("abs",[D.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[D.clone(),y(2)]),y(1)])])]);break;case"acoth":C=!0,S=!0,M=new c("-","subtract",[y(1),new c("^","pow",[D.clone(),y(2)])]);break;case"abs":M=new c("/","divide",[new l(new h("abs"),[D.clone()]),D.clone()]);break;case"gamma":default:throw new Error('Function "'+x.name+'" is not supported by derivative, or a wrong number of arguments is passed')}var E,R;C?(E="/",R="divide"):(E="*",R="multiply");var I=g(D,b);return S&&(I=new c("-","unaryMinus",[I])),new c(E,R,[I,M])},"OperatorNode, Object":function(x,b){if(b[x]!==void 0)return y(0);if(x.op==="+")return new c(x.op,x.fn,x.args.map(function(T){return g(T,b)}));if(x.op==="-"){if(x.isUnary())return new c(x.op,x.fn,[g(x.args[0],b)]);if(x.isBinary())return new c(x.op,x.fn,[g(x.args[0],b),g(x.args[1],b)])}if(x.op==="*"){var D=x.args.filter(function(T){return b[T]!==void 0});if(D.length>0){var N=x.args.filter(function(T){return b[T]===void 0}),C=N.length===1?N[0]:new c("*","multiply",N),S=D.concat(g(C,b));return new c("*","multiply",S)}return new c("+","add",x.args.map(function(T){return new c("*","multiply",x.args.map(function(O){return O===T?g(O,b):O.clone()}))}))}if(x.op==="/"&&x.isBinary()){var M=x.args[0],E=x.args[1];return b[E]!==void 0?new c("/","divide",[g(M,b),E]):b[M]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[M]),new c("/","divide",[g(E,b),new c("^","pow",[E.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(M,b),E.clone()]),new c("*","multiply",[M.clone(),g(E,b)])]),new c("^","pow",[E.clone(),y(2)])])}if(x.op==="^"&&x.isBinary()){var R=x.args[0],I=x.args[1];if(b[R]!==void 0)return Xe(R)&&(s(R.value)||a(R.value,1))?y(0):new c("*","multiply",[x,new c("*","multiply",[new l("log",[R.clone()]),g(I.clone(),b)])]);if(b[I]!==void 0){if(Xe(I)){if(s(I.value))return y(0);if(a(I.value,1))return g(R,b)}var k=new c("^","pow",[R.clone(),new c("-","subtract",[I,y(1)])]);return new c("*","multiply",[I.clone(),new c("*","multiply",[g(R,b),k])])}return new c("*","multiply",[new c("^","pow",[R.clone(),I.clone()]),new c("+","add",[new c("*","multiply",[g(R,b),new c("/","divide",[I.clone(),R.clone()])]),new c("*","multiply",[g(I,b),new l("log",[R.clone()])])])])}throw new Error('Operator "'+x.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function A(w){if(!((w.name==="log"||w.name==="nthRoot"||w.name==="pow")&&w.args.length===2)){for(var x=0;x<w.args.length;++x)w.args[x]=y(0);throw w.compile().evaluate(),new Error("Expected TypeError, but none found")}}function y(w,x){return new u(o(w,x||t.number))}return m}),Lv="rationalize",KL=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],XL=P(Lv,KL,r=>{var{config:e,typed:t,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:h,simplify:d,fraction:m,bignumber:p,mathWithTransform:v,matrix:g,AccessorNode:A,ArrayNode:y,ConstantNode:w,FunctionNode:x,IndexNode:b,ObjectNode:D,OperatorNode:N,SymbolNode:C,ParenthesisNode:S}=r;function M(T){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F=R(),_=E(T,O,!0,F.firstRules),G=_.variables.length,K={exactFractions:!1},L={exactFractions:!0};if(T=_.expression,G>=1){T=I(T);var X,Q,J=!0,ae=!1;T=d(T,F.firstRules,{},K);for(var le;Q=J?F.distrDivRules:F.sucDivRules,T=d(T,Q,{},L),J=!J,le=T.toString(),le!==X;)ae=!0,X=le;ae&&(T=d(T,F.firstRulesAgain,{},K)),T=d(T,F.finalRules,{},K)}var ie=[],ee={};return T.type==="OperatorNode"&&T.isBinary()&&T.op==="/"?(G===1&&(T.args[0]=k(T.args[0],ie),T.args[1]=k(T.args[1])),U&&(ee.numerator=T.args[0],ee.denominator=T.args[1])):(G===1&&(T=k(T,ie)),U&&(ee.numerator=T,ee.denominator=null)),U?(ee.coefficients=ie,ee.variables=_.variables,ee.expression=T,ee):T}return t(Lv,{Node:M,"Node, boolean":(T,O)=>M(T,{},O),"Node, Object":M,"Node, Object, boolean":M});function E(T,O,U,F){var _=[],G=d(T,F,O,{exactFractions:!1});U=!!U;var K="+-*"+(U?"/":"");X(G);var L={};return L.expression=G,L.variables=_,L;function X(Q){var J=Q.type;if(J==="FunctionNode")throw new Error("There is an unsolved function call");if(J==="OperatorNode")if(Q.op==="^"){if(Q.args[1].type!=="ConstantNode"||!Ee(parseFloat(Q.args[1].value)))throw new Error("There is a non-integer exponent");X(Q.args[0])}else{if(K.indexOf(Q.op)===-1)throw new Error("Operator "+Q.op+" invalid in polynomial expression");for(var ae=0;ae<Q.args.length;ae++)X(Q.args[ae])}else if(J==="SymbolNode"){var le=Q.name,ie=_.indexOf(le);ie===-1&&_.push(le)}else if(J==="ParenthesisNode")X(Q.content);else if(J!=="ConstantNode")throw new Error("type "+J+" is not allowed in polynomial expression")}}function R(){var T=[h,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],O=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],U=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],F=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],_={};return _.firstRules=T.concat(O,F),_.distrDivRules=U,_.sucDivRules=F,_.firstRulesAgain=T.concat(O),_.finalRules=[h,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],_}function I(T,O,U){var F=T.type,_=arguments.length>1;if(F==="OperatorNode"&&T.isBinary()){var G=!1,K;if(T.op==="^"&&(T.args[0].type==="ParenthesisNode"||T.args[0].type==="OperatorNode")&&T.args[1].type==="ConstantNode"&&(K=parseFloat(T.args[1].value),G=K>=2&&Ee(K)),G){if(K>2){var L=T.args[0],X=new N("^","pow",[T.args[0].cloneDeep(),new w(K-1)]);T=new N("*","multiply",[L,X])}else T=new N("*","multiply",[T.args[0],T.args[0].cloneDeep()]);_&&(U==="content"?O.content=T:O.args[U]=T)}}if(F==="ParenthesisNode")I(T.content,T,"content");else if(F!=="ConstantNode"&&F!=="SymbolNode")for(var Q=0;Q<T.args.length;Q++)I(T.args[Q],T,Q);if(!_)return T}function k(T,O){O===void 0&&(O=[]),O[0]=0;var U={};U.cte=1,U.oper="+",U.fire="";var F=0,_="";le(T,null,U),F=O.length-1;for(var G=!0,K,L=F;L>=0;L--)if(O[L]!==0){var X=new w(G?O[L]:Math.abs(O[L])),Q=O[L]<0?"-":"+";if(L>0){var J=new C(_);if(L>1){var ae=new w(L);J=new N("^","pow",[J,ae])}O[L]===-1&&G?X=new N("-","unaryMinus",[J]):Math.abs(O[L])===1?X=J:X=new N("*","multiply",[X,J])}G?K=X:Q==="+"?K=new N("+","add",[K,X]):K=new N("-","subtract",[K,X]),G=!1}if(G)return new w(0);return K;function le(ie,ee,fe){var we=ie.type;if(we==="FunctionNode")throw new Error("There is an unsolved function call");if(we==="OperatorNode"){if("+-*^".indexOf(ie.op)===-1)throw new Error("Operator "+ie.op+" invalid");if(ee!==null){if((ie.fn==="unaryMinus"||ie.fn==="pow")&&ee.fn!=="add"&&ee.fn!=="subtract"&&ee.fn!=="multiply")throw new Error("Invalid "+ie.op+" placing");if((ie.fn==="subtract"||ie.fn==="add"||ie.fn==="multiply")&&ee.fn!=="add"&&ee.fn!=="subtract")throw new Error("Invalid "+ie.op+" placing");if((ie.fn==="subtract"||ie.fn==="add"||ie.fn==="unaryMinus")&&fe.noFil!==0)throw new Error("Invalid "+ie.op+" placing")}(ie.op==="^"||ie.op==="*")&&(fe.fire=ie.op);for(var ve=0;ve<ie.args.length;ve++)ie.fn==="unaryMinus"&&(fe.oper="-"),(ie.op==="+"||ie.fn==="subtract")&&(fe.fire="",fe.cte=1,fe.oper=ve===0?"+":ie.op),fe.noFil=ve,le(ie.args[ve],ie,fe)}else if(we==="SymbolNode"){if(ie.name!==_&&_!=="")throw new Error("There is more than one variable");if(_=ie.name,ee===null){O[1]=1;return}if(ee.op==="^"&&fe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ee.op==="*"&&fe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(fe.fire===""||fe.fire==="*")&&(F<1&&(O[1]=0),O[1]+=fe.cte*(fe.oper==="+"?1:-1),F=Math.max(1,F))}else if(we==="ConstantNode"){var xe=parseFloat(ie.value);if(ee===null){O[0]=xe;return}if(ee.op==="^"){if(fe.noFil!==1)throw new Error("Constant cannot be powered");if(!Ee(xe)||xe<=0)throw new Error("Non-integer exponent is not allowed");for(var z=F+1;z<xe;z++)O[z]=0;xe>F&&(O[xe]=0),O[xe]+=fe.cte*(fe.oper==="+"?1:-1),F=Math.max(xe,F);return}fe.cte=xe,fe.fire===""&&(O[0]+=fe.cte*(fe.oper==="+"?1:-1))}else throw new Error("Type "+we+" is not allowed")}}}),zv="zpk2tf",ZL=["typed","add","multiply","Complex","number"],JL=P(zv,ZL,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:a}=r;return e(zv,{"Array,Array,number":function(l,c,f){return s(l,c,f)},"Array,Array":function(l,c){return s(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return s(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return s(l.valueOf(),c.valueOf(),1)}});function s(u,l,c){u.some(A=>A.type==="BigNumber")&&(u=u.map(A=>a(A))),l.some(A=>A.type==="BigNumber")&&(l=l.map(A=>a(A)));for(var f=[i(1,0)],h=[i(1,0)],d=0;d<u.length;d++){var m=u[d];typeof m=="number"&&(m=i(m,0)),f=o(f,[i(1,0),i(-m.re,-m.im)])}for(var p=0;p<l.length;p++){var v=l[p];typeof v=="number"&&(v=i(v,0)),h=o(h,[i(1,0),i(-v.re,-v.im)])}for(var g=0;g<f.length;g++)f[g]=n(f[g],c);return[f,h]}function o(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=i(0,0);for(var h=0;h<u.length;h++)f-h>=0&&f-h<l.length&&(c[f]=t(c[f],n(u[h],l[f-h])))}return c}}),qv="freqz",jL=["typed","add","multiply","Complex","divide","matrix"],QL=P(qv,jL,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:a,matrix:s}=r;return e(qv,{"Array, Array":function(c,f){var h=u(512);return o(c,f,h)},"Array, Array, Array":function(c,f,h){return o(c,f,h)},"Array, Array, number":function(c,f,h){if(h<0)throw new Error("w must be a positive number");var d=u(h);return o(c,f,d)},"Matrix, Matrix":function(c,f){var h=u(512),{w:d,h:m}=o(c.valueOf(),f.valueOf(),h);return{w:s(d),h:s(m)}},"Matrix, Matrix, Matrix":function(c,f,h){var{h:d}=o(c.valueOf(),f.valueOf(),h.valueOf());return{h:s(d),w:s(h)}},"Matrix, Matrix, number":function(c,f,h){if(h<0)throw new Error("w must be a positive number");var d=u(h),{h:m}=o(c.valueOf(),f.valueOf(),d);return{h:s(m),w:s(d)}}});function o(l,c,f){for(var h=[],d=[],m=0;m<f.length;m++){for(var p=i(0,0),v=i(0,0),g=0;g<l.length;g++)p=t(p,n(l[g],i(Math.cos(-g*f[m]),Math.sin(-g*f[m]))));for(var A=0;A<c.length;A++)v=t(v,n(c[A],i(Math.cos(-A*f[m]),Math.sin(-A*f[m]))));h.push(p),d.push(v)}for(var y=[],w=0;w<h.length;w++)y.push(a(h[w],d[w]));return{h:y,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),ez="reviver",tz=["classes"],rz=P(ez,tz,r=>{var{classes:e}=r;return function(n,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),nz="replacer",iz=[],az=P(nz,iz,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t}),sz="11.11.1",oz=P("true",[],()=>!0),uz=P("false",[],()=>!1),lz=P("null",[],()=>null),cz=mr("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),fz=mr("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),hz=mr("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Nf(t):A3}),dz=mr("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Yk(t):D3}),mz=mr("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Wk(t):S3}),pz=mr("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Gk(t):N3}),gz=mr("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),vz=mr("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),yz=mr("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),bz=mr("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),xz=mr("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),wz=mr("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),Az=mr("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),Dz=P("PI",["pi"],r=>{var{pi:e}=r;return e}),Sz=P("E",["e"],r=>{var{e}=r;return e}),Nz=P("version",[],()=>sz);function mr(r,e,t){return P(r,e,t,{recreateOnConfigChange:!0})}var Cz=Ie("speedOfLight","299792458","m s^-1"),Ez=Ie("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Mz=Ie("planckConstant","6.62607015e-34","J s"),Tz=Ie("reducedPlanckConstant","1.0545718176461565e-34","J s"),Oz=Ie("magneticConstant","1.25663706212e-6","N A^-2"),Bz=Ie("electricConstant","8.8541878128e-12","F m^-1"),Fz=Ie("vacuumImpedance","376.730313667","ohm"),kz=Ie("coulomb","8.987551792261171e9","N m^2 C^-2"),Rz=Ie("elementaryCharge","1.602176634e-19","C"),Iz=Ie("bohrMagneton","9.2740100783e-24","J T^-1"),Pz=Ie("conductanceQuantum","7.748091729863649e-5","S"),$z=Ie("inverseConductanceQuantum","12906.403729652257","ohm"),_z=Ie("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Lz=Ie("nuclearMagneton","5.0507837461e-27","J T^-1"),zz=Ie("klitzing","25812.807459304513","ohm"),qz=Ie("bohrRadius","5.29177210903e-11","m"),Uz=Ie("classicalElectronRadius","2.8179403262e-15","m"),Hz=Ie("electronMass","9.1093837015e-31","kg"),Vz=Ie("fermiCoupling","1.1663787e-5","GeV^-2"),Wz=Eu("fineStructure",.0072973525693),Gz=Ie("hartreeEnergy","4.3597447222071e-18","J"),Yz=Ie("protonMass","1.67262192369e-27","kg"),Kz=Ie("deuteronMass","3.3435830926e-27","kg"),Xz=Ie("neutronMass","1.6749271613e-27","kg"),Zz=Ie("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Jz=Ie("rydberg","10973731.568160","m^-1"),jz=Ie("thomsonCrossSection","6.6524587321e-29","m^2"),Qz=Eu("weakMixingAngle",.2229),eq=Eu("efimovFactor",22.7),tq=Ie("atomicMass","1.66053906660e-27","kg"),rq=Ie("avogadro","6.02214076e23","mol^-1"),nq=Ie("boltzmann","1.380649e-23","J K^-1"),iq=Ie("faraday","96485.33212331001","C mol^-1"),aq=Ie("firstRadiation","3.7417718521927573e-16","W m^2"),sq=Ie("loschmidt","2.686780111798444e25","m^-3"),oq=Ie("gasConstant","8.31446261815324","J K^-1 mol^-1"),uq=Ie("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),lq=Ie("molarVolume","0.022413969545014137","m^3 mol^-1"),cq=Eu("sackurTetrode",-1.16487052358),fq=Ie("secondRadiation","0.014387768775039337","m K"),hq=Ie("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),dq=Ie("wienDisplacement","2.897771955e-3","m K"),mq=Ie("molarMass","0.99999999965e-3","kg mol^-1"),pq=Ie("molarMassC12","11.9999999958e-3","kg mol^-1"),gq=Ie("gravity","9.80665","m s^-2"),vq=Ie("planckLength","1.616255e-35","m"),yq=Ie("planckMass","2.176435e-8","kg"),bq=Ie("planckTime","5.391245e-44","s"),xq=Ie("planckCharge","1.87554603778e-18","C"),wq=Ie("planckTemperature","1.416785e+32","K");function Ie(r,e,t){var n=["config","Unit","BigNumber"];return P(r,n,i=>{var{config:a,Unit:s,BigNumber:o}=i,u=a.number==="BigNumber"?new o(e):parseFloat(e),l=new s(u,t);return l.fixPrefix=!0,l})}function Eu(r,e){var t=["config","BigNumber"];return P(r,t,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}var Aq="apply",Dq=["typed","isInteger"],Sq=P(Aq,Dq,r=>{var{typed:e,isInteger:t}=r,n=bf({typed:e,isInteger:t});return e("apply",{"...any":function(a){var s=a[1];_e(s)?a[1]=s-1:Ue(s)&&(a[1]=s.minus(1));try{return n.apply(null,a)}catch(o){throw jt(o)}}})},{isTransformFunction:!0}),Nq="column",Cq=["typed","Index","matrix","range"],Eq=P(Nq,Cq,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=mw({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var u=o.length-1,l=o[u];_e(l)&&(o[u]=l-1);try{return a.apply(null,o)}catch(c){throw jt(c)}}})},{isTransformFunction:!0});function Rf(r,e,t){var n=r.filter(function(o){return Ct(o)&&!(o.name in e)&&!t.has(o.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,a=wa(t),s=r.compile();return function(u){return a.set(i,u),s.evaluate(a)}}var Mq="filter",Tq=["typed"],Oq=P(Mq,Tq,r=>{var{typed:e}=r;function t(i,a,s){var o,u;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(Ct(i[1])||Zi(i[1])?u=i[1].compile().evaluate(s):u=Rf(i[1],a,s)),n(o,u)}t.rawArgs=!0;var n=e("filter",{"Array, function":Uv,"Matrix, function":function(a,s){return a.create(Uv(a.toArray(),s))},"Array, RegExp":Fo,"Matrix, RegExp":function(a,s){return a.create(Fo(a.toArray(),s))}});return t},{isTransformFunction:!0});function Uv(r,e){return Kb(r,function(t,n,i){return ta(e,t,[n+1],i,"filter")})}var Bq="forEach",Fq=["typed"],kq=P(Bq,Fq,r=>{var{typed:e}=r;function t(i,a,s){var o,u;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(Ct(i[1])||Zi(i[1])?u=i[1].compile().evaluate(s):u=Rf(i[1],a,s)),n(o,u)}t.rawArgs=!0;var n=e("forEach",{"Array | Matrix, function":function(a,s){var o=function u(l,c){if(Array.isArray(l))yu(l,function(f,h){u(f,c.concat(h+1))});else return ta(s,l,c,a,"forEach")};o(a.valueOf(),[])}});return t},{isTransformFunction:!0}),Rq="index",Iq=["Index","getMatrixDataType"],Pq=P(Rq,Iq,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(mu(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(je(o)||Oe(o))t(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(_e(o))o--;else if(Ue(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[a]=o}var u=new e;return e.apply(u,i),u}},{isTransformFunction:!0}),$q="map",_q=["typed"],Lq=P($q,_q,r=>{var{typed:e}=r;function t(i,a,s){var o,u;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(Ct(i[1])||Zi(i[1])?u=i[1].compile().evaluate(s):u=Rf(i[1],a,s)),n(o,u)}t.rawArgs=!0;var n=e("map",{"Array, function":function(a,s){return Hv(a,s,a)},"Matrix, function":function(a,s){return a.create(Hv(a.valueOf(),s,a))}});return t},{isTransformFunction:!0});function Hv(r,e,t){function n(i,a){return Array.isArray(i)?an(i,function(s,o){return n(s,a.concat(o+1))}):ta(e,i,a,t,"map")}return n(r,[])}function qn(r){if(r.length===2&&ln(r[0])){r=r.slice();var e=r[1];_e(e)?r[1]=e-1:Ue(e)&&(r[1]=e.minus(1))}return r}var zq="max",qq=["typed","config","numeric","larger"],Uq=P(zq,qq,r=>{var{typed:e,config:t,numeric:n,larger:i}=r,a=Dw({typed:e,config:t,numeric:n,larger:i});return e("max",{"...any":function(o){o=qn(o);try{return a.apply(null,o)}catch(u){throw jt(u)}}})},{isTransformFunction:!0}),Hq="mean",Vq=["typed","add","divide"],Wq=P(Hq,Vq,r=>{var{typed:e,add:t,divide:n}=r,i=Fw({typed:e,add:t,divide:n});return e("mean",{"...any":function(s){s=qn(s);try{return i.apply(null,s)}catch(o){throw jt(o)}}})},{isTransformFunction:!0}),Gq="min",Yq=["typed","config","numeric","smaller"],Kq=P(Gq,Yq,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r,a=Sw({typed:e,config:t,numeric:n,smaller:i});return e("min",{"...any":function(o){o=qn(o);try{return a.apply(null,o)}catch(u){throw jt(u)}}})},{isTransformFunction:!0}),Xq="range",Zq=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],Jq=P(Xq,Zq,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=r,f=yw({typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(d){var m=d.length-1,p=d[m];return typeof p!="boolean"&&d.push(!0),f.apply(null,d)}})},{isTransformFunction:!0}),jq="row",Qq=["typed","Index","matrix","range"],eU=P(jq,Qq,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=bw({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var u=o.length-1,l=o[u];_e(l)&&(o[u]=l-1);try{return a.apply(null,o)}catch(c){throw jt(c)}}})},{isTransformFunction:!0}),tU="subset",rU=["typed","matrix","zeros","add"],nU=P(tU,rU,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=xw({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(u){throw jt(u)}}})},{isTransformFunction:!0}),iU="concat",aU=["typed","matrix","isInteger"],sU=P(iU,aU,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=dw({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(s){var o=s.length-1,u=s[o];_e(u)?s[o]=u-1:Ue(u)&&(s[o]=u.minus(1));try{return i.apply(null,s)}catch(l){throw jt(l)}}})},{isTransformFunction:!0}),Vv="diff",oU=["typed","matrix","subtract","number","bignumber"],uU=P(Vv,oU,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:a}=r,s=pw({typed:e,matrix:t,subtract:n,number:i,bignumber:a});return e(Vv,{"...any":function(u){u=qn(u);try{return s.apply(null,u)}catch(l){throw jt(l)}}})},{isTransformFunction:!0}),lU="std",cU=["typed","map","sqrt","variance"],fU=P(lU,cU,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,a=Iw({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=qn(o);try{return a.apply(null,o)}catch(u){throw jt(u)}}})},{isTransformFunction:!0}),Wv="sum",hU=["typed","config","add","numeric"],dU=P(Wv,hU,r=>{var{typed:e,config:t,add:n,numeric:i}=r,a=Ow({typed:e,config:t,add:n,numeric:i});return e(Wv,{"...any":function(o){o=qn(o);try{return a.apply(null,o)}catch(u){throw jt(u)}}})},{isTransformFunction:!0}),mU="quantileSeq",pU=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],gU=P(mU,pU,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:h}=r,d=Rw({typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:h});return e("quantileSeq",{"Array | Matrix, number | BigNumber":d,"Array | Matrix, number | BigNumber, number":(p,v,g)=>d(p,v,m(g)),"Array | Matrix, number | BigNumber, boolean":d,"Array | Matrix, number | BigNumber, boolean, number":(p,v,g,A)=>d(p,v,g,m(A)),"Array | Matrix, Array | Matrix":d,"Array | Matrix, Array | Matrix, number":(p,v,g)=>d(p,v,m(g)),"Array | Matrix, Array | Matrix, boolean":d,"Array | Matrix, Array | Matrix, boolean, number":(p,v,g,A)=>d(p,v,g,m(A))});function m(p){return qn([[],p])[1]}},{isTransformFunction:!0}),Gv="cumsum",vU=["typed","add","unaryPlus"],yU=P(Gv,vU,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=Bw({typed:e,add:t,unaryPlus:n});return e(Gv,{"...any":function(s){if(s.length===2&&ln(s[0])){var o=s[1];_e(o)?s[1]=o-1:Ue(o)&&(s[1]=o.minus(1))}try{return i.apply(null,s)}catch(u){throw jt(u)}}})},{isTransformFunction:!0}),Yv="variance",bU=["typed","add","subtract","multiply","divide","apply","isNaN"],xU=P(Yv,bU,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,apply:s,isNaN:o}=r,u=kw({typed:e,add:t,subtract:n,multiply:i,divide:a,apply:s,isNaN:o});return e(Yv,{"...any":function(c){c=qn(c);try{return u.apply(null,c)}catch(f){throw jt(f)}}})},{isTransformFunction:!0}),Kv="print",wU=["typed","matrix","zeros","add"],AU=P(Kv,wU,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=Aw({typed:e,matrix:t,zeros:n,add:i});return e(Kv,{"string, Object | Array":function(u,l){return a(s(u),l)},"string, Object | Array, number | Object":function(u,l,c){return a(s(u),l,c)}});function s(o){return o.replace(ww,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0});const DU=Object.freeze(Object.defineProperty({__proto__:null,createAbs:MO,createAccessorNode:LR,createAcos:i5,createAcosh:s5,createAcot:u5,createAcoth:c5,createAcsc:h5,createAcsch:m5,createAdd:DR,createAddScalar:FO,createAnd:X8,createApply:bf,createApplyTransform:Sq,createArg:bF,createArrayNode:qR,createAsec:g5,createAsech:y5,createAsin:x5,createAsinh:D5,createAssignmentNode:WR,createAtan:C5,createAtan2:M5,createAtanh:O5,createAtomicMass:tq,createAvogadro:rq,createBellNumbers:SL,createBigNumberClass:ZT,createBignumber:sO,createBin:n8,createBitAnd:lF,createBitNot:fF,createBitOr:dF,createBitXor:vF,createBlockNode:YR,createBohrMagneton:Iz,createBohrRadius:qz,createBoltzmann:nq,createBoolean:nO,createCatalan:CL,createCbrt:RO,createCeil:HO,createChain:Y$,createChainClass:vP,createClassicalElectronRadius:Uz,createClone:v3,createColumn:mw,createColumnTransform:Eq,createCombinations:P_,createCombinationsWithRep:__,createCompare:J8,createCompareNatural:tk,createCompareText:ik,createCompile:CI,createComplex:lO,createComplexClass:t3,createComposition:ML,createConcat:dw,createConcatTransform:sU,createConditionalNode:XR,createConductanceQuantum:Pz,createConj:wF,createConstantNode:nI,createCorr:R_,createCos:F5,createCosh:R5,createCot:P5,createCoth:_5,createCoulomb:kz,createCount:IF,createCreateUnit:r5,createCross:$F,createCsc:z5,createCsch:U5,createCtranspose:T4,createCube:WO,createCumSum:Bw,createCumSumTransform:yU,createDeepEqual:Dk,createDenseMatrixClass:p3,createDerivative:YL,createDet:X$,createDeuteronMass:Kz,createDiag:LF,createDiff:pw,createDiffTransform:uU,createDistance:b_,createDivide:v_,createDivideScalar:v8,createDot:TR,createDotDivide:B8,createDotMultiply:rF,createDotPow:T8,createE:mz,createEfimovFactor:eq,createEigs:i_,createElectricConstant:Bz,createElectronMass:Hz,createElementaryCharge:Rz,createEqual:sk,createEqualScalar:W3,createEqualText:lk,createErf:V4,createEvaluate:MI,createExp:YO,createExpm:s_,createExpm1:XO,createFactorial:V_,createFalse:uz,createFaraday:iq,createFermiCoupling:Vz,createFft:k4,createFibonacciHeapClass:qk,createFilter:UF,createFilterTransform:Oq,createFineStructure:Wz,createFirstRadiation:aq,createFix:jO,createFlatten:VF,createFloor:cw,createForEach:GF,createForEachTransform:kq,createFormat:t8,createFraction:hO,createFractionClass:a3,createFreqz:QL,createFunctionAssignmentNode:aI,createFunctionNode:AI,createGamma:z_,createGasConstant:oq,createGcd:SB,createGetMatrixDataType:XF,createGravitationConstant:Ez,createGravity:gq,createHartreeEnergy:Gz,createHasNumericValue:R3,createHelp:W$,createHelpClass:mP,createHex:o8,createHypot:NR,createI:Az,createIdentity:JF,createIfft:I4,createIm:DF,createImmutableDenseMatrixClass:Ik,createIndex:RR,createIndexClass:_k,createIndexNode:oI,createIndexTransform:Pq,createInfinity:cz,createIntersect:A_,createInv:J$,createInverseConductanceQuantum:$z,createInvmod:jB,createIsInteger:b3,createIsNaN:z3,createIsNegative:O3,createIsNumeric:F3,createIsPositive:P3,createIsPrime:h8,createIsZero:_3,createKldivergence:G_,createKlitzing:zz,createKron:QF,createLN10:vz,createLN2:gz,createLOG10E:bz,createLOG2E:yz,createLarger:vk,createLargerEq:xk,createLcm:MB,createLeafCount:OL,createLeftShift:H8,createLgamma:U_,createLog:D8,createLog10:OB,createLog1p:N8,createLog2:FB,createLoschmidt:sq,createLsolve:k8,createLsolveAll:$8,createLup:II,createLusolve:lP,createLyap:m_,createMad:T_,createMagneticConstant:Oz,createMagneticFluxQuantum:_z,createMap:t4,createMapTransform:Lq,createMatrix:mO,createMatrixClass:f3,createMatrixFromColumns:xO,createMatrixFromFunction:gO,createMatrixFromRows:yO,createMax:Dw,createMaxTransform:Uq,createMean:Fw,createMeanTransform:Wq,createMedian:E_,createMin:Sw,createMinTransform:Kq,createMod:fw,createMode:J4,createMolarMass:mq,createMolarMassC12:pq,createMolarPlanckConstant:uq,createMolarVolume:lq,createMultinomial:K_,createMultiply:$B,createMultiplyScalar:IB,createNaN:fz,createNeutronMass:Xz,createNode:$R,createNorm:ER,createNot:EF,createNthRoot:LB,createNthRoots:E8,createNuclearMagneton:Lz,createNull:lz,createNumber:Q3,createNumeric:p8,createObjectNode:lI,createOct:a8,createOnes:s4,createOperatorNode:fI,createOr:TF,createParenthesisNode:dI,createParse:SI,createParser:kI,createParserClass:BI,createPartitionSelect:Mk,createPermutations:Z_,createPhi:pz,createPi:hz,createPickRandom:gL,createPinv:Q$,createPlanckCharge:xq,createPlanckConstant:Mz,createPlanckLength:vq,createPlanckMass:yq,createPlanckTemperature:wq,createPlanckTime:bq,createPolynomialRoot:fP,createPow:b8,createPrint:Aw,createPrintTransform:AU,createProd:Q4,createProtonMass:Yz,createQr:$I,createQuantileSeq:Rw,createQuantileSeqTransform:gU,createQuantumOfCirculation:Zz,createRandom:yL,createRandomInt:xL,createRange:yw,createRangeClass:u3,createRangeNode:pI,createRangeTransform:Jq,createRationalize:XL,createRe:NF,createReducedPlanckConstant:Tz,createRelationalNode:vI,createReplacer:az,createReshape:l4,createResize:h4,createResolve:HL,createResultSet:eT,createReviver:rz,createRightArithShift:W8,createRightLogShift:Y8,createRotate:m4,createRotationMatrix:g4,createRound:w8,createRow:bw,createRowTransform:eU,createRydberg:Jz,createSQRT1_2:xz,createSQRT2:wz,createSackurTetrode:cq,createSchur:h_,createSec:V5,createSech:G5,createSecondRadiation:fq,createSetCartesian:nR,createSetDifference:aR,createSetDistinct:oR,createSetIntersect:lR,createSetIsSubset:fR,createSetMultiplicity:dR,createSetPowerset:pR,createSetSize:vR,createSetSymDifference:bR,createSetUnion:wR,createSign:qB,createSimplify:IL,createSimplifyConstant:_L,createSimplifyCore:zL,createSin:K5,createSinh:Z5,createSize:b4,createSlu:oP,createSmaller:fk,createSmallerEq:mk,createSolveODE:q4,createSort:Ok,createSpaClass:Vk,createSparse:e5,createSparseMatrixClass:K3,createSpeedOfLight:Cz,createSplitUnit:AO,createSqrt:VB,createSqrtm:u_,createSquare:GB,createSqueeze:w4,createStd:Iw,createStdTransform:fU,createStefanBoltzmann:hq,createStirlingS2:AL,createString:tO,createSubset:xw,createSubsetTransform:nU,createSubtract:KB,createSum:Ow,createSumTransform:dU,createSylvester:c_,createSymbolNode:xI,createSymbolicEqual:WL,createTan:j5,createTanh:tR,createTau:dz,createThomsonCrossSection:jz,createTo:c8,createTrace:FR,createTranspose:E4,createTrue:oz,createTypeOf:U3,createTyped:ZM,createUnaryMinus:SO,createUnaryPlus:CO,createUnequal:Nk,createUnitClass:Zk,createUnitFunction:jk,createUppercaseE:Sz,createUppercasePi:Dz,createUsolve:I8,createUsolveAll:L8,createVacuumImpedance:Fz,createVariance:kw,createVarianceTransform:xU,createVersion:Nz,createWeakMixingAngle:Qz,createWienDisplacement:dq,createXgcd:ZB,createXor:BF,createZeros:B4,createZeta:X4,createZpk2tf:JL},Symbol.toStringTag,{value:"Module"}));var SU=DU,If={exports:{}};function Pf(){}Pf.prototype={on:function(r,e,t){var n=this.e||(this.e={});return(n[r]||(n[r]=[])).push({fn:e,ctx:t}),this},once:function(r,e,t){var n=this;function i(){n.off(r,i),e.apply(t,arguments)}return i._=e,this.on(r,i,t)},emit:function(r){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[r]||[]).slice(),n=0,i=t.length;for(n;n<i;n++)t[n].fn.apply(t[n].ctx,e);return this},off:function(r,e){var t=this.e||(this.e={}),n=t[r],i=[];if(n&&e)for(var a=0,s=n.length;a<s;a++)n[a].fn!==e&&n[a].fn._!==e&&i.push(n[a]);return i.length?t[r]=i:delete t[r],this}};If.exports=Pf;If.exports.TinyEmitter=Pf;var NU=If.exports;const CU=Ji(NU);function EU(r){var e=new CU;return r.on=e.on.bind(e),r.off=e.off.bind(e),r.once=e.once.bind(e),r.emit=e.emit.bind(e),r}function MU(r,e,t,n){function i(v,g){var A=arguments.length;if(A!==1&&A!==2)throw new mn("import",A,1,2);g||(g={});function y(D,N,C){if(Array.isArray(N))N.forEach(E=>y(D,E));else if(typeof N=="object")for(var S in N)De(N,S)&&y(D,N[S],S);else if(Ca(N)||C!==void 0){var M=Ca(N)?m(N)?N.fn+".transform":N.fn:C;if(De(D,M)&&D[M]!==N&&!g.silent)throw new Error('Cannot import "'+M+'" twice');D[M]=N}else if(!g.silent)throw new TypeError("Factory, Object, or Array expected")}var w={};y(w,v);for(var x in w)if(De(w,x)){var b=w[x];if(Ca(b))l(b,g);else if(c(b))a(x,b,g);else if(!g.silent)throw new TypeError("Factory, Object, or Array expected")}}function a(v,g,A){if(A.wrap&&typeof g=="function"&&(g=u(g)),f(g)&&(g=r(v,{[g.signature]:g})),r.isTypedFunction(t[v])&&r.isTypedFunction(g)){A.override?g=r(v,g.signatures):g=r(t[v],g),t[v]=g,delete n[v],s(v,g),t.emit("import",v,function(){return g});return}if(t[v]===void 0||A.override){t[v]=g,delete n[v],s(v,g),t.emit("import",v,function(){return g});return}if(!A.silent)throw new Error('Cannot import "'+v+'": already exists')}function s(v,g){g&&typeof g.transform=="function"?(t.expression.transform[v]=g.transform,h(v)&&(t.expression.mathWithTransform[v]=g.transform)):(delete t.expression.transform[v],h(v)&&(t.expression.mathWithTransform[v]=g))}function o(v){delete t.expression.transform[v],h(v)?t.expression.mathWithTransform[v]=t[v]:delete t.expression.mathWithTransform[v]}function u(v){var g=function(){for(var y=[],w=0,x=arguments.length;w<x;w++){var b=arguments[w];y[w]=b&&b.valueOf()}return v.apply(t,y)};return v.transform&&(g.transform=v.transform),g}function l(v,g){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.fn;if(Fd(A,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(A));var y=m(v)?t.expression.transform:t,w=A in t.expression.transform,x=De(y,A)?y[A]:void 0,b=function(){var N={};v.dependencies.map(Jb).forEach(S=>{if(Fd(S,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(S));S==="math"?N.math=t:S==="mathWithTransform"?N.mathWithTransform=t.expression.mathWithTransform:S==="classes"?N.classes=t:N[S]=t[S]});var C=v(N);if(C&&typeof C.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(x===void 0||g.override)return C;if(r.isTypedFunction(x)&&r.isTypedFunction(C))return r(x,C);if(g.silent)return x;throw new Error('Cannot import "'+A+'": already exists')};!v.meta||v.meta.lazy!==!1?(so(y,A,b),x&&w?o(A):(m(v)||d(v))&&so(t.expression.mathWithTransform,A,()=>y[A])):(y[A]=b(),x&&w?o(A):(m(v)||d(v))&&so(t.expression.mathWithTransform,A,()=>y[A])),n[A]=v,t.emit("import",A,b)}function c(v){return typeof v=="function"||typeof v=="number"||typeof v=="string"||typeof v=="boolean"||v===null||tr(v)||Er(v)||Ue(v)||si(v)||Oe(v)||Array.isArray(v)}function f(v){return typeof v=="function"&&typeof v.signature=="string"}function h(v){return!De(p,v)}function d(v){return v.fn.indexOf(".")===-1&&!De(p,v.fn)&&(!v.meta||!v.meta.isClass)}function m(v){return v!==void 0&&v.meta!==void 0&&v.meta.isTransformFunction===!0||!1}var p={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function _w(r,e){var t=Vt({},Db,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var n=EU({isNumber:_e,isComplex:Er,isBigNumber:Ue,isFraction:si,isUnit:tr,isString:It,isArray:je,isMatrix:Oe,isCollection:ln,isDenseMatrix:Ha,isSparseMatrix:Nn,isRange:mu,isIndex:rs,isBoolean:Sb,isResultSet:Nb,isHelp:cf,isFunction:Cb,isDate:Eb,isRegExp:Mb,isObject:pu,isNull:Tb,isUndefined:Ob,isAccessorNode:In,isArrayNode:lr,isAssignmentNode:Bb,isBlockNode:Fb,isConditionalNode:kb,isConstantNode:Xe,isFunctionAssignmentNode:Zi,isFunctionNode:cn,isIndexNode:oi,isNode:tt,isObjectNode:ns,isOperatorNode:xt,isParenthesisNode:Gr,isRangeNode:Rb,isRelationalNode:Ib,isSymbolNode:Ct,isChain:ff});n.config=mM(t,n.emit),n.expression={transform:{},mathWithTransform:{config:n.config}};var i=[],a=[];function s(c){if(Ca(c))return c(n);var f=c[Object.keys(c)[0]];if(Ca(f))return f(n);if(!hM(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var h=i.indexOf(c),d;return h===-1?(c.math===!0?d=c.factory(n.type,t,s,n.typed,n):d=c.factory(n.type,t,s,n.typed),i.push(c),a.push(d)):d=a[h],d}var o={};function u(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return n.typed.apply(n.typed,f)}u.isTypedFunction=Kn.isTypedFunction;var l=MU(u,s,n,o);return n.import=l,n.on("config",()=>{Dd(o).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&l(c,{override:!0})})}),n.create=_w.bind(null,r),n.factory=P,n.import(Dd(fM(r))),n.ArgumentsError=mn,n.DimensionError=Le,n.IndexError=Ar,n}var TU=typeof global=="object"&&global&&global.Object===Object&&global;const Lw=TU;var OU=typeof self=="object"&&self&&self.Object===Object&&self,BU=Lw||OU||Function("return this")();const Jr=BU;var FU=Jr.Symbol;const Wi=FU;var zw=Object.prototype,kU=zw.hasOwnProperty,RU=zw.toString,da=Wi?Wi.toStringTag:void 0;function IU(r){var e=kU.call(r,da),t=r[da];try{r[da]=void 0;var n=!0}catch{}var i=RU.call(r);return n&&(e?r[da]=t:delete r[da]),i}var PU=Object.prototype,$U=PU.toString;function _U(r){return $U.call(r)}var LU="[object Null]",zU="[object Undefined]",Xv=Wi?Wi.toStringTag:void 0;function na(r){return r==null?r===void 0?zU:LU:Xv&&Xv in Object(r)?IU(r):_U(r)}function Gi(r){return r!=null&&typeof r=="object"}var qU="[object Symbol]";function UU(r){return typeof r=="symbol"||Gi(r)&&na(r)==qU}var HU=Array.isArray;const Jo=HU;var VU=/\s/;function WU(r){for(var e=r.length;e--&&VU.test(r.charAt(e)););return e}var GU=/^\s+/;function YU(r){return r&&r.slice(0,WU(r)+1).replace(GU,"")}function Ka(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Zv=0/0,KU=/^[-+]0x[0-9a-f]+$/i,XU=/^0b[01]+$/i,ZU=/^0o[0-7]+$/i,JU=parseInt;function Jv(r){if(typeof r=="number")return r;if(UU(r))return Zv;if(Ka(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ka(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=YU(r);var t=XU.test(r);return t||ZU.test(r)?JU(r.slice(2),t?2:8):KU.test(r)?Zv:+r}var jU="[object AsyncFunction]",QU="[object Function]",eH="[object GeneratorFunction]",tH="[object Proxy]";function qw(r){if(!Ka(r))return!1;var e=na(r);return e==QU||e==eH||e==jU||e==tH}var rH=Jr["__core-js_shared__"];const ul=rH;var jv=function(){var r=/[^.]+$/.exec(ul&&ul.keys&&ul.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function nH(r){return!!jv&&jv in r}var iH=Function.prototype,aH=iH.toString;function fi(r){if(r!=null){try{return aH.call(r)}catch{}try{return r+""}catch{}}return""}var sH=/[\\^$.*+?()[\]{}|]/g,oH=/^\[object .+?Constructor\]$/,uH=Function.prototype,lH=Object.prototype,cH=uH.toString,fH=lH.hasOwnProperty,hH=RegExp("^"+cH.call(fH).replace(sH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dH(r){if(!Ka(r)||nH(r))return!1;var e=qw(r)?hH:oH;return e.test(fi(r))}function mH(r,e){return r==null?void 0:r[e]}function ia(r,e){var t=mH(r,e);return dH(t)?t:void 0}var pH=ia(Jr,"WeakMap");const Dc=pH;var gH=9007199254740991,vH=/^(?:0|[1-9]\d*)$/;function yH(r,e){var t=typeof r;return e=e??gH,!!e&&(t=="number"||t!="symbol"&&vH.test(r))&&r>-1&&r%1==0&&r<e}function Uw(r,e){return r===e||r!==r&&e!==e}var bH=9007199254740991;function Hw(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=bH}function xH(r){return r!=null&&Hw(r.length)&&!qw(r)}var wH=Object.prototype;function AH(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||wH;return r===t}function DH(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var SH="[object Arguments]";function Qv(r){return Gi(r)&&na(r)==SH}var Vw=Object.prototype,NH=Vw.hasOwnProperty,CH=Vw.propertyIsEnumerable,EH=Qv(function(){return arguments}())?Qv:function(r){return Gi(r)&&NH.call(r,"callee")&&!CH.call(r,"callee")};const MH=EH;function TH(){return!1}var Ww=typeof rn=="object"&&rn&&!rn.nodeType&&rn,e0=Ww&&typeof nn=="object"&&nn&&!nn.nodeType&&nn,OH=e0&&e0.exports===Ww,t0=OH?Jr.Buffer:void 0,BH=t0?t0.isBuffer:void 0,FH=BH||TH;const Sc=FH;var kH="[object Arguments]",RH="[object Array]",IH="[object Boolean]",PH="[object Date]",$H="[object Error]",_H="[object Function]",LH="[object Map]",zH="[object Number]",qH="[object Object]",UH="[object RegExp]",HH="[object Set]",VH="[object String]",WH="[object WeakMap]",GH="[object ArrayBuffer]",YH="[object DataView]",KH="[object Float32Array]",XH="[object Float64Array]",ZH="[object Int8Array]",JH="[object Int16Array]",jH="[object Int32Array]",QH="[object Uint8Array]",eV="[object Uint8ClampedArray]",tV="[object Uint16Array]",rV="[object Uint32Array]",dt={};dt[KH]=dt[XH]=dt[ZH]=dt[JH]=dt[jH]=dt[QH]=dt[eV]=dt[tV]=dt[rV]=!0;dt[kH]=dt[RH]=dt[GH]=dt[IH]=dt[YH]=dt[PH]=dt[$H]=dt[_H]=dt[LH]=dt[zH]=dt[qH]=dt[UH]=dt[HH]=dt[VH]=dt[WH]=!1;function nV(r){return Gi(r)&&Hw(r.length)&&!!dt[na(r)]}function iV(r){return function(e){return r(e)}}var Gw=typeof rn=="object"&&rn&&!rn.nodeType&&rn,Ea=Gw&&typeof nn=="object"&&nn&&!nn.nodeType&&nn,aV=Ea&&Ea.exports===Gw,ll=aV&&Lw.process,sV=function(){try{var r=Ea&&Ea.require&&Ea.require("util").types;return r||ll&&ll.binding&&ll.binding("util")}catch{}}();const r0=sV;var n0=r0&&r0.isTypedArray,oV=n0?iV(n0):nV;const Yw=oV;var uV=Object.prototype,lV=uV.hasOwnProperty;function cV(r,e){var t=Jo(r),n=!t&&MH(r),i=!t&&!n&&Sc(r),a=!t&&!n&&!i&&Yw(r),s=t||n||i||a,o=s?DH(r.length,String):[],u=o.length;for(var l in r)(e||lV.call(r,l))&&!(s&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||yH(l,u)))&&o.push(l);return o}function fV(r,e){return function(t){return r(e(t))}}var hV=fV(Object.keys,Object);const dV=hV;var mV=Object.prototype,pV=mV.hasOwnProperty;function gV(r){if(!AH(r))return dV(r);var e=[];for(var t in Object(r))pV.call(r,t)&&t!="constructor"&&e.push(t);return e}function vV(r){return xH(r)?cV(r):gV(r)}var yV=ia(Object,"create");const Xa=yV;function bV(){this.__data__=Xa?Xa(null):{},this.size=0}function xV(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var wV="__lodash_hash_undefined__",AV=Object.prototype,DV=AV.hasOwnProperty;function SV(r){var e=this.__data__;if(Xa){var t=e[r];return t===wV?void 0:t}return DV.call(e,r)?e[r]:void 0}var NV=Object.prototype,CV=NV.hasOwnProperty;function EV(r){var e=this.__data__;return Xa?e[r]!==void 0:CV.call(e,r)}var MV="__lodash_hash_undefined__";function TV(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Xa&&e===void 0?MV:e,this}function ni(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ni.prototype.clear=bV;ni.prototype.delete=xV;ni.prototype.get=SV;ni.prototype.has=EV;ni.prototype.set=TV;function OV(){this.__data__=[],this.size=0}function Mu(r,e){for(var t=r.length;t--;)if(Uw(r[t][0],e))return t;return-1}var BV=Array.prototype,FV=BV.splice;function kV(r){var e=this.__data__,t=Mu(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():FV.call(e,t,1),--this.size,!0}function RV(r){var e=this.__data__,t=Mu(e,r);return t<0?void 0:e[t][1]}function IV(r){return Mu(this.__data__,r)>-1}function PV(r,e){var t=this.__data__,n=Mu(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function pn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}pn.prototype.clear=OV;pn.prototype.delete=kV;pn.prototype.get=RV;pn.prototype.has=IV;pn.prototype.set=PV;var $V=ia(Jr,"Map");const Za=$V;function _V(){this.size=0,this.__data__={hash:new ni,map:new(Za||pn),string:new ni}}function LV(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Tu(r,e){var t=r.__data__;return LV(e)?t[typeof e=="string"?"string":"hash"]:t.map}function zV(r){var e=Tu(this,r).delete(r);return this.size-=e?1:0,e}function qV(r){return Tu(this,r).get(r)}function UV(r){return Tu(this,r).has(r)}function HV(r,e){var t=Tu(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function hi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}hi.prototype.clear=_V;hi.prototype.delete=zV;hi.prototype.get=qV;hi.prototype.has=UV;hi.prototype.set=HV;function VV(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}function WV(){this.__data__=new pn,this.size=0}function GV(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function YV(r){return this.__data__.get(r)}function KV(r){return this.__data__.has(r)}var XV=200;function ZV(r,e){var t=this.__data__;if(t instanceof pn){var n=t.__data__;if(!Za||n.length<XV-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new hi(n)}return t.set(r,e),this.size=t.size,this}function On(r){var e=this.__data__=new pn(r);this.size=e.size}On.prototype.clear=WV;On.prototype.delete=GV;On.prototype.get=YV;On.prototype.has=KV;On.prototype.set=ZV;function JV(r,e){for(var t=-1,n=r==null?0:r.length,i=0,a=[];++t<n;){var s=r[t];e(s,t,r)&&(a[i++]=s)}return a}function jV(){return[]}var QV=Object.prototype,eW=QV.propertyIsEnumerable,i0=Object.getOwnPropertySymbols,tW=i0?function(r){return r==null?[]:(r=Object(r),JV(i0(r),function(e){return eW.call(r,e)}))}:jV;const rW=tW;function nW(r,e,t){var n=e(r);return Jo(r)?n:VV(n,t(r))}function a0(r){return nW(r,vV,rW)}var iW=ia(Jr,"DataView");const Nc=iW;var aW=ia(Jr,"Promise");const Cc=aW;var sW=ia(Jr,"Set");const Ec=sW;var s0="[object Map]",oW="[object Object]",o0="[object Promise]",u0="[object Set]",l0="[object WeakMap]",c0="[object DataView]",uW=fi(Nc),lW=fi(Za),cW=fi(Cc),fW=fi(Ec),hW=fi(Dc),Hn=na;(Nc&&Hn(new Nc(new ArrayBuffer(1)))!=c0||Za&&Hn(new Za)!=s0||Cc&&Hn(Cc.resolve())!=o0||Ec&&Hn(new Ec)!=u0||Dc&&Hn(new Dc)!=l0)&&(Hn=function(r){var e=na(r),t=e==oW?r.constructor:void 0,n=t?fi(t):"";if(n)switch(n){case uW:return c0;case lW:return s0;case cW:return o0;case fW:return u0;case hW:return l0}return e});const f0=Hn;var dW=Jr.Uint8Array;const h0=dW;var mW="__lodash_hash_undefined__";function pW(r){return this.__data__.set(r,mW),this}function gW(r){return this.__data__.has(r)}function jo(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new hi;++e<t;)this.add(r[e])}jo.prototype.add=jo.prototype.push=pW;jo.prototype.has=gW;function vW(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function yW(r,e){return r.has(e)}var bW=1,xW=2;function Kw(r,e,t,n,i,a){var s=t&bW,o=r.length,u=e.length;if(o!=u&&!(s&&u>o))return!1;var l=a.get(r),c=a.get(e);if(l&&c)return l==e&&c==r;var f=-1,h=!0,d=t&xW?new jo:void 0;for(a.set(r,e),a.set(e,r);++f<o;){var m=r[f],p=e[f];if(n)var v=s?n(p,m,f,e,r,a):n(m,p,f,r,e,a);if(v!==void 0){if(v)continue;h=!1;break}if(d){if(!vW(e,function(g,A){if(!yW(d,A)&&(m===g||i(m,g,t,n,a)))return d.push(A)})){h=!1;break}}else if(!(m===p||i(m,p,t,n,a))){h=!1;break}}return a.delete(r),a.delete(e),h}function wW(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function AW(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var DW=1,SW=2,NW="[object Boolean]",CW="[object Date]",EW="[object Error]",MW="[object Map]",TW="[object Number]",OW="[object RegExp]",BW="[object Set]",FW="[object String]",kW="[object Symbol]",RW="[object ArrayBuffer]",IW="[object DataView]",d0=Wi?Wi.prototype:void 0,cl=d0?d0.valueOf:void 0;function PW(r,e,t,n,i,a,s){switch(t){case IW:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case RW:return!(r.byteLength!=e.byteLength||!a(new h0(r),new h0(e)));case NW:case CW:case TW:return Uw(+r,+e);case EW:return r.name==e.name&&r.message==e.message;case OW:case FW:return r==e+"";case MW:var o=wW;case BW:var u=n&DW;if(o||(o=AW),r.size!=e.size&&!u)return!1;var l=s.get(r);if(l)return l==e;n|=SW,s.set(r,e);var c=Kw(o(r),o(e),n,i,a,s);return s.delete(r),c;case kW:if(cl)return cl.call(r)==cl.call(e)}return!1}var $W=1,_W=Object.prototype,LW=_W.hasOwnProperty;function zW(r,e,t,n,i,a){var s=t&$W,o=a0(r),u=o.length,l=a0(e),c=l.length;if(u!=c&&!s)return!1;for(var f=u;f--;){var h=o[f];if(!(s?h in e:LW.call(e,h)))return!1}var d=a.get(r),m=a.get(e);if(d&&m)return d==e&&m==r;var p=!0;a.set(r,e),a.set(e,r);for(var v=s;++f<u;){h=o[f];var g=r[h],A=e[h];if(n)var y=s?n(A,g,h,e,r,a):n(g,A,h,r,e,a);if(!(y===void 0?g===A||i(g,A,t,n,a):y)){p=!1;break}v||(v=h=="constructor")}if(p&&!v){var w=r.constructor,x=e.constructor;w!=x&&"constructor"in r&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(p=!1)}return a.delete(r),a.delete(e),p}var qW=1,m0="[object Arguments]",p0="[object Array]",Xs="[object Object]",UW=Object.prototype,g0=UW.hasOwnProperty;function HW(r,e,t,n,i,a){var s=Jo(r),o=Jo(e),u=s?p0:f0(r),l=o?p0:f0(e);u=u==m0?Xs:u,l=l==m0?Xs:l;var c=u==Xs,f=l==Xs,h=u==l;if(h&&Sc(r)){if(!Sc(e))return!1;s=!0,c=!1}if(h&&!c)return a||(a=new On),s||Yw(r)?Kw(r,e,t,n,i,a):PW(r,e,u,t,n,i,a);if(!(t&qW)){var d=c&&g0.call(r,"__wrapped__"),m=f&&g0.call(e,"__wrapped__");if(d||m){var p=d?r.value():r,v=m?e.value():e;return a||(a=new On),i(p,v,t,n,a)}}return h?(a||(a=new On),zW(r,e,t,n,i,a)):!1}function Xw(r,e,t,n,i){return r===e?!0:r==null||e==null||!Gi(r)&&!Gi(e)?r!==r&&e!==e:HW(r,e,t,n,Xw,i)}var VW=function(){return Jr.Date.now()};const fl=VW;var WW="Expected a function",GW=Math.max,YW=Math.min;function KW(r,e,t){var n,i,a,s,o,u,l=0,c=!1,f=!1,h=!0;if(typeof r!="function")throw new TypeError(WW);e=Jv(e)||0,Ka(t)&&(c=!!t.leading,f="maxWait"in t,a=f?GW(Jv(t.maxWait)||0,e):a,h="trailing"in t?!!t.trailing:h);function d(b){var D=n,N=i;return n=i=void 0,l=b,s=r.apply(N,D),s}function m(b){return l=b,o=setTimeout(g,e),c?d(b):s}function p(b){var D=b-u,N=b-l,C=e-D;return f?YW(C,a-N):C}function v(b){var D=b-u,N=b-l;return u===void 0||D>=e||D<0||f&&N>=a}function g(){var b=fl();if(v(b))return A(b);o=setTimeout(g,p(b))}function A(b){return o=void 0,h&&n?d(b):(n=i=void 0,s)}function y(){o!==void 0&&clearTimeout(o),l=0,n=u=i=o=void 0}function w(){return o===void 0?s:A(fl())}function x(){var b=fl(),D=v(b);if(n=arguments,i=this,u=b,D){if(o===void 0)return m(u);if(f)return clearTimeout(o),o=setTimeout(g,e),d(u)}return o===void 0&&(o=setTimeout(g,e)),s}return x.cancel=y,x.flush=w,x}function XW(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}function Zw(r,e){return Xw(r,e)}const Jw=He.define();function ZW({format:r}){class e extends dn{constructor(a){super(),this.props=a}eq(a){return Zw(this.props,a.props)}toDOM(){const{answer:a,error:s}=this.props,o=a===null||a!==void 0&&!(typeof a=="object"&&a.isResultSet&&a.entries.length===0),u=s?String(s):o?r(a,{precision:14}):void 0,l=document.createElement("span");if(l.setAttribute("aria-hidden","true"),l.className="cm-line cm-mathjs-result"+(s?" cm-mathjs-error":""),u){const c=document.createElement("span");c.className="cm-mathjs-result-inner",c.appendChild(document.createTextNode(u)),c.title="Click to copy the result to the clipboard";const f=document.createElement("button"),h="copy";f.className="copy",f.innerText=h,c.onclick=async()=>{var d;await((d=navigator.clipboard)==null?void 0:d.writeText(u)),f.innerText="copied!",setTimeout(()=>f.innerText=h,1e3)},c.appendChild(f),l.appendChild(c)}return l}ignoreEvent(){return!1}destroy(a){super.destroy(a)}}function t(i,a){const s=a.map(o=>{const u=new e(o);return ke.widget({widget:u,side:1,block:!0}).range(o.line.pos)});return ke.set(s)}function n(i,{fromA:a,toA:s,fromB:o,toB:u,inserted:l}){const c=p=>p.spec.widget.props.line.pos,f=(p,v)=>(p.spec.widget.props.line={...p.spec.widget.props.line,pos:v},v),h=u-s<0,d=l.toString()===`
`,m=JW(i.iter(0)).filter(p=>{const v=c(p);return!(h&&(v>=a&&v<=s||v>=o&&v<=u))}).map(p=>{const v=c(p),g=(d&&!h?v>a:v>=a)?u-s:0,A=v+g;return f(p,A),p.range(A)});return ke.set(m)}return wt.define({create(){return ke.none},update(i,a){if(a.docChanged){let o=i;return a.changes.iterChanges((u,l,c,f,h)=>{o=n(o,{fromA:u,toA:l,fromB:c,toB:f,inserted:h})}),o}const s=a.effects.find(o=>o.is(Jw));return s?t(i,s.value):i},provide:i=>Ne.decorations.from(i)})}function JW(r){const e=[];for(;r.value;)e.push(r.value),r.next();return e}const jW=500,hl="mathjs-codemirror-expressions",v0=`1.2 * (2 + 4.5)

12.7 cm to inch

sin(45 deg) ^ 2

9 / 3 + 2i

det([-1, 2; 3, 1])

simplify('5x + 2x + 240/2.5')
`;function QW(){const r=_w(SU);let e=new Map;function t(h){return h.split(`
`).reduce((d,m,p)=>{const v=XW(d),A={pos:(v?v.pos+1:0)+m.length,index:p,text:m};return[...d,A]},[])}let n=[];function i(){console.time("recalculate");const h=c.state.doc.toString();localStorage[hl]=h;const m=t(h).filter(p=>p.text.trim()!=="").map((p,v)=>{const g=e;e=s(e);const A=n[v];let y,w;try{w=r.parse(p.text),y=!0}catch{w=r.parse(""),y=!1}const x=new Set;if(y&&w.traverse(b=>{b.isSymbolNode&&x.add(b.name)}),A&&y&&A.canBeParsed&&w.equals(A.parsedLine)&&n.scopeAfter&&Zw(new Map([...e].filter(([b])=>x.has(b))),new Map([...n.scopeAfter].filter(([b])=>x.has(b)))))return e=A.scopeAfter,{...A,line:p};{const{answer:b,error:D}=a(p,e);return{line:p,scopeBefore:g,scopeAfter:e,answer:b,error:D,parsedLine:w,canBeParsed:y}}});n=m,c.dispatch({effects:Jw.of(m)}),console.timeEnd("recalculate")}function a(h,d){try{return console.log("evaluate",h),console.log(d),{answer:h.text.trim()!==""?r.evaluate(h.text,d):void 0,error:void 0}}catch(m){return{answer:void 0,error:m}}}function s(h){const d=new Map;return h.forEach((m,p)=>{d.set(p,typeof m=="function"?m.bind({}):r.clone(m))}),d}const o=KW(i,jW),u=et.create({doc:localStorage[hl]!==void 0?localStorage[hl]:v0,extensions:[Kc.define(eE(()=>r,()=>e)),vo.of([PC]),QC(),fS(),mS(),RD(),$N(),DD(),MD(),WS(),sN(lN,{fallback:!0}),gN(),jE(),lM(),ZW({format:r.format}),GD(),XD(),zD(),aE(),vo.of([...rM,...IC,...NE,...GN,...tN,...Ab,...HC]),mE({top:!0}),Ne.updateListener.of(h=>{h.docChanged&&(console.log("docChanged"),o())})]}),l=document.getElementById("editor"),c=new Ne({state:u,parent:l});document.getElementById("reset").addEventListener("click",()=>{c.dispatch({changes:{from:0,to:c.state.doc.length,insert:v0}}),i()}),i()}QW()});export default eG();
